property pValidPartsList, pValidSetIDList, pSelectablePartsList, pSelectableSetIDList, pFigureDataMember

on construct me
  [  0] pusharglist 0 ........................... <[:]>
  [  2] pushproplist ............................ <[:]>
  [  3] setprop 295 ............................. pValidPartsList = [:]
  [  6] pusharglist 0 ........................... <[:]>
  [  8] pushproplist ............................ <[:]>
  [  9] setprop 296 ............................. pValidSetIDList = [:]
  [ 12] pusharglist 0 ........................... <[:]>
  [ 14] pushproplist ............................ <[:]>
  [ 15] setprop 297 ............................. pSelectablePartsList = [:]
  [ 18] pusharglist 0 ........................... <[:]>
  [ 20] pushproplist ............................ <[:]>
  [ 21] setprop 298 ............................. pSelectableSetIDList = [:]
  [ 24] pushcons 0 .............................. <EMPTY>
  [ 26] setprop 299 ............................. pFigureDataMember = EMPTY
  [ 29] pushint8 1 .............................. <1>
  [ 31] pusharglistnoret 1 ...................... <1>
  [ 33] extcall 44 .............................. return 1
  [ 35] ret
end

on initializeValidPartLists me, tPartList
  [  0] getparam 1 .............................. <tPartList>
  [  2] getobjprop 49 ........................... <tPartList.ilk>
  [  4] pushsymb 300 ............................ <#propList>
  [  7] eq ...................................... <tPartList.ilk = #propList>
  [  8] not ..................................... <not (tPartList.ilk = #propList)>
  [  9] jmpifz [ 67] ............................ if not (tPartList.ilk = #propList) then
  [ 12] getparam 0 .............................. <me>
  [ 14] pushcons 1 .............................. <"Can't initialize part list!">
  [ 16] pushsymb 286 ............................ <#initializeValidPartLists>
  [ 19] pusharglistnoret 3 ...................... <me, "Can't initialize part list!", #initializeValidPartLists>
  [ 21] extcall 106 ............................. error(me, "Can't initialize part list!", #initializeValidPartLists)
  [ 23] pushcons 2 .............................. <"DefaultPartList">
  [ 25] pusharglist 1 ........................... <"DefaultPartList">
  [ 27] extcall 127 ............................. <memberExists("DefaultPartList")>
  [ 29] jmpifz [ 55] ............................ if memberExists("DefaultPartList") then / else
  [ 32] pushcons 2 .............................. <"DefaultPartList">
  [ 34] pusharglist 1 ........................... <"DefaultPartList">
  [ 36] extcall 56 .............................. <getmemnum("DefaultPartList")>
  [ 38] pusharglist 1 ........................... <getmemnum("DefaultPartList")>
  [ 40] extcall 99 .............................. <member(getmemnum("DefaultPartList"))>
  [ 42] getobjprop 302 .......................... <member(getmemnum("DefaultPartList")).text>
  [ 45] pusharglist 1 ........................... <member(getmemnum("DefaultPartList")).text>
  [ 47] extcall 301 ............................. <value(member(getmemnum("DefaultPartList")).text)>
  [ 50] setparam 1 .............................. tPartList = value(member(getmemnum("DefaultPartList")).text)
  [ 52] jmp [ 67]
  [ 55] getparam 0 .............................. <me>
  [ 57] pushcons 3 .............................. <"Missing default part list!">
  [ 59] pusharglist 2 ........................... <me, "Missing default part list!">
  [ 61] extcall 106 ............................. <error(me, "Missing default part list!")>
  [ 63] pusharglistnoret 1 ...................... <error(me, "Missing default part list!")>
  [ 65] extcall 44 .............................. return error(me, "Missing default part list!")
  [ 67] getparam 1 .............................. <tPartList>
  [ 69] setprop 295 ............................. pValidPartsList = tPartList
  [ 72] pusharglist 0 ........................... <[:]>
  [ 74] pushproplist ............................ <[:]>
  [ 75] setprop 296 ............................. pValidSetIDList = [:]
  [ 78] pushcons 4 .............................. <"M">
  [ 80] pushcons 5 .............................. <"F">
  [ 82] pusharglist 2 ........................... <["M", "F"]>
  [ 84] pushlist ................................ <["M", "F"]>
  [ 85] peek 0
  [ 87] pusharglist 1
  [ 89] extcall 78
  [ 91] pushint8 1
  [ 93] peek 0
  [ 95] peek 2
  [ 97] lteq
  [ 98] jmpifz [259] ............................ repeat with tsex in ["M", "F"]
  [101] peek 2
  [103] peek 1
  [105] pusharglist 2
  [107] extcall 96
  [109] setlocal 0
  [111] getprop 296 ............................. <pValidSetIDList>
  [114] getlocal 0 .............................. <tsex>
  [116] pusharglist 0 ........................... <[:]>
  [118] pushproplist ............................ <[:]>
  [119] pusharglistnoret 3 ...................... <pValidSetIDList, tsex, [:]>
  [121] objcall 142 ............................. pValidSetIDList[tsex] = [:]
  [123] pushint8 1 .............................. <1>
  [125] setlocal 1
  [127] getlocal 1
  [129] getprop 295 ............................. <pValidPartsList>
  [132] getlocal 0 .............................. <tsex>
  [134] pusharglist 2 ........................... <pValidPartsList, tsex>
  [136] objcall 96 .............................. <pValidPartsList[tsex]>
  [138] getobjprop 78 ........................... <pValidPartsList[tsex].count>
  [140] lteq
  [141] jmpifz [254] ............................ repeat with tPartSet = 1 to pValidPartsList[tsex].count
  [144] getprop 295 ............................. <pValidPartsList>
  [147] getlocal 0 .............................. <tsex>
  [149] pusharglist 2 ........................... <pValidPartsList, tsex>
  [151] objcall 96 .............................. <pValidPartsList[tsex]>
  [153] getlocal 1 .............................. <tPartSet>
  [155] pusharglist 2 ........................... <pValidPartsList[tsex], tPartSet>
  [157] objcall 108 ............................. <pValidPartsList[tsex].getPropAt(tPartSet)>
  [159] setlocal 2 .............................. tProp = pValidPartsList[tsex].getPropAt(tPartSet)
  [161] getprop 295 ............................. <pValidPartsList>
  [164] getlocal 0 .............................. <tsex>
  [166] pusharglist 2 ........................... <pValidPartsList, tsex>
  [168] objcall 96 .............................. <pValidPartsList[tsex]>
  [170] getlocal 2 .............................. <tProp>
  [172] pusharglist 2 ........................... <pValidPartsList[tsex], tProp>
  [174] objcall 96 .............................. <pValidPartsList[tsex][tProp]>
  [176] setlocal 3 .............................. tDesc = pValidPartsList[tsex][tProp]
  [178] pushint8 1 .............................. <1>
  [180] setlocal 4
  [182] getlocal 4
  [184] getlocal 3 .............................. <tDesc>
  [186] getobjprop 78 ........................... <tDesc.count>
  [188] lteq
  [189] jmpifz [245] ............................ repeat with tP = 1 to tDesc.count
  [192] getlocal 3 .............................. <tDesc>
  [194] getlocal 4 .............................. <tP>
  [196] pusharglist 2 ........................... <tDesc, tP>
  [198] objcall 96 .............................. <tDesc[tP]>
  [200] pushcons 6 .............................. <"s">
  [202] pusharglist 2 ........................... <tDesc[tP], "s">
  [204] objcall 96 .............................. <tDesc[tP]["s"]>
  [206] setlocal 5 .............................. tSetID = tDesc[tP]["s"]
  [208] getprop 296 ............................. <pValidSetIDList>
  [211] getlocal 0 .............................. <tsex>
  [213] pusharglist 2 ........................... <pValidSetIDList, tsex>
  [215] objcall 96 .............................. <pValidSetIDList[tsex]>
  [217] getlocal 5 .............................. <tSetID>
  [219] pushsymb 303 ............................ <#part>
  [222] getlocal 2 .............................. <tProp>
  [224] pushsymb 304 ............................ <#location>
  [227] getlocal 4 .............................. <tP>
  [229] pusharglist 4 ........................... <[#part: tProp, #location: tP]>
  [231] pushproplist ............................ <[#part: tProp, #location: tP]>
  [232] pusharglistnoret 3 ...................... <pValidSetIDList[tsex], tSetID, [#part: tProp, #location: tP]>
  [234] objcall 213 ............................. pValidSetIDList[tsex].addProp(tSetID, [#part: tProp, #location: tP])
  [236] pushint8 1
  [238] getlocal 4
  [240] add
  [241] setlocal 4
  [243] endrepeat [182]
  [245] pushint8 1
  [247] getlocal 1
  [249] add
  [250] setlocal 1
  [252] endrepeat [127]
  [254] pushint8 1
  [256] add
  [257] endrepeat [ 93]
  [259] pop 3
  [261] ret
end

on initializeSelectablePartList me, tSetIDList
  [  0] getparam 1 .............................. <tSetIDList>
  [  2] getobjprop 49 ........................... <tSetIDList.ilk>
  [  4] pushsymb 312 ............................ <#list>
  [  7] eq ...................................... <tSetIDList.ilk = #list>
  [  8] not ..................................... <not (tSetIDList.ilk = #list)>
  [  9] jmpifz [ 27] ............................ if not (tSetIDList.ilk = #list) then
  [ 12] getparam 0 .............................. <me>
  [ 14] pushcons 7 .............................. <"Can't initialize selectable partlist">
  [ 16] pushsymb 287 ............................ <#initializeSelectablePartList>
  [ 19] pusharglist 3 ........................... <me, "Can't initialize selectable partlist", #initializeSelectablePartList>
  [ 21] extcall 106 ............................. <error(me, "Can't initialize selectable partlist", #initializeSelectablePartList)>
  [ 23] pusharglistnoret 1 ...................... <error(me, "Can't initialize selectable partlist", #initializeSelectablePartList)>
  [ 25] extcall 44 .............................. return error(me, "Can't initialize selectable partlist", #initializeSelectablePartList)
  [ 27] pusharglist 0 ........................... <[:]>
  [ 29] pushproplist ............................ <[:]>
  [ 30] setlocal 0 .............................. tTempSetIDList = [:]
  [ 32] getlocal 0 .............................. <tTempSetIDList>
  [ 34] pushcons 4 .............................. <"M">
  [ 36] pusharglist 0 ........................... <[]>
  [ 38] pushlist ................................ <[]>
  [ 39] pusharglistnoret 3 ...................... <tTempSetIDList, "M", []>
  [ 41] objcall 142 ............................. tTempSetIDList["M"] = []
  [ 43] getlocal 0 .............................. <tTempSetIDList>
  [ 45] pushcons 5 .............................. <"F">
  [ 47] pusharglist 0 ........................... <[]>
  [ 49] pushlist ................................ <[]>
  [ 50] pusharglistnoret 3 ...................... <tTempSetIDList, "F", []>
  [ 52] objcall 142 ............................. tTempSetIDList["F"] = []
  [ 54] getparam 1 .............................. <tSetIDList>
  [ 56] peek 0
  [ 58] pusharglist 1
  [ 60] extcall 78
  [ 62] pushint8 1
  [ 64] peek 0
  [ 66] peek 2
  [ 68] lteq
  [ 69] jmpifz [142] ............................ repeat with tSetID in tSetIDList
  [ 72] peek 2
  [ 74] peek 1
  [ 76] pusharglist 2
  [ 78] extcall 96
  [ 80] setlocal 1
  [ 82] getprop 296 ............................. <pValidSetIDList>
  [ 85] pushcons 4 .............................. <"M">
  [ 87] pusharglist 2 ........................... <pValidSetIDList, "M">
  [ 89] objcall 96 .............................. <pValidSetIDList["M"]>
  [ 91] getlocal 1 .............................. <tSetID>
  [ 93] pusharglist 2 ........................... <pValidSetIDList["M"], tSetID>
  [ 95] objcall 313 ............................. <pValidSetIDList["M"].findPos(tSetID)>
  [ 98] pusharglist 1 ........................... <pValidSetIDList["M"].findPos(tSetID)>
  [100] extcall 71 .............................. <voidp(pValidSetIDList["M"].findPos(tSetID))>
  [102] not ..................................... <not voidp(pValidSetIDList["M"].findPos(tSetID))>
  [103] jmpifz [123] ............................ if not voidp(pValidSetIDList["M"].findPos(tSetID)) then
  [106] getlocal 0 .............................. <tTempSetIDList>
  [108] pushcons 4 .............................. <"M">
  [110] pusharglist 2 ........................... <tTempSetIDList, "M">
  [112] objcall 96 .............................. <tTempSetIDList["M"]>
  [114] getlocal 1 .............................. <tSetID>
  [116] pusharglistnoret 2 ...................... <tTempSetIDList["M"], tSetID>
  [118] objcall 132 ............................. tTempSetIDList["M"].add(tSetID)
  [120] jmp [137] ............................... next repeat
  [123] getlocal 0 .............................. <tTempSetIDList>
  [125] pushcons 5 .............................. <"F">
  [127] pusharglist 2 ........................... <tTempSetIDList, "F">
  [129] objcall 96 .............................. <tTempSetIDList["F"]>
  [131] getlocal 1 .............................. <tSetID>
  [133] pusharglistnoret 2 ...................... <tTempSetIDList["F"], tSetID>
  [135] objcall 132 ............................. tTempSetIDList["F"].add(tSetID)
  [137] pushint8 1
  [139] add
  [140] endrepeat [ 64]
  [142] pop 3
  [144] pusharglist 0 ........................... <[:]>
  [146] pushproplist ............................ <[:]>
  [147] setprop 297 ............................. pSelectablePartsList = [:]
  [150] pusharglist 0 ........................... <[:]>
  [152] pushproplist ............................ <[:]>
  [153] setprop 298 ............................. pSelectableSetIDList = [:]
  [156] pushcons 4 .............................. <"M">
  [158] pushcons 5 .............................. <"F">
  [160] pusharglist 2 ........................... <["M", "F"]>
  [162] pushlist ................................ <["M", "F"]>
  [163] peek 0
  [165] pusharglist 1
  [167] extcall 78
  [169] pushint8 1
  [171] peek 0
  [173] peek 2
  [175] lteq
  [176] jmpifz [463] ............................ repeat with tsex in ["M", "F"]
  [179] peek 2
  [181] peek 1
  [183] pusharglist 2
  [185] extcall 96
  [187] setlocal 2
  [189] getprop 297 ............................. <pSelectablePartsList>
  [192] getlocal 2 .............................. <tsex>
  [194] pusharglist 0 ........................... <[:]>
  [196] pushproplist ............................ <[:]>
  [197] pusharglistnoret 3 ...................... <pSelectablePartsList, tsex, [:]>
  [199] objcall 142 ............................. pSelectablePartsList[tsex] = [:]
  [201] getprop 298 ............................. <pSelectableSetIDList>
  [204] getlocal 2 .............................. <tsex>
  [206] pusharglist 0 ........................... <[:]>
  [208] pushproplist ............................ <[:]>
  [209] pusharglistnoret 3 ...................... <pSelectableSetIDList, tsex, [:]>
  [211] objcall 142 ............................. pSelectableSetIDList[tsex] = [:]
  [213] getlocal 0 .............................. <tTempSetIDList>
  [215] getlocal 2 .............................. <tsex>
  [217] pusharglist 2 ........................... <tTempSetIDList, tsex>
  [219] objcall 96 .............................. <tTempSetIDList[tsex]>
  [221] setlocal 3 .............................. tSelectableIDs = tTempSetIDList[tsex]
  [223] getlocal 3 .............................. <tSelectableIDs>
  [225] peek 0
  [227] pusharglist 1
  [229] extcall 78
  [231] pushint8 1
  [233] peek 0
  [235] peek 2
  [237] lteq
  [238] jmpifz [455] ............................ repeat with tSetID in tSelectableIDs
  [241] peek 2
  [243] peek 1
  [245] pusharglist 2
  [247] extcall 96
  [249] setlocal 1
  [251] getprop 296 ............................. <pValidSetIDList>
  [254] getlocal 2 .............................. <tsex>
  [256] pusharglist 2 ........................... <pValidSetIDList, tsex>
  [258] objcall 96 .............................. <pValidSetIDList[tsex]>
  [260] getlocal 1 .............................. <tSetID>
  [262] pusharglist 2 ........................... <pValidSetIDList[tsex], tSetID>
  [264] objcall 313 ............................. <pValidSetIDList[tsex].findPos(tSetID)>
  [267] pusharglist 1 ........................... <pValidSetIDList[tsex].findPos(tSetID)>
  [269] extcall 71 .............................. <voidp(pValidSetIDList[tsex].findPos(tSetID))>
  [271] not ..................................... <not voidp(pValidSetIDList[tsex].findPos(tSetID))>
  [272] jmpifz [450] ............................ if not voidp(pValidSetIDList[tsex].findPos(tSetID)) then
  [275] getprop 296 ............................. <pValidSetIDList>
  [278] getlocal 2 .............................. <tsex>
  [280] pusharglist 2 ........................... <pValidSetIDList, tsex>
  [282] objcall 96 .............................. <pValidSetIDList[tsex]>
  [284] getlocal 1 .............................. <tSetID>
  [286] pusharglist 2 ........................... <pValidSetIDList[tsex], tSetID>
  [288] objcall 104 ............................. <pValidSetIDList[tsex].getProp(tSetID)>
  [290] pushsymb 303 ............................ <#part>
  [293] pusharglist 2 ........................... <pValidSetIDList[tsex].getProp(tSetID), #part>
  [295] objcall 96 .............................. <pValidSetIDList[tsex].getProp(tSetID)[#part]>
  [297] setlocal 4 .............................. tPart = pValidSetIDList[tsex].getProp(tSetID)[#part]
  [299] getprop 296 ............................. <pValidSetIDList>
  [302] getlocal 2 .............................. <tsex>
  [304] pusharglist 2 ........................... <pValidSetIDList, tsex>
  [306] objcall 96 .............................. <pValidSetIDList[tsex]>
  [308] getlocal 1 .............................. <tSetID>
  [310] pusharglist 2 ........................... <pValidSetIDList[tsex], tSetID>
  [312] objcall 104 ............................. <pValidSetIDList[tsex].getProp(tSetID)>
  [314] pushsymb 304 ............................ <#location>
  [317] pusharglist 2 ........................... <pValidSetIDList[tsex].getProp(tSetID), #location>
  [319] objcall 96 .............................. <pValidSetIDList[tsex].getProp(tSetID)[#location]>
  [321] setlocal 5 .............................. tlocation = pValidSetIDList[tsex].getProp(tSetID)[#location]
  [323] getprop 295 ............................. <pValidPartsList>
  [326] getlocal 2 .............................. <tsex>
  [328] pusharglist 2 ........................... <pValidPartsList, tsex>
  [330] objcall 96 .............................. <pValidPartsList[tsex]>
  [332] getlocal 4 .............................. <tPart>
  [334] pusharglist 2 ........................... <pValidPartsList[tsex], tPart>
  [336] objcall 96 .............................. <pValidPartsList[tsex][tPart]>
  [338] getlocal 5 .............................. <tlocation>
  [340] pusharglist 2 ........................... <pValidPartsList[tsex][tPart], tlocation>
  [342] objcall 96 .............................. <pValidPartsList[tsex][tPart][tlocation]>
  [344] setlocal 6 .............................. tPropList = pValidPartsList[tsex][tPart][tlocation]
  [346] getprop 297 ............................. <pSelectablePartsList>
  [349] getlocal 2 .............................. <tsex>
  [351] pusharglist 2 ........................... <pSelectablePartsList, tsex>
  [353] objcall 96 .............................. <pSelectablePartsList[tsex]>
  [355] getlocal 4 .............................. <tPart>
  [357] pusharglist 2 ........................... <pSelectablePartsList[tsex], tPart>
  [359] objcall 96 .............................. <pSelectablePartsList[tsex][tPart]>
  [361] pusharglist 1 ........................... <pSelectablePartsList[tsex][tPart]>
  [363] extcall 71 .............................. <voidp(pSelectablePartsList[tsex][tPart])>
  [365] jmpifz [386] ............................ if voidp(pSelectablePartsList[tsex][tPart]) then
  [368] getprop 297 ............................. <pSelectablePartsList>
  [371] getlocal 2 .............................. <tsex>
  [373] pusharglist 2 ........................... <pSelectablePartsList, tsex>
  [375] objcall 96 .............................. <pSelectablePartsList[tsex]>
  [377] getlocal 4 .............................. <tPart>
  [379] pusharglist 0 ........................... <[]>
  [381] pushlist ................................ <[]>
  [382] pusharglistnoret 3 ...................... <pSelectablePartsList[tsex], tPart, []>
  [384] objcall 142 ............................. pSelectablePartsList[tsex][tPart] = []
  [386] getprop 297 ............................. <pSelectablePartsList>
  [389] getlocal 2 .............................. <tsex>
  [391] pusharglist 2 ........................... <pSelectablePartsList, tsex>
  [393] objcall 96 .............................. <pSelectablePartsList[tsex]>
  [395] getlocal 4 .............................. <tPart>
  [397] pusharglist 2 ........................... <pSelectablePartsList[tsex], tPart>
  [399] objcall 96 .............................. <pSelectablePartsList[tsex][tPart]>
  [401] getlocal 6 .............................. <tPropList>
  [403] pusharglistnoret 2 ...................... <pSelectablePartsList[tsex][tPart], tPropList>
  [405] objcall 132 ............................. pSelectablePartsList[tsex][tPart].add(tPropList)
  [407] getprop 298 ............................. <pSelectableSetIDList>
  [410] getlocal 2 .............................. <tsex>
  [412] pusharglist 2 ........................... <pSelectableSetIDList, tsex>
  [414] objcall 96 .............................. <pSelectableSetIDList[tsex]>
  [416] getlocal 1 .............................. <tSetID>
  [418] pushsymb 303 ............................ <#part>
  [421] getlocal 4 .............................. <tPart>
  [423] pushsymb 304 ............................ <#location>
  [426] getprop 297 ............................. <pSelectablePartsList>
  [429] getlocal 2 .............................. <tsex>
  [431] pusharglist 2 ........................... <pSelectablePartsList, tsex>
  [433] objcall 96 .............................. <pSelectablePartsList[tsex]>
  [435] getlocal 4 .............................. <tPart>
  [437] pusharglist 2 ........................... <pSelectablePartsList[tsex], tPart>
  [439] objcall 96 .............................. <pSelectablePartsList[tsex][tPart]>
  [441] getobjprop 78 ........................... <pSelectablePartsList[tsex][tPart].count>
  [443] pusharglist 4 ........................... <[#part: tPart, #location: pSelectablePartsList[tsex][tPart].count]>
  [445] pushproplist ............................ <[#part: tPart, #location: pSelectablePartsList[tsex][tPart].count]>
  [446] pusharglistnoret 3 ...................... <pSelectableSetIDList[tsex], tSetID, [#part: tPart, #location: pSelectablePartsList[tsex][tPart].count]>
  [448] objcall 213 ............................. pSelectableSetIDList[tsex].addProp(tSetID, [#part: tPart, #location: pSelectablePartsList[tsex][tPart].count])
  [450] pushint8 1
  [452] add
  [453] endrepeat [233]
  [455] pop 3
  [457] pushint8 1
  [459] add
  [460] endrepeat [171]
  [463] pop 3
  [465] ret
end

on GenerateFigureDataToServerMode me, tFigure, tsex
  [  0] getparam 0 .............................. <me>
  [  2] getparam 1 .............................. <tFigure>
  [  4] getparam 2 .............................. <tsex>
  [  6] pusharglist 3 ........................... <me, tFigure, tsex>
  [  8] objcall 289 ............................. <me.checkAndFixFigure(tFigure, tsex)>
  [ 11] setparam 1 .............................. tFigure = me.checkAndFixFigure(tFigure, tsex)
  [ 13] pushcons 0 .............................. <EMPTY>
  [ 15] setlocal 0 .............................. tFigureToServer = EMPTY
  [ 17] pushcons 8 .............................. <"hr">
  [ 19] pushcons 9 .............................. <"hd">
  [ 21] pushcons 10 ............................. <"lg">
  [ 23] pushcons 11 ............................. <"sh">
  [ 25] pushcons 12 ............................. <"ch">
  [ 27] pusharglist 5 ........................... <["hr", "hd", "lg", "sh", "ch"]>
  [ 29] pushlist ................................ <["hr", "hd", "lg", "sh", "ch"]>
  [ 30] peek 0
  [ 32] pusharglist 1
  [ 34] extcall 78
  [ 36] pushint8 1
  [ 38] peek 0
  [ 40] peek 2
  [ 42] lteq
  [ 43] jmpifz [255] ............................ repeat with tPart in ["hr", "hd", "lg", "sh", "ch"]
  [ 46] peek 2
  [ 48] peek 1
  [ 50] pusharglist 2
  [ 52] extcall 96
  [ 54] setlocal 1
  [ 56] getparam 1 .............................. <tFigure>
  [ 58] getlocal 1 .............................. <tPart>
  [ 60] pusharglist 2 ........................... <tFigure, tPart>
  [ 62] objcall 96 .............................. <tFigure[tPart]>
  [ 64] pusharglist 1 ........................... <tFigure[tPart]>
  [ 66] extcall 71 .............................. <voidp(tFigure[tPart])>
  [ 68] not ..................................... <not voidp(tFigure[tPart])>
  [ 69] jmpifz [250] ............................ if not voidp(tFigure[tPart]) then
  [ 72] getparam 1 .............................. <tFigure>
  [ 74] getlocal 1 .............................. <tPart>
  [ 76] pusharglist 2 ........................... <tFigure, tPart>
  [ 78] objcall 96 .............................. <tFigure[tPart]>
  [ 80] pushcons 13 ............................. <"setid">
  [ 82] pusharglist 2 ........................... <tFigure[tPart], "setid">
  [ 84] objcall 96 .............................. <tFigure[tPart]["setid"]>
  [ 86] pusharglist 1 ........................... <tFigure[tPart]["setid"]>
  [ 88] extcall 71 .............................. <voidp(tFigure[tPart]["setid"])>
  [ 90] not ..................................... <not voidp(tFigure[tPart]["setid"])>
  [ 91] getparam 1 .............................. <tFigure>
  [ 93] getlocal 1 .............................. <tPart>
  [ 95] pusharglist 2 ........................... <tFigure, tPart>
  [ 97] objcall 96 .............................. <tFigure[tPart]>
  [ 99] pushcons 14 ............................. <"colorid">
  [101] pusharglist 2 ........................... <tFigure[tPart], "colorid">
  [103] objcall 96 .............................. <tFigure[tPart]["colorid"]>
  [105] pusharglist 1 ........................... <tFigure[tPart]["colorid"]>
  [107] extcall 71 .............................. <voidp(tFigure[tPart]["colorid"])>
  [109] not ..................................... <not voidp(tFigure[tPart]["colorid"])>
  [110] and ..................................... <not voidp(tFigure[tPart]["setid"]) and not voidp(tFigure[tPart]["colorid"])>
  [111] jmpifz [250] ............................ if not voidp(tFigure[tPart]["setid"]) and not voidp(tFigure[tPart]["colorid"]) then
  [114] getparam 1 .............................. <tFigure>
  [116] getlocal 1 .............................. <tPart>
  [118] pusharglist 2 ........................... <tFigure, tPart>
  [120] objcall 96 .............................. <tFigure[tPart]>
  [122] pushcons 13 ............................. <"setid">
  [124] pusharglist 2 ........................... <tFigure[tPart], "setid">
  [126] objcall 96 .............................. <tFigure[tPart]["setid"]>
  [128] setlocal 2 .............................. tSetID = tFigure[tPart]["setid"]
  [130] getparam 1 .............................. <tFigure>
  [132] getlocal 1 .............................. <tPart>
  [134] pusharglist 2 ........................... <tFigure, tPart>
  [136] objcall 96 .............................. <tFigure[tPart]>
  [138] pushcons 14 ............................. <"colorid">
  [140] pusharglist 2 ........................... <tFigure[tPart], "colorid">
  [142] objcall 96 .............................. <tFigure[tPart]["colorid"]>
  [144] setlocal 3 .............................. tColorId = tFigure[tPart]["colorid"]
  [146] getlocal 2 .............................. <tSetID>
  [148] pusharglist 1 ........................... <tSetID>
  [150] extcall 107 ............................. <stringp(tSetID)>
  [152] not ..................................... <not stringp(tSetID)>
  [153] jmpifz [164] ............................ if not stringp(tSetID) then
  [156] getlocal 2 .............................. <tSetID>
  [158] pusharglist 1 ........................... <tSetID>
  [160] extcall 147 ............................. <string(tSetID)>
  [162] setlocal 2 .............................. tSetID = string(tSetID)
  [164] getlocal 3 .............................. <tColorId>
  [166] pusharglist 1 ........................... <tColorId>
  [168] extcall 107 ............................. <stringp(tColorId)>
  [170] not ..................................... <not stringp(tColorId)>
  [171] jmpifz [182] ............................ if not stringp(tColorId) then
  [174] getlocal 3 .............................. <tColorId>
  [176] pusharglist 1 ........................... <tColorId>
  [178] extcall 147 ............................. <string(tColorId)>
  [180] setlocal 3 .............................. tColorId = string(tColorId)
  [182] getlocal 2 .............................. <tSetID>
  [184] getobjprop 103 .......................... <tSetID.length>
  [186] pushint8 1 .............................. <1>
  [188] eq ...................................... <tSetID.length = 1>
  [189] jmpifz [202] ............................ if tSetID.length = 1 then / else
  [192] pushcons 15 ............................. <"00">
  [194] getlocal 2 .............................. <tSetID>
  [196] joinstr ................................. <"00" & tSetID>
  [197] setlocal 2 .............................. tSetID = "00" & tSetID
  [199] jmp [219]
  [202] getlocal 2 .............................. <tSetID>
  [204] getobjprop 103 .......................... <tSetID.length>
  [206] pushint8 2 .............................. <2>
  [208] eq ...................................... <tSetID.length = 2>
  [209] jmpifz [219] ............................ if tSetID.length = 2 then
  [212] pushcons 16 ............................. <"0">
  [214] getlocal 2 .............................. <tSetID>
  [216] joinstr ................................. <"0" & tSetID>
  [217] setlocal 2 .............................. tSetID = "0" & tSetID
  [219] getlocal 3 .............................. <tColorId>
  [221] pushsymb 102 ............................ <#char>
  [223] pusharglist 2 ........................... <tColorId, #char>
  [225] objcall 78 .............................. <tColorId.char.count>
  [227] pushint8 1 .............................. <1>
  [229] eq ...................................... <tColorId.char.count = 1>
  [230] jmpifz [240] ............................ if tColorId.char.count = 1 then
  [233] pushcons 16 ............................. <"0">
  [235] getlocal 3 .............................. <tColorId>
  [237] joinstr ................................. <"0" & tColorId>
  [238] setlocal 3 .............................. tColorId = "0" & tColorId
  [240] getlocal 0 .............................. <tFigureToServer>
  [242] getlocal 2 .............................. <tSetID>
  [244] joinstr ................................. <tFigureToServer & tSetID>
  [245] getlocal 3 .............................. <tColorId>
  [247] joinstr ................................. <tFigureToServer & tSetID & tColorId>
  [248] setlocal 0 .............................. tFigureToServer = tFigureToServer & tSetID & tColorId
  [250] pushint8 1
  [252] add
  [253] endrepeat [ 38]
  [255] pop 3
  [257] pushcons 17 ............................. <"figuretoServer">
  [259] getlocal 0 .............................. <tFigureToServer>
  [261] pushcons 18 ............................. <"parsedfigure">
  [263] getparam 1 .............................. <tFigure>
  [265] pusharglist 4 ........................... <["figuretoServer": tFigureToServer, "parsedfigure": tFigure]>
  [267] pushproplist ............................ <["figuretoServer": tFigureToServer, "parsedfigure": tFigure]>
  [268] pusharglistnoret 1 ...................... <["figuretoServer": tFigureToServer, "parsedfigure": tFigure]>
  [270] extcall 44 .............................. return ["figuretoServer": tFigureToServer, "parsedfigure": tFigure]
  [272] ret
end

on checkAndFixFigure me, tFigure, tsex
  [  0] getparam 1 .............................. <tFigure>
  [  2] getobjprop 49 ........................... <tFigure.ilk>
  [  4] pushsymb 300 ............................ <#propList>
  [  7] nteq .................................... <tFigure.ilk <> #propList>
  [  8] jmpifz [ 16] ............................ if tFigure.ilk <> #propList then
  [ 11] pusharglist 0 ........................... <[:]>
  [ 13] pushproplist ............................ <[:]>
  [ 14] setparam 1 .............................. tFigure = [:]
  [ 16] pushcons 8 .............................. <"hr">
  [ 18] pushcons 9 .............................. <"hd">
  [ 20] pushcons 19 ............................. <"ey">
  [ 22] pushcons 20 ............................. <"fc">
  [ 24] pushcons 21 ............................. <"bd">
  [ 26] pushcons 22 ............................. <"lh">
  [ 28] pushcons 23 ............................. <"rh">
  [ 30] pushcons 12 ............................. <"ch">
  [ 32] pushcons 24 ............................. <"ls">
  [ 34] pushcons 25 ............................. <"rs">
  [ 36] pushcons 10 ............................. <"lg">
  [ 38] pushcons 11 ............................. <"sh">
  [ 40] pusharglist 12 .......................... <["hr", "hd", "ey", "fc", "bd", "lh", "rh", "ch", "ls", "rs", "lg", "sh"]>
  [ 42] pushlist ................................ <["hr", "hd", "ey", "fc", "bd", "lh", "rh", "ch", "ls", "rs", "lg", "sh"]>
  [ 43] peek 0
  [ 45] pusharglist 1
  [ 47] extcall 78
  [ 49] pushint8 1
  [ 51] peek 0
  [ 53] peek 2
  [ 55] lteq
  [ 56] jmpifz [609] ............................ repeat with tPart in ["hr", "hd", "ey", "fc", "bd", "lh", "rh", "ch", "ls", "rs", "lg", "sh"]
  [ 59] peek 2
  [ 61] peek 1
  [ 63] pusharglist 2
  [ 65] extcall 96
  [ 67] setlocal 0
  [ 69] getlocal 0 .............................. <tPart>
  [ 71] peek 0 .................................. case tPart of
  [ 73] pushcons 24 ............................. <"ls">
  [ 75] nteq
  [ 76] jmpifz [ 95] ............................ (case) "ls", ...
  [ 79] peek 0
  [ 81] pushcons 12 ............................. <"ch">
  [ 83] nteq
  [ 84] jmpifz [ 95] ............................ (case) ..., "ch", ...
  [ 87] peek 0
  [ 89] pushcons 25 ............................. <"rs">
  [ 91] eq
  [ 92] jmpifz [102] ............................ (case) ..., "rs":
  [ 95] pushcons 12 ............................. <"ch">
  [ 97] setlocal 1 .............................. tMainPart = "ch"
  [ 99] jmp [161]
  [102] peek 0
  [104] pushcons 9 .............................. <"hd">
  [106] nteq
  [107] jmpifz [150] ............................ (case) "hd", ...
  [110] peek 0
  [112] pushcons 19 ............................. <"ey">
  [114] nteq
  [115] jmpifz [150] ............................ (case) ..., "ey", ...
  [118] peek 0
  [120] pushcons 20 ............................. <"fc">
  [122] nteq
  [123] jmpifz [150] ............................ (case) ..., "fc", ...
  [126] peek 0
  [128] pushcons 21 ............................. <"bd">
  [130] nteq
  [131] jmpifz [150] ............................ (case) ..., "bd", ...
  [134] peek 0
  [136] pushcons 22 ............................. <"lh">
  [138] nteq
  [139] jmpifz [150] ............................ (case) ..., "lh", ...
  [142] peek 0
  [144] pushcons 23 ............................. <"rh">
  [146] eq
  [147] jmpifz [157] ............................ (case) ..., "rh":
  [150] pushcons 9 .............................. <"hd">
  [152] setlocal 1 .............................. tMainPart = "hd"
  [154] jmp [161] ............................... (case) otherwise:
  [157] getlocal 0 .............................. <tPart>
  [159] setlocal 1 .............................. tMainPart = tPart
  [161] pop 1 ................................... end case
  [163] getprop 295 ............................. <pValidPartsList>
  [166] getparam 2 .............................. <tsex>
  [168] pusharglist 2 ........................... <pValidPartsList, tsex>
  [170] objcall 96 .............................. <pValidPartsList[tsex]>
  [172] getlocal 1 .............................. <tMainPart>
  [174] pusharglist 2 ........................... <pValidPartsList[tsex], tMainPart>
  [176] objcall 96 .............................. <pValidPartsList[tsex][tMainPart]>
  [178] pushint8 1 .............................. <1>
  [180] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart], 1>
  [182] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][1]>
  [184] pushcons 26 ............................. <"p">
  [186] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart][1], "p">
  [188] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][1]["p"]>
  [190] setlocal 2 .............................. tChageParts = pValidPartsList[tsex][tMainPart][1]["p"]
  [192] getprop 295 ............................. <pValidPartsList>
  [195] getparam 2 .............................. <tsex>
  [197] pusharglist 2 ........................... <pValidPartsList, tsex>
  [199] objcall 96 .............................. <pValidPartsList[tsex]>
  [201] getlocal 1 .............................. <tMainPart>
  [203] pusharglist 2 ........................... <pValidPartsList[tsex], tMainPart>
  [205] objcall 96 .............................. <pValidPartsList[tsex][tMainPart]>
  [207] pushint8 1 .............................. <1>
  [209] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart], 1>
  [211] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][1]>
  [213] pushcons 26 ............................. <"p">
  [215] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart][1], "p">
  [217] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][1]["p"]>
  [219] getlocal 0 .............................. <tPart>
  [221] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart][1]["p"], tPart>
  [223] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][1]["p"][tPart]>
  [225] setlocal 3 .............................. tmodel = pValidPartsList[tsex][tMainPart][1]["p"][tPart]
  [227] getprop 295 ............................. <pValidPartsList>
  [230] getparam 2 .............................. <tsex>
  [232] pusharglist 2 ........................... <pValidPartsList, tsex>
  [234] objcall 96 .............................. <pValidPartsList[tsex]>
  [236] getlocal 1 .............................. <tMainPart>
  [238] pusharglist 2 ........................... <pValidPartsList[tsex], tMainPart>
  [240] objcall 96 .............................. <pValidPartsList[tsex][tMainPart]>
  [242] pushint8 1 .............................. <1>
  [244] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart], 1>
  [246] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][1]>
  [248] pushcons 27 ............................. <"c">
  [250] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart][1], "c">
  [252] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][1]["c"]>
  [254] pushint8 1 .............................. <1>
  [256] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart][1]["c"], 1>
  [258] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][1]["c"][1]>
  [260] setlocal 4 .............................. tColorList = pValidPartsList[tsex][tMainPart][1]["c"][1]
  [262] getprop 295 ............................. <pValidPartsList>
  [265] getparam 2 .............................. <tsex>
  [267] pusharglist 2 ........................... <pValidPartsList, tsex>
  [269] objcall 96 .............................. <pValidPartsList[tsex]>
  [271] getlocal 1 .............................. <tMainPart>
  [273] pusharglist 2 ........................... <pValidPartsList[tsex], tMainPart>
  [275] objcall 96 .............................. <pValidPartsList[tsex][tMainPart]>
  [277] pushint8 1 .............................. <1>
  [279] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart], 1>
  [281] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][1]>
  [283] pushcons 6 .............................. <"s">
  [285] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart][1], "s">
  [287] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][1]["s"]>
  [289] setlocal 5 .............................. tSetID = pValidPartsList[tsex][tMainPart][1]["s"]
  [291] getlocal 4 .............................. <tColorList>
  [293] pusharglist 1 ........................... <tColorList>
  [295] extcall 66 .............................. <listp(tColorList)>
  [297] not ..................................... <not listp(tColorList)>
  [298] jmpifz [310] ............................ if not listp(tColorList) then
  [301] getlocal 4 .............................. <tColorList>
  [303] pusharglist 1 ........................... <tColorList>
  [305] extcall 312 ............................. <list(tColorList)>
  [308] setlocal 4 .............................. tColorList = list(tColorList)
  [310] getlocal 2 .............................. <tChageParts>
  [312] getlocal 0 .............................. <tPart>
  [314] pusharglist 2 ........................... <tChageParts, tPart>
  [316] objcall 313 ............................. <tChageParts.findPos(tPart)>
  [319] pusharglist 1 ........................... <tChageParts.findPos(tPart)>
  [321] extcall 71 .............................. <voidp(tChageParts.findPos(tPart))>
  [323] not ..................................... <not voidp(tChageParts.findPos(tPart))>
  [324] jmpifz [341] ............................ if not voidp(tChageParts.findPos(tPart)) then / else
  [327] getlocal 2 .............................. <tChageParts>
  [329] getlocal 0 .............................. <tPart>
  [331] pusharglist 2 ........................... <tChageParts, tPart>
  [333] objcall 313 ............................. <tChageParts.findPos(tPart)>
  [336] setlocal 6 .............................. tColorId = tChageParts.findPos(tPart)
  [338] jmp [345]
  [341] pushint8 1 .............................. <1>
  [343] setlocal 6 .............................. tColorId = 1
  [345] getlocal 4 .............................. <tColorList>
  [347] getobjprop 78 ........................... <tColorList.count>
  [349] getlocal 6 .............................. <tColorId>
  [351] gteq .................................... <tColorList.count >= tColorId>
  [352] jmpifz [373] ............................ if tColorList.count >= tColorId then / else
  [355] getlocal 4 .............................. <tColorList>
  [357] getlocal 6 .............................. <tColorId>
  [359] pusharglist 2 ........................... <tColorList, tColorId>
  [361] objcall 96 .............................. <tColorList[tColorId]>
  [363] pusharglist 1 ........................... <tColorList[tColorId]>
  [365] extcall 322 ............................. <rgb(tColorList[tColorId])>
  [368] setlocal 7 .............................. tColor = rgb(tColorList[tColorId])
  [370] jmp [388]
  [373] getlocal 4 .............................. <tColorList>
  [375] pushint8 1 .............................. <1>
  [377] pusharglist 2 ........................... <tColorList, 1>
  [379] objcall 96 .............................. <tColorList[1]>
  [381] pusharglist 1 ........................... <tColorList[1]>
  [383] extcall 322 ............................. <rgb(tColorList[1])>
  [386] setlocal 7 .............................. tColor = rgb(tColorList[1])
  [388] getlocal 3 .............................. <tmodel>
  [390] getobjprop 103 .......................... <tmodel.length>
  [392] pushint8 1 .............................. <1>
  [394] eq ...................................... <tmodel.length = 1>
  [395] jmpifz [408] ............................ if tmodel.length = 1 then / else
  [398] pushcons 15 ............................. <"00">
  [400] getlocal 3 .............................. <tmodel>
  [402] joinstr ................................. <"00" & tmodel>
  [403] setlocal 3 .............................. tmodel = "00" & tmodel
  [405] jmp [425]
  [408] getlocal 3 .............................. <tmodel>
  [410] getobjprop 103 .......................... <tmodel.length>
  [412] pushint8 2 .............................. <2>
  [414] eq ...................................... <tmodel.length = 2>
  [415] jmpifz [425] ............................ if tmodel.length = 2 then
  [418] pushcons 16 ............................. <"0">
  [420] getlocal 3 .............................. <tmodel>
  [422] joinstr ................................. <"0" & tmodel>
  [423] setlocal 3 .............................. tmodel = "0" & tmodel
  [425] getparam 1 .............................. <tFigure>
  [427] getlocal 0 .............................. <tPart>
  [429] pusharglist 2 ........................... <tFigure, tPart>
  [431] objcall 96 .............................. <tFigure[tPart]>
  [433] pusharglist 1 ........................... <tFigure[tPart]>
  [435] extcall 71 .............................. <voidp(tFigure[tPart])>
  [437] jmpifz [470] ............................ if voidp(tFigure[tPart]) then
  [440] getparam 1 .............................. <tFigure>
  [442] getlocal 0 .............................. <tPart>
  [444] pushcons 28 ............................. <"model">
  [446] getlocal 3 .............................. <tmodel>
  [448] pushcons 29 ............................. <"color">
  [450] getlocal 7 .............................. <tColor>
  [452] pushcons 13 ............................. <"setid">
  [454] getlocal 5 .............................. <tSetID>
  [456] pushcons 14 ............................. <"colorid">
  [458] pushint8 1 .............................. <1>
  [460] pusharglist 8 ........................... <["model": tmodel, "color": tColor, "setid": tSetID, "colorid": 1]>
  [462] pushproplist ............................ <["model": tmodel, "color": tColor, "setid": tSetID, "colorid": 1]>
  [463] pusharglistnoret 3 ...................... <tFigure, tPart, ["model": tmodel, "color": tColor, "setid": tSetID, "colorid": 1]>
  [465] objcall 142 ............................. tFigure[tPart] = ["model": tmodel, "color": tColor, "setid": tSetID, "colorid": 1]
  [467] jmp [603] ............................... next repeat
  [470] getparam 1 .............................. <tFigure>
  [472] getlocal 0 .............................. <tPart>
  [474] pusharglist 2 ........................... <tFigure, tPart>
  [476] objcall 96 .............................. <tFigure[tPart]>
  [478] getobjprop 49 ........................... <tFigure[tPart].ilk>
  [480] pushsymb 300 ............................ <#propList>
  [483] nteq .................................... <tFigure[tPart].ilk <> #propList>
  [484] jmpifz [498] ............................ if tFigure[tPart].ilk <> #propList then
  [487] getparam 1 .............................. <tFigure>
  [489] getlocal 0 .............................. <tPart>
  [491] pusharglist 0 ........................... <[:]>
  [493] pushproplist ............................ <[:]>
  [494] pusharglistnoret 3 ...................... <tFigure, tPart, [:]>
  [496] objcall 142 ............................. tFigure[tPart] = [:]
  [498] getparam 1 .............................. <tFigure>
  [500] getlocal 0 .............................. <tPart>
  [502] pusharglist 2 ........................... <tFigure, tPart>
  [504] objcall 96 .............................. <tFigure[tPart]>
  [506] pushcons 28 ............................. <"model">
  [508] pusharglist 2 ........................... <tFigure[tPart], "model">
  [510] objcall 96 .............................. <tFigure[tPart]["model"]>
  [512] pusharglist 1 ........................... <tFigure[tPart]["model"]>
  [514] extcall 71 .............................. <voidp(tFigure[tPart]["model"])>
  [516] getparam 1 .............................. <tFigure>
  [518] getlocal 0 .............................. <tPart>
  [520] pusharglist 2 ........................... <tFigure, tPart>
  [522] objcall 96 .............................. <tFigure[tPart]>
  [524] pushcons 29 ............................. <"color">
  [526] pusharglist 2 ........................... <tFigure[tPart], "color">
  [528] objcall 96 .............................. <tFigure[tPart]["color"]>
  [530] pusharglist 1 ........................... <tFigure[tPart]["color"]>
  [532] extcall 71 .............................. <voidp(tFigure[tPart]["color"])>
  [534] or ...................................... <voidp(tFigure[tPart]["model"]) or voidp(tFigure[tPart]["color"])>
  [535] getparam 1 .............................. <tFigure>
  [537] getlocal 0 .............................. <tPart>
  [539] pusharglist 2 ........................... <tFigure, tPart>
  [541] objcall 96 .............................. <tFigure[tPart]>
  [543] pushcons 13 ............................. <"setid">
  [545] pusharglist 2 ........................... <tFigure[tPart], "setid">
  [547] objcall 96 .............................. <tFigure[tPart]["setid"]>
  [549] pusharglist 1 ........................... <tFigure[tPart]["setid"]>
  [551] extcall 71 .............................. <voidp(tFigure[tPart]["setid"])>
  [553] or ...................................... <voidp(tFigure[tPart]["model"]) or voidp(tFigure[tPart]["color"]) or voidp(tFigure[tPart]["setid"])>
  [554] getparam 1 .............................. <tFigure>
  [556] getlocal 0 .............................. <tPart>
  [558] pusharglist 2 ........................... <tFigure, tPart>
  [560] objcall 96 .............................. <tFigure[tPart]>
  [562] pushcons 14 ............................. <"colorid">
  [564] pusharglist 2 ........................... <tFigure[tPart], "colorid">
  [566] objcall 96 .............................. <tFigure[tPart]["colorid"]>
  [568] pusharglist 1 ........................... <tFigure[tPart]["colorid"]>
  [570] extcall 71 .............................. <voidp(tFigure[tPart]["colorid"])>
  [572] or ...................................... <voidp(tFigure[tPart]["model"]) or voidp(tFigure[tPart]["color"]) or voidp(tFigure[tPart]["setid"]) or voidp(tFigure[tPart]["colorid"])>
  [573] jmpifz [603] ............................ if voidp(tFigure[tPart]["model"]) or voidp(tFigure[tPart]["color"]) or voidp(tFigure[tPart]["setid"]) or voidp(tFigure[tPart]["colorid"]) then
  [576] getparam 1 .............................. <tFigure>
  [578] getlocal 0 .............................. <tPart>
  [580] pushcons 28 ............................. <"model">
  [582] getlocal 3 .............................. <tmodel>
  [584] pushcons 29 ............................. <"color">
  [586] getlocal 7 .............................. <tColor>
  [588] pushcons 13 ............................. <"setid">
  [590] getlocal 5 .............................. <tSetID>
  [592] pushcons 14 ............................. <"colorid">
  [594] pushint8 1 .............................. <1>
  [596] pusharglist 8 ........................... <["model": tmodel, "color": tColor, "setid": tSetID, "colorid": 1]>
  [598] pushproplist ............................ <["model": tmodel, "color": tColor, "setid": tSetID, "colorid": 1]>
  [599] pusharglistnoret 3 ...................... <tFigure, tPart, ["model": tmodel, "color": tColor, "setid": tSetID, "colorid": 1]>
  [601] objcall 142 ............................. tFigure[tPart] = ["model": tmodel, "color": tColor, "setid": tSetID, "colorid": 1]
  [603] pushint8 1
  [605] add
  [606] endrepeat [ 51]
  [609] pop 3
  [611] getparam 1 .............................. <tFigure>
  [613] pusharglistnoret 1 ...................... <tFigure>
  [615] extcall 44 .............................. return tFigure
  [617] ret
end

on generateFigureDataToOldServerMode me, tFigure, tsex, tCheckValidParts
  [  0] getparam 2 .............................. <tsex>
  [  2] pusharglist 1 ........................... <tsex>
  [  4] extcall 71 .............................. <voidp(tsex)>
  [  6] jmpifz [ 13] ............................ if voidp(tsex) then
  [  9] pushcons 4 .............................. <"M">
  [ 11] setparam 2 .............................. tsex = "M"
  [ 13] getparam 2 .............................. <tsex>
  [ 15] pushcons 30 ............................. <"f">
  [ 17] containsstr ............................. <tsex contains "f">
  [ 18] getparam 2 .............................. <tsex>
  [ 20] pushcons 5 .............................. <"F">
  [ 22] containsstr ............................. <tsex contains "F">
  [ 23] or ...................................... <(tsex contains "f") or (tsex contains "F")>
  [ 24] jmpifz [ 34] ............................ if (tsex contains "f") or (tsex contains "F") then / else
  [ 27] pushcons 5 .............................. <"F">
  [ 29] setparam 2 .............................. tsex = "F"
  [ 31] jmp [ 38]
  [ 34] pushcons 4 .............................. <"M">
  [ 36] setparam 2 .............................. tsex = "M"
  [ 38] getparam 3 .............................. <tCheckValidParts>
  [ 40] pusharglist 1 ........................... <tCheckValidParts>
  [ 42] extcall 71 .............................. <voidp(tCheckValidParts)>
  [ 44] jmpifz [ 50] ............................ if voidp(tCheckValidParts) then
  [ 47] pushzero ................................ <0>
  [ 48] setparam 3 .............................. tCheckValidParts = 0
  [ 50] getparam 3 .............................. <tCheckValidParts>
  [ 52] jmpifz [ 90] ............................ if tCheckValidParts then / else
  [ 55] getparam 0 .............................. <me>
  [ 57] getparam 1 .............................. <tFigure>
  [ 59] getparam 2 .............................. <tsex>
  [ 61] pusharglist 3 ........................... <me, tFigure, tsex>
  [ 63] objcall 288 ............................. <me.GenerateFigureDataToServerMode(tFigure, tsex)>
  [ 66] setlocal 0 .............................. tNewFigure = me.GenerateFigureDataToServerMode(tFigure, tsex)
  [ 68] getparam 0 .............................. <me>
  [ 70] getlocal 0 .............................. <tNewFigure>
  [ 72] pushcons 18 ............................. <"parsedfigure">
  [ 74] pusharglist 2 ........................... <tNewFigure, "parsedfigure">
  [ 76] objcall 96 .............................. <tNewFigure["parsedfigure"]>
  [ 78] getparam 2 .............................. <tsex>
  [ 80] pusharglist 3 ........................... <me, tNewFigure["parsedfigure"], tsex>
  [ 82] objcall 328 ............................. <me.ConvertServerModeFigureData(tNewFigure["parsedfigure"], tsex)>
  [ 85] setlocal 1 .............................. tFigureData = me.ConvertServerModeFigureData(tNewFigure["parsedfigure"], tsex)
  [ 87] jmp [ 94]
  [ 90] getparam 1 .............................. <tFigure>
  [ 92] setlocal 1 .............................. tFigureData = tFigure
  [ 94] getmovieprop 197 ........................ <the itemDelimiter>
  [ 96] setlocal 2 .............................. tTemp = the itemDelimiter
  [ 98] pushcons 31 ............................. <",">
  [100] setmovieprop 197 ........................ the itemDelimiter = ","
  [102] pushcons 32 ............................. <"sd=001/0">
  [104] setlocal 0 .............................. tNewFigure = "sd=001/0"
  [106] getlocal 1 .............................. <tFigureData>
  [108] pusharglist 1 ........................... <tFigureData>
  [110] extcall 66 .............................. <listp(tFigureData)>
  [112] jmpifz [450] ............................ if listp(tFigureData) then / else
  [115] pushint8 1 .............................. <1>
  [117] setlocal 3
  [119] getlocal 3
  [121] getlocal 1 .............................. <tFigureData>
  [123] getobjprop 78 ........................... <tFigureData.count>
  [125] lteq
  [126] jmpifz [447] ............................ repeat with f = 1 to tFigureData.count
  [129] getlocal 1 .............................. <tFigureData>
  [131] getlocal 3 .............................. <f>
  [133] pusharglist 2 ........................... <tFigureData, f>
  [135] objcall 108 ............................. <tFigureData.getPropAt(f)>
  [137] setlocal 4 .............................. tPart = tFigureData.getPropAt(f)
  [139] getlocal 1 .............................. <tFigureData>
  [141] getlocal 4 .............................. <tPart>
  [143] pusharglist 2 ........................... <tFigureData, tPart>
  [145] objcall 96 .............................. <tFigureData[tPart]>
  [147] pushcons 28 ............................. <"model">
  [149] pusharglist 2 ........................... <tFigureData[tPart], "model">
  [151] objcall 96 .............................. <tFigureData[tPart]["model"]>
  [153] setlocal 5 .............................. tmodel = tFigureData[tPart]["model"]
  [155] getlocal 1 .............................. <tFigureData>
  [157] getlocal 4 .............................. <tPart>
  [159] pusharglist 2 ........................... <tFigureData, tPart>
  [161] objcall 96 .............................. <tFigureData[tPart]>
  [163] pushcons 29 ............................. <"color">
  [165] pusharglist 2 ........................... <tFigureData[tPart], "color">
  [167] objcall 96 .............................. <tFigureData[tPart]["color"]>
  [169] setlocal 6 .............................. tColor = tFigureData[tPart]["color"]
  [171] getlocal 4 .............................. <tPart>
  [173] pushcons 33 ............................. <"sd">
  [175] nteq .................................... <tPart <> "sd">
  [176] jmpifz [437] ............................ if tPart <> "sd" then
  [179] getlocal 5 .............................. <tmodel>
  [181] getobjprop 103 .......................... <tmodel.length>
  [183] pushint8 1 .............................. <1>
  [185] eq ...................................... <tmodel.length = 1>
  [186] jmpifz [199] ............................ if tmodel.length = 1 then / else
  [189] pushcons 15 ............................. <"00">
  [191] getlocal 5 .............................. <tmodel>
  [193] joinstr ................................. <"00" & tmodel>
  [194] setlocal 5 .............................. tmodel = "00" & tmodel
  [196] jmp [216]
  [199] getlocal 5 .............................. <tmodel>
  [201] getobjprop 103 .......................... <tmodel.length>
  [203] pushint8 2 .............................. <2>
  [205] eq ...................................... <tmodel.length = 2>
  [206] jmpifz [216] ............................ if tmodel.length = 2 then
  [209] pushcons 16 ............................. <"0">
  [211] getlocal 5 .............................. <tmodel>
  [213] joinstr ................................. <"0" & tmodel>
  [214] setlocal 5 .............................. tmodel = "0" & tmodel
  [216] getlocal 6 .............................. <tColor>
  [218] pushcons 34 ............................. <"#EEEEEE">
  [220] pusharglist 1 ........................... <"#EEEEEE">
  [222] extcall 322 ............................. <rgb("#EEEEEE")>
  [225] eq ...................................... <tColor = rgb("#EEEEEE")>
  [226] jmpifz [245] ............................ if tColor = rgb("#EEEEEE") then
  [229] pushint16 255 ........................... <255>
  [232] pushint16 255 ........................... <255>
  [235] pushint16 255 ........................... <255>
  [238] pusharglist 3 ........................... <255, 255, 255>
  [240] extcall 322 ............................. <rgb(255, 255, 255)>
  [243] setlocal 6 .............................. tColor = rgb(255, 255, 255)
  [245] getlocal 6 .............................. <tColor>
  [247] pusharglist 1 ........................... <tColor>
  [249] extcall 147 ............................. <string(tColor)>
  [251] setlocal 6 .............................. tColor = string(tColor)
  [253] getlocal 6 .............................. <tColor>
  [255] pushsymb 198 ............................ <#item>
  [257] pusharglist 2 ........................... <tColor, #item>
  [259] objcall 78 .............................. <tColor.item.count>
  [261] pushint8 3 .............................. <3>
  [263] lt ...................................... <tColor.item.count < 3>
  [264] jmpifz [277] ............................ if tColor.item.count < 3 then / else
  [267] pushcons 35 ............................. <"VIKAA SILMISS\xC4">
  [269] pusharglistnoret 1 ...................... <"VIKAA SILMISS\xC4">
  [271] extcall 329 ............................. put "VIKAA SILMISS\xC4"
  [274] jmp [403]
  [277] getlocal 6 .............................. <tColor>
  [279] pushsymb 198 ............................ <#item>
  [281] pushint8 1 .............................. <1>
  [283] pusharglist 3 ........................... <tColor, #item, 1>
  [285] objcall 226 ............................. <tColor.item[1]>
  [287] pushsymb 102 ............................ <#char>
  [289] pushint8 5 .............................. <5>
  [291] getlocal 6 .............................. <tColor>
  [293] pushsymb 198 ............................ <#item>
  [295] pushint8 1 .............................. <1>
  [297] pusharglist 3 ........................... <tColor, #item, 1>
  [299] objcall 104 ............................. <tColor.item[1]>
  [301] pusharglist 1 ........................... <tColor.item[1]>
  [303] extcall 103 ............................. <length(tColor.item[1])>
  [305] pusharglist 4 ........................... <tColor.item[1], #char, 5, length(tColor.item[1])>
  [307] objcall 104 ............................. <tColor.item[1].char[5..length(tColor.item[1])]>
  [309] pusharglist 1 ........................... <tColor.item[1].char[5..length(tColor.item[1])]>
  [311] extcall 301 ............................. <value(tColor.item[1].char[5..length(tColor.item[1])])>
  [314] setlocal 7 .............................. tR = value(tColor.item[1].char[5..length(tColor.item[1])])
  [316] getlocal 6 .............................. <tColor>
  [318] pushsymb 198 ............................ <#item>
  [320] pushint8 2 .............................. <2>
  [322] pusharglist 3 ........................... <tColor, #item, 2>
  [324] objcall 104 ............................. <tColor.item[2]>
  [326] pusharglist 1 ........................... <tColor.item[2]>
  [328] extcall 301 ............................. <value(tColor.item[2])>
  [331] setlocal 8 .............................. tG = value(tColor.item[2])
  [333] getlocal 6 .............................. <tColor>
  [335] pushsymb 198 ............................ <#item>
  [337] pushint8 3 .............................. <3>
  [339] pusharglist 3 ........................... <tColor, #item, 3>
  [341] objcall 226 ............................. <tColor.item[3]>
  [343] pushsymb 102 ............................ <#char>
  [345] pushint8 1 .............................. <1>
  [347] getlocal 6 .............................. <tColor>
  [349] pushsymb 198 ............................ <#item>
  [351] pushint8 3 .............................. <3>
  [353] pusharglist 3 ........................... <tColor, #item, 3>
  [355] objcall 104 ............................. <tColor.item[3]>
  [357] pusharglist 1 ........................... <tColor.item[3]>
  [359] extcall 103 ............................. <length(tColor.item[3])>
  [361] pushint8 1 .............................. <1>
  [363] sub ..................................... <length(tColor.item[3]) - 1>
  [364] pusharglist 4 ........................... <tColor.item[3], #char, 1, length(tColor.item[3]) - 1>
  [366] objcall 104 ............................. <tColor.item[3].char[1..length(tColor.item[3]) - 1]>
  [368] pusharglist 1 ........................... <tColor.item[3].char[1..length(tColor.item[3]) - 1]>
  [370] extcall 301 ............................. <value(tColor.item[3].char[1..length(tColor.item[3]) - 1])>
  [373] setlocal 9 .............................. tB = value(tColor.item[3].char[1..length(tColor.item[3]) - 1])
  [375] getlocal 7 .............................. <tR>
  [377] pusharglist 1 ........................... <tR>
  [379] extcall 147 ............................. <string(tR)>
  [381] pushcons 31 ............................. <",">
  [383] joinstr ................................. <string(tR) & ",">
  [384] getlocal 8 .............................. <tG>
  [386] pusharglist 1 ........................... <tG>
  [388] extcall 147 ............................. <string(tG)>
  [390] joinstr ................................. <string(tR) & "," & string(tG)>
  [391] pushcons 31 ............................. <",">
  [393] joinstr ................................. <string(tR) & "," & string(tG) & ",">
  [394] getlocal 9 .............................. <tB>
  [396] pusharglist 1 ........................... <tB>
  [398] extcall 147 ............................. <string(tB)>
  [400] joinstr ................................. <string(tR) & "," & string(tG) & "," & string(tB)>
  [401] setlocal 6 .............................. tColor = string(tR) & "," & string(tG) & "," & string(tB)
  [403] getlocal 4 .............................. <tPart>
  [405] pushcons 19 ............................. <"ey">
  [407] eq ...................................... <tPart = "ey">
  [408] jmpifz [415] ............................ if tPart = "ey" then
  [411] pushcons 16 ............................. <"0">
  [413] setlocal 6 .............................. tColor = "0"
  [415] getlocal 0 .............................. <tNewFigure>
  [417] pushcons 36 ............................. <"&">
  [419] joinstr ................................. <tNewFigure & "&">
  [420] getlocal 4 .............................. <tPart>
  [422] joinstr ................................. <tNewFigure & "&" & tPart>
  [423] pushcons 37 ............................. <"=">
  [425] joinstr ................................. <tNewFigure & "&" & tPart & "=">
  [426] getlocal 5 .............................. <tmodel>
  [428] joinstr ................................. <tNewFigure & "&" & tPart & "=" & tmodel>
  [429] pushcons 38 ............................. <"/">
  [431] joinstr ................................. <tNewFigure & "&" & tPart & "=" & tmodel & "/">
  [432] getlocal 6 .............................. <tColor>
  [434] joinstr ................................. <tNewFigure & "&" & tPart & "=" & tmodel & "/" & tColor>
  [435] setlocal 0 .............................. tNewFigure = tNewFigure & "&" & tPart & "=" & tmodel & "/" & tColor
  [437] pushint8 1
  [439] getlocal 3
  [441] add
  [442] setlocal 3
  [444] endrepeat [119]
  [447] jmp [465]
  [450] getparam 0 .............................. <me>
  [452] pushcons 39 ............................. <"Weirdness in figure data!!!">
  [454] pushsymb 290 ............................ <#generateFigureDataToOldServerMode>
  [457] pusharglistnoret 3 ...................... <me, "Weirdness in figure data!!!", #generateFigureDataToOldServerMode>
  [459] extcall 106 ............................. error(me, "Weirdness in figure data!!!", #generateFigureDataToOldServerMode)
  [461] getlocal 1 .............................. <tFigureData>
  [463] setlocal 0 .............................. tNewFigure = tFigureData
  [465] getlocal 2 .............................. <tTemp>
  [467] setmovieprop 197 ........................ the itemDelimiter = tTemp
  [469] pushcons 17 ............................. <"figuretoServer">
  [471] getlocal 0 .............................. <tNewFigure>
  [473] pusharglist 2 ........................... <["figuretoServer": tNewFigure]>
  [475] pushproplist ............................ <["figuretoServer": tNewFigure]>
  [476] pusharglistnoret 1 ...................... <["figuretoServer": tNewFigure]>
  [478] extcall 44 .............................. return ["figuretoServer": tNewFigure]
  [480] ret
end

on validateFigure me, tFigure, tsex
  [  0] getparam 2 .............................. <tsex>
  [  2] pushsymb 102 ............................ <#char>
  [  4] pushint8 1 .............................. <1>
  [  6] pusharglist 3 ........................... <tsex, #char, 1>
  [  8] objcall 104 ............................. <tsex.char[1]>
  [ 10] pushcons 5 .............................. <"F">
  [ 12] eq ...................................... <tsex.char[1] = "F">
  [ 13] getparam 2 .............................. <tsex>
  [ 15] pushsymb 102 ............................ <#char>
  [ 17] pushint8 1 .............................. <1>
  [ 19] pusharglist 3 ........................... <tsex, #char, 1>
  [ 21] objcall 104 ............................. <tsex.char[1]>
  [ 23] pushcons 30 ............................. <"f">
  [ 25] eq ...................................... <tsex.char[1] = "f">
  [ 26] or ...................................... <(tsex.char[1] = "F") or (tsex.char[1] = "f")>
  [ 27] jmpifz [ 37] ............................ if (tsex.char[1] = "F") or (tsex.char[1] = "f") then / else
  [ 30] pushcons 5 .............................. <"F">
  [ 32] setparam 2 .............................. tsex = "F"
  [ 34] jmp [ 41]
  [ 37] pushcons 4 .............................. <"M">
  [ 39] setparam 2 .............................. tsex = "M"
  [ 41] getprop 297 ............................. <pSelectablePartsList>
  [ 44] getparam 2 .............................. <tsex>
  [ 46] pusharglist 2 ........................... <pSelectablePartsList, tsex>
  [ 48] objcall 96 .............................. <pSelectablePartsList[tsex]>
  [ 50] pusharglist 1 ........................... <pSelectablePartsList[tsex]>
  [ 52] extcall 71 .............................. <voidp(pSelectablePartsList[tsex])>
  [ 54] jmpifz [ 63] ............................ if voidp(pSelectablePartsList[tsex]) then
  [ 57] getparam 1 .............................. <tFigure>
  [ 59] pusharglistnoret 1 ...................... <tFigure>
  [ 61] extcall 44 .............................. return tFigure
  [ 63] getparam 1 .............................. <tFigure>
  [ 65] getobjprop 49 ........................... <tFigure.ilk>
  [ 67] pushsymb 300 ............................ <#propList>
  [ 70] nteq .................................... <tFigure.ilk <> #propList>
  [ 71] jmpifz [ 79] ............................ if tFigure.ilk <> #propList then
  [ 74] pusharglist 0 ........................... <[:]>
  [ 76] pushproplist ............................ <[:]>
  [ 77] setparam 1 .............................. tFigure = [:]
  [ 79] pusharglist 0 ........................... <[:]>
  [ 81] pushproplist ............................ <[:]>
  [ 82] setlocal 0 .............................. tTempFigure = [:]
  [ 84] pushint8 1 .............................. <1>
  [ 86] setlocal 1
  [ 88] getlocal 1
  [ 90] getparam 1 .............................. <tFigure>
  [ 92] getobjprop 78 ........................... <tFigure.count>
  [ 94] lteq
  [ 95] jmpifz [240] ............................ repeat with f = 1 to tFigure.count
  [ 98] getparam 1 .............................. <tFigure>
  [100] getlocal 1 .............................. <f>
  [102] pusharglist 2 ........................... <tFigure, f>
  [104] objcall 96 .............................. <tFigure[f]>
  [106] pushcons 13 ............................. <"setid">
  [108] pusharglist 2 ........................... <tFigure[f], "setid">
  [110] objcall 96 .............................. <tFigure[f]["setid"]>
  [112] pusharglist 1 ........................... <tFigure[f]["setid"]>
  [114] extcall 71 .............................. <voidp(tFigure[f]["setid"])>
  [116] not ..................................... <not voidp(tFigure[f]["setid"])>
  [117] jmpifz [231] ............................ if not voidp(tFigure[f]["setid"]) then
  [120] getparam 1 .............................. <tFigure>
  [122] getlocal 1 .............................. <f>
  [124] pusharglist 2 ........................... <tFigure, f>
  [126] objcall 96 .............................. <tFigure[f]>
  [128] pushcons 13 ............................. <"setid">
  [130] pusharglist 2 ........................... <tFigure[f], "setid">
  [132] objcall 96 .............................. <tFigure[f]["setid"]>
  [134] pusharglist 1 ........................... <tFigure[f]["setid"]>
  [136] extcall 71 .............................. <voidp(tFigure[f]["setid"])>
  [138] jmpifz [148] ............................ if voidp(tFigure[f]["setid"]) then / else
  [141] pushint8 1 .............................. <1>
  [143] setlocal 2 .............................. tColor = 1
  [145] jmp [164]
  [148] getparam 1 .............................. <tFigure>
  [150] getlocal 1 .............................. <f>
  [152] pusharglist 2 ........................... <tFigure, f>
  [154] objcall 96 .............................. <tFigure[f]>
  [156] pushcons 14 ............................. <"colorid">
  [158] pusharglist 2 ........................... <tFigure[f], "colorid">
  [160] objcall 96 .............................. <tFigure[f]["colorid"]>
  [162] setlocal 2 .............................. tColor = tFigure[f]["colorid"]
  [164] getparam 1 .............................. <tFigure>
  [166] pushint8 1 .............................. <1>
  [168] pusharglist 2 ........................... <tFigure, 1>
  [170] objcall 108 ............................. <tFigure.getPropAt(1)>
  [172] setlocal 3 .............................. tPart = tFigure.getPropAt(1)
  [174] getparam 1 .............................. <tFigure>
  [176] getlocal 1 .............................. <f>
  [178] pusharglist 2 ........................... <tFigure, f>
  [180] objcall 96 .............................. <tFigure[f]>
  [182] pushcons 13 ............................. <"setid">
  [184] pusharglist 2 ........................... <tFigure[f], "setid">
  [186] objcall 96 .............................. <tFigure[f]["setid"]>
  [188] setlocal 4 .............................. tSetID = tFigure[f]["setid"]
  [190] getprop 298 ............................. <pSelectableSetIDList>
  [193] getparam 2 .............................. <tsex>
  [195] pusharglist 2 ........................... <pSelectableSetIDList, tsex>
  [197] objcall 96 .............................. <pSelectableSetIDList[tsex]>
  [199] getlocal 4 .............................. <tSetID>
  [201] pusharglist 1 ........................... <tSetID>
  [203] extcall 101 ............................. <integer(tSetID)>
  [205] pusharglist 2 ........................... <pSelectableSetIDList[tsex], integer(tSetID)>
  [207] objcall 235 ............................. <pSelectableSetIDList[tsex].getaProp(integer(tSetID))>
  [209] pusharglist 1 ........................... <pSelectableSetIDList[tsex].getaProp(integer(tSetID))>
  [211] extcall 71 .............................. <voidp(pSelectableSetIDList[tsex].getaProp(integer(tSetID)))>
  [213] not ..................................... <not voidp(pSelectableSetIDList[tsex].getaProp(integer(tSetID)))>
  [214] jmpifz [231] ............................ if not voidp(pSelectableSetIDList[tsex].getaProp(integer(tSetID))) then
  [217] getlocal 0 .............................. <tTempFigure>
  [219] getlocal 4 .............................. <tSetID>
  [221] pusharglist 1 ........................... <tSetID>
  [223] extcall 147 ............................. <string(tSetID)>
  [225] getlocal 2 .............................. <tColor>
  [227] pusharglistnoret 3 ...................... <tTempFigure, string(tSetID), tColor>
  [229] objcall 142 ............................. tTempFigure[string(tSetID)] = tColor
  [231] pushint8 1
  [233] getlocal 1
  [235] add
  [236] setlocal 1
  [238] endrepeat [ 88]
  [240] getparam 0 .............................. <me>
  [242] getlocal 0 .............................. <tTempFigure>
  [244] getparam 2 .............................. <tsex>
  [246] pusharglist 3 ........................... <me, tTempFigure, tsex>
  [248] objcall 293 ............................. <me.parseNewTypeFigure(tTempFigure, tsex)>
  [251] setparam 1 .............................. tFigure = me.parseNewTypeFigure(tTempFigure, tsex)
  [253] getparam 1 .............................. <tFigure>
  [255] pusharglistnoret 1 ...................... <tFigure>
  [257] extcall 44 .............................. return tFigure
  [259] ret
end

on parseFigure me, tFigureData, tsex, tClass, tCommand
  [  0] getparam 3 .............................. <tClass>
  [  2] pusharglist 1 ........................... <tClass>
  [  4] extcall 71 .............................. <voidp(tClass)>
  [  6] jmpifz [ 13] ............................ if voidp(tClass) then
  [  9] pushcons 40 ............................. <"user">
  [ 11] setparam 3 .............................. tClass = "user"
  [ 13] getparam 4 .............................. <tCommand>
  [ 15] pusharglist 1 ........................... <tCommand>
  [ 17] extcall 71 .............................. <voidp(tCommand)>
  [ 19] jmpifz [ 26] ............................ if voidp(tCommand) then
  [ 22] pushcons 0 .............................. <EMPTY>
  [ 24] setparam 4 .............................. tCommand = EMPTY
  [ 26] getparam 3 .............................. <tClass>
  [ 28] peek 0 .................................. case tClass of
  [ 30] pushcons 40 ............................. <"user">
  [ 32] nteq
  [ 33] jmpifz [ 44] ............................ (case) "user", ...
  [ 36] peek 0
  [ 38] pushcons 41 ............................. <"pelle">
  [ 40] eq
  [ 41] jmpifz [215] ............................ (case) ..., "pelle":
  [ 44] pusharglist 0 ........................... <[:]>
  [ 46] pushproplist ............................ <[:]>
  [ 47] setlocal 0 .............................. tTempFigure = [:]
  [ 49] getparam 1 .............................. <tFigureData>
  [ 51] pushsymb 102 ............................ <#char>
  [ 53] pusharglist 2 ........................... <tFigureData, #char>
  [ 55] objcall 78 .............................. <tFigureData.char.count>
  [ 57] pushint8 25 ............................. <25>
  [ 59] eq ...................................... <tFigureData.char.count = 25>
  [ 60] getparam 1 .............................. <tFigureData>
  [ 62] pusharglist 1 ........................... <tFigureData>
  [ 64] extcall 101 ............................. <integer(tFigureData)>
  [ 66] pusharglist 1 ........................... <integer(tFigureData)>
  [ 68] extcall 109 ............................. <integerp(integer(tFigureData))>
  [ 70] and ..................................... <(tFigureData.char.count = 25) and integerp(integer(tFigureData))>
  [ 71] jmpifz [199] ............................ if (tFigureData.char.count = 25) and integerp(integer(tFigureData)) then
  [ 74] getparam 1 .............................. <tFigureData>
  [ 76] pushsymb 102 ............................ <#char>
  [ 78] pushint8 1 .............................. <1>
  [ 80] getparam 1 .............................. <tFigureData>
  [ 82] pushsymb 102 ............................ <#char>
  [ 84] pusharglist 2 ........................... <tFigureData, #char>
  [ 86] objcall 78 .............................. <tFigureData.char.count>
  [ 88] pusharglist 4 ........................... <tFigureData, #char, 1, tFigureData.char.count>
  [ 90] objcall 104 ............................. <tFigureData.char[1..tFigureData.char.count]>
  [ 92] setparam 1 .............................. tFigureData = tFigureData.char[1..tFigureData.char.count]
  [ 94] getparam 1 .............................. <tFigureData>
  [ 96] pushsymb 102 ............................ <#char>
  [ 98] pusharglist 2 ........................... <tFigureData, #char>
  [100] objcall 78 .............................. <tFigureData.char.count>
  [102] pushint8 5 .............................. <5>
  [104] div ..................................... <tFigureData.char.count / 5>
  [105] setlocal 1 .............................. tPartCount = tFigureData.char.count / 5
  [107] pushzero ................................ <0>
  [108] setlocal 2
  [110] getlocal 2
  [112] getlocal 1 .............................. <tPartCount>
  [114] pushint8 1 .............................. <1>
  [116] sub ..................................... <tPartCount - 1>
  [117] lteq
  [118] jmpifz [199] ............................ repeat with i = 0 to tPartCount - 1
  [121] getparam 1 .............................. <tFigureData>
  [123] pushsymb 102 ............................ <#char>
  [125] getlocal 2 .............................. <i>
  [127] pushint8 5 .............................. <5>
  [129] mul ..................................... <i * 5>
  [130] pushint8 1 .............................. <1>
  [132] add ..................................... <(i * 5) + 1>
  [133] getlocal 2 .............................. <i>
  [135] pushint8 5 .............................. <5>
  [137] mul ..................................... <i * 5>
  [138] pushint8 5 .............................. <5>
  [140] add ..................................... <(i * 5) + 5>
  [141] pusharglist 4 ........................... <tFigureData, #char, (i * 5) + 1, (i * 5) + 5>
  [143] objcall 104 ............................. <tFigureData.char[(i * 5) + 1..(i * 5) + 5]>
  [145] setlocal 3 .............................. tPart = tFigureData.char[(i * 5) + 1..(i * 5) + 5]
  [147] getlocal 3 .............................. <tPart>
  [149] pushsymb 102 ............................ <#char>
  [151] pushint8 1 .............................. <1>
  [153] pushint8 3 .............................. <3>
  [155] pusharglist 4 ........................... <tPart, #char, 1, 3>
  [157] objcall 104 ............................. <tPart.char[1..3]>
  [159] setlocal 4 .............................. tSetID = tPart.char[1..3]
  [161] getlocal 3 .............................. <tPart>
  [163] pushsymb 102 ............................ <#char>
  [165] pushint8 4 .............................. <4>
  [167] pushint8 5 .............................. <5>
  [169] pusharglist 4 ........................... <tPart, #char, 4, 5>
  [171] objcall 104 ............................. <tPart.char[4..5]>
  [173] setlocal 5 .............................. tColorId = tPart.char[4..5]
  [175] getlocal 0 .............................. <tTempFigure>
  [177] getlocal 4 .............................. <tSetID>
  [179] getlocal 5 .............................. <tColorId>
  [181] pusharglist 1 ........................... <tColorId>
  [183] extcall 301 ............................. <value(tColorId)>
  [186] pusharglistnoret 3 ...................... <tTempFigure, tSetID, value(tColorId)>
  [188] objcall 142 ............................. tTempFigure[tSetID] = value(tColorId)
  [190] pushint8 1
  [192] getlocal 2
  [194] add
  [195] setlocal 2
  [197] endrepeat [110]
  [199] getparam 0 .............................. <me>
  [201] getlocal 0 .............................. <tTempFigure>
  [203] getparam 2 .............................. <tsex>
  [205] pusharglist 3 ........................... <me, tTempFigure, tsex>
  [207] objcall 293 ............................. <me.parseNewTypeFigure(tTempFigure, tsex)>
  [210] setlocal 6 .............................. tFigure = me.parseNewTypeFigure(tTempFigure, tsex)
  [212] jmp [793]
  [215] peek 0
  [217] pushcons 42 ............................. <"bot">
  [219] eq
  [220] jmpifz [785] ............................ (case) "bot":
  [223] pushcons 36 ............................. <"&">
  [225] setmovieprop 197 ........................ the itemDelimiter = "&"
  [227] getparam 1 .............................. <tFigureData>
  [229] pushsymb 198 ............................ <#item>
  [231] pusharglist 2 ........................... <tFigureData, #item>
  [233] objcall 78 .............................. <tFigureData.item.count>
  [235] setlocal 1 .............................. tPartCount = tFigureData.item.count
  [237] pusharglist 0 ........................... <[:]>
  [239] pushproplist ............................ <[:]>
  [240] setlocal 6 .............................. tFigure = [:]
  [242] pushint8 1 .............................. <1>
  [244] setlocal 2
  [246] getlocal 2
  [248] getlocal 1 .............................. <tPartCount>
  [250] lteq
  [251] jmpifz [600] ............................ repeat with i = 1 to tPartCount
  [254] getparam 1 .............................. <tFigureData>
  [256] pushsymb 198 ............................ <#item>
  [258] getlocal 2 .............................. <i>
  [260] pusharglist 3 ........................... <tFigureData, #item, i>
  [262] objcall 104 ............................. <tFigureData.item[i]>
  [264] setlocal 3 .............................. tPart = tFigureData.item[i]
  [266] pushcons 37 ............................. <"=">
  [268] setmovieprop 197 ........................ the itemDelimiter = "="
  [270] getlocal 3 .............................. <tPart>
  [272] pushsymb 198 ............................ <#item>
  [274] pushint8 1 .............................. <1>
  [276] pusharglist 3 ........................... <tPart, #item, 1>
  [278] objcall 104 ............................. <tPart.item[1]>
  [280] setlocal 7 .............................. tProp = tPart.item[1]
  [282] getlocal 3 .............................. <tPart>
  [284] pushsymb 198 ............................ <#item>
  [286] pushint8 2 .............................. <2>
  [288] pusharglist 3 ........................... <tPart, #item, 2>
  [290] objcall 104 ............................. <tPart.item[2]>
  [292] setlocal 8 .............................. tDesc = tPart.item[2]
  [294] pushcons 38 ............................. <"/">
  [296] setmovieprop 197 ........................ the itemDelimiter = "/"
  [298] pusharglist 0 ........................... <[:]>
  [300] pushproplist ............................ <[:]>
  [301] setlocal 9 .............................. tValue = [:]
  [303] getlocal 9 .............................. <tValue>
  [305] pushcons 28 ............................. <"model">
  [307] getlocal 8 .............................. <tDesc>
  [309] pushsymb 198 ............................ <#item>
  [311] pushint8 1 .............................. <1>
  [313] pusharglist 3 ........................... <tDesc, #item, 1>
  [315] objcall 104 ............................. <tDesc.item[1]>
  [317] pusharglistnoret 3 ...................... <tValue, "model", tDesc.item[1]>
  [319] objcall 142 ............................. tValue["model"] = tDesc.item[1]
  [321] getlocal 8 .............................. <tDesc>
  [323] pushsymb 198 ............................ <#item>
  [325] pushint8 2 .............................. <2>
  [327] pusharglist 3 ........................... <tDesc, #item, 2>
  [329] objcall 226 ............................. <tDesc.item[2]>
  [331] pushsymb 339 ............................ <#line>
  [334] pushint8 1 .............................. <1>
  [336] pusharglist 3 ........................... <tDesc.item[2], #line, 1>
  [338] objcall 104 ............................. <tDesc.item[2].line[1]>
  [340] setlocal 10 ............................. tColor = tDesc.item[2].line[1]
  [342] pushcons 31 ............................. <",">
  [344] setmovieprop 197 ........................ the itemDelimiter = ","
  [346] getlocal 10 ............................. <tColor>
  [348] pushsymb 198 ............................ <#item>
  [350] pusharglist 2 ........................... <tColor, #item>
  [352] objcall 78 .............................. <tColor.item.count>
  [354] pushint8 1 .............................. <1>
  [356] eq ...................................... <tColor.item.count = 1>
  [357] jmpifz [433] ............................ if tColor.item.count = 1 then / else
  [360] getlocal 10 ............................. <tColor>
  [362] pusharglist 1 ........................... <tColor>
  [364] extcall 101 ............................. <integer(tColor)>
  [366] pushzero ................................ <0>
  [367] eq ...................................... <integer(tColor) = 0>
  [368] jmpifz [389] ............................ if integer(tColor) = 0 then / else
  [371] getlocal 9 .............................. <tValue>
  [373] pushcons 29 ............................. <"color">
  [375] pushcons 43 ............................. <"EEEEEE">
  [377] pusharglist 1 ........................... <"EEEEEE">
  [379] extcall 322 ............................. <rgb("EEEEEE")>
  [382] pusharglistnoret 3 ...................... <tValue, "color", rgb("EEEEEE")>
  [384] objcall 142 ............................. tValue["color"] = rgb("EEEEEE")
  [386] jmp [430]
  [389] getlocal 10 ............................. <tColor>
  [391] pusharglist 1 ........................... <tColor>
  [393] extcall 101 ............................. <integer(tColor)>
  [395] pusharglist 1 ........................... <integer(tColor)>
  [397] extcall 340 ............................. <paletteIndex(integer(tColor))>
  [400] setlocal 11 ............................. tPalette = paletteIndex(integer(tColor))
  [402] getlocal 9 .............................. <tValue>
  [404] pushcons 29 ............................. <"color">
  [406] getlocal 11 ............................. <tPalette>
  [408] getobjprop 341 .......................... <tPalette.red>
  [411] getlocal 11 ............................. <tPalette>
  [413] getobjprop 342 .......................... <tPalette.green>
  [416] getlocal 11 ............................. <tPalette>
  [418] getobjprop 343 .......................... <tPalette.blue>
  [421] pusharglist 3 ........................... <tPalette.red, tPalette.green, tPalette.blue>
  [423] extcall 322 ............................. <rgb(tPalette.red, tPalette.green, tPalette.blue)>
  [426] pusharglistnoret 3 ...................... <tValue, "color", rgb(tPalette.red, tPalette.green, tPalette.blue)>
  [428] objcall 142 ............................. tValue["color"] = rgb(tPalette.red, tPalette.green, tPalette.blue)
  [430] jmp [576]
  [433] getlocal 10 ............................. <tColor>
  [435] pushsymb 198 ............................ <#item>
  [437] pusharglist 2 ........................... <tColor, #item>
  [439] objcall 78 .............................. <tColor.item.count>
  [441] pushint8 3 .............................. <3>
  [443] eq ...................................... <tColor.item.count = 3>
  [444] jmpifz [561] ............................ if tColor.item.count = 3 then / else
  [447] getlocal 9 .............................. <tValue>
  [449] pushcons 29 ............................. <"color">
  [451] pushcons 44 ............................. <"rgb(">
  [453] getlocal 10 ............................. <tColor>
  [455] joinstr ................................. <"rgb(" & tColor>
  [456] pushcons 45 ............................. <")">
  [458] joinstr ................................. <"rgb(" & tColor & ")">
  [459] pusharglist 1 ........................... <"rgb(" & tColor & ")">
  [461] extcall 301 ............................. <value("rgb(" & tColor & ")")>
  [464] pusharglistnoret 3 ...................... <tValue, "color", value("rgb(" & tColor & ")")>
  [466] objcall 142 ............................. tValue["color"] = value("rgb(" & tColor & ")")
  [468] getlocal 9 .............................. <tValue>
  [470] pushcons 29 ............................. <"color">
  [472] pusharglist 2 ........................... <tValue, "color">
  [474] objcall 96 .............................. <tValue["color"]>
  [476] pusharglist 1 ........................... <tValue["color"]>
  [478] extcall 71 .............................. <voidp(tValue["color"])>
  [480] jmpifz [498] ............................ if voidp(tValue["color"]) then
  [483] getlocal 9 .............................. <tValue>
  [485] pushcons 29 ............................. <"color">
  [487] pushcons 43 ............................. <"EEEEEE">
  [489] pusharglist 1 ........................... <"EEEEEE">
  [491] extcall 322 ............................. <rgb("EEEEEE")>
  [494] pusharglistnoret 3 ...................... <tValue, "color", rgb("EEEEEE")>
  [496] objcall 142 ............................. tValue["color"] = rgb("EEEEEE")
  [498] getlocal 9 .............................. <tValue>
  [500] pushcons 29 ............................. <"color">
  [502] pusharglist 2 ........................... <tValue, "color">
  [504] objcall 96 .............................. <tValue["color"]>
  [506] getobjprop 341 .......................... <tValue["color"].red>
  [509] getlocal 9 .............................. <tValue>
  [511] pushcons 29 ............................. <"color">
  [513] pusharglist 2 ........................... <tValue, "color">
  [515] objcall 96 .............................. <tValue["color"]>
  [517] getobjprop 342 .......................... <tValue["color"].green>
  [520] add ..................................... <tValue["color"].red + tValue["color"].green>
  [521] getlocal 9 .............................. <tValue>
  [523] pushcons 29 ............................. <"color">
  [525] pusharglist 2 ........................... <tValue, "color">
  [527] objcall 96 .............................. <tValue["color"]>
  [529] getobjprop 343 .......................... <tValue["color"].blue>
  [532] add ..................................... <tValue["color"].red + tValue["color"].green + tValue["color"].blue>
  [533] pushint16 238 ........................... <238>
  [536] pushint8 3 .............................. <3>
  [538] mul ..................................... <238 * 3>
  [539] gt ...................................... <(tValue["color"].red + tValue["color"].green + tValue["color"].blue) > (238 * 3)>
  [540] jmpifz [558] ............................ if (tValue["color"].red + tValue["color"].green + tValue["color"].blue) > (238 * 3) then
  [543] getlocal 9 .............................. <tValue>
  [545] pushcons 29 ............................. <"color">
  [547] pushcons 43 ............................. <"EEEEEE">
  [549] pusharglist 1 ........................... <"EEEEEE">
  [551] extcall 322 ............................. <rgb("EEEEEE")>
  [554] pusharglistnoret 3 ...................... <tValue, "color", rgb("EEEEEE")>
  [556] objcall 142 ............................. tValue["color"] = rgb("EEEEEE")
  [558] jmp [576]
  [561] getlocal 9 .............................. <tValue>
  [563] pushcons 29 ............................. <"color">
  [565] pushcons 43 ............................. <"EEEEEE">
  [567] pusharglist 1 ........................... <"EEEEEE">
  [569] extcall 322 ............................. <rgb("EEEEEE")>
  [572] pusharglistnoret 3 ...................... <tValue, "color", rgb("EEEEEE")>
  [574] objcall 142 ............................. tValue["color"] = rgb("EEEEEE")
  [576] getlocal 6 .............................. <tFigure>
  [578] getlocal 7 .............................. <tProp>
  [580] getlocal 9 .............................. <tValue>
  [582] pusharglistnoret 3 ...................... <tFigure, tProp, tValue>
  [584] objcall 142 ............................. tFigure[tProp] = tValue
  [586] pushcons 36 ............................. <"&">
  [588] setmovieprop 197 ........................ the itemDelimiter = "&"
  [590] pushint8 1
  [592] getlocal 2
  [594] add
  [595] setlocal 2
  [597] endrepeat [246]
  [600] pushcons 8 .............................. <"hr">
  [602] pushcons 9 .............................. <"hd">
  [604] pushcons 19 ............................. <"ey">
  [606] pushcons 20 ............................. <"fc">
  [608] pushcons 21 ............................. <"bd">
  [610] pushcons 22 ............................. <"lh">
  [612] pushcons 23 ............................. <"rh">
  [614] pushcons 12 ............................. <"ch">
  [616] pushcons 24 ............................. <"ls">
  [618] pushcons 25 ............................. <"rs">
  [620] pushcons 10 ............................. <"lg">
  [622] pushcons 11 ............................. <"sh">
  [624] pusharglist 12 .......................... <["hr", "hd", "ey", "fc", "bd", "lh", "rh", "ch", "ls", "rs", "lg", "sh"]>
  [626] pushlist ................................ <["hr", "hd", "ey", "fc", "bd", "lh", "rh", "ch", "ls", "rs", "lg", "sh"]>
  [627] setlocal 12 ............................. tRequiredParts = ["hr", "hd", "ey", "fc", "bd", "lh", "rh", "ch", "ls", "rs", "lg", "sh"]
  [629] getlocal 12 ............................. <tRequiredParts>
  [631] peek 0
  [633] pusharglist 1
  [635] extcall 78
  [637] pushint8 1
  [639] peek 0
  [641] peek 2
  [643] lteq
  [644] jmpifz [780] ............................ repeat with tItem in tRequiredParts
  [647] peek 2
  [649] peek 1
  [651] pusharglist 2
  [653] extcall 96
  [655] setlocal 13
  [657] getlocal 6 .............................. <tFigure>
  [659] getlocal 13 ............................. <tItem>
  [661] pusharglist 2 ........................... <tFigure, tItem>
  [663] objcall 96 .............................. <tFigure[tItem]>
  [665] pusharglist 1 ........................... <tFigure[tItem]>
  [667] extcall 66 .............................. <listp(tFigure[tItem])>
  [669] not ..................................... <not listp(tFigure[tItem])>
  [670] jmpifz [684] ............................ if not listp(tFigure[tItem]) then
  [673] getlocal 6 .............................. <tFigure>
  [675] getlocal 13 ............................. <tItem>
  [677] pusharglist 0 ........................... <[:]>
  [679] pushproplist ............................ <[:]>
  [680] pusharglistnoret 3 ...................... <tFigure, tItem, [:]>
  [682] objcall 142 ............................. tFigure[tItem] = [:]
  [684] getlocal 6 .............................. <tFigure>
  [686] getlocal 13 ............................. <tItem>
  [688] pusharglist 2 ........................... <tFigure, tItem>
  [690] objcall 96 .............................. <tFigure[tItem]>
  [692] pushcons 29 ............................. <"color">
  [694] pusharglist 2 ........................... <tFigure[tItem], "color">
  [696] objcall 96 .............................. <tFigure[tItem]["color"]>
  [698] pushsymb 344 ............................ <#color>
  [701] pusharglist 2 ........................... <tFigure[tItem]["color"], #color>
  [703] extcall 49 .............................. <ilk(tFigure[tItem]["color"], #color)>
  [705] not ..................................... <not ilk(tFigure[tItem]["color"], #color)>
  [706] jmpifz [737] ............................ if not ilk(tFigure[tItem]["color"], #color) then
  [709] getlocal 6 .............................. <tFigure>
  [711] getlocal 13 ............................. <tItem>
  [713] pusharglist 2 ........................... <tFigure, tItem>
  [715] objcall 96 .............................. <tFigure[tItem]>
  [717] pushcons 29 ............................. <"color">
  [719] pushint16 238 ........................... <238>
  [722] pushint16 238 ........................... <238>
  [725] pushint16 238 ........................... <238>
  [728] pusharglist 3 ........................... <238, 238, 238>
  [730] extcall 322 ............................. <rgb(238, 238, 238)>
  [733] pusharglistnoret 3 ...................... <tFigure[tItem], "color", rgb(238, 238, 238)>
  [735] objcall 142 ............................. tFigure[tItem]["color"] = rgb(238, 238, 238)
  [737] getlocal 6 .............................. <tFigure>
  [739] getlocal 13 ............................. <tItem>
  [741] pusharglist 2 ........................... <tFigure, tItem>
  [743] objcall 96 .............................. <tFigure[tItem]>
  [745] pushcons 28 ............................. <"model">
  [747] pusharglist 2 ........................... <tFigure[tItem], "model">
  [749] objcall 96 .............................. <tFigure[tItem]["model"]>
  [751] pusharglist 1 ........................... <tFigure[tItem]["model"]>
  [753] extcall 107 ............................. <stringp(tFigure[tItem]["model"])>
  [755] not ..................................... <not stringp(tFigure[tItem]["model"])>
  [756] jmpifz [775] ............................ if not stringp(tFigure[tItem]["model"]) then
  [759] getlocal 6 .............................. <tFigure>
  [761] getlocal 13 ............................. <tItem>
  [763] pusharglist 2 ........................... <tFigure, tItem>
  [765] objcall 96 .............................. <tFigure[tItem]>
  [767] pushcons 28 ............................. <"model">
  [769] pushcons 46 ............................. <"001">
  [771] pusharglistnoret 3 ...................... <tFigure[tItem], "model", "001">
  [773] objcall 142 ............................. tFigure[tItem]["model"] = "001"
  [775] pushint8 1
  [777] add
  [778] endrepeat [639]
  [780] pop 3
  [782] jmp [793] ............................... (case) otherwise:
  [785] pop 1
  [787] getparam 1 .............................. <tFigureData>
  [789] pusharglistnoret 1 ...................... <tFigureData>
  [791] extcall 44 .............................. return tFigureData
  [793] pop 1 ................................... end case
  [795] getlocal 6 .............................. <tFigure>
  [797] pusharglistnoret 1 ...................... <tFigure>
  [799] extcall 44 .............................. return tFigure
  [801] ret
end

on parseNewTypeFigure me, tFigure, tsex
  [  0] pusharglist 0 ........................... <[:]>
  [  2] pushproplist ............................ <[:]>
  [  3] setlocal 0 .............................. tMainPartsList = [:]
  [  5] getparam 2 .............................. <tsex>
  [  7] pusharglist 1 ........................... <tsex>
  [  9] extcall 71 .............................. <voidp(tsex)>
  [ 11] jmpifz [ 18] ............................ if voidp(tsex) then
  [ 14] pushcons 4 .............................. <"M">
  [ 16] setparam 2 .............................. tsex = "M"
  [ 18] getparam 2 .............................. <tsex>
  [ 20] pushsymb 102 ............................ <#char>
  [ 22] pushint8 1 .............................. <1>
  [ 24] pusharglist 3 ........................... <tsex, #char, 1>
  [ 26] objcall 104 ............................. <tsex.char[1]>
  [ 28] pushcons 5 .............................. <"F">
  [ 30] eq ...................................... <tsex.char[1] = "F">
  [ 31] getparam 2 .............................. <tsex>
  [ 33] pushsymb 102 ............................ <#char>
  [ 35] pushint8 1 .............................. <1>
  [ 37] pusharglist 3 ........................... <tsex, #char, 1>
  [ 39] objcall 104 ............................. <tsex.char[1]>
  [ 41] pushcons 30 ............................. <"f">
  [ 43] eq ...................................... <tsex.char[1] = "f">
  [ 44] or ...................................... <(tsex.char[1] = "F") or (tsex.char[1] = "f")>
  [ 45] jmpifz [ 55] ............................ if (tsex.char[1] = "F") or (tsex.char[1] = "f") then / else
  [ 48] pushcons 5 .............................. <"F">
  [ 50] setparam 2 .............................. tsex = "F"
  [ 52] jmp [ 59]
  [ 55] pushcons 4 .............................. <"M">
  [ 57] setparam 2 .............................. tsex = "M"
  [ 59] pushint8 1 .............................. <1>
  [ 61] setlocal 1
  [ 63] getlocal 1
  [ 65] getparam 1 .............................. <tFigure>
  [ 67] getobjprop 78 ........................... <tFigure.count>
  [ 69] lteq
  [ 70] jmpifz [301] ............................ repeat with f = 1 to tFigure.count
  [ 73] getparam 1 .............................. <tFigure>
  [ 75] getlocal 1 .............................. <f>
  [ 77] pusharglist 2 ........................... <tFigure, f>
  [ 79] objcall 108 ............................. <tFigure.getPropAt(f)>
  [ 81] setlocal 2 .............................. tSetID = tFigure.getPropAt(f)
  [ 83] getparam 1 .............................. <tFigure>
  [ 85] getlocal 2 .............................. <tSetID>
  [ 87] pusharglist 2 ........................... <tFigure, tSetID>
  [ 89] objcall 96 .............................. <tFigure[tSetID]>
  [ 91] pusharglist 1 ........................... <tFigure[tSetID]>
  [ 93] extcall 301 ............................. <value(tFigure[tSetID])>
  [ 96] setlocal 3 .............................. tColorId = value(tFigure[tSetID])
  [ 98] getlocal 2 .............................. <tSetID>
  [100] pusharglist 1 ........................... <tSetID>
  [102] extcall 301 ............................. <value(tSetID)>
  [105] pusharglist 1 ........................... <value(tSetID)>
  [107] extcall 71 .............................. <voidp(value(tSetID))>
  [109] not ..................................... <not voidp(value(tSetID))>
  [110] jmpifz [292] ............................ if not voidp(value(tSetID)) then
  [113] getlocal 3 .............................. <tColorId>
  [115] pusharglist 1 ........................... <tColorId>
  [117] extcall 71 .............................. <voidp(tColorId)>
  [119] jmpifz [126] ............................ if voidp(tColorId) then
  [122] pushint8 1 .............................. <1>
  [124] setlocal 3 .............................. tColorId = 1
  [126] getprop 296 ............................. <pValidSetIDList>
  [129] getparam 2 .............................. <tsex>
  [131] pusharglist 2 ........................... <pValidSetIDList, tsex>
  [133] objcall 96 .............................. <pValidSetIDList[tsex]>
  [135] getlocal 2 .............................. <tSetID>
  [137] pusharglist 2 ........................... <pValidSetIDList[tsex], tSetID>
  [139] objcall 96 .............................. <pValidSetIDList[tsex][tSetID]>
  [141] pusharglist 1 ........................... <pValidSetIDList[tsex][tSetID]>
  [143] extcall 71 .............................. <voidp(pValidSetIDList[tsex][tSetID])>
  [145] not ..................................... <not voidp(pValidSetIDList[tsex][tSetID])>
  [146] jmpifz [255] ............................ if not voidp(pValidSetIDList[tsex][tSetID]) then
  [149] getprop 296 ............................. <pValidSetIDList>
  [152] getparam 2 .............................. <tsex>
  [154] pusharglist 2 ........................... <pValidSetIDList, tsex>
  [156] objcall 96 .............................. <pValidSetIDList[tsex]>
  [158] getlocal 2 .............................. <tSetID>
  [160] pusharglist 2 ........................... <pValidSetIDList[tsex], tSetID>
  [162] objcall 104 ............................. <pValidSetIDList[tsex].getProp(tSetID)>
  [164] pushsymb 303 ............................ <#part>
  [167] pusharglist 2 ........................... <pValidSetIDList[tsex].getProp(tSetID), #part>
  [169] objcall 96 .............................. <pValidSetIDList[tsex].getProp(tSetID)[#part]>
  [171] setlocal 4 .............................. tMainPart = pValidSetIDList[tsex].getProp(tSetID)[#part]
  [173] getprop 296 ............................. <pValidSetIDList>
  [176] getparam 2 .............................. <tsex>
  [178] pusharglist 2 ........................... <pValidSetIDList, tsex>
  [180] objcall 96 .............................. <pValidSetIDList[tsex]>
  [182] getlocal 2 .............................. <tSetID>
  [184] pusharglist 2 ........................... <pValidSetIDList[tsex], tSetID>
  [186] objcall 104 ............................. <pValidSetIDList[tsex].getProp(tSetID)>
  [188] pushsymb 304 ............................ <#location>
  [191] pusharglist 2 ........................... <pValidSetIDList[tsex].getProp(tSetID), #location>
  [193] objcall 96 .............................. <pValidSetIDList[tsex].getProp(tSetID)[#location]>
  [195] setlocal 5 .............................. tlocation = pValidSetIDList[tsex].getProp(tSetID)[#location]
  [197] getprop 295 ............................. <pValidPartsList>
  [200] getparam 2 .............................. <tsex>
  [202] pusharglist 2 ........................... <pValidPartsList, tsex>
  [204] objcall 96 .............................. <pValidPartsList[tsex]>
  [206] getlocal 4 .............................. <tMainPart>
  [208] pusharglist 2 ........................... <pValidPartsList[tsex], tMainPart>
  [210] objcall 96 .............................. <pValidPartsList[tsex][tMainPart]>
  [212] getlocal 5 .............................. <tlocation>
  [214] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart], tlocation>
  [216] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][tlocation]>
  [218] pushcons 26 ............................. <"p">
  [220] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart][tlocation], "p">
  [222] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][tlocation]["p"]>
  [224] setlocal 6 .............................. tchangeparts = pValidPartsList[tsex][tMainPart][tlocation]["p"]
  [226] getprop 295 ............................. <pValidPartsList>
  [229] getparam 2 .............................. <tsex>
  [231] pusharglist 2 ........................... <pValidPartsList, tsex>
  [233] objcall 96 .............................. <pValidPartsList[tsex]>
  [235] getlocal 4 .............................. <tMainPart>
  [237] pusharglist 2 ........................... <pValidPartsList[tsex], tMainPart>
  [239] objcall 96 .............................. <pValidPartsList[tsex][tMainPart]>
  [241] getlocal 5 .............................. <tlocation>
  [243] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart], tlocation>
  [245] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][tlocation]>
  [247] pushcons 27 ............................. <"c">
  [249] pusharglist 2 ........................... <pValidPartsList[tsex][tMainPart][tlocation], "c">
  [251] objcall 96 .............................. <pValidPartsList[tsex][tMainPart][tlocation]["c"]>
  [253] setlocal 7 .............................. tColorList = pValidPartsList[tsex][tMainPart][tlocation]["c"]
  [255] getlocal 4 .............................. <tMainPart>
  [257] pusharglist 1 ........................... <tMainPart>
  [259] extcall 71 .............................. <voidp(tMainPart)>
  [261] not ..................................... <not voidp(tMainPart)>
  [262] jmpifz [292] ............................ if not voidp(tMainPart) then
  [265] getlocal 0 .............................. <tMainPartsList>
  [267] getlocal 4 .............................. <tMainPart>
  [269] pushcons 47 ............................. <"changeparts">
  [271] getlocal 6 .............................. <tchangeparts>
  [273] pushcons 13 ............................. <"setid">
  [275] getlocal 2 .............................. <tSetID>
  [277] pushcons 48 ............................. <"colorlist">
  [279] getlocal 7 .............................. <tColorList>
  [281] pushcons 49 ............................. <"colorID">
  [283] getlocal 3 .............................. <tColorId>
  [285] pusharglist 8 ........................... <["changeparts": tchangeparts, "setid": tSetID, "colorlist": tColorList, "colorID": tColorId]>
  [287] pushproplist ............................ <["changeparts": tchangeparts, "setid": tSetID, "colorlist": tColorList, "colorID": tColorId]>
  [288] pusharglistnoret 3 ...................... <tMainPartsList, tMainPart, ["changeparts": tchangeparts, "setid": tSetID, "colorlist": tColorList, "colorID": tColorId]>
  [290] objcall 142 ............................. tMainPartsList[tMainPart] = ["changeparts": tchangeparts, "setid": tSetID, "colorlist": tColorList, "colorID": tColorId]
  [292] pushint8 1
  [294] getlocal 1
  [296] add
  [297] setlocal 1
  [299] endrepeat [ 63]
  [301] pusharglist 0 ........................... <[:]>
  [303] pushproplist ............................ <[:]>
  [304] setlocal 8 .............................. tTempFigure = [:]
  [306] pushcons 8 .............................. <"hr">
  [308] pushcons 9 .............................. <"hd">
  [310] pushcons 10 ............................. <"lg">
  [312] pushcons 11 ............................. <"sh">
  [314] pushcons 12 ............................. <"ch">
  [316] pusharglist 5 ........................... <["hr", "hd", "lg", "sh", "ch"]>
  [318] pushlist ................................ <["hr", "hd", "lg", "sh", "ch"]>
  [319] peek 0
  [321] pusharglist 1
  [323] extcall 78
  [325] pushint8 1
  [327] peek 0
  [329] peek 2
  [331] lteq
  [332] jmpifz [775] ............................ repeat with tMainPart in ["hr", "hd", "lg", "sh", "ch"]
  [335] peek 2
  [337] peek 1
  [339] pusharglist 2
  [341] extcall 96
  [343] setlocal 4
  [345] getlocal 0 .............................. <tMainPartsList>
  [347] getlocal 4 .............................. <tMainPart>
  [349] pusharglist 2 ........................... <tMainPartsList, tMainPart>
  [351] objcall 96 .............................. <tMainPartsList[tMainPart]>
  [353] pusharglist 1 ........................... <tMainPartsList[tMainPart]>
  [355] extcall 71 .............................. <voidp(tMainPartsList[tMainPart])>
  [357] not ..................................... <not voidp(tMainPartsList[tMainPart])>
  [358] jmpifz [769] ............................ if not voidp(tMainPartsList[tMainPart]) then
  [361] getlocal 0 .............................. <tMainPartsList>
  [363] getlocal 4 .............................. <tMainPart>
  [365] pusharglist 2 ........................... <tMainPartsList, tMainPart>
  [367] objcall 96 .............................. <tMainPartsList[tMainPart]>
  [369] pushcons 13 ............................. <"setid">
  [371] pusharglist 2 ........................... <tMainPartsList[tMainPart], "setid">
  [373] objcall 96 .............................. <tMainPartsList[tMainPart]["setid"]>
  [375] setlocal 2 .............................. tSetID = tMainPartsList[tMainPart]["setid"]
  [377] getlocal 0 .............................. <tMainPartsList>
  [379] getlocal 4 .............................. <tMainPart>
  [381] pusharglist 2 ........................... <tMainPartsList, tMainPart>
  [383] objcall 96 .............................. <tMainPartsList[tMainPart]>
  [385] pushcons 49 ............................. <"colorID">
  [387] pusharglist 2 ........................... <tMainPartsList[tMainPart], "colorID">
  [389] objcall 96 .............................. <tMainPartsList[tMainPart]["colorID"]>
  [391] setlocal 3 .............................. tColorId = tMainPartsList[tMainPart]["colorID"]
  [393] getlocal 0 .............................. <tMainPartsList>
  [395] getlocal 4 .............................. <tMainPart>
  [397] pusharglist 2 ........................... <tMainPartsList, tMainPart>
  [399] objcall 96 .............................. <tMainPartsList[tMainPart]>
  [401] pushcons 48 ............................. <"colorlist">
  [403] pusharglist 2 ........................... <tMainPartsList[tMainPart], "colorlist">
  [405] objcall 96 .............................. <tMainPartsList[tMainPart]["colorlist"]>
  [407] setlocal 7 .............................. tColorList = tMainPartsList[tMainPart]["colorlist"]
  [409] getlocal 0 .............................. <tMainPartsList>
  [411] getlocal 4 .............................. <tMainPart>
  [413] pusharglist 2 ........................... <tMainPartsList, tMainPart>
  [415] objcall 96 .............................. <tMainPartsList[tMainPart]>
  [417] pushcons 47 ............................. <"changeparts">
  [419] pusharglist 2 ........................... <tMainPartsList[tMainPart], "changeparts">
  [421] objcall 96 .............................. <tMainPartsList[tMainPart]["changeparts"]>
  [423] setlocal 6 .............................. tchangeparts = tMainPartsList[tMainPart]["changeparts"]
  [425] getlocal 3 .............................. <tColorId>
  [427] pusharglist 1 ........................... <tColorId>
  [429] extcall 301 ............................. <value(tColorId)>
  [432] pushint8 1 .............................. <1>
  [434] lt ...................................... <value(tColorId) < 1>
  [435] jmpifz [442] ............................ if value(tColorId) < 1 then
  [438] pushint8 1 .............................. <1>
  [440] setlocal 3 .............................. tColorId = 1
  [442] getlocal 7 .............................. <tColorList>
  [444] pusharglist 1 ........................... <tColorList>
  [446] extcall 66 .............................. <listp(tColorList)>
  [448] not ..................................... <not listp(tColorList)>
  [449] jmpifz [479] ............................ if not listp(tColorList) then / else
  [452] pushcons 34 ............................. <"#EEEEEE">
  [454] pusharglist 1 ........................... <"#EEEEEE">
  [456] extcall 322 ............................. <rgb("#EEEEEE")>
  [459] setlocal 9 .............................. tColor = rgb("#EEEEEE")
  [461] pushint8 1 .............................. <1>
  [463] setlocal 3 .............................. tColorId = 1
  [465] getparam 0 .............................. <me>
  [467] pushcons 50 ............................. <"Weirdness in the list of figure parts!">
  [469] pushsymb 293 ............................ <#parseNewTypeFigure>
  [472] pusharglistnoret 3 ...................... <me, "Weirdness in the list of figure parts!", #parseNewTypeFigure>
  [474] extcall 106 ............................. error(me, "Weirdness in the list of figure parts!", #parseNewTypeFigure)
  [476] jmp [548]
  [479] getlocal 3 .............................. <tColorId>
  [481] getlocal 7 .............................. <tColorList>
  [483] getobjprop 78 ........................... <tColorList.count>
  [485] gt ...................................... <tColorId > tColorList.count>
  [486] jmpifz [493] ............................ if tColorId > tColorList.count then
  [489] pushint8 1 .............................. <1>
  [491] setlocal 3 .............................. tColorId = 1
  [493] getlocal 7 .............................. <tColorList>
  [495] getlocal 3 .............................. <tColorId>
  [497] pusharglist 2 ........................... <tColorList, tColorId>
  [499] objcall 96 .............................. <tColorList[tColorId]>
  [501] pusharglist 1 ........................... <tColorList[tColorId]>
  [503] extcall 66 .............................. <listp(tColorList[tColorId])>
  [505] not ..................................... <not listp(tColorList[tColorId])>
  [506] jmpifz [548] ............................ if not listp(tColorList[tColorId]) then
  [509] getlocal 7 .............................. <tColorList>
  [511] getlocal 3 .............................. <tColorId>
  [513] pusharglist 2 ........................... <tColorList, tColorId>
  [515] objcall 96 .............................. <tColorList[tColorId]>
  [517] pusharglist 1 ........................... <tColorList[tColorId]>
  [519] extcall 71 .............................. <voidp(tColorList[tColorId])>
  [521] jmpifz [533] ............................ if voidp(tColorList[tColorId]) then
  [524] pushcons 34 ............................. <"#EEEEEE">
  [526] pusharglist 1 ........................... <"#EEEEEE">
  [528] extcall 322 ............................. <rgb("#EEEEEE")>
  [531] setlocal 9 .............................. tColor = rgb("#EEEEEE")
  [533] getlocal 7 .............................. <tColorList>
  [535] getlocal 3 .............................. <tColorId>
  [537] pusharglist 2 ........................... <tColorList, tColorId>
  [539] objcall 96 .............................. <tColorList[tColorId]>
  [541] pusharglist 1 ........................... <tColorList[tColorId]>
  [543] extcall 322 ............................. <rgb(tColorList[tColorId])>
  [546] setlocal 9 .............................. tColor = rgb(tColorList[tColorId])
  [548] pushint8 1 .............................. <1>
  [550] setlocal 10
  [552] getlocal 10
  [554] getlocal 6 .............................. <tchangeparts>
  [556] getobjprop 78 ........................... <tchangeparts.count>
  [558] lteq
  [559] jmpifz [769] ............................ repeat with i = 1 to tchangeparts.count
  [562] getlocal 6 .............................. <tchangeparts>
  [564] getlocal 10 ............................. <i>
  [566] pusharglist 2 ........................... <tchangeparts, i>
  [568] objcall 108 ............................. <tchangeparts.getPropAt(i)>
  [570] setlocal 11 ............................. tPart = tchangeparts.getPropAt(i)
  [572] getlocal 6 .............................. <tchangeparts>
  [574] getlocal 11 ............................. <tPart>
  [576] pusharglist 2 ........................... <tchangeparts, tPart>
  [578] objcall 96 .............................. <tchangeparts[tPart]>
  [580] setlocal 12 ............................. tmodel = tchangeparts[tPart]
  [582] getlocal 12 ............................. <tmodel>
  [584] pushsymb 102 ............................ <#char>
  [586] pusharglist 2 ........................... <tmodel, #char>
  [588] objcall 78 .............................. <tmodel.char.count>
  [590] pushint8 1 .............................. <1>
  [592] eq ...................................... <tmodel.char.count = 1>
  [593] jmpifz [606] ............................ if tmodel.char.count = 1 then / else
  [596] pushcons 15 ............................. <"00">
  [598] getlocal 12 ............................. <tmodel>
  [600] joinstr ................................. <"00" & tmodel>
  [601] setlocal 12 ............................. tmodel = "00" & tmodel
  [603] jmp [627]
  [606] getlocal 12 ............................. <tmodel>
  [608] pushsymb 102 ............................ <#char>
  [610] pusharglist 2 ........................... <tmodel, #char>
  [612] objcall 78 .............................. <tmodel.char.count>
  [614] pushint8 2 .............................. <2>
  [616] eq ...................................... <tmodel.char.count = 2>
  [617] jmpifz [627] ............................ if tmodel.char.count = 2 then
  [620] pushcons 16 ............................. <"0">
  [622] getlocal 12 ............................. <tmodel>
  [624] joinstr ................................. <"0" & tmodel>
  [625] setlocal 12 ............................. tmodel = "0" & tmodel
  [627] getlocal 7 .............................. <tColorList>
  [629] getlocal 3 .............................. <tColorId>
  [631] pusharglist 2 ........................... <tColorList, tColorId>
  [633] objcall 96 .............................. <tColorList[tColorId]>
  [635] pusharglist 1 ........................... <tColorList[tColorId]>
  [637] extcall 66 .............................. <listp(tColorList[tColorId])>
  [639] jmpifz [733] ............................ if listp(tColorList[tColorId]) then
  [642] getlocal 7 .............................. <tColorList>
  [644] getlocal 3 .............................. <tColorId>
  [646] pusharglist 2 ........................... <tColorList, tColorId>
  [648] objcall 96 .............................. <tColorList[tColorId]>
  [650] getobjprop 78 ........................... <tColorList[tColorId].count>
  [652] getlocal 10 ............................. <i>
  [654] gteq .................................... <tColorList[tColorId].count >= i>
  [655] jmpifz [682] ............................ if tColorList[tColorId].count >= i then / else
  [658] getlocal 7 .............................. <tColorList>
  [660] getlocal 3 .............................. <tColorId>
  [662] pusharglist 2 ........................... <tColorList, tColorId>
  [664] objcall 96 .............................. <tColorList[tColorId]>
  [666] getlocal 10 ............................. <i>
  [668] pusharglist 2 ........................... <tColorList[tColorId], i>
  [670] objcall 96 .............................. <tColorList[tColorId][i]>
  [672] pusharglist 1 ........................... <tColorList[tColorId][i]>
  [674] extcall 322 ............................. <rgb(tColorList[tColorId][i])>
  [677] setlocal 13 ............................. tPartColor = rgb(tColorList[tColorId][i])
  [679] jmp [703]
  [682] getlocal 7 .............................. <tColorList>
  [684] getlocal 3 .............................. <tColorId>
  [686] pusharglist 2 ........................... <tColorList, tColorId>
  [688] objcall 96 .............................. <tColorList[tColorId]>
  [690] pushint8 1 .............................. <1>
  [692] pusharglist 2 ........................... <tColorList[tColorId], 1>
  [694] objcall 96 .............................. <tColorList[tColorId][1]>
  [696] pusharglist 1 ........................... <tColorList[tColorId][1]>
  [698] extcall 322 ............................. <rgb(tColorList[tColorId][1])>
  [701] setlocal 13 ............................. tPartColor = rgb(tColorList[tColorId][1])
  [703] getlocal 8 .............................. <tTempFigure>
  [705] getlocal 11 ............................. <tPart>
  [707] pushcons 28 ............................. <"model">
  [709] getlocal 12 ............................. <tmodel>
  [711] pushcons 29 ............................. <"color">
  [713] getlocal 13 ............................. <tPartColor>
  [715] pushcons 13 ............................. <"setid">
  [717] getlocal 2 .............................. <tSetID>
  [719] pushcons 14 ............................. <"colorid">
  [721] getlocal 3 .............................. <tColorId>
  [723] pusharglist 8 ........................... <["model": tmodel, "color": tPartColor, "setid": tSetID, "colorid": tColorId]>
  [725] pushproplist ............................ <["model": tmodel, "color": tPartColor, "setid": tSetID, "colorid": tColorId]>
  [726] pusharglistnoret 3 ...................... <tTempFigure, tPart, ["model": tmodel, "color": tPartColor, "setid": tSetID, "colorid": tColorId]>
  [728] objcall 142 ............................. tTempFigure[tPart] = ["model": tmodel, "color": tPartColor, "setid": tSetID, "colorid": tColorId]
  [730] jmp [760] ............................... next repeat
  [733] getlocal 8 .............................. <tTempFigure>
  [735] getlocal 11 ............................. <tPart>
  [737] pushcons 28 ............................. <"model">
  [739] getlocal 12 ............................. <tmodel>
  [741] pushcons 29 ............................. <"color">
  [743] getlocal 9 .............................. <tColor>
  [745] pushcons 13 ............................. <"setid">
  [747] getlocal 2 .............................. <tSetID>
  [749] pushcons 14 ............................. <"colorid">
  [751] getlocal 3 .............................. <tColorId>
  [753] pusharglist 8 ........................... <["model": tmodel, "color": tColor, "setid": tSetID, "colorid": tColorId]>
  [755] pushproplist ............................ <["model": tmodel, "color": tColor, "setid": tSetID, "colorid": tColorId]>
  [756] pusharglistnoret 3 ...................... <tTempFigure, tPart, ["model": tmodel, "color": tColor, "setid": tSetID, "colorid": tColorId]>
  [758] objcall 142 ............................. tTempFigure[tPart] = ["model": tmodel, "color": tColor, "setid": tSetID, "colorid": tColorId]
  [760] pushint8 1
  [762] getlocal 10
  [764] add
  [765] setlocal 10
  [767] endrepeat [552]
  [769] pushint8 1
  [771] add
  [772] endrepeat [327]
  [775] pop 3
  [777] getparam 0 .............................. <me>
  [779] getlocal 8 .............................. <tTempFigure>
  [781] getparam 2 .............................. <tsex>
  [783] pusharglist 3 ........................... <me, tTempFigure, tsex>
  [785] objcall 289 ............................. <me.checkAndFixFigure(tTempFigure, tsex)>
  [788] setlocal 8 .............................. tTempFigure = me.checkAndFixFigure(tTempFigure, tsex)
  [790] getlocal 8 .............................. <tTempFigure>
  [792] pusharglistnoret 1 ...................... <tTempFigure>
  [794] extcall 44 .............................. return tTempFigure
  [796] ret
end

on getDefaultFigure me, tsex
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 0 ........................... <[:]>
  [  4] pushproplist ............................ <[:]>
  [  5] getparam 1 .............................. <tsex>
  [  7] pusharglist 3 ........................... <me, [:], tsex>
  [  9] objcall 289 ............................. <me.checkAndFixFigure([:], tsex)>
  [ 12] pusharglistnoret 1 ...................... <me.checkAndFixFigure([:], tsex)>
  [ 14] extcall 44 .............................. return me.checkAndFixFigure([:], tsex)
  [ 16] ret
end
