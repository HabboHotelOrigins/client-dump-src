property pState, pAcceptFlagMe, pAcceptFlagHe, pMyStripItems, pItemListMe, pItemListHe, pTraderWndID, pMaxTradeItems, pItemSlotRect, pConfirmationWndID, pMySlotProps, pHerSlotProps, pIconPlaceholderName, pRequiredDownloadsToTrade, pDetailsBubbleId, pProductPreviewObjId, pPreviewDefaultSize, pMyId, pHerId, pHerName, pCanTradeMe, pCanTradeShe, pTimeLeft

on construct me
  [  0] pushsymb 29 ............................. <#closed>
  [  2] setprop 28 .............................. pState = #closed
  [  4] pushcons 0 .............................. <"trading_title">
  [  6] pushcons 1 .............................. <"Safe Trading">
  [  8] pusharglist 2 ........................... <"trading_title", "Safe Trading">
  [ 10] extcall 31 .............................. <getText("trading_title", "Safe Trading")>
  [ 12] setprop 30 .............................. pTraderWndID = getText("trading_title", "Safe Trading")
  [ 14] pushzero ................................ <0>
  [ 15] setprop 32 .............................. pAcceptFlagMe = 0
  [ 17] pushzero ................................ <0>
  [ 18] setprop 33 .............................. pAcceptFlagHe = 0
  [ 20] pusharglist 0 ........................... <[]>
  [ 22] pushlist ................................ <[]>
  [ 23] setprop 34 .............................. pItemListMe = []
  [ 25] pusharglist 0 ........................... <[]>
  [ 27] pushlist ................................ <[]>
  [ 28] setprop 35 .............................. pItemListHe = []
  [ 30] pusharglist 0 ........................... <[]>
  [ 32] pushlist ................................ <[]>
  [ 33] setprop 36 .............................. pMyStripItems = []
  [ 35] pushzero ................................ <0>
  [ 36] setprop 37 .............................. pMaxTradeItems = 0
  [ 38] pushzero ................................ <0>
  [ 39] pushzero ................................ <0>
  [ 40] pushint8 32 ............................. <32>
  [ 42] pushint8 32 ............................. <32>
  [ 44] pusharglist 4 ........................... <0, 0, 32, 32>
  [ 46] extcall 39 .............................. <rect(0, 0, 32, 32)>
  [ 48] setprop 38 .............................. pItemSlotRect = rect(0, 0, 32, 32)
  [ 50] pushzero ................................ <0>
  [ 51] setlocal 0 .............................. pHerSlotCount = 0
  [ 53] pusharglist 0 ........................... <[:]>
  [ 55] pushproplist ............................ <[:]>
  [ 56] setprop 40 .............................. pMySlotProps = [:]
  [ 58] pusharglist 0 ........................... <[:]>
  [ 60] pushproplist ............................ <[:]>
  [ 61] setprop 41 .............................. pHerSlotProps = [:]
  [ 63] pushcons 2 .............................. <"safetrading_confirmationdialog">
  [ 65] setprop 42 .............................. pConfirmationWndID = "safetrading_confirmationdialog"
  [ 67] pushcons 3 .............................. <"icon_placeholder">
  [ 69] setprop 43 .............................. pIconPlaceholderName = "icon_placeholder"
  [ 71] pusharglist 0 ........................... <[]>
  [ 73] pushlist ................................ <[]>
  [ 74] setprop 44 .............................. pRequiredDownloadsToTrade = []
  [ 76] pushsymb 46 ............................. <#trade_item_details>
  [ 78] setprop 45 .............................. pDetailsBubbleId = #trade_item_details
  [ 80] pushsymb 48 ............................. <#trade_product_preview>
  [ 82] setprop 47 .............................. pProductPreviewObjId = #trade_product_preview
  [ 84] pushint8 50 ............................. <50>
  [ 86] setprop 49 .............................. pPreviewDefaultSize = 50
  [ 88] pushint8 1 .............................. <1>
  [ 90] pusharglistnoret 1 ...................... <1>
  [ 92] extcall 50 .............................. return 1
  [ 94] ret
end

on deconstruct me
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 8 ............................... <me.close()>
  [  6] pusharglistnoret 1 ...................... <me.close()>
  [  8] extcall 50 .............................. return me.close()
  [ 10] ret
end

on startTrade me, tIdA, tCanTradeA, tIdB, tCanTradeB
  [  0] getparam 1 .............................. <tIdA>
  [  2] pusharglist 1 ........................... <tIdA>
  [  4] extcall 53 .............................. <integerp(tIdA)>
  [  6] not ..................................... <not integerp(tIdA)>
  [  7] getparam 2 .............................. <tCanTradeA>
  [  9] pusharglist 1 ........................... <tCanTradeA>
  [ 11] extcall 54 .............................. <voidp(tCanTradeA)>
  [ 13] or ...................................... <not integerp(tIdA) or voidp(tCanTradeA)>
  [ 14] getparam 3 .............................. <tIdB>
  [ 16] pusharglist 1 ........................... <tIdB>
  [ 18] extcall 53 .............................. <integerp(tIdB)>
  [ 20] not ..................................... <not integerp(tIdB)>
  [ 21] or ...................................... <not integerp(tIdA) or voidp(tCanTradeA) or not integerp(tIdB)>
  [ 22] getparam 4 .............................. <tCanTradeB>
  [ 24] pusharglist 1 ........................... <tCanTradeB>
  [ 26] extcall 54 .............................. <voidp(tCanTradeB)>
  [ 28] or ...................................... <not integerp(tIdA) or voidp(tCanTradeA) or not integerp(tIdB) or voidp(tCanTradeB)>
  [ 29] jmpifz [ 37] ............................ if not integerp(tIdA) or voidp(tCanTradeA) or not integerp(tIdB) or voidp(tCanTradeB) then
  [ 32] pushzero ................................ <0>
  [ 33] pusharglistnoret 1 ...................... <0>
  [ 35] extcall 50 .............................. return 0
  [ 37] getparam 2 .............................. <tCanTradeA>
  [ 39] not ..................................... <not tCanTradeA>
  [ 40] getparam 4 .............................. <tCanTradeB>
  [ 42] not ..................................... <not tCanTradeB>
  [ 43] and ..................................... <not tCanTradeA and not tCanTradeB>
  [ 44] jmpifz [ 73] ............................ if not tCanTradeA and not tCanTradeB then
  [ 47] pushsymb 56 ............................. <#alert>
  [ 49] pushsymb 57 ............................. <#id>
  [ 51] pushsymb 58 ............................. <#trading_disabled_both>
  [ 53] pushsymb 59 ............................. <#Msg>
  [ 55] pushcons 4 .............................. <"trading_disabled_both">
  [ 57] pusharglist 1 ........................... <"trading_disabled_both">
  [ 59] extcall 31 .............................. <getText("trading_disabled_both")>
  [ 61] pusharglist 4 ........................... <[#id: #trading_disabled_both, #Msg: getText("trading_disabled_both")]>
  [ 63] pushproplist ............................ <[#id: #trading_disabled_both, #Msg: getText("trading_disabled_both")]>
  [ 64] pusharglistnoret 2 ...................... <#alert, [#id: #trading_disabled_both, #Msg: getText("trading_disabled_both")]>
  [ 66] extcall 55 .............................. executeMessage(#alert, [#id: #trading_disabled_both, #Msg: getText("trading_disabled_both")])
  [ 68] pushzero ................................ <0>
  [ 69] pusharglistnoret 1 ...................... <0>
  [ 71] extcall 50 .............................. return 0
  [ 73] getparam 1 .............................. <tIdA>
  [ 75] pushsymb 61 ............................. <#session>
  [ 77] pusharglist 1 ........................... <#session>
  [ 79] extcall 60 .............................. <getObject(#session)>
  [ 81] pushcons 5 .............................. <"user_user_id">
  [ 83] pusharglist 2 ........................... <getObject(#session), "user_user_id">
  [ 85] objcall 62 .............................. <getObject(#session).GET("user_user_id")>
  [ 87] eq ...................................... <tIdA = getObject(#session).GET("user_user_id")>
  [ 88] jmpifz [110] ............................ if tIdA = getObject(#session).GET("user_user_id") then / else
  [ 91] getparam 1 .............................. <tIdA>
  [ 93] setprop 63 .............................. pMyId = tIdA
  [ 95] getparam 2 .............................. <tCanTradeA>
  [ 97] setprop 64 .............................. pCanTradeMe = tCanTradeA
  [ 99] getparam 3 .............................. <tIdB>
  [101] setprop 65 .............................. pHerId = tIdB
  [103] getparam 4 .............................. <tCanTradeB>
  [105] setprop 66 .............................. pCanTradeShe = tCanTradeB
  [107] jmp [126]
  [110] getparam 3 .............................. <tIdB>
  [112] setprop 63 .............................. pMyId = tIdB
  [114] getparam 4 .............................. <tCanTradeB>
  [116] setprop 64 .............................. pCanTradeMe = tCanTradeB
  [118] getparam 1 .............................. <tIdA>
  [120] setprop 65 .............................. pHerId = tIdA
  [122] getparam 2 .............................. <tCanTradeA>
  [124] setprop 66 .............................. pCanTradeShe = tCanTradeA
  [126] getparam 0 .............................. <me>
  [128] pusharglistnoret 1 ...................... <me>
  [130] objcall 3 ............................... me.open()
  [132] ret
end

on open me
  [  0] getprop 30 .............................. <pTraderWndID>
  [  2] pusharglist 1 ........................... <pTraderWndID>
  [  4] extcall 72 .............................. <windowExists(pTraderWndID)>
  [  6] jmpifz [ 14] ............................ if windowExists(pTraderWndID) then
  [  9] pushzero ................................ <0>
  [ 10] pusharglistnoret 1 ...................... <0>
  [ 12] extcall 50 .............................. return 0
  [ 14] pusharglist 0 ........................... <[]>
  [ 16] pushlist ................................ <[]>
  [ 17] setprop 44 .............................. pRequiredDownloadsToTrade = []
  [ 19] pusharglist 0 ........................... <[:]>
  [ 21] pushproplist ............................ <[:]>
  [ 22] setlocal 0 .............................. tList = [:]
  [ 24] getlocal 0 .............................. <tList>
  [ 26] pushcons 6 .............................. <"showDialog">
  [ 28] pushint8 1 .............................. <1>
  [ 30] pusharglistnoret 3 ...................... <tList, "showDialog", 1>
  [ 32] objcall 73 .............................. tList["showDialog"] = 1
  [ 34] pushsymb 74 ............................. <#getHotelClosingStatus>
  [ 36] getlocal 0 .............................. <tList>
  [ 38] pusharglistnoret 2 ...................... <#getHotelClosingStatus, tList>
  [ 40] extcall 55 .............................. executeMessage(#getHotelClosingStatus, tList)
  [ 42] getlocal 0 .............................. <tList>
  [ 44] pushcons 7 .............................. <"retval">
  [ 46] pusharglist 2 ........................... <tList, "retval">
  [ 48] objcall 75 .............................. <tList["retval"]>
  [ 50] pushint8 1 .............................. <1>
  [ 52] eq ...................................... <tList["retval"] = 1>
  [ 53] jmpifz [ 62] ............................ if tList["retval"] = 1 then
  [ 56] pushint8 1 .............................. <1>
  [ 58] pusharglistnoret 1 ...................... <1>
  [ 60] extcall 50 .............................. return 1
  [ 62] pushsymb 77 ............................. <#room>
  [ 64] pusharglist 1 ........................... <#room>
  [ 66] extcall 76 .............................. <getThread(#room)>
  [ 68] pusharglist 1 ........................... <getThread(#room)>
  [ 70] objcall 78 .............................. <getThread(#room).getInterface()>
  [ 72] pusharglistnoret 1 ...................... <getThread(#room).getInterface()>
  [ 74] objcall 79 .............................. getThread(#room).getInterface().cancelObjectMover()
  [ 76] pushsymb 77 ............................. <#room>
  [ 78] pusharglist 1 ........................... <#room>
  [ 80] extcall 76 .............................. <getThread(#room)>
  [ 82] pusharglist 1 ........................... <getThread(#room)>
  [ 84] objcall 78 .............................. <getThread(#room).getInterface()>
  [ 86] pushsymb 80 ............................. <#clickAction>
  [ 88] pushcons 8 .............................. <"tradeItem">
  [ 90] pusharglistnoret 3 ...................... <getThread(#room).getInterface(), #clickAction, "tradeItem">
  [ 92] objcall 81 .............................. getThread(#room).getInterface().setProperty(#clickAction, "tradeItem")
  [ 94] pushsymb 77 ............................. <#room>
  [ 96] pusharglist 1 ........................... <#room>
  [ 98] extcall 76 .............................. <getThread(#room)>
  [100] pusharglist 1 ........................... <getThread(#room)>
  [102] objcall 82 .............................. <getThread(#room).getComponent()>
  [104] getprop 65 .............................. <pHerId>
  [106] pusharglist 2 ........................... <getThread(#room).getComponent(), pHerId>
  [108] objcall 83 .............................. <getThread(#room).getComponent().getUserObjectByWebID(pHerId)>
  [110] setlocal 1 .............................. tHerUserObj = getThread(#room).getComponent().getUserObjectByWebID(pHerId)
  [112] getlocal 1 .............................. <tHerUserObj>
  [114] not ..................................... <not tHerUserObj>
  [115] jmpifz [123] ............................ if not tHerUserObj then
  [118] pushzero ................................ <0>
  [119] pusharglistnoret 1 ...................... <0>
  [121] extcall 50 .............................. return 0
  [123] getlocal 1 .............................. <tHerUserObj>
  [125] pusharglist 1 ........................... <tHerUserObj>
  [127] objcall 85 .............................. <tHerUserObj.getName()>
  [129] setprop 84 .............................. pHerName = tHerUserObj.getName()
  [131] getprop 30 .............................. <pTraderWndID>
  [133] pushcons 9 .............................. <"habbo_basic.window">
  [135] pusharglist 2 ........................... <pTraderWndID, "habbo_basic.window">
  [137] extcall 86 .............................. <createWindow(pTraderWndID, "habbo_basic.window")>
  [139] not ..................................... <not createWindow(pTraderWndID, "habbo_basic.window")>
  [140] jmpifz [148] ............................ if not createWindow(pTraderWndID, "habbo_basic.window") then
  [143] pushzero ................................ <0>
  [144] pusharglistnoret 1 ...................... <0>
  [146] extcall 50 .............................. return 0
  [148] getprop 30 .............................. <pTraderWndID>
  [150] pusharglist 1 ........................... <pTraderWndID>
  [152] extcall 87 .............................. <getWindow(pTraderWndID)>
  [154] setlocal 2 .............................. tWndObj = getWindow(pTraderWndID)
  [156] getlocal 2 .............................. <tWndObj>
  [158] pushcons 10 ............................. <"habbo_trading.window">
  [160] pusharglist 2 ........................... <tWndObj, "habbo_trading.window">
  [162] objcall 88 .............................. <tWndObj.merge("habbo_trading.window")>
  [164] not ..................................... <not tWndObj.merge("habbo_trading.window")>
  [165] jmpifz [178] ............................ if not tWndObj.merge("habbo_trading.window") then
  [168] getlocal 2 .............................. <tWndObj>
  [170] pusharglist 1 ........................... <tWndObj>
  [172] objcall 8 ............................... <tWndObj.close()>
  [174] pusharglistnoret 1 ...................... <tWndObj.close()>
  [176] extcall 50 .............................. return tWndObj.close()
  [178] getlocal 2 .............................. <tWndObj>
  [180] getparam 0 .............................. <me>
  [182] pusharglist 1 ........................... <me>
  [184] objcall 89 .............................. <me.getID()>
  [186] pusharglistnoret 2 ...................... <tWndObj, me.getID()>
  [188] objcall 90 .............................. tWndObj.registerClient(me.getID())
  [190] getlocal 2 .............................. <tWndObj>
  [192] pushsymb 25 ............................. <#eventProcTrading>
  [194] getparam 0 .............................. <me>
  [196] pusharglist 1 ........................... <me>
  [198] objcall 89 .............................. <me.getID()>
  [200] pusharglistnoret 3 ...................... <tWndObj, #eventProcTrading, me.getID()>
  [202] objcall 91 .............................. tWndObj.registerProcedure(#eventProcTrading, me.getID())
  [204] getlocal 2 .............................. <tWndObj>
  [206] pushcons 11 ............................. <"trading_heoffers_text">
  [208] pusharglist 2 ........................... <tWndObj, "trading_heoffers_text">
  [210] objcall 92 .............................. <tWndObj.getElement("trading_heoffers_text")>
  [212] setlocal 3 .............................. tElem = tWndObj.getElement("trading_heoffers_text")
  [214] getlocal 3 .............................. <tElem>
  [216] pushzero ................................ <0>
  [217] nteq .................................... <tElem <> 0>
  [218] jmpifz [238] ............................ if tElem <> 0 then
  [221] getlocal 3 .............................. <tElem>
  [223] getprop 84 .............................. <pHerName>
  [225] pushcons 12 ............................. <"trading_offers">
  [227] pushcons 13 ............................. <"offers">
  [229] pusharglist 2 ........................... <"trading_offers", "offers">
  [231] extcall 31 .............................. <getText("trading_offers", "offers")>
  [233] joinpadstr .............................. <pHerName && getText("trading_offers", "offers")>
  [234] pusharglistnoret 2 ...................... <tElem, pHerName && getText("trading_offers", "offers")>
  [236] objcall 93 .............................. tElem.setText(pHerName && getText("trading_offers", "offers"))
  [238] pushzero ................................ <0>
  [239] setprop 37 .............................. pMaxTradeItems = 0
  [241] pushint8 1 .............................. <1>
  [243] jmpifz [280] ............................ repeat while 1
  [246] getprop 30 .............................. <pTraderWndID>
  [248] pusharglist 1 ........................... <pTraderWndID>
  [250] extcall 87 .............................. <getWindow(pTraderWndID)>
  [252] pushcons 14 ............................. <"trading_mystuff_">
  [254] getprop 37 .............................. <pMaxTradeItems>
  [256] pushint8 1 .............................. <1>
  [258] add ..................................... <pMaxTradeItems + 1>
  [259] joinstr ................................. <"trading_mystuff_" & pMaxTradeItems + 1>
  [260] pusharglist 2 ........................... <getWindow(pTraderWndID), "trading_mystuff_" & pMaxTradeItems + 1>
  [262] objcall 94 .............................. <getWindow(pTraderWndID).elementExists("trading_mystuff_" & pMaxTradeItems + 1)>
  [264] not ..................................... <not getWindow(pTraderWndID).elementExists("trading_mystuff_" & pMaxTradeItems + 1)>
  [265] jmpifz [271] ............................ if not getWindow(pTraderWndID).elementExists("trading_mystuff_" & pMaxTradeItems + 1) then
  [268] jmp [280] ............................... exit repeat
  [271] getprop 37 .............................. <pMaxTradeItems>
  [273] pushint8 1 .............................. <1>
  [275] add ..................................... <pMaxTradeItems + 1>
  [276] setprop 37 .............................. pMaxTradeItems = pMaxTradeItems + 1
  [278] endrepeat [241]
  [280] getparam 0 .............................. <me>
  [282] pusharglistnoret 1 ...................... <me>
  [284] objcall 11 .............................. me.clearSlots()
  [286] getlocal 2 .............................. <tWndObj>
  [288] pushcons 15 ............................. <"trading_mystuff_1">
  [290] pusharglist 2 ........................... <tWndObj, "trading_mystuff_1">
  [292] objcall 92 .............................. <tWndObj.getElement("trading_mystuff_1")>
  [294] pushsymb 95 ............................. <#width>
  [296] pusharglist 2 ........................... <tWndObj.getElement("trading_mystuff_1"), #width>
  [298] objcall 96 .............................. <tWndObj.getElement("trading_mystuff_1").getProperty(#width)>
  [300] setlocal 4 .............................. tWidth = tWndObj.getElement("trading_mystuff_1").getProperty(#width)
  [302] getlocal 2 .............................. <tWndObj>
  [304] pushcons 15 ............................. <"trading_mystuff_1">
  [306] pusharglist 2 ........................... <tWndObj, "trading_mystuff_1">
  [308] objcall 92 .............................. <tWndObj.getElement("trading_mystuff_1")>
  [310] pushsymb 97 ............................. <#height>
  [312] pusharglist 2 ........................... <tWndObj.getElement("trading_mystuff_1"), #height>
  [314] objcall 96 .............................. <tWndObj.getElement("trading_mystuff_1").getProperty(#height)>
  [316] setlocal 5 .............................. tHeight = tWndObj.getElement("trading_mystuff_1").getProperty(#height)
  [318] pushzero ................................ <0>
  [319] pushzero ................................ <0>
  [320] getlocal 4 .............................. <tWidth>
  [322] getlocal 5 .............................. <tHeight>
  [324] pusharglist 4 ........................... <0, 0, tWidth, tHeight>
  [326] extcall 39 .............................. <rect(0, 0, tWidth, tHeight)>
  [328] setprop 38 .............................. pItemSlotRect = rect(0, 0, tWidth, tHeight)
  [330] getparam 0 .............................. <me>
  [332] pusharglistnoret 1 ...................... <me>
  [334] objcall 4 ............................... me.updateTradingDisabledTexts()
  [336] pushsymb 3 .............................. <#open>
  [338] setprop 28 .............................. pState = #open
  [340] getparam 0 .............................. <me>
  [342] pusharglistnoret 1 ...................... <me>
  [344] objcall 10 .............................. me.accept()
  [346] pushint8 1 .............................. <1>
  [348] pusharglistnoret 1 ...................... <1>
  [350] extcall 50 .............................. return 1
  [352] ret
end

on updateTradingDisabledTexts me
  [  0] getprop 30 .............................. <pTraderWndID>
  [  2] pusharglist 1 ........................... <pTraderWndID>
  [  4] extcall 87 .............................. <getWindow(pTraderWndID)>
  [  6] setlocal 0 .............................. tWindow = getWindow(pTraderWndID)
  [  8] getlocal 0 .............................. <tWindow>
  [ 10] not ..................................... <not tWindow>
  [ 11] jmpifz [ 19] ............................ if not tWindow then
  [ 14] pushzero ................................ <0>
  [ 15] pusharglistnoret 1 ...................... <0>
  [ 17] extcall 50 .............................. return 0
  [ 19] pusharglist 0 ........................... <[]>
  [ 21] pushlist ................................ <[]>
  [ 22] setlocal 1 .............................. tElements = []
  [ 24] getlocal 1 .............................. <tElements>
  [ 26] pushcons 16 ............................. <"trading_lock_my">
  [ 28] pusharglistnoret 2 ...................... <tElements, "trading_lock_my">
  [ 30] objcall 104 ............................. tElements.add("trading_lock_my")
  [ 32] getlocal 1 .............................. <tElements>
  [ 34] pushcons 17 ............................. <"trading_myitems_bg">
  [ 36] pusharglistnoret 2 ...................... <tElements, "trading_myitems_bg">
  [ 38] objcall 104 ............................. tElements.add("trading_myitems_bg")
  [ 40] pushint8 1 .............................. <1>
  [ 42] setlocal 2
  [ 44] getlocal 2
  [ 46] getprop 37 .............................. <pMaxTradeItems>
  [ 48] lteq
  [ 49] jmpifz [ 83] ............................ repeat with i = 1 to pMaxTradeItems
  [ 52] getlocal 1 .............................. <tElements>
  [ 54] pushcons 14 ............................. <"trading_mystuff_">
  [ 56] getlocal 2 .............................. <i>
  [ 58] joinstr ................................. <"trading_mystuff_" & i>
  [ 59] pusharglistnoret 2 ...................... <tElements, "trading_mystuff_" & i>
  [ 61] objcall 104 ............................. tElements.add("trading_mystuff_" & i)
  [ 63] getlocal 1 .............................. <tElements>
  [ 65] pushcons 18 ............................. <"trading_mycount_">
  [ 67] getlocal 2 .............................. <i>
  [ 69] joinstr ................................. <"trading_mycount_" & i>
  [ 70] pusharglistnoret 2 ...................... <tElements, "trading_mycount_" & i>
  [ 72] objcall 104 ............................. tElements.add("trading_mycount_" & i)
  [ 74] pushint8 1
  [ 76] getlocal 2
  [ 78] add
  [ 79] setlocal 2
  [ 81] endrepeat [ 44]
  [ 83] pushint8 1 .............................. <1>
  [ 85] setlocal 2
  [ 87] getlocal 2
  [ 89] getlocal 1 .............................. <tElements>
  [ 91] getobjprop 105 .......................... <tElements.count>
  [ 93] lteq
  [ 94] jmpifz [145] ............................ repeat with i = 1 to tElements.count
  [ 97] getlocal 0 .............................. <tWindow>
  [ 99] getlocal 1 .............................. <tElements>
  [101] getlocal 2 .............................. <i>
  [103] pusharglist 2 ........................... <tElements, i>
  [105] objcall 75 .............................. <tElements[i]>
  [107] pusharglist 2 ........................... <tWindow, tElements[i]>
  [109] objcall 94 .............................. <tWindow.elementExists(tElements[i])>
  [111] jmpifz [136] ............................ if tWindow.elementExists(tElements[i]) then
  [114] getlocal 0 .............................. <tWindow>
  [116] getlocal 1 .............................. <tElements>
  [118] getlocal 2 .............................. <i>
  [120] pusharglist 2 ........................... <tElements, i>
  [122] objcall 75 .............................. <tElements[i]>
  [124] pusharglist 2 ........................... <tWindow, tElements[i]>
  [126] objcall 92 .............................. <tWindow.getElement(tElements[i])>
  [128] pushsymb 106 ............................ <#visible>
  [130] getprop 64 .............................. <pCanTradeMe>
  [132] pusharglistnoret 3 ...................... <tWindow.getElement(tElements[i]), #visible, pCanTradeMe>
  [134] objcall 81 .............................. tWindow.getElement(tElements[i]).setProperty(#visible, pCanTradeMe)
  [136] pushint8 1
  [138] getlocal 2
  [140] add
  [141] setlocal 2
  [143] endrepeat [ 87]
  [145] getlocal 0 .............................. <tWindow>
  [147] pushcons 19 ............................. <"trading_disabled_my">
  [149] pusharglist 2 ........................... <tWindow, "trading_disabled_my">
  [151] objcall 94 .............................. <tWindow.elementExists("trading_disabled_my")>
  [153] jmpifz [173] ............................ if tWindow.elementExists("trading_disabled_my") then
  [156] getlocal 0 .............................. <tWindow>
  [158] pushcons 19 ............................. <"trading_disabled_my">
  [160] pusharglist 2 ........................... <tWindow, "trading_disabled_my">
  [162] objcall 92 .............................. <tWindow.getElement("trading_disabled_my")>
  [164] pushsymb 106 ............................ <#visible>
  [166] getprop 64 .............................. <pCanTradeMe>
  [168] not ..................................... <not pCanTradeMe>
  [169] pusharglistnoret 3 ...................... <tWindow.getElement("trading_disabled_my"), #visible, not pCanTradeMe>
  [171] objcall 81 .............................. tWindow.getElement("trading_disabled_my").setProperty(#visible, not pCanTradeMe)
  [173] pusharglist 0 ........................... <[]>
  [175] pushlist ................................ <[]>
  [176] setlocal 1 .............................. tElements = []
  [178] getlocal 1 .............................. <tElements>
  [180] pushcons 20 ............................. <"trading_lock_his">
  [182] pusharglistnoret 2 ...................... <tElements, "trading_lock_his">
  [184] objcall 104 ............................. tElements.add("trading_lock_his")
  [186] getlocal 1 .............................. <tElements>
  [188] pushcons 21 ............................. <"trading_heritems_bg">
  [190] pusharglistnoret 2 ...................... <tElements, "trading_heritems_bg">
  [192] objcall 104 ............................. tElements.add("trading_heritems_bg")
  [194] pushint8 1 .............................. <1>
  [196] setlocal 2
  [198] getlocal 2
  [200] getprop 37 .............................. <pMaxTradeItems>
  [202] lteq
  [203] jmpifz [237] ............................ repeat with i = 1 to pMaxTradeItems
  [206] getlocal 1 .............................. <tElements>
  [208] pushcons 22 ............................. <"trading_herstuff_">
  [210] getlocal 2 .............................. <i>
  [212] joinstr ................................. <"trading_herstuff_" & i>
  [213] pusharglistnoret 2 ...................... <tElements, "trading_herstuff_" & i>
  [215] objcall 104 ............................. tElements.add("trading_herstuff_" & i)
  [217] getlocal 1 .............................. <tElements>
  [219] pushcons 23 ............................. <"trading_hercount_">
  [221] getlocal 2 .............................. <i>
  [223] joinstr ................................. <"trading_hercount_" & i>
  [224] pusharglistnoret 2 ...................... <tElements, "trading_hercount_" & i>
  [226] objcall 104 ............................. tElements.add("trading_hercount_" & i)
  [228] pushint8 1
  [230] getlocal 2
  [232] add
  [233] setlocal 2
  [235] endrepeat [198]
  [237] pushint8 1 .............................. <1>
  [239] setlocal 2
  [241] getlocal 2
  [243] getlocal 1 .............................. <tElements>
  [245] getobjprop 105 .......................... <tElements.count>
  [247] lteq
  [248] jmpifz [299] ............................ repeat with i = 1 to tElements.count
  [251] getlocal 0 .............................. <tWindow>
  [253] getlocal 1 .............................. <tElements>
  [255] getlocal 2 .............................. <i>
  [257] pusharglist 2 ........................... <tElements, i>
  [259] objcall 75 .............................. <tElements[i]>
  [261] pusharglist 2 ........................... <tWindow, tElements[i]>
  [263] objcall 94 .............................. <tWindow.elementExists(tElements[i])>
  [265] jmpifz [290] ............................ if tWindow.elementExists(tElements[i]) then
  [268] getlocal 0 .............................. <tWindow>
  [270] getlocal 1 .............................. <tElements>
  [272] getlocal 2 .............................. <i>
  [274] pusharglist 2 ........................... <tElements, i>
  [276] objcall 75 .............................. <tElements[i]>
  [278] pusharglist 2 ........................... <tWindow, tElements[i]>
  [280] objcall 92 .............................. <tWindow.getElement(tElements[i])>
  [282] pushsymb 106 ............................ <#visible>
  [284] getprop 66 .............................. <pCanTradeShe>
  [286] pusharglistnoret 3 ...................... <tWindow.getElement(tElements[i]), #visible, pCanTradeShe>
  [288] objcall 81 .............................. tWindow.getElement(tElements[i]).setProperty(#visible, pCanTradeShe)
  [290] pushint8 1
  [292] getlocal 2
  [294] add
  [295] setlocal 2
  [297] endrepeat [241]
  [299] getlocal 0 .............................. <tWindow>
  [301] pushcons 24 ............................. <"trading_disabled_her">
  [303] pusharglist 2 ........................... <tWindow, "trading_disabled_her">
  [305] objcall 94 .............................. <tWindow.elementExists("trading_disabled_her")>
  [307] jmpifz [327] ............................ if tWindow.elementExists("trading_disabled_her") then
  [310] getlocal 0 .............................. <tWindow>
  [312] pushcons 24 ............................. <"trading_disabled_her">
  [314] pusharglist 2 ........................... <tWindow, "trading_disabled_her">
  [316] objcall 92 .............................. <tWindow.getElement("trading_disabled_her")>
  [318] pushsymb 106 ............................ <#visible>
  [320] getprop 66 .............................. <pCanTradeShe>
  [322] not ..................................... <not pCanTradeShe>
  [323] pusharglistnoret 3 ...................... <tWindow.getElement("trading_disabled_her"), #visible, not pCanTradeShe>
  [325] objcall 81 .............................. tWindow.getElement("trading_disabled_her").setProperty(#visible, not pCanTradeShe)
  [327] ret
end

on showConfirmationView me
  [  0] getprop 30 .............................. <pTraderWndID>
  [  2] pusharglist 1 ........................... <pTraderWndID>
  [  4] extcall 87 .............................. <getWindow(pTraderWndID)>
  [  6] setlocal 0 .............................. tWindow = getWindow(pTraderWndID)
  [  8] getlocal 0 .............................. <tWindow>
  [ 10] not ..................................... <not tWindow>
  [ 11] jmpifz [ 19] ............................ if not tWindow then
  [ 14] pushzero ................................ <0>
  [ 15] pusharglistnoret 1 ...................... <0>
  [ 17] extcall 50 .............................. return 0
  [ 19] pushsymb 110 ............................ <#confirm>
  [ 21] setprop 28 .............................. pState = #confirm
  [ 23] pushcons 25 ............................. <"struct.font.bold">
  [ 25] pusharglist 1 ........................... <"struct.font.bold">
  [ 27] extcall 111 ............................. <getStructVariable("struct.font.bold")>
  [ 29] setlocal 1 .............................. tBold = getStructVariable("struct.font.bold")
  [ 31] getlocal 0 .............................. <tWindow>
  [ 33] pushcons 26 ............................. <"trading_instructions_text">
  [ 35] pusharglist 2 ........................... <tWindow, "trading_instructions_text">
  [ 37] objcall 94 .............................. <tWindow.elementExists("trading_instructions_text")>
  [ 39] jmpifz [ 56] ............................ if tWindow.elementExists("trading_instructions_text") then
  [ 42] getlocal 0 .............................. <tWindow>
  [ 44] pushcons 26 ............................. <"trading_instructions_text">
  [ 46] pusharglist 2 ........................... <tWindow, "trading_instructions_text">
  [ 48] objcall 92 .............................. <tWindow.getElement("trading_instructions_text")>
  [ 50] getlocal 1 .............................. <tBold>
  [ 52] pusharglistnoret 2 ...................... <tWindow.getElement("trading_instructions_text"), tBold>
  [ 54] objcall 112 ............................. tWindow.getElement("trading_instructions_text").setFont(tBold)
  [ 56] getparam 0 .............................. <me>
  [ 58] pushcons 27 ............................. <"trading_confirm_info">
  [ 60] pusharglist 1 ........................... <"trading_confirm_info">
  [ 62] extcall 31 .............................. <getText("trading_confirm_info")>
  [ 64] pusharglistnoret 2 ...................... <me, getText("trading_confirm_info")>
  [ 66] objcall 20 .............................. me.showInfo(getText("trading_confirm_info"))
  [ 68] getlocal 0 .............................. <tWindow>
  [ 70] pushcons 16 ............................. <"trading_lock_my">
  [ 72] pusharglist 2 ........................... <tWindow, "trading_lock_my">
  [ 74] objcall 94 .............................. <tWindow.elementExists("trading_lock_my")>
  [ 76] jmpifz [ 95] ............................ if tWindow.elementExists("trading_lock_my") then
  [ 79] getlocal 0 .............................. <tWindow>
  [ 81] pushcons 16 ............................. <"trading_lock_my">
  [ 83] pusharglist 2 ........................... <tWindow, "trading_lock_my">
  [ 85] objcall 92 .............................. <tWindow.getElement("trading_lock_my")>
  [ 87] pushsymb 113 ............................ <#blend>
  [ 89] pushint8 30 ............................. <30>
  [ 91] pusharglistnoret 3 ...................... <tWindow.getElement("trading_lock_my"), #blend, 30>
  [ 93] objcall 81 .............................. tWindow.getElement("trading_lock_my").setProperty(#blend, 30)
  [ 95] getlocal 0 .............................. <tWindow>
  [ 97] pushcons 20 ............................. <"trading_lock_his">
  [ 99] pusharglist 2 ........................... <tWindow, "trading_lock_his">
  [101] objcall 94 .............................. <tWindow.elementExists("trading_lock_his")>
  [103] jmpifz [122] ............................ if tWindow.elementExists("trading_lock_his") then
  [106] getlocal 0 .............................. <tWindow>
  [108] pushcons 20 ............................. <"trading_lock_his">
  [110] pusharglist 2 ........................... <tWindow, "trading_lock_his">
  [112] objcall 92 .............................. <tWindow.getElement("trading_lock_his")>
  [114] pushsymb 113 ............................ <#blend>
  [116] pushint8 30 ............................. <30>
  [118] pusharglistnoret 3 ...................... <tWindow.getElement("trading_lock_his"), #blend, 30>
  [120] objcall 81 .............................. tWindow.getElement("trading_lock_his").setProperty(#blend, 30)
  [122] pushint8 3 .............................. <3>
  [124] setprop 114 ............................. pTimeLeft = 3
  [126] getlocal 0 .............................. <tWindow>
  [128] pushcons 28 ............................. <"trading_accept">
  [130] pusharglist 2 ........................... <tWindow, "trading_accept">
  [132] objcall 94 .............................. <tWindow.elementExists("trading_accept")>
  [134] jmpifz [149] ............................ if tWindow.elementExists("trading_accept") then
  [137] getlocal 0 .............................. <tWindow>
  [139] pushcons 28 ............................. <"trading_accept">
  [141] pusharglist 2 ........................... <tWindow, "trading_accept">
  [143] objcall 92 .............................. <tWindow.getElement("trading_accept")>
  [145] pusharglistnoret 1 ...................... <tWindow.getElement("trading_accept")>
  [147] objcall 115 ............................. tWindow.getElement("trading_accept").deactivate()
  [149] getparam 0 .............................. <me>
  [151] pusharglistnoret 1 ...................... <me>
  [153] objcall 6 ............................... me.updateConfirmButton()
  [155] pushsymb 117 ............................ <#trading_button_timeout>
  [157] pushint16 1000 .......................... <1000>
  [160] pushsymb 6 .............................. <#updateConfirmButton>
  [162] getparam 0 .............................. <me>
  [164] pusharglist 1 ........................... <me>
  [166] objcall 89 .............................. <me.getID()>
  [168] pusharglist 0 ........................... <>
  [170] extcall 118 ............................. <VOID>
  [172] getprop 114 ............................. <pTimeLeft>
  [174] pushint8 1 .............................. <1>
  [176] add ..................................... <pTimeLeft + 1>
  [177] pusharglistnoret 6 ...................... <#trading_button_timeout, 1000, #updateConfirmButton, me.getID(), VOID, pTimeLeft + 1>
  [179] extcall 116 ............................. createTimeout(#trading_button_timeout, 1000, #updateConfirmButton, me.getID(), VOID, pTimeLeft + 1)
  [181] getlocal 0 .............................. <tWindow>
  [183] pushsymb 27 ............................. <#eventProcTradingConfirmation>
  [185] getparam 0 .............................. <me>
  [187] pusharglist 1 ........................... <me>
  [189] objcall 89 .............................. <me.getID()>
  [191] pushsymb 119 ............................ <#mouseUp>
  [193] pusharglistnoret 4 ...................... <tWindow, #eventProcTradingConfirmation, me.getID(), #mouseUp>
  [195] objcall 91 .............................. tWindow.registerProcedure(#eventProcTradingConfirmation, me.getID(), #mouseUp)
  [197] ret
end

on updateConfirmButton me
  [  0] getprop 30 .............................. <pTraderWndID>
  [  2] pusharglist 1 ........................... <pTraderWndID>
  [  4] extcall 87 .............................. <getWindow(pTraderWndID)>
  [  6] setlocal 0 .............................. tWindow = getWindow(pTraderWndID)
  [  8] getlocal 0 .............................. <tWindow>
  [ 10] not ..................................... <not tWindow>
  [ 11] jmpifz [ 19] ............................ if not tWindow then
  [ 14] pushzero ................................ <0>
  [ 15] pusharglistnoret 1 ...................... <0>
  [ 17] extcall 50 .............................. return 0
  [ 19] getlocal 0 .............................. <tWindow>
  [ 21] pushcons 28 ............................. <"trading_accept">
  [ 23] pusharglist 2 ........................... <tWindow, "trading_accept">
  [ 25] objcall 94 .............................. <tWindow.elementExists("trading_accept")>
  [ 27] not ..................................... <not tWindow.elementExists("trading_accept")>
  [ 28] jmpifz [ 36] ............................ if not tWindow.elementExists("trading_accept") then
  [ 31] pushzero ................................ <0>
  [ 32] pusharglistnoret 1 ...................... <0>
  [ 34] extcall 50 .............................. return 0
  [ 36] getlocal 0 .............................. <tWindow>
  [ 38] pushcons 28 ............................. <"trading_accept">
  [ 40] pusharglist 2 ........................... <tWindow, "trading_accept">
  [ 42] objcall 92 .............................. <tWindow.getElement("trading_accept")>
  [ 44] setlocal 1 .............................. tButton = tWindow.getElement("trading_accept")
  [ 46] getprop 114 ............................. <pTimeLeft>
  [ 48] pushzero ................................ <0>
  [ 49] gt ...................................... <pTimeLeft > 0>
  [ 50] jmpifz [ 85] ............................ if pTimeLeft > 0 then / else
  [ 53] getlocal 1 .............................. <tButton>
  [ 55] pushzero ................................ <0>
  [ 56] nteq .................................... <tButton <> 0>
  [ 57] jmpifz [ 75] ............................ if tButton <> 0 then
  [ 60] getlocal 1 .............................. <tButton>
  [ 62] pushcons 29 ............................. <"trading_wait">
  [ 64] pusharglist 1 ........................... <"trading_wait">
  [ 66] extcall 31 .............................. <getText("trading_wait")>
  [ 68] getprop 114 ............................. <pTimeLeft>
  [ 70] joinpadstr .............................. <getText("trading_wait") && pTimeLeft>
  [ 71] pusharglistnoret 2 ...................... <tButton, getText("trading_wait") && pTimeLeft>
  [ 73] objcall 93 .............................. tButton.setText(getText("trading_wait") && pTimeLeft)
  [ 75] getprop 114 ............................. <pTimeLeft>
  [ 77] pushint8 1 .............................. <1>
  [ 79] sub ..................................... <pTimeLeft - 1>
  [ 80] setprop 114 ............................. pTimeLeft = pTimeLeft - 1
  [ 82] jmp [116]
  [ 85] getlocal 1 .............................. <tButton>
  [ 87] pushzero ................................ <0>
  [ 88] nteq .................................... <tButton <> 0>
  [ 89] jmpifz [104] ............................ if tButton <> 0 then
  [ 92] getlocal 1 .............................. <tButton>
  [ 94] pushcons 30 ............................. <"trading_confirm">
  [ 96] pusharglist 1 ........................... <"trading_confirm">
  [ 98] extcall 31 .............................. <getText("trading_confirm")>
  [100] pusharglistnoret 2 ...................... <tButton, getText("trading_confirm")>
  [102] objcall 93 .............................. tButton.setText(getText("trading_confirm"))
  [104] getlocal 0 .............................. <tWindow>
  [106] pushcons 28 ............................. <"trading_accept">
  [108] pusharglist 2 ........................... <tWindow, "trading_accept">
  [110] objcall 92 .............................. <tWindow.getElement("trading_accept")>
  [112] pusharglistnoret 1 ...................... <tWindow.getElement("trading_accept")>
  [114] objcall 121 ............................. tWindow.getElement("trading_accept").Activate()
  [116] ret
end

on showWaitingView me
  [  0] getprop 30 .............................. <pTraderWndID>
  [  2] pusharglist 1 ........................... <pTraderWndID>
  [  4] extcall 87 .............................. <getWindow(pTraderWndID)>
  [  6] setlocal 0 .............................. tWindow = getWindow(pTraderWndID)
  [  8] getlocal 0 .............................. <tWindow>
  [ 10] not ..................................... <not tWindow>
  [ 11] jmpifz [ 30] ............................ if not tWindow then
  [ 14] getparam 0 .............................. <me>
  [ 16] pushcons 31 ............................. <"Trade window doesn't exist.">
  [ 18] pushsymb 5 .............................. <#showConfirmationView>
  [ 20] pushsymb 124 ............................ <#major>
  [ 22] pusharglist 4 ........................... <me, "Trade window doesn't exist.", #showConfirmationView, #major>
  [ 24] extcall 123 ............................. <error(me, "Trade window doesn't exist.", #showConfirmationView, #major)>
  [ 26] pusharglistnoret 1 ...................... <error(me, "Trade window doesn't exist.", #showConfirmationView, #major)>
  [ 28] extcall 50 .............................. return error(me, "Trade window doesn't exist.", #showConfirmationView, #major)
  [ 30] getparam 0 .............................. <me>
  [ 32] pushcons 32 ............................. <"trading_waiting_info">
  [ 34] pusharglist 1 ........................... <"trading_waiting_info">
  [ 36] extcall 31 .............................. <getText("trading_waiting_info")>
  [ 38] pusharglistnoret 2 ...................... <me, getText("trading_waiting_info")>
  [ 40] objcall 20 .............................. me.showInfo(getText("trading_waiting_info"))
  [ 42] pushsymb 125 ............................ <#wait>
  [ 44] setprop 28 .............................. pState = #wait
  [ 46] getparam 0 .............................. <me>
  [ 48] pusharglistnoret 1 ...................... <me>
  [ 50] objcall 9 ............................... me.updateButtons()
  [ 52] ret
end

on close me, tdata
  [  0] pushsymb 77 ............................. <#room>
  [  2] pusharglist 1 ........................... <#room>
  [  4] extcall 126 ............................. <threadExists(#room)>
  [  6] jmpifz [ 59] ............................ if threadExists(#room) then
  [  9] pushsymb 77 ............................. <#room>
  [ 11] pusharglist 1 ........................... <#room>
  [ 13] extcall 76 .............................. <getThread(#room)>
  [ 15] pusharglist 1 ........................... <getThread(#room)>
  [ 17] objcall 78 .............................. <getThread(#room).getInterface()>
  [ 19] setlocal 0 .............................. tRoomInterface = getThread(#room).getInterface()
  [ 21] getlocal 0 .............................. <tRoomInterface>
  [ 23] pushzero ................................ <0>
  [ 24] nteq .................................... <tRoomInterface <> 0>
  [ 25] jmpifz [ 59] ............................ if tRoomInterface <> 0 then
  [ 28] getlocal 0 .............................. <tRoomInterface>
  [ 30] pushsymb 80 ............................. <#clickAction>
  [ 32] pushcons 33 ............................. <"moveHuman">
  [ 34] pusharglistnoret 3 ...................... <tRoomInterface, #clickAction, "moveHuman">
  [ 36] objcall 81 .............................. tRoomInterface.setProperty(#clickAction, "moveHuman")
  [ 38] getlocal 0 .............................. <tRoomInterface>
  [ 40] pusharglist 1 ........................... <tRoomInterface>
  [ 42] objcall 127 ............................. <tRoomInterface.getObjectMover()>
  [ 44] setlocal 1 .............................. tObjMover = tRoomInterface.getObjectMover()
  [ 46] getlocal 1 .............................. <tObjMover>
  [ 48] pushzero ................................ <0>
  [ 49] nteq .................................... <tObjMover <> 0>
  [ 50] jmpifz [ 59] ............................ if tObjMover <> 0 then
  [ 53] getlocal 1 .............................. <tObjMover>
  [ 55] pusharglistnoret 1 ...................... <tObjMover>
  [ 57] objcall 128 ............................. tObjMover.clear()
  [ 59] getprop 30 .............................. <pTraderWndID>
  [ 61] pusharglist 1 ........................... <pTraderWndID>
  [ 63] extcall 72 .............................. <windowExists(pTraderWndID)>
  [ 65] jmpifz [111] ............................ if windowExists(pTraderWndID) then
  [ 68] pushzero ................................ <0>
  [ 69] setprop 32 .............................. pAcceptFlagMe = 0
  [ 71] pushzero ................................ <0>
  [ 72] setprop 33 .............................. pAcceptFlagHe = 0
  [ 74] pusharglist 0 ........................... <[]>
  [ 76] pushlist ................................ <[]>
  [ 77] setprop 34 .............................. pItemListMe = []
  [ 79] pusharglist 0 ........................... <[]>
  [ 81] pushlist ................................ <[]>
  [ 82] setprop 35 .............................. pItemListHe = []
  [ 84] pusharglist 0 ........................... <[]>
  [ 86] pushlist ................................ <[]>
  [ 87] setprop 36 .............................. pMyStripItems = []
  [ 89] pusharglist 0 ........................... <[:]>
  [ 91] pushproplist ............................ <[:]>
  [ 92] setprop 40 .............................. pMySlotProps = [:]
  [ 94] pusharglist 0 ........................... <[:]>
  [ 96] pushproplist ............................ <[:]>
  [ 97] setprop 41 .............................. pHerSlotProps = [:]
  [ 99] getprop 30 .............................. <pTraderWndID>
  [101] pusharglistnoret 1 ...................... <pTraderWndID>
  [103] extcall 129 ............................. removeWindow(pTraderWndID)
  [105] getprop 42 .............................. <pConfirmationWndID>
  [107] pusharglistnoret 1 ...................... <pConfirmationWndID>
  [109] extcall 129 ............................. removeWindow(pConfirmationWndID)
  [111] getparam 0 .............................. <me>
  [113] pusharglistnoret 1 ...................... <me>
  [115] objcall 22 .............................. me.removeDetailsBubble()
  [117] pushsymb 29 ............................. <#closed>
  [119] setprop 28 .............................. pState = #closed
  [121] pushint8 1 .............................. <1>
  [123] pusharglistnoret 1 ...................... <1>
  [125] extcall 50 .............................. return 1
  [127] ret
end

on updateButtons me
  [  0] getprop 30 .............................. <pTraderWndID>
  [  2] pusharglist 1 ........................... <pTraderWndID>
  [  4] extcall 87 .............................. <getWindow(pTraderWndID)>
  [  6] setlocal 0 .............................. tWindow = getWindow(pTraderWndID)
  [  8] getlocal 0 .............................. <tWindow>
  [ 10] not ..................................... <not tWindow>
  [ 11] jmpifz [ 19] ............................ if not tWindow then
  [ 14] pushzero ................................ <0>
  [ 15] pusharglistnoret 1 ...................... <0>
  [ 17] extcall 50 .............................. return 0
  [ 19] getlocal 0 .............................. <tWindow>
  [ 21] pushcons 28 ............................. <"trading_accept">
  [ 23] pusharglist 2 ........................... <tWindow, "trading_accept">
  [ 25] objcall 92 .............................. <tWindow.getElement("trading_accept")>
  [ 27] setlocal 1 .............................. tAcceptButton = tWindow.getElement("trading_accept")
  [ 29] getlocal 1 .............................. <tAcceptButton>
  [ 31] not ..................................... <not tAcceptButton>
  [ 32] jmpifz [ 40] ............................ if not tAcceptButton then
  [ 35] pushzero ................................ <0>
  [ 36] pusharglistnoret 1 ...................... <0>
  [ 38] extcall 50 .............................. return 0
  [ 40] getprop 28 .............................. <pState>
  [ 42] peek 0 .................................. case pState of
  [ 44] pushsymb 29 ............................. <#closed>
  [ 46] eq
  [ 47] jmpifz [ 60] ............................ (case) #closed:
  [ 50] pop 1
  [ 52] pushzero ................................ <0>
  [ 53] pusharglistnoret 1 ...................... <0>
  [ 55] extcall 50 .............................. return 0
  [ 57] jmp [183]
  [ 60] peek 0
  [ 62] pushsymb 3 .............................. <#open>
  [ 64] eq
  [ 65] jmpifz [134] ............................ (case) #open:
  [ 68] getprop 32 .............................. <pAcceptFlagMe>
  [ 70] jmpifz [ 88] ............................ if pAcceptFlagMe then / else
  [ 73] getlocal 1 .............................. <tAcceptButton>
  [ 75] pushcons 34 ............................. <"trading_modify">
  [ 77] pusharglist 1 ........................... <"trading_modify">
  [ 79] extcall 31 .............................. <getText("trading_modify")>
  [ 81] pusharglistnoret 2 ...................... <tAcceptButton, getText("trading_modify")>
  [ 83] objcall 93 .............................. tAcceptButton.setText(getText("trading_modify"))
  [ 85] jmp [100]
  [ 88] getlocal 1 .............................. <tAcceptButton>
  [ 90] pushcons 28 ............................. <"trading_accept">
  [ 92] pusharglist 1 ........................... <"trading_accept">
  [ 94] extcall 31 .............................. <getText("trading_accept")>
  [ 96] pusharglistnoret 2 ...................... <tAcceptButton, getText("trading_accept")>
  [ 98] objcall 93 .............................. tAcceptButton.setText(getText("trading_accept"))
  [100] getprop 40 .............................. <pMySlotProps>
  [102] getobjprop 105 .......................... <pMySlotProps.count>
  [104] pushzero ................................ <0>
  [105] eq ...................................... <pMySlotProps.count = 0>
  [106] getprop 41 .............................. <pHerSlotProps>
  [108] getobjprop 105 .......................... <pHerSlotProps.count>
  [110] pushzero ................................ <0>
  [111] eq ...................................... <pHerSlotProps.count = 0>
  [112] and ..................................... <(pMySlotProps.count = 0) and (pHerSlotProps.count = 0)>
  [113] jmpifz [125] ............................ if (pMySlotProps.count = 0) and (pHerSlotProps.count = 0) then / else
  [116] getlocal 1 .............................. <tAcceptButton>
  [118] pusharglistnoret 1 ...................... <tAcceptButton>
  [120] objcall 115 ............................. tAcceptButton.deactivate()
  [122] jmp [131]
  [125] getlocal 1 .............................. <tAcceptButton>
  [127] pusharglistnoret 1 ...................... <tAcceptButton>
  [129] objcall 121 ............................. tAcceptButton.Activate()
  [131] jmp [183]
  [134] peek 0
  [136] pushsymb 110 ............................ <#confirm>
  [138] eq
  [139] jmpifz [157] ............................ (case) #confirm:
  [142] getlocal 1 .............................. <tAcceptButton>
  [144] pushcons 30 ............................. <"trading_confirm">
  [146] pusharglist 1 ........................... <"trading_confirm">
  [148] extcall 31 .............................. <getText("trading_confirm")>
  [150] pusharglistnoret 2 ...................... <tAcceptButton, getText("trading_confirm")>
  [152] objcall 93 .............................. tAcceptButton.setText(getText("trading_confirm"))
  [154] jmp [183]
  [157] peek 0
  [159] pushsymb 125 ............................ <#wait>
  [161] eq
  [162] jmpifz [183] ............................ (case) #wait:
  [165] getlocal 1 .............................. <tAcceptButton>
  [167] pushcons 30 ............................. <"trading_confirm">
  [169] pusharglist 1 ........................... <"trading_confirm">
  [171] extcall 31 .............................. <getText("trading_confirm")>
  [173] pusharglistnoret 2 ...................... <tAcceptButton, getText("trading_confirm")>
  [175] objcall 93 .............................. tAcceptButton.setText(getText("trading_confirm"))
  [177] getlocal 1 .............................. <tAcceptButton>
  [179] pusharglistnoret 1 ...................... <tAcceptButton>
  [181] objcall 115 ............................. tAcceptButton.deactivate()
  [183] pop 1 ................................... end case
  [185] ret
end

on accept me, tuser, tValue
  [  0] getprop 28 .............................. <pState>
  [  2] pushsymb 29 ............................. <#closed>
  [  4] eq ...................................... <pState = #closed>
  [  5] jmpifz [ 13] ............................ if pState = #closed then
  [  8] pushzero ................................ <0>
  [  9] pusharglistnoret 1 ...................... <0>
  [ 11] extcall 50 .............................. return 0
  [ 13] getparam 1 .............................. <tuser>
  [ 15] pusharglist 1 ........................... <tuser>
  [ 17] extcall 54 .............................. <voidp(tuser)>
  [ 19] not ..................................... <not voidp(tuser)>
  [ 20] getparam 2 .............................. <tValue>
  [ 22] pusharglist 1 ........................... <tValue>
  [ 24] extcall 54 .............................. <voidp(tValue)>
  [ 26] not ..................................... <not voidp(tValue)>
  [ 27] and ..................................... <not voidp(tuser) and not voidp(tValue)>
  [ 28] jmpifz [ 58] ............................ if not voidp(tuser) and not voidp(tValue) then
  [ 31] getparam 1 .............................. <tuser>
  [ 33] getprop 65 .............................. <pHerId>
  [ 35] eq ...................................... <tuser = pHerId>
  [ 36] jmpifz [ 46] ............................ if tuser = pHerId then / else
  [ 39] getparam 2 .............................. <tValue>
  [ 41] setprop 33 .............................. pAcceptFlagHe = tValue
  [ 43] jmp [ 58]
  [ 46] getparam 1 .............................. <tuser>
  [ 48] getprop 63 .............................. <pMyId>
  [ 50] eq ...................................... <tuser = pMyId>
  [ 51] jmpifz [ 58] ............................ if tuser = pMyId then
  [ 54] getparam 2 .............................. <tValue>
  [ 56] setprop 32 .............................. pAcceptFlagMe = tValue
  [ 58] getprop 30 .............................. <pTraderWndID>
  [ 60] pusharglist 1 ........................... <pTraderWndID>
  [ 62] extcall 87 .............................. <getWindow(pTraderWndID)>
  [ 64] setlocal 0 .............................. tWndObj = getWindow(pTraderWndID)
  [ 66] getlocal 0 .............................. <tWndObj>
  [ 68] pushzero ................................ <0>
  [ 69] eq ...................................... <tWndObj = 0>
  [ 70] jmpifz [ 78] ............................ if tWndObj = 0 then
  [ 73] pushzero ................................ <0>
  [ 74] pusharglistnoret 1 ...................... <0>
  [ 76] extcall 50 .............................. return 0
  [ 78] pushcons 35 ............................. <"trading_lock_">
  [ 80] pusharglist 1 ........................... <["trading_lock_"]>
  [ 82] pushlist ................................ <["trading_lock_"]>
  [ 83] setlocal 1 .............................. tLockElements = ["trading_lock_"]
  [ 85] getlocal 1 .............................. <tLockElements>
  [ 87] peek 0
  [ 89] pusharglist 1
  [ 91] extcall 105
  [ 93] pushint8 1
  [ 95] peek 0
  [ 97] peek 2
  [ 99] lteq
  [100] jmpifz [184] ............................ repeat with tElemName in tLockElements
  [103] peek 2
  [105] peek 1
  [107] pusharglist 2
  [109] extcall 75
  [111] setlocal 2
  [113] getlocal 0 .............................. <tWndObj>
  [115] getlocal 2 .............................. <tElemName>
  [117] pushcons 36 ............................. <"my">
  [119] joinstr ................................. <tElemName & "my">
  [120] pusharglist 2 ........................... <tWndObj, tElemName & "my">
  [122] objcall 94 .............................. <tWndObj.elementExists(tElemName & "my")>
  [124] jmpifz [146] ............................ if tWndObj.elementExists(tElemName & "my") then
  [127] getlocal 0 .............................. <tWndObj>
  [129] getlocal 2 .............................. <tElemName>
  [131] pushcons 36 ............................. <"my">
  [133] joinstr ................................. <tElemName & "my">
  [134] pusharglist 2 ........................... <tWndObj, tElemName & "my">
  [136] objcall 92 .............................. <tWndObj.getElement(tElemName & "my")>
  [138] pushsymb 106 ............................ <#visible>
  [140] getprop 32 .............................. <pAcceptFlagMe>
  [142] pusharglistnoret 3 ...................... <tWndObj.getElement(tElemName & "my"), #visible, pAcceptFlagMe>
  [144] objcall 81 .............................. tWndObj.getElement(tElemName & "my").setProperty(#visible, pAcceptFlagMe)
  [146] getlocal 0 .............................. <tWndObj>
  [148] getlocal 2 .............................. <tElemName>
  [150] pushcons 37 ............................. <"his">
  [152] joinstr ................................. <tElemName & "his">
  [153] pusharglist 2 ........................... <tWndObj, tElemName & "his">
  [155] objcall 94 .............................. <tWndObj.elementExists(tElemName & "his")>
  [157] jmpifz [179] ............................ if tWndObj.elementExists(tElemName & "his") then
  [160] getlocal 0 .............................. <tWndObj>
  [162] getlocal 2 .............................. <tElemName>
  [164] pushcons 37 ............................. <"his">
  [166] joinstr ................................. <tElemName & "his">
  [167] pusharglist 2 ........................... <tWndObj, tElemName & "his">
  [169] objcall 92 .............................. <tWndObj.getElement(tElemName & "his")>
  [171] pushsymb 106 ............................ <#visible>
  [173] getprop 33 .............................. <pAcceptFlagHe>
  [175] pusharglistnoret 3 ...................... <tWndObj.getElement(tElemName & "his"), #visible, pAcceptFlagHe>
  [177] objcall 81 .............................. tWndObj.getElement(tElemName & "his").setProperty(#visible, pAcceptFlagHe)
  [179] pushint8 1
  [181] add
  [182] endrepeat [ 95]
  [184] pop 3
  [186] getparam 0 .............................. <me>
  [188] pusharglistnoret 1 ...................... <me>
  [190] objcall 9 ............................... me.updateButtons()
  [192] getlocal 0 .............................. <tWndObj>
  [194] pushcons 38 ............................. <"trading_lock_icon_my">
  [196] pusharglist 2 ........................... <tWndObj, "trading_lock_icon_my">
  [198] objcall 94 .............................. <tWndObj.elementExists("trading_lock_icon_my")>
  [200] jmpifz [235] ............................ if tWndObj.elementExists("trading_lock_icon_my") then
  [203] getprop 32 .............................. <pAcceptFlagMe>
  [205] jmpifz [215] ............................ if pAcceptFlagMe then / else
  [208] pushcons 39 ............................. <"trading_lock_closed">
  [210] setlocal 3 .............................. tmember = "trading_lock_closed"
  [212] jmp [219]
  [215] pushcons 40 ............................. <"trading_lock_open">
  [217] setlocal 3 .............................. tmember = "trading_lock_open"
  [219] getlocal 0 .............................. <tWndObj>
  [221] pushcons 38 ............................. <"trading_lock_icon_my">
  [223] pusharglist 2 ........................... <tWndObj, "trading_lock_icon_my">
  [225] objcall 92 .............................. <tWndObj.getElement("trading_lock_icon_my")>
  [227] pushsymb 134 ............................ <#member>
  [229] getlocal 3 .............................. <tmember>
  [231] pusharglistnoret 3 ...................... <tWndObj.getElement("trading_lock_icon_my"), #member, tmember>
  [233] objcall 81 .............................. tWndObj.getElement("trading_lock_icon_my").setProperty(#member, tmember)
  [235] getlocal 0 .............................. <tWndObj>
  [237] pushcons 41 ............................. <"trading_lock_icon_his">
  [239] pusharglist 2 ........................... <tWndObj, "trading_lock_icon_his">
  [241] objcall 94 .............................. <tWndObj.elementExists("trading_lock_icon_his")>
  [243] jmpifz [278] ............................ if tWndObj.elementExists("trading_lock_icon_his") then
  [246] getprop 33 .............................. <pAcceptFlagHe>
  [248] jmpifz [258] ............................ if pAcceptFlagHe then / else
  [251] pushcons 39 ............................. <"trading_lock_closed">
  [253] setlocal 3 .............................. tmember = "trading_lock_closed"
  [255] jmp [262]
  [258] pushcons 40 ............................. <"trading_lock_open">
  [260] setlocal 3 .............................. tmember = "trading_lock_open"
  [262] getlocal 0 .............................. <tWndObj>
  [264] pushcons 41 ............................. <"trading_lock_icon_his">
  [266] pusharglist 2 ........................... <tWndObj, "trading_lock_icon_his">
  [268] objcall 92 .............................. <tWndObj.getElement("trading_lock_icon_his")>
  [270] pushsymb 134 ............................ <#member>
  [272] getlocal 3 .............................. <tmember>
  [274] pusharglistnoret 3 ...................... <tWndObj.getElement("trading_lock_icon_his"), #member, tmember>
  [276] objcall 81 .............................. tWndObj.getElement("trading_lock_icon_his").setProperty(#member, tmember)
  [278] pushint8 1 .............................. <1>
  [280] pusharglistnoret 1 ...................... <1>
  [282] extcall 50 .............................. return 1
  [284] ret
end

on clearSlots me
  [  0] getprop 30 .............................. <pTraderWndID>
  [  2] pusharglist 1 ........................... <pTraderWndID>
  [  4] extcall 87 .............................. <getWindow(pTraderWndID)>
  [  6] setlocal 0 .............................. tWindow = getWindow(pTraderWndID)
  [  8] getlocal 0 .............................. <tWindow>
  [ 10] not ..................................... <not tWindow>
  [ 11] jmpifz [ 19] ............................ if not tWindow then
  [ 14] pushzero ................................ <0>
  [ 15] pusharglistnoret 1 ...................... <0>
  [ 17] extcall 50 .............................. return 0
  [ 19] pushint8 1 .............................. <1>
  [ 21] setlocal 1
  [ 23] getlocal 1
  [ 25] getprop 37 .............................. <pMaxTradeItems>
  [ 27] lteq
  [ 28] jmpifz [183] ............................ repeat with tSlotNum = 1 to pMaxTradeItems
  [ 31] getlocal 0 .............................. <tWindow>
  [ 33] pushcons 14 ............................. <"trading_mystuff_">
  [ 35] getlocal 1 .............................. <tSlotNum>
  [ 37] joinstr ................................. <"trading_mystuff_" & tSlotNum>
  [ 38] pusharglist 2 ........................... <tWindow, "trading_mystuff_" & tSlotNum>
  [ 40] objcall 92 .............................. <tWindow.getElement("trading_mystuff_" & tSlotNum)>
  [ 42] setlocal 2 .............................. tSlot = tWindow.getElement("trading_mystuff_" & tSlotNum)
  [ 44] getlocal 2 .............................. <tSlot>
  [ 46] pushzero ................................ <0>
  [ 47] nteq .................................... <tSlot <> 0>
  [ 48] jmpifz [ 73] ............................ if tSlot <> 0 then
  [ 51] getlocal 2 .............................. <tSlot>
  [ 53] pusharglistnoret 1 ...................... <tSlot>
  [ 55] objcall 140 ............................. tSlot.clearImage()
  [ 57] getlocal 2 .............................. <tSlot>
  [ 59] pushint8 100 ............................ <100>
  [ 61] pushint8 100 ............................ <100>
  [ 63] pushint8 100 ............................ <100>
  [ 65] pusharglist 3 ........................... <100, 100, 100>
  [ 67] extcall 141 ............................. <rgb(100, 100, 100)>
  [ 69] pusharglistnoret 2 ...................... <tSlot, rgb(100, 100, 100)>
  [ 71] objcall 142 ............................. tSlot.draw(rgb(100, 100, 100))
  [ 73] getlocal 0 .............................. <tWindow>
  [ 75] pushcons 18 ............................. <"trading_mycount_">
  [ 77] getlocal 1 .............................. <tSlotNum>
  [ 79] joinstr ................................. <"trading_mycount_" & tSlotNum>
  [ 80] pusharglist 2 ........................... <tWindow, "trading_mycount_" & tSlotNum>
  [ 82] objcall 92 .............................. <tWindow.getElement("trading_mycount_" & tSlotNum)>
  [ 84] setlocal 3 .............................. tCount = tWindow.getElement("trading_mycount_" & tSlotNum)
  [ 86] getlocal 3 .............................. <tCount>
  [ 88] pushzero ................................ <0>
  [ 89] nteq .................................... <tCount <> 0>
  [ 90] jmpifz [101] ............................ if tCount <> 0 then
  [ 93] getlocal 3 .............................. <tCount>
  [ 95] pushcons 42 ............................. <EMPTY>
  [ 97] pusharglistnoret 2 ...................... <tCount, EMPTY>
  [ 99] objcall 93 .............................. tCount.setText(EMPTY)
  [101] getlocal 0 .............................. <tWindow>
  [103] pushcons 22 ............................. <"trading_herstuff_">
  [105] getlocal 1 .............................. <tSlotNum>
  [107] joinstr ................................. <"trading_herstuff_" & tSlotNum>
  [108] pusharglist 2 ........................... <tWindow, "trading_herstuff_" & tSlotNum>
  [110] objcall 92 .............................. <tWindow.getElement("trading_herstuff_" & tSlotNum)>
  [112] setlocal 2 .............................. tSlot = tWindow.getElement("trading_herstuff_" & tSlotNum)
  [114] getlocal 2 .............................. <tSlot>
  [116] pushzero ................................ <0>
  [117] nteq .................................... <tSlot <> 0>
  [118] jmpifz [146] ............................ if tSlot <> 0 then
  [121] getlocal 2 .............................. <tSlot>
  [123] pusharglistnoret 1 ...................... <tSlot>
  [125] objcall 140 ............................. tSlot.clearImage()
  [127] getlocal 2 .............................. <tSlot>
  [129] pushint16 200 ........................... <200>
  [132] pushint16 200 ........................... <200>
  [135] pushint16 200 ........................... <200>
  [138] pusharglist 3 ........................... <200, 200, 200>
  [140] extcall 141 ............................. <rgb(200, 200, 200)>
  [142] pusharglistnoret 2 ...................... <tSlot, rgb(200, 200, 200)>
  [144] objcall 142 ............................. tSlot.draw(rgb(200, 200, 200))
  [146] getlocal 0 .............................. <tWindow>
  [148] pushcons 23 ............................. <"trading_hercount_">
  [150] getlocal 1 .............................. <tSlotNum>
  [152] joinstr ................................. <"trading_hercount_" & tSlotNum>
  [153] pusharglist 2 ........................... <tWindow, "trading_hercount_" & tSlotNum>
  [155] objcall 92 .............................. <tWindow.getElement("trading_hercount_" & tSlotNum)>
  [157] setlocal 3 .............................. tCount = tWindow.getElement("trading_hercount_" & tSlotNum)
  [159] getlocal 3 .............................. <tCount>
  [161] pushzero ................................ <0>
  [162] nteq .................................... <tCount <> 0>
  [163] jmpifz [174] ............................ if tCount <> 0 then
  [166] getlocal 3 .............................. <tCount>
  [168] pushcons 42 ............................. <EMPTY>
  [170] pusharglistnoret 2 ...................... <tCount, EMPTY>
  [172] objcall 93 .............................. tCount.setText(EMPTY)
  [174] pushint8 1
  [176] getlocal 1
  [178] add
  [179] setlocal 1
  [181] endrepeat [ 23]
  [183] ret
end

on Refresh me, tTradeItems
  [  0] getparam 0 .............................. <me>
  [  2] pusharglistnoret 1 ...................... <me>
  [  4] objcall 11 .............................. me.clearSlots()
  [  6] pusharglist 0 ........................... <[]>
  [  8] pushlist ................................ <[]>
  [  9] setprop 36 .............................. pMyStripItems = []
  [ 11] getprop 30 .............................. <pTraderWndID>
  [ 13] pusharglist 1 ........................... <pTraderWndID>
  [ 15] extcall 87 .............................. <getWindow(pTraderWndID)>
  [ 17] setlocal 0 .............................. tWndObj = getWindow(pTraderWndID)
  [ 19] getlocal 0 .............................. <tWndObj>
  [ 21] pushzero ................................ <0>
  [ 22] eq ...................................... <tWndObj = 0>
  [ 23] jmpifz [ 31] ............................ if tWndObj = 0 then
  [ 26] pushzero ................................ <0>
  [ 27] pusharglistnoret 1 ...................... <0>
  [ 29] extcall 50 .............................. return 0
  [ 31] getparam 1 .............................. <tTradeItems>
  [ 33] getobjprop 146 .......................... <tTradeItems.ilk>
  [ 35] pushsymb 147 ............................ <#propList>
  [ 37] nteq .................................... <tTradeItems.ilk <> #propList>
  [ 38] jmpifz [ 46] ............................ if tTradeItems.ilk <> #propList then
  [ 41] pushzero ................................ <0>
  [ 42] pusharglistnoret 1 ...................... <0>
  [ 44] extcall 50 .............................. return 0
  [ 46] pushsymb 51 ............................. <#me>
  [ 48] pushzero ................................ <0>
  [ 49] pushsymb 148 ............................ <#he>
  [ 51] pushzero ................................ <0>
  [ 52] pusharglist 4 ........................... <[#me: 0, #he: 0]>
  [ 54] pushproplist ............................ <[#me: 0, #he: 0]>
  [ 55] setlocal 1 .............................. tCreditFurniPrice = [#me: 0, #he: 0]
  [ 57] getparam 1 .............................. <tTradeItems>
  [ 59] getprop 63 .............................. <pMyId>
  [ 61] pusharglist 2 ........................... <tTradeItems, pMyId>
  [ 63] objcall 149 ............................. <tTradeItems.getaProp(pMyId)>
  [ 65] setprop 34 .............................. pItemListMe = tTradeItems.getaProp(pMyId)
  [ 67] getprop 34 .............................. <pItemListMe>
  [ 69] pusharglist 1 ........................... <pItemListMe>
  [ 71] extcall 150 ............................. <listp(pItemListMe)>
  [ 73] not ..................................... <not listp(pItemListMe)>
  [ 74] jmpifz [ 82] ............................ if not listp(pItemListMe) then
  [ 77] pushzero ................................ <0>
  [ 78] pusharglistnoret 1 ...................... <0>
  [ 80] extcall 50 .............................. return 0
  [ 82] pusharglist 0 ........................... <[:]>
  [ 84] pushproplist ............................ <[:]>
  [ 85] setprop 40 .............................. pMySlotProps = [:]
  [ 87] pushint8 1 .............................. <1>
  [ 89] setlocal 2
  [ 91] getlocal 2
  [ 93] getprop 34 .............................. <pItemListMe>
  [ 95] getobjprop 105 .......................... <pItemListMe.count>
  [ 97] lteq
  [ 98] jmpifz [827] ............................ repeat with i = 1 to pItemListMe.count
  [101] getprop 34 .............................. <pItemListMe>
  [103] getlocal 2 .............................. <i>
  [105] pusharglist 2 ........................... <pItemListMe, i>
  [107] objcall 75 .............................. <pItemListMe[i]>
  [109] setlocal 3 .............................. tItemData = pItemListMe[i]
  [111] getlocal 3 .............................. <tItemData>
  [113] pushsymb 151 ............................ <#class>
  [115] pusharglist 2 ........................... <tItemData, #class>
  [117] objcall 75 .............................. <tItemData[#class]>
  [119] setlocal 4 .............................. tClass = tItemData[#class]
  [121] getlocal 4 .............................. <tClass>
  [123] peek 0 .................................. case tClass of
  [125] pushcons 43 ............................. <"poster">
  [127] eq
  [128] jmpifz [150] ............................ (case) "poster":
  [131] getlocal 4 .............................. <tClass>
  [133] pushcons 44 ............................. <"_">
  [135] joinstr ................................. <tClass & "_">
  [136] getlocal 3 .............................. <tItemData>
  [138] pushsymb 152 ............................ <#data>
  [140] pusharglist 2 ........................... <tItemData, #data>
  [142] objcall 75 .............................. <tItemData[#data]>
  [144] joinstr ................................. <tClass & "_" & tItemData[#data]>
  [145] setlocal 5 .............................. tSlotID = tClass & "_" & tItemData[#data]
  [147] jmp [208]
  [150] peek 0
  [152] pushcons 45 ............................. <"song_disk">
  [154] eq
  [155] jmpifz [177] ............................ (case) "song_disk":
  [158] getlocal 4 .............................. <tClass>
  [160] pushcons 44 ............................. <"_">
  [162] joinstr ................................. <tClass & "_">
  [163] getlocal 3 .............................. <tItemData>
  [165] pushsymb 153 ............................ <#songID>
  [167] pusharglist 2 ........................... <tItemData, #songID>
  [169] objcall 75 .............................. <tItemData[#songID]>
  [171] joinstr ................................. <tClass & "_" & tItemData[#songID]>
  [172] setlocal 5 .............................. tSlotID = tClass & "_" & tItemData[#songID]
  [174] jmp [208]
  [177] peek 0
  [179] pushcons 46 ............................. <"ecotron_box">
  [181] eq
  [182] jmpifz [204] ............................ (case) "ecotron_box":
  [185] getlocal 4 .............................. <tClass>
  [187] pushcons 44 ............................. <"_">
  [189] joinstr ................................. <tClass & "_">
  [190] getlocal 3 .............................. <tItemData>
  [192] pushsymb 57 ............................. <#id>
  [194] pusharglist 2 ........................... <tItemData, #id>
  [196] objcall 75 .............................. <tItemData[#id]>
  [198] joinstr ................................. <tClass & "_" & tItemData[#id]>
  [199] setlocal 5 .............................. tSlotID = tClass & "_" & tItemData[#id]
  [201] jmp [208] ............................... (case) otherwise:
  [204] getlocal 4 .............................. <tClass>
  [206] setlocal 5 .............................. tSlotID = tClass
  [208] pop 1 ................................... end case
  [210] getprop 40 .............................. <pMySlotProps>
  [212] getlocal 5 .............................. <tSlotID>
  [214] pusharglist 2 ........................... <pMySlotProps, tSlotID>
  [216] objcall 75 .............................. <pMySlotProps[tSlotID]>
  [218] pusharglist 1 ........................... <pMySlotProps[tSlotID]>
  [220] extcall 54 .............................. <voidp(pMySlotProps[tSlotID])>
  [222] jmpifz [669] ............................ if voidp(pMySlotProps[tSlotID]) then / else
  [225] getprop 40 .............................. <pMySlotProps>
  [227] getobjprop 105 .......................... <pMySlotProps.count>
  [229] pushint8 1 .............................. <1>
  [231] add ..................................... <pMySlotProps.count + 1>
  [232] setlocal 6 .............................. tAddToSlot = pMySlotProps.count + 1
  [234] getlocal 0 .............................. <tWndObj>
  [236] pushcons 14 ............................. <"trading_mystuff_">
  [238] getlocal 6 .............................. <tAddToSlot>
  [240] joinstr ................................. <"trading_mystuff_" & tAddToSlot>
  [241] pusharglist 2 ........................... <tWndObj, "trading_mystuff_" & tAddToSlot>
  [243] objcall 94 .............................. <tWndObj.elementExists("trading_mystuff_" & tAddToSlot)>
  [245] jmpifz [666] ............................ if tWndObj.elementExists("trading_mystuff_" & tAddToSlot) then
  [248] pusharglist 0 ........................... <[:]>
  [250] pushproplist ............................ <[:]>
  [251] setlocal 7 .............................. tSlotData = [:]
  [253] getlocal 7 .............................. <tSlotData>
  [255] pushsymb 105 ............................ <#count>
  [257] pushint8 1 .............................. <1>
  [259] pusharglistnoret 3 ...................... <tSlotData, #count, 1>
  [261] objcall 154 ............................. tSlotData.setaProp(#count, 1)
  [263] getlocal 7 .............................. <tSlotData>
  [265] pushsymb 155 ............................ <#slot>
  [267] getlocal 6 .............................. <tAddToSlot>
  [269] pusharglistnoret 3 ...................... <tSlotData, #slot, tAddToSlot>
  [271] objcall 154 ............................. tSlotData.setaProp(#slot, tAddToSlot)
  [273] getlocal 7 .............................. <tSlotData>
  [275] pushsymb 156 ............................ <#name>
  [277] getlocal 3 .............................. <tItemData>
  [279] pushsymb 156 ............................ <#name>
  [281] pusharglist 2 ........................... <tItemData, #name>
  [283] objcall 75 .............................. <tItemData[#name]>
  [285] pusharglistnoret 3 ...................... <tSlotData, #name, tItemData[#name]>
  [287] objcall 154 ............................. tSlotData.setaProp(#name, tItemData[#name])
  [289] getlocal 7 .............................. <tSlotData>
  [291] pushsymb 151 ............................ <#class>
  [293] getlocal 3 .............................. <tItemData>
  [295] pushsymb 151 ............................ <#class>
  [297] pusharglist 2 ........................... <tItemData, #class>
  [299] objcall 75 .............................. <tItemData[#class]>
  [301] pusharglistnoret 3 ...................... <tSlotData, #class, tItemData[#class]>
  [303] objcall 154 ............................. tSlotData.setaProp(#class, tItemData[#class])
  [305] getlocal 7 .............................. <tSlotData>
  [307] pushsymb 157 ............................ <#stripId>
  [309] getlocal 3 .............................. <tItemData>
  [311] pushsymb 157 ............................ <#stripId>
  [313] pusharglist 2 ........................... <tItemData, #stripId>
  [315] objcall 75 .............................. <tItemData[#stripId]>
  [317] pusharglistnoret 3 ...................... <tSlotData, #stripId, tItemData[#stripId]>
  [319] objcall 154 ............................. tSlotData.setaProp(#stripId, tItemData[#stripId])
  [321] getlocal 7 .............................. <tSlotData>
  [323] pushsymb 151 ............................ <#class>
  [325] pusharglist 2 ........................... <tSlotData, #class>
  [327] objcall 75 .............................. <tSlotData[#class]>
  [329] pushcons 46 ............................. <"ecotron_box">
  [331] eq ...................................... <tSlotData[#class] = "ecotron_box">
  [332] jmpifz [414] ............................ if tSlotData[#class] = "ecotron_box" then
  [335] pushsymb 159 ............................ <#dateFormatter>
  [337] pusharglist 1 ........................... <#dateFormatter>
  [339] extcall 158 ............................. <objectExists(#dateFormatter)>
  [341] jmpifz [414] ............................ if objectExists(#dateFormatter) then
  [344] getlocal 3 .............................. <tItemData>
  [346] pushsymb 160 ............................ <#day>
  [348] pusharglist 2 ........................... <tItemData, #day>
  [350] objcall 75 .............................. <tItemData[#day]>
  [352] setlocal 8 .............................. tDay = tItemData[#day]
  [354] getlocal 3 .............................. <tItemData>
  [356] pushsymb 161 ............................ <#month>
  [358] pusharglist 2 ........................... <tItemData, #month>
  [360] objcall 75 .............................. <tItemData[#month]>
  [362] setlocal 9 .............................. tMonth = tItemData[#month]
  [364] getlocal 3 .............................. <tItemData>
  [366] pushsymb 162 ............................ <#year>
  [368] pusharglist 2 ........................... <tItemData, #year>
  [370] objcall 75 .............................. <tItemData[#year]>
  [372] setlocal 10 ............................. tYear = tItemData[#year]
  [374] pushsymb 159 ............................ <#dateFormatter>
  [376] pusharglist 1 ........................... <#dateFormatter>
  [378] extcall 60 .............................. <getObject(#dateFormatter)>
  [380] getlocal 8 .............................. <tDay>
  [382] getlocal 9 .............................. <tMonth>
  [384] getlocal 10 ............................. <tYear>
  [386] pusharglist 4 ........................... <getObject(#dateFormatter), tDay, tMonth, tYear>
  [388] objcall 163 ............................. <getObject(#dateFormatter).getLocalDate(tDay, tMonth, tYear)>
  [390] setlocal 11 ............................. tDate = getObject(#dateFormatter).getLocalDate(tDay, tMonth, tYear)
  [392] getlocal 7 .............................. <tSlotData>
  [394] pushsymb 156 ............................ <#name>
  [396] getlocal 7 .............................. <tSlotData>
  [398] pushsymb 156 ............................ <#name>
  [400] pusharglist 2 ........................... <tSlotData, #name>
  [402] objcall 75 .............................. <tSlotData[#name]>
  [404] pushcons 47 ............................. <", ">
  [406] joinstr ................................. <tSlotData[#name] & ", ">
  [407] getlocal 11 ............................. <tDate>
  [409] joinstr ................................. <tSlotData[#name] & ", " & tDate>
  [410] pusharglistnoret 3 ...................... <tSlotData, #name, tSlotData[#name] & ", " & tDate>
  [412] objcall 73 .............................. tSlotData[#name] = tSlotData[#name] & ", " & tDate
  [414] getlocal 3 .............................. <tItemData>
  [416] pushsymb 153 ............................ <#songID>
  [418] pusharglist 2 ........................... <tItemData, #songID>
  [420] objcall 75 .............................. <tItemData[#songID]>
  [422] pusharglist 1 ........................... <tItemData[#songID]>
  [424] extcall 54 .............................. <voidp(tItemData[#songID])>
  [426] not ..................................... <not voidp(tItemData[#songID])>
  [427] jmpifz [569] ............................ if not voidp(tItemData[#songID]) then
  [430] getlocal 7 .............................. <tSlotData>
  [432] pushcons 48 ............................. <"songID">
  [434] getlocal 3 .............................. <tItemData>
  [436] pushsymb 153 ............................ <#songID>
  [438] pusharglist 2 ........................... <tItemData, #songID>
  [440] objcall 75 .............................. <tItemData[#songID]>
  [442] pusharglistnoret 3 ...................... <tSlotData, "songID", tItemData[#songID]>
  [444] objcall 73 .............................. tSlotData["songID"] = tItemData[#songID]
  [446] getlocal 3 .............................. <tItemData>
  [448] pushsymb 152 ............................ <#data>
  [450] pusharglist 2 ........................... <tItemData, #data>
  [452] objcall 75 .............................. <tItemData[#data]>
  [454] pusharglist 1 ........................... <tItemData[#data]>
  [456] extcall 54 .............................. <voidp(tItemData[#data])>
  [458] not ..................................... <not voidp(tItemData[#data])>
  [459] jmpifz [569] ............................ if not voidp(tItemData[#data]) then
  [462] pushsymb 164 ............................ <#source>
  [464] getlocal 3 .............................. <tItemData>
  [466] pushsymb 152 ............................ <#data>
  [468] pusharglist 2 ........................... <tItemData, #data>
  [470] objcall 75 .............................. <tItemData[#data]>
  [472] pusharglist 2 ........................... <[#source: tItemData[#data]]>
  [474] pushproplist ............................ <[#source: tItemData[#data]]>
  [475] setlocal 12 ............................. tArray = [#source: tItemData[#data]]
  [477] pushsymb 165 ............................ <#get_disk_data>
  [479] getlocal 12 ............................. <tArray>
  [481] pusharglistnoret 2 ...................... <#get_disk_data, tArray>
  [483] extcall 55 .............................. executeMessage(#get_disk_data, tArray)
  [485] getlocal 12 ............................. <tArray>
  [487] pushsymb 166 ............................ <#author>
  [489] pusharglist 2 ........................... <tArray, #author>
  [491] objcall 75 .............................. <tArray[#author]>
  [493] pusharglist 1 ........................... <tArray[#author]>
  [495] extcall 54 .............................. <voidp(tArray[#author])>
  [497] not ..................................... <not voidp(tArray[#author])>
  [498] getlocal 12 ............................. <tArray>
  [500] pushsymb 167 ............................ <#songName>
  [502] pusharglist 2 ........................... <tArray, #songName>
  [504] objcall 75 .............................. <tArray[#songName]>
  [506] pusharglist 1 ........................... <tArray[#songName]>
  [508] extcall 54 .............................. <voidp(tArray[#songName])>
  [510] not ..................................... <not voidp(tArray[#songName])>
  [511] and ..................................... <not voidp(tArray[#author]) and not voidp(tArray[#songName])>
  [512] jmpifz [569] ............................ if not voidp(tArray[#author]) and not voidp(tArray[#songName]) then
  [515] pushcons 49 ............................. <"song_disk_trade_info">
  [517] pusharglist 1 ........................... <"song_disk_trade_info">
  [519] extcall 31 .............................. <getText("song_disk_trade_info")>
  [521] setlocal 13 ............................. tText = getText("song_disk_trade_info")
  [523] getlocal 13 ............................. <tText>
  [525] pushcons 50 ............................. <"%author%">
  [527] getlocal 12 ............................. <tArray>
  [529] pushsymb 166 ............................ <#author>
  [531] pusharglist 2 ........................... <tArray, #author>
  [533] objcall 75 .............................. <tArray[#author]>
  [535] pusharglist 3 ........................... <tText, "%author%", tArray[#author]>
  [537] extcall 168 ............................. <replaceChunks(tText, "%author%", tArray[#author])>
  [539] setlocal 13 ............................. tText = replaceChunks(tText, "%author%", tArray[#author])
  [541] getlocal 13 ............................. <tText>
  [543] pushcons 51 ............................. <"%name%">
  [545] getlocal 12 ............................. <tArray>
  [547] pushsymb 167 ............................ <#songName>
  [549] pusharglist 2 ........................... <tArray, #songName>
  [551] objcall 75 .............................. <tArray[#songName]>
  [553] pusharglist 3 ........................... <tText, "%name%", tArray[#songName]>
  [555] extcall 168 ............................. <replaceChunks(tText, "%name%", tArray[#songName])>
  [557] setlocal 13 ............................. tText = replaceChunks(tText, "%name%", tArray[#songName])
  [559] getlocal 7 .............................. <tSlotData>
  [561] pushcons 52 ............................. <"name">
  [563] getlocal 13 ............................. <tText>
  [565] pusharglistnoret 3 ...................... <tSlotData, "name", tText>
  [567] objcall 73 .............................. tSlotData["name"] = tText
  [569] getprop 40 .............................. <pMySlotProps>
  [571] getlocal 5 .............................. <tSlotID>
  [573] getlocal 7 .............................. <tSlotData>
  [575] pusharglistnoret 3 ...................... <pMySlotProps, tSlotID, tSlotData>
  [577] objcall 169 ............................. pMySlotProps.addProp(tSlotID, tSlotData)
  [579] getlocal 0 .............................. <tWndObj>
  [581] pushcons 18 ............................. <"trading_mycount_">
  [583] getlocal 6 .............................. <tAddToSlot>
  [585] joinstr ................................. <"trading_mycount_" & tAddToSlot>
  [586] pusharglist 2 ........................... <tWndObj, "trading_mycount_" & tAddToSlot>
  [588] objcall 92 .............................. <tWndObj.getElement("trading_mycount_" & tAddToSlot)>
  [590] getprop 40 .............................. <pMySlotProps>
  [592] getlocal 5 .............................. <tSlotID>
  [594] pusharglist 2 ........................... <pMySlotProps, tSlotID>
  [596] objcall 75 .............................. <pMySlotProps[tSlotID]>
  [598] pushcons 53 ............................. <"count">
  [600] pusharglist 2 ........................... <pMySlotProps[tSlotID], "count">
  [602] objcall 75 .............................. <pMySlotProps[tSlotID]["count"]>
  [604] pusharglistnoret 2 ...................... <tWndObj.getElement("trading_mycount_" & tAddToSlot), pMySlotProps[tSlotID]["count"]>
  [606] objcall 93 .............................. tWndObj.getElement("trading_mycount_" & tAddToSlot).setText(pMySlotProps[tSlotID]["count"])
  [608] getparam 0 .............................. <me>
  [610] getprop 34 .............................. <pItemListMe>
  [612] getlocal 2 .............................. <i>
  [614] pusharglist 2 ........................... <pItemListMe, i>
  [616] objcall 75 .............................. <pItemListMe[i]>
  [618] pusharglist 2 ........................... <me, pItemListMe[i]>
  [620] objcall 17 .............................. <me.createItemImg(pItemListMe[i])>
  [622] setlocal 14 ............................. tImage = me.createItemImg(pItemListMe[i])
  [624] getlocal 0 .............................. <tWndObj>
  [626] pushcons 14 ............................. <"trading_mystuff_">
  [628] getlocal 6 .............................. <tAddToSlot>
  [630] joinstr ................................. <"trading_mystuff_" & tAddToSlot>
  [631] pusharglist 2 ........................... <tWndObj, "trading_mystuff_" & tAddToSlot>
  [633] objcall 92 .............................. <tWndObj.getElement("trading_mystuff_" & tAddToSlot)>
  [635] getlocal 14 ............................. <tImage>
  [637] pusharglistnoret 2 ...................... <tWndObj.getElement("trading_mystuff_" & tAddToSlot), tImage>
  [639] objcall 170 ............................. tWndObj.getElement("trading_mystuff_" & tAddToSlot).feedImage(tImage)
  [641] getlocal 0 .............................. <tWndObj>
  [643] pushcons 14 ............................. <"trading_mystuff_">
  [645] getlocal 6 .............................. <tAddToSlot>
  [647] joinstr ................................. <"trading_mystuff_" & tAddToSlot>
  [648] pusharglist 2 ........................... <tWndObj, "trading_mystuff_" & tAddToSlot>
  [650] objcall 92 .............................. <tWndObj.getElement("trading_mystuff_" & tAddToSlot)>
  [652] pushint8 64 ............................. <64>
  [654] pushint8 64 ............................. <64>
  [656] pushint8 64 ............................. <64>
  [658] pusharglist 3 ........................... <64, 64, 64>
  [660] extcall 141 ............................. <rgb(64, 64, 64)>
  [662] pusharglistnoret 2 ...................... <tWndObj.getElement("trading_mystuff_" & tAddToSlot), rgb(64, 64, 64)>
  [664] objcall 142 ............................. tWndObj.getElement("trading_mystuff_" & tAddToSlot).draw(rgb(64, 64, 64))
  [666] jmp [749]
  [669] getprop 40 .............................. <pMySlotProps>
  [671] getlocal 5 .............................. <tSlotID>
  [673] pusharglist 2 ........................... <pMySlotProps, tSlotID>
  [675] objcall 75 .............................. <pMySlotProps[tSlotID]>
  [677] pushcons 53 ............................. <"count">
  [679] pusharglist 2 ........................... <pMySlotProps[tSlotID], "count">
  [681] objcall 75 .............................. <pMySlotProps[tSlotID]["count"]>
  [683] setlocal 15 ............................. tCount = pMySlotProps[tSlotID]["count"]
  [685] getprop 40 .............................. <pMySlotProps>
  [687] getlocal 5 .............................. <tSlotID>
  [689] pusharglist 2 ........................... <pMySlotProps, tSlotID>
  [691] objcall 75 .............................. <pMySlotProps[tSlotID]>
  [693] pushcons 54 ............................. <"slot">
  [695] pusharglist 2 ........................... <pMySlotProps[tSlotID], "slot">
  [697] objcall 75 .............................. <pMySlotProps[tSlotID]["slot"]>
  [699] setlocal 16 ............................. tSlot = pMySlotProps[tSlotID]["slot"]
  [701] getprop 40 .............................. <pMySlotProps>
  [703] getlocal 5 .............................. <tSlotID>
  [705] pusharglist 2 ........................... <pMySlotProps, tSlotID>
  [707] objcall 75 .............................. <pMySlotProps[tSlotID]>
  [709] pushcons 53 ............................. <"count">
  [711] getlocal 15 ............................. <tCount>
  [713] pushint8 1 .............................. <1>
  [715] add ..................................... <tCount + 1>
  [716] pusharglistnoret 3 ...................... <pMySlotProps[tSlotID], "count", tCount + 1>
  [718] objcall 73 .............................. pMySlotProps[tSlotID]["count"] = tCount + 1
  [720] getlocal 0 .............................. <tWndObj>
  [722] pushcons 18 ............................. <"trading_mycount_">
  [724] getlocal 16 ............................. <tSlot>
  [726] joinstr ................................. <"trading_mycount_" & tSlot>
  [727] pusharglist 2 ........................... <tWndObj, "trading_mycount_" & tSlot>
  [729] objcall 92 .............................. <tWndObj.getElement("trading_mycount_" & tSlot)>
  [731] getprop 40 .............................. <pMySlotProps>
  [733] getlocal 5 .............................. <tSlotID>
  [735] pusharglist 2 ........................... <pMySlotProps, tSlotID>
  [737] objcall 75 .............................. <pMySlotProps[tSlotID]>
  [739] pushcons 53 ............................. <"count">
  [741] pusharglist 2 ........................... <pMySlotProps[tSlotID], "count">
  [743] objcall 75 .............................. <pMySlotProps[tSlotID]["count"]>
  [745] pusharglistnoret 2 ...................... <tWndObj.getElement("trading_mycount_" & tSlot), pMySlotProps[tSlotID]["count"]>
  [747] objcall 93 .............................. tWndObj.getElement("trading_mycount_" & tSlot).setText(pMySlotProps[tSlotID]["count"])
  [749] getprop 36 .............................. <pMyStripItems>
  [751] getlocal 3 .............................. <tItemData>
  [753] pushsymb 157 ............................ <#stripId>
  [755] pusharglist 2 ........................... <tItemData, #stripId>
  [757] objcall 75 .............................. <tItemData[#stripId]>
  [759] pusharglistnoret 2 ...................... <pMyStripItems, tItemData[#stripId]>
  [761] objcall 104 ............................. pMyStripItems.add(tItemData[#stripId])
  [763] pushsymb 77 ............................. <#room>
  [765] pusharglist 1 ........................... <#room>
  [767] extcall 76 .............................. <getThread(#room)>
  [769] pusharglist 1 ........................... <getThread(#room)>
  [771] objcall 82 .............................. <getThread(#room).getComponent()>
  [773] getlocal 3 .............................. <tItemData>
  [775] pushsymb 151 ............................ <#class>
  [777] pusharglist 2 ........................... <tItemData, #class>
  [779] objcall 75 .............................. <tItemData[#class]>
  [781] pusharglist 2 ........................... <getThread(#room).getComponent(), tItemData[#class]>
  [783] objcall 171 ............................. <getThread(#room).getComponent().isCreditFurniClass(tItemData[#class])>
  [785] jmpifz [817] ............................ if getThread(#room).getComponent().isCreditFurniClass(tItemData[#class]) then
  [788] getlocal 1 .............................. <tCreditFurniPrice>
  [790] pushsymb 51 ............................. <#me>
  [792] getlocal 1 .............................. <tCreditFurniPrice>
  [794] pushsymb 51 ............................. <#me>
  [796] pusharglist 2 ........................... <tCreditFurniPrice, #me>
  [798] objcall 75 .............................. <tCreditFurniPrice[#me]>
  [800] getlocal 3 .............................. <tItemData>
  [802] pushsymb 152 ............................ <#data>
  [804] pusharglist 2 ........................... <tItemData, #data>
  [806] objcall 75 .............................. <tItemData[#data]>
  [808] pusharglist 1 ........................... <tItemData[#data]>
  [810] extcall 172 ............................. <integer(tItemData[#data])>
  [812] add ..................................... <tCreditFurniPrice[#me] + integer(tItemData[#data])>
  [813] pusharglistnoret 3 ...................... <tCreditFurniPrice, #me, tCreditFurniPrice[#me] + integer(tItemData[#data])>
  [815] objcall 73 .............................. tCreditFurniPrice[#me] = tCreditFurniPrice[#me] + integer(tItemData[#data])
  [817] pushint8 1
  [819] getlocal 2
  [821] add
  [822] setlocal 2
  [824] endrepeat [ 91]
  [827] getparam 1 .............................. <tTradeItems>
  [829] getprop 65 .............................. <pHerId>
  [831] pusharglist 2 ........................... <tTradeItems, pHerId>
  [833] objcall 149 ............................. <tTradeItems.getaProp(pHerId)>
  [835] setprop 35 .............................. pItemListHe = tTradeItems.getaProp(pHerId)
  [837] getprop 35 .............................. <pItemListHe>
  [839] pusharglist 1 ........................... <pItemListHe>
  [841] extcall 150 ............................. <listp(pItemListHe)>
  [843] not ..................................... <not listp(pItemListHe)>
  [844] jmpifz [852] ............................ if not listp(pItemListHe) then
  [847] pushzero ................................ <0>
  [848] pusharglistnoret 1 ...................... <0>
  [850] extcall 50 .............................. return 0
  [852] pusharglist 0 ........................... <[:]>
  [854] pushproplist ............................ <[:]>
  [855] setprop 41 .............................. pHerSlotProps = [:]
  [857] pushint8 1 .............................. <1>
  [859] setlocal 2
  [861] getlocal 2
  [863] getprop 35 .............................. <pItemListHe>
  [865] getobjprop 105 .......................... <pItemListHe.count>
  [867] lteq
  [868] jmpifz [1632] ........................... repeat with i = 1 to pItemListHe.count
  [871] getprop 35 .............................. <pItemListHe>
  [873] getlocal 2 .............................. <i>
  [875] pusharglist 2 ........................... <pItemListHe, i>
  [877] objcall 75 .............................. <pItemListHe[i]>
  [879] setlocal 3 .............................. tItemData = pItemListHe[i]
  [881] getlocal 3 .............................. <tItemData>
  [883] pushsymb 151 ............................ <#class>
  [885] pusharglist 2 ........................... <tItemData, #class>
  [887] objcall 75 .............................. <tItemData[#class]>
  [889] setlocal 4 .............................. tClass = tItemData[#class]
  [891] getlocal 4 .............................. <tClass>
  [893] peek 0 .................................. case tClass of
  [895] pushcons 43 ............................. <"poster">
  [897] eq
  [898] jmpifz [920] ............................ (case) "poster":
  [901] getlocal 4 .............................. <tClass>
  [903] pushcons 44 ............................. <"_">
  [905] joinstr ................................. <tClass & "_">
  [906] getlocal 3 .............................. <tItemData>
  [908] pushsymb 152 ............................ <#data>
  [910] pusharglist 2 ........................... <tItemData, #data>
  [912] objcall 75 .............................. <tItemData[#data]>
  [914] joinstr ................................. <tClass & "_" & tItemData[#data]>
  [915] setlocal 5 .............................. tSlotID = tClass & "_" & tItemData[#data]
  [917] jmp [978]
  [920] peek 0
  [922] pushcons 45 ............................. <"song_disk">
  [924] eq
  [925] jmpifz [947] ............................ (case) "song_disk":
  [928] getlocal 4 .............................. <tClass>
  [930] pushcons 44 ............................. <"_">
  [932] joinstr ................................. <tClass & "_">
  [933] getlocal 3 .............................. <tItemData>
  [935] pushsymb 153 ............................ <#songID>
  [937] pusharglist 2 ........................... <tItemData, #songID>
  [939] objcall 75 .............................. <tItemData[#songID]>
  [941] joinstr ................................. <tClass & "_" & tItemData[#songID]>
  [942] setlocal 5 .............................. tSlotID = tClass & "_" & tItemData[#songID]
  [944] jmp [978]
  [947] peek 0
  [949] pushcons 46 ............................. <"ecotron_box">
  [951] eq
  [952] jmpifz [974] ............................ (case) "ecotron_box":
  [955] getlocal 4 .............................. <tClass>
  [957] pushcons 44 ............................. <"_">
  [959] joinstr ................................. <tClass & "_">
  [960] getlocal 3 .............................. <tItemData>
  [962] pushsymb 57 ............................. <#id>
  [964] pusharglist 2 ........................... <tItemData, #id>
  [966] objcall 75 .............................. <tItemData[#id]>
  [968] joinstr ................................. <tClass & "_" & tItemData[#id]>
  [969] setlocal 5 .............................. tSlotID = tClass & "_" & tItemData[#id]
  [971] jmp [978] ............................... (case) otherwise:
  [974] getlocal 4 .............................. <tClass>
  [976] setlocal 5 .............................. tSlotID = tClass
  [978] pop 1 ................................... end case
  [980] getprop 41 .............................. <pHerSlotProps>
  [982] getlocal 5 .............................. <tSlotID>
  [984] pusharglist 2 ........................... <pHerSlotProps, tSlotID>
  [986] objcall 75 .............................. <pHerSlotProps[tSlotID]>
  [988] pusharglist 1 ........................... <pHerSlotProps[tSlotID]>
  [990] extcall 54 .............................. <voidp(pHerSlotProps[tSlotID])>
  [992] jmpifz [1488] ........................... if voidp(pHerSlotProps[tSlotID]) then / else
  [995] getprop 41 .............................. <pHerSlotProps>
  [997] getobjprop 105 .......................... <pHerSlotProps.count>
  [999] pushint8 1 .............................. <1>
  [1001] add .................................... <pHerSlotProps.count + 1>
  [1002] setlocal 6 ............................. tAddToSlot = pHerSlotProps.count + 1
  [1004] getlocal 0 ............................. <tWndObj>
  [1006] pushcons 22 ............................ <"trading_herstuff_">
  [1008] getlocal 6 ............................. <tAddToSlot>
  [1010] joinstr ................................ <"trading_herstuff_" & tAddToSlot>
  [1011] pusharglist 2 .......................... <tWndObj, "trading_herstuff_" & tAddToSlot>
  [1013] objcall 94 ............................. <tWndObj.elementExists("trading_herstuff_" & tAddToSlot)>
  [1015] jmpifz [1485] .......................... if tWndObj.elementExists("trading_herstuff_" & tAddToSlot) then
  [1018] pusharglist 0 .......................... <[:]>
  [1020] pushproplist ........................... <[:]>
  [1021] setlocal 7 ............................. tSlotData = [:]
  [1023] getlocal 7 ............................. <tSlotData>
  [1025] pushsymb 105 ........................... <#count>
  [1027] pushint8 1 ............................. <1>
  [1029] pusharglistnoret 3 ..................... <tSlotData, #count, 1>
  [1031] objcall 154 ............................ tSlotData.setaProp(#count, 1)
  [1033] getlocal 7 ............................. <tSlotData>
  [1035] pushsymb 155 ........................... <#slot>
  [1037] getlocal 6 ............................. <tAddToSlot>
  [1039] pusharglistnoret 3 ..................... <tSlotData, #slot, tAddToSlot>
  [1041] objcall 154 ............................ tSlotData.setaProp(#slot, tAddToSlot)
  [1043] getlocal 7 ............................. <tSlotData>
  [1045] pushsymb 156 ........................... <#name>
  [1047] getlocal 3 ............................. <tItemData>
  [1049] pushsymb 156 ........................... <#name>
  [1051] pusharglist 2 .......................... <tItemData, #name>
  [1053] objcall 75 ............................. <tItemData[#name]>
  [1055] pusharglistnoret 3 ..................... <tSlotData, #name, tItemData[#name]>
  [1057] objcall 154 ............................ tSlotData.setaProp(#name, tItemData[#name])
  [1059] getlocal 7 ............................. <tSlotData>
  [1061] pushsymb 151 ........................... <#class>
  [1063] getlocal 3 ............................. <tItemData>
  [1065] pushsymb 151 ........................... <#class>
  [1067] pusharglist 2 .......................... <tItemData, #class>
  [1069] objcall 75 ............................. <tItemData[#class]>
  [1071] pusharglistnoret 3 ..................... <tSlotData, #class, tItemData[#class]>
  [1073] objcall 154 ............................ tSlotData.setaProp(#class, tItemData[#class])
  [1075] getlocal 7 ............................. <tSlotData>
  [1077] pushsymb 157 ........................... <#stripId>
  [1079] getlocal 3 ............................. <tItemData>
  [1081] pushsymb 157 ........................... <#stripId>
  [1083] pusharglist 2 .......................... <tItemData, #stripId>
  [1085] objcall 75 ............................. <tItemData[#stripId]>
  [1087] pusharglistnoret 3 ..................... <tSlotData, #stripId, tItemData[#stripId]>
  [1089] objcall 154 ............................ tSlotData.setaProp(#stripId, tItemData[#stripId])
  [1091] getlocal 7 ............................. <tSlotData>
  [1093] pushsymb 151 ........................... <#class>
  [1095] pusharglist 2 .......................... <tSlotData, #class>
  [1097] objcall 75 ............................. <tSlotData[#class]>
  [1099] pushcons 46 ............................ <"ecotron_box">
  [1101] eq ..................................... <tSlotData[#class] = "ecotron_box">
  [1102] jmpifz [1184] .......................... if tSlotData[#class] = "ecotron_box" then
  [1105] pushsymb 159 ........................... <#dateFormatter>
  [1107] pusharglist 1 .......................... <#dateFormatter>
  [1109] extcall 158 ............................ <objectExists(#dateFormatter)>
  [1111] jmpifz [1184] .......................... if objectExists(#dateFormatter) then
  [1114] getlocal 3 ............................. <tItemData>
  [1116] pushsymb 160 ........................... <#day>
  [1118] pusharglist 2 .......................... <tItemData, #day>
  [1120] objcall 75 ............................. <tItemData[#day]>
  [1122] setlocal 8 ............................. tDay = tItemData[#day]
  [1124] getlocal 3 ............................. <tItemData>
  [1126] pushsymb 161 ........................... <#month>
  [1128] pusharglist 2 .......................... <tItemData, #month>
  [1130] objcall 75 ............................. <tItemData[#month]>
  [1132] setlocal 9 ............................. tMonth = tItemData[#month]
  [1134] getlocal 3 ............................. <tItemData>
  [1136] pushsymb 162 ........................... <#year>
  [1138] pusharglist 2 .......................... <tItemData, #year>
  [1140] objcall 75 ............................. <tItemData[#year]>
  [1142] setlocal 10 ............................ tYear = tItemData[#year]
  [1144] pushsymb 159 ........................... <#dateFormatter>
  [1146] pusharglist 1 .......................... <#dateFormatter>
  [1148] extcall 60 ............................. <getObject(#dateFormatter)>
  [1150] getlocal 8 ............................. <tDay>
  [1152] getlocal 9 ............................. <tMonth>
  [1154] getlocal 10 ............................ <tYear>
  [1156] pusharglist 4 .......................... <getObject(#dateFormatter), tDay, tMonth, tYear>
  [1158] objcall 163 ............................ <getObject(#dateFormatter).getLocalDate(tDay, tMonth, tYear)>
  [1160] setlocal 11 ............................ tDate = getObject(#dateFormatter).getLocalDate(tDay, tMonth, tYear)
  [1162] getlocal 7 ............................. <tSlotData>
  [1164] pushsymb 156 ........................... <#name>
  [1166] getlocal 7 ............................. <tSlotData>
  [1168] pushsymb 156 ........................... <#name>
  [1170] pusharglist 2 .......................... <tSlotData, #name>
  [1172] objcall 75 ............................. <tSlotData[#name]>
  [1174] pushcons 47 ............................ <", ">
  [1176] joinstr ................................ <tSlotData[#name] & ", ">
  [1177] getlocal 11 ............................ <tDate>
  [1179] joinstr ................................ <tSlotData[#name] & ", " & tDate>
  [1180] pusharglistnoret 3 ..................... <tSlotData, #name, tSlotData[#name] & ", " & tDate>
  [1182] objcall 73 ............................. tSlotData[#name] = tSlotData[#name] & ", " & tDate
  [1184] getlocal 3 ............................. <tItemData>
  [1186] pushsymb 153 ........................... <#songID>
  [1188] pusharglist 2 .......................... <tItemData, #songID>
  [1190] objcall 75 ............................. <tItemData[#songID]>
  [1192] pusharglist 1 .......................... <tItemData[#songID]>
  [1194] extcall 54 ............................. <voidp(tItemData[#songID])>
  [1196] not .................................... <not voidp(tItemData[#songID])>
  [1197] jmpifz [1377] .......................... if not voidp(tItemData[#songID]) then
  [1200] getlocal 7 ............................. <tSlotData>
  [1202] pushcons 48 ............................ <"songID">
  [1204] getlocal 3 ............................. <tItemData>
  [1206] pushsymb 153 ........................... <#songID>
  [1208] pusharglist 2 .......................... <tItemData, #songID>
  [1210] objcall 75 ............................. <tItemData[#songID]>
  [1212] pusharglistnoret 3 ..................... <tSlotData, "songID", tItemData[#songID]>
  [1214] objcall 73 ............................. tSlotData["songID"] = tItemData[#songID]
  [1216] getlocal 3 ............................. <tItemData>
  [1218] pushsymb 152 ........................... <#data>
  [1220] pusharglist 2 .......................... <tItemData, #data>
  [1222] objcall 75 ............................. <tItemData[#data]>
  [1224] pusharglist 1 .......................... <tItemData[#data]>
  [1226] extcall 54 ............................. <voidp(tItemData[#data])>
  [1228] not .................................... <not voidp(tItemData[#data])>
  [1229] jmpifz [1377] .......................... if not voidp(tItemData[#data]) then
  [1232] pushsymb 164 ........................... <#source>
  [1234] getlocal 3 ............................. <tItemData>
  [1236] pushsymb 152 ........................... <#data>
  [1238] pusharglist 2 .......................... <tItemData, #data>
  [1240] objcall 75 ............................. <tItemData[#data]>
  [1242] pusharglist 2 .......................... <[#source: tItemData[#data]]>
  [1244] pushproplist ........................... <[#source: tItemData[#data]]>
  [1245] setlocal 12 ............................ tArray = [#source: tItemData[#data]]
  [1247] pushsymb 165 ........................... <#get_disk_data>
  [1249] getlocal 12 ............................ <tArray>
  [1251] pusharglistnoret 2 ..................... <#get_disk_data, tArray>
  [1253] extcall 55 ............................. executeMessage(#get_disk_data, tArray)
  [1255] getlocal 12 ............................ <tArray>
  [1257] pushsymb 166 ........................... <#author>
  [1259] pusharglist 2 .......................... <tArray, #author>
  [1261] objcall 75 ............................. <tArray[#author]>
  [1263] pusharglist 1 .......................... <tArray[#author]>
  [1265] extcall 54 ............................. <voidp(tArray[#author])>
  [1267] not .................................... <not voidp(tArray[#author])>
  [1268] getlocal 12 ............................ <tArray>
  [1270] pushsymb 167 ........................... <#songName>
  [1272] pusharglist 2 .......................... <tArray, #songName>
  [1274] objcall 75 ............................. <tArray[#songName]>
  [1276] pusharglist 1 .......................... <tArray[#songName]>
  [1278] extcall 54 ............................. <voidp(tArray[#songName])>
  [1280] not .................................... <not voidp(tArray[#songName])>
  [1281] and .................................... <not voidp(tArray[#author]) and not voidp(tArray[#songName])>
  [1282] jmpifz [1377] .......................... if not voidp(tArray[#author]) and not voidp(tArray[#songName]) then
  [1285] pushcons 49 ............................ <"song_disk_trade_info">
  [1287] pusharglist 1 .......................... <"song_disk_trade_info">
  [1289] extcall 31 ............................. <getText("song_disk_trade_info")>
  [1291] setlocal 13 ............................ tText = getText("song_disk_trade_info")
  [1293] getlocal 13 ............................ <tText>
  [1295] pushcons 50 ............................ <"%author%">
  [1297] getlocal 12 ............................ <tArray>
  [1299] pushsymb 166 ........................... <#author>
  [1301] pusharglist 2 .......................... <tArray, #author>
  [1303] objcall 75 ............................. <tArray[#author]>
  [1305] pusharglist 3 .......................... <tText, "%author%", tArray[#author]>
  [1307] extcall 168 ............................ <replaceChunks(tText, "%author%", tArray[#author])>
  [1309] setlocal 13 ............................ tText = replaceChunks(tText, "%author%", tArray[#author])
  [1311] getlocal 13 ............................ <tText>
  [1313] pushcons 51 ............................ <"%name%">
  [1315] getlocal 12 ............................ <tArray>
  [1317] pushsymb 167 ........................... <#songName>
  [1319] pusharglist 2 .......................... <tArray, #songName>
  [1321] objcall 75 ............................. <tArray[#songName]>
  [1323] pusharglist 3 .......................... <tText, "%name%", tArray[#songName]>
  [1325] extcall 168 ............................ <replaceChunks(tText, "%name%", tArray[#songName])>
  [1327] setlocal 13 ............................ tText = replaceChunks(tText, "%name%", tArray[#songName])
  [1329] getlocal 7 ............................. <tSlotData>
  [1331] pushcons 52 ............................ <"name">
  [1333] getlocal 13 ............................ <tText>
  [1335] pusharglistnoret 3 ..................... <tSlotData, "name", tText>
  [1337] objcall 73 ............................. tSlotData["name"] = tText
  [1339] getlocal 12 ............................ <tArray>
  [1341] pushsymb 173 ........................... <#playIcon>
  [1343] pusharglist 2 .......................... <tArray, #playIcon>
  [1345] objcall 75 ............................. <tArray[#playIcon]>
  [1347] pusharglist 1 .......................... <tArray[#playIcon]>
  [1349] extcall 54 ............................. <voidp(tArray[#playIcon])>
  [1351] not .................................... <not voidp(tArray[#playIcon])>
  [1352] jmpifz [1377] .......................... if not voidp(tArray[#playIcon]) then
  [1355] getlocal 7 ............................. <tSlotData>
  [1357] pushsymb 174 ........................... <#hiliteImage>
  [1359] getparam 0 ............................. <me>
  [1361] getlocal 12 ............................ <tArray>
  [1363] pushsymb 173 ........................... <#playIcon>
  [1365] pusharglist 2 .......................... <tArray, #playIcon>
  [1367] objcall 75 ............................. <tArray[#playIcon]>
  [1369] pusharglist 2 .......................... <me, tArray[#playIcon]>
  [1371] objcall 19 ............................. <me.cropToFit(tArray[#playIcon])>
  [1373] pusharglistnoret 3 ..................... <tSlotData, #hiliteImage, me.cropToFit(tArray[#playIcon])>
  [1375] objcall 73 ............................. tSlotData[#hiliteImage] = me.cropToFit(tArray[#playIcon])
  [1377] getprop 41 ............................. <pHerSlotProps>
  [1379] getlocal 5 ............................. <tSlotID>
  [1381] getlocal 7 ............................. <tSlotData>
  [1383] pusharglistnoret 3 ..................... <pHerSlotProps, tSlotID, tSlotData>
  [1385] objcall 169 ............................ pHerSlotProps.addProp(tSlotID, tSlotData)
  [1387] getlocal 0 ............................. <tWndObj>
  [1389] pushcons 23 ............................ <"trading_hercount_">
  [1391] getlocal 6 ............................. <tAddToSlot>
  [1393] joinstr ................................ <"trading_hercount_" & tAddToSlot>
  [1394] pusharglist 2 .......................... <tWndObj, "trading_hercount_" & tAddToSlot>
  [1396] objcall 92 ............................. <tWndObj.getElement("trading_hercount_" & tAddToSlot)>
  [1398] getprop 41 ............................. <pHerSlotProps>
  [1400] getlocal 5 ............................. <tSlotID>
  [1402] pusharglist 2 .......................... <pHerSlotProps, tSlotID>
  [1404] objcall 75 ............................. <pHerSlotProps[tSlotID]>
  [1406] pushcons 53 ............................ <"count">
  [1408] pusharglist 2 .......................... <pHerSlotProps[tSlotID], "count">
  [1410] objcall 75 ............................. <pHerSlotProps[tSlotID]["count"]>
  [1412] pusharglistnoret 2 ..................... <tWndObj.getElement("trading_hercount_" & tAddToSlot), pHerSlotProps[tSlotID]["count"]>
  [1414] objcall 93 ............................. tWndObj.getElement("trading_hercount_" & tAddToSlot).setText(pHerSlotProps[tSlotID]["count"])
  [1416] getparam 0 ............................. <me>
  [1418] getlocal 3 ............................. <tItemData>
  [1420] pusharglist 2 .......................... <me, tItemData>
  [1422] objcall 17 ............................. <me.createItemImg(tItemData)>
  [1424] setlocal 14 ............................ tImage = me.createItemImg(tItemData)
  [1426] getlocal 7 ............................. <tSlotData>
  [1428] pushsymb 175 ........................... <#image>
  [1430] getlocal 14 ............................ <tImage>
  [1432] pusharglist 1 .......................... <tImage>
  [1434] objcall 176 ............................ <tImage.duplicate()>
  [1436] pusharglistnoret 3 ..................... <tSlotData, #image, tImage.duplicate()>
  [1438] objcall 73 ............................. tSlotData[#image] = tImage.duplicate()
  [1440] getlocal 0 ............................. <tWndObj>
  [1442] pushcons 22 ............................ <"trading_herstuff_">
  [1444] getlocal 6 ............................. <tAddToSlot>
  [1446] joinstr ................................ <"trading_herstuff_" & tAddToSlot>
  [1447] pusharglist 2 .......................... <tWndObj, "trading_herstuff_" & tAddToSlot>
  [1449] objcall 92 ............................. <tWndObj.getElement("trading_herstuff_" & tAddToSlot)>
  [1451] getlocal 14 ............................ <tImage>
  [1453] pusharglistnoret 2 ..................... <tWndObj.getElement("trading_herstuff_" & tAddToSlot), tImage>
  [1455] objcall 170 ............................ tWndObj.getElement("trading_herstuff_" & tAddToSlot).feedImage(tImage)
  [1457] getlocal 0 ............................. <tWndObj>
  [1459] pushcons 22 ............................ <"trading_herstuff_">
  [1461] getlocal 6 ............................. <tAddToSlot>
  [1463] joinstr ................................ <"trading_herstuff_" & tAddToSlot>
  [1464] pusharglist 2 .......................... <tWndObj, "trading_herstuff_" & tAddToSlot>
  [1466] objcall 92 ............................. <tWndObj.getElement("trading_herstuff_" & tAddToSlot)>
  [1468] pushint16 200 .......................... <200>
  [1471] pushint16 200 .......................... <200>
  [1474] pushint16 200 .......................... <200>
  [1477] pusharglist 3 .......................... <200, 200, 200>
  [1479] extcall 141 ............................ <rgb(200, 200, 200)>
  [1481] pusharglistnoret 2 ..................... <tWndObj.getElement("trading_herstuff_" & tAddToSlot), rgb(200, 200, 200)>
  [1483] objcall 142 ............................ tWndObj.getElement("trading_herstuff_" & tAddToSlot).draw(rgb(200, 200, 200))
  [1485] jmp [1568]
  [1488] getprop 41 ............................. <pHerSlotProps>
  [1490] getlocal 5 ............................. <tSlotID>
  [1492] pusharglist 2 .......................... <pHerSlotProps, tSlotID>
  [1494] objcall 75 ............................. <pHerSlotProps[tSlotID]>
  [1496] pushcons 53 ............................ <"count">
  [1498] pusharglist 2 .......................... <pHerSlotProps[tSlotID], "count">
  [1500] objcall 75 ............................. <pHerSlotProps[tSlotID]["count"]>
  [1502] setlocal 15 ............................ tCount = pHerSlotProps[tSlotID]["count"]
  [1504] getprop 41 ............................. <pHerSlotProps>
  [1506] getlocal 5 ............................. <tSlotID>
  [1508] pusharglist 2 .......................... <pHerSlotProps, tSlotID>
  [1510] objcall 75 ............................. <pHerSlotProps[tSlotID]>
  [1512] pushcons 54 ............................ <"slot">
  [1514] pusharglist 2 .......................... <pHerSlotProps[tSlotID], "slot">
  [1516] objcall 75 ............................. <pHerSlotProps[tSlotID]["slot"]>
  [1518] setlocal 16 ............................ tSlot = pHerSlotProps[tSlotID]["slot"]
  [1520] getprop 41 ............................. <pHerSlotProps>
  [1522] getlocal 5 ............................. <tSlotID>
  [1524] pusharglist 2 .......................... <pHerSlotProps, tSlotID>
  [1526] objcall 75 ............................. <pHerSlotProps[tSlotID]>
  [1528] pushcons 53 ............................ <"count">
  [1530] getlocal 15 ............................ <tCount>
  [1532] pushint8 1 ............................. <1>
  [1534] add .................................... <tCount + 1>
  [1535] pusharglistnoret 3 ..................... <pHerSlotProps[tSlotID], "count", tCount + 1>
  [1537] objcall 73 ............................. pHerSlotProps[tSlotID]["count"] = tCount + 1
  [1539] getlocal 0 ............................. <tWndObj>
  [1541] pushcons 23 ............................ <"trading_hercount_">
  [1543] getlocal 16 ............................ <tSlot>
  [1545] joinstr ................................ <"trading_hercount_" & tSlot>
  [1546] pusharglist 2 .......................... <tWndObj, "trading_hercount_" & tSlot>
  [1548] objcall 92 ............................. <tWndObj.getElement("trading_hercount_" & tSlot)>
  [1550] getprop 41 ............................. <pHerSlotProps>
  [1552] getlocal 5 ............................. <tSlotID>
  [1554] pusharglist 2 .......................... <pHerSlotProps, tSlotID>
  [1556] objcall 75 ............................. <pHerSlotProps[tSlotID]>
  [1558] pushcons 53 ............................ <"count">
  [1560] pusharglist 2 .......................... <pHerSlotProps[tSlotID], "count">
  [1562] objcall 75 ............................. <pHerSlotProps[tSlotID]["count"]>
  [1564] pusharglistnoret 2 ..................... <tWndObj.getElement("trading_hercount_" & tSlot), pHerSlotProps[tSlotID]["count"]>
  [1566] objcall 93 ............................. tWndObj.getElement("trading_hercount_" & tSlot).setText(pHerSlotProps[tSlotID]["count"])
  [1568] pushsymb 77 ............................ <#room>
  [1570] pusharglist 1 .......................... <#room>
  [1572] extcall 76 ............................. <getThread(#room)>
  [1574] pusharglist 1 .......................... <getThread(#room)>
  [1576] objcall 82 ............................. <getThread(#room).getComponent()>
  [1578] getlocal 3 ............................. <tItemData>
  [1580] pushsymb 151 ........................... <#class>
  [1582] pusharglist 2 .......................... <tItemData, #class>
  [1584] objcall 75 ............................. <tItemData[#class]>
  [1586] pusharglist 2 .......................... <getThread(#room).getComponent(), tItemData[#class]>
  [1588] objcall 171 ............................ <getThread(#room).getComponent().isCreditFurniClass(tItemData[#class])>
  [1590] jmpifz [1622] .......................... if getThread(#room).getComponent().isCreditFurniClass(tItemData[#class]) then
  [1593] getlocal 1 ............................. <tCreditFurniPrice>
  [1595] pushsymb 148 ........................... <#he>
  [1597] getlocal 1 ............................. <tCreditFurniPrice>
  [1599] pushsymb 148 ........................... <#he>
  [1601] pusharglist 2 .......................... <tCreditFurniPrice, #he>
  [1603] objcall 75 ............................. <tCreditFurniPrice[#he]>
  [1605] getlocal 3 ............................. <tItemData>
  [1607] pushsymb 152 ........................... <#data>
  [1609] pusharglist 2 .......................... <tItemData, #data>
  [1611] objcall 75 ............................. <tItemData[#data]>
  [1613] pusharglist 1 .......................... <tItemData[#data]>
  [1615] extcall 172 ............................ <integer(tItemData[#data])>
  [1617] add .................................... <tCreditFurniPrice[#he] + integer(tItemData[#data])>
  [1618] pusharglistnoret 3 ..................... <tCreditFurniPrice, #he, tCreditFurniPrice[#he] + integer(tItemData[#data])>
  [1620] objcall 73 ............................. tCreditFurniPrice[#he] = tCreditFurniPrice[#he] + integer(tItemData[#data])
  [1622] pushint8 1
  [1624] getlocal 2
  [1626] add
  [1627] setlocal 2
  [1629] endrepeat [861]
  [1632] getparam 0 ............................. <me>
  [1634] getparam 1 ............................. <tTradeItems>
  [1636] pushint8 1 ............................. <1>
  [1638] pusharglist 2 .......................... <tTradeItems, 1>
  [1640] objcall 177 ............................ <tTradeItems.getPropAt(1)>
  [1642] pushzero ............................... <0>
  [1643] pusharglistnoret 3 ..................... <me, tTradeItems.getPropAt(1), 0>
  [1645] objcall 10 ............................. me.accept(tTradeItems.getPropAt(1), 0)
  [1647] getparam 0 ............................. <me>
  [1649] getparam 1 ............................. <tTradeItems>
  [1651] pushint8 2 ............................. <2>
  [1653] pusharglist 2 .......................... <tTradeItems, 2>
  [1655] objcall 177 ............................ <tTradeItems.getPropAt(2)>
  [1657] pushzero ............................... <0>
  [1658] pusharglistnoret 3 ..................... <me, tTradeItems.getPropAt(2), 0>
  [1660] objcall 10 ............................. me.accept(tTradeItems.getPropAt(2), 0)
  [1662] getparam 0 ............................. <me>
  [1664] getlocal 1 ............................. <tCreditFurniPrice>
  [1666] pusharglistnoret 2 ..................... <me, tCreditFurniPrice>
  [1668] objcall 13 ............................. me.updateCreditFurniCount(tCreditFurniPrice)
  [1670] ret
end

on updateCreditFurniCount me, tCreditFurniPrice
  [  0] getprop 30 .............................. <pTraderWndID>
  [  2] pusharglist 1 ........................... <pTraderWndID>
  [  4] extcall 87 .............................. <getWindow(pTraderWndID)>
  [  6] setlocal 0 .............................. tWndObj = getWindow(pTraderWndID)
  [  8] getlocal 0 .............................. <tWndObj>
  [ 10] pushzero ................................ <0>
  [ 11] eq ...................................... <tWndObj = 0>
  [ 12] jmpifz [ 20] ............................ if tWndObj = 0 then
  [ 15] pushzero ................................ <0>
  [ 16] pusharglistnoret 1 ...................... <0>
  [ 18] extcall 50 .............................. return 0
  [ 20] getlocal 0 .............................. <tWndObj>
  [ 22] pushcons 55 ............................. <"credit_count_1">
  [ 24] pusharglist 2 ........................... <tWndObj, "credit_count_1">
  [ 26] objcall 94 .............................. <tWndObj.elementExists("credit_count_1")>
  [ 28] jmpifz [ 89] ............................ if tWndObj.elementExists("credit_count_1") then
  [ 31] getparam 1 .............................. <tCreditFurniPrice>
  [ 33] pushsymb 148 ............................ <#he>
  [ 35] pusharglist 2 ........................... <tCreditFurniPrice, #he>
  [ 37] objcall 75 .............................. <tCreditFurniPrice[#he]>
  [ 39] setlocal 1 .............................. tPrice = tCreditFurniPrice[#he]
  [ 41] getlocal 1 .............................. <tPrice>
  [ 43] pushzero ................................ <0>
  [ 44] eq ...................................... <tPrice = 0>
  [ 45] jmpifz [ 55] ............................ if tPrice = 0 then / else
  [ 48] pushcons 42 ............................. <EMPTY>
  [ 50] setlocal 2 .............................. tText = EMPTY
  [ 52] jmp [ 75]
  [ 55] pushcons 56 ............................. <"credit_trade_value">
  [ 57] pusharglist 1 ........................... <"credit_trade_value">
  [ 59] extcall 31 .............................. <getText("credit_trade_value")>
  [ 61] pushcons 57 ............................. <"%value%">
  [ 63] getlocal 1 .............................. <tPrice>
  [ 65] pusharglist 1 ........................... <tPrice>
  [ 67] extcall 192 ............................. <string(tPrice)>
  [ 69] pusharglist 3 ........................... <getText("credit_trade_value"), "%value%", string(tPrice)>
  [ 71] extcall 168 ............................. <replaceChunks(getText("credit_trade_value"), "%value%", string(tPrice))>
  [ 73] setlocal 2 .............................. tText = replaceChunks(getText("credit_trade_value"), "%value%", string(tPrice))
  [ 75] getlocal 0 .............................. <tWndObj>
  [ 77] pushcons 55 ............................. <"credit_count_1">
  [ 79] pusharglist 2 ........................... <tWndObj, "credit_count_1">
  [ 81] objcall 92 .............................. <tWndObj.getElement("credit_count_1")>
  [ 83] getlocal 2 .............................. <tText>
  [ 85] pusharglistnoret 2 ...................... <tWndObj.getElement("credit_count_1"), tText>
  [ 87] objcall 93 .............................. tWndObj.getElement("credit_count_1").setText(tText)
  [ 89] getlocal 0 .............................. <tWndObj>
  [ 91] pushcons 58 ............................. <"credit_count_2">
  [ 93] pusharglist 2 ........................... <tWndObj, "credit_count_2">
  [ 95] objcall 94 .............................. <tWndObj.elementExists("credit_count_2")>
  [ 97] jmpifz [158] ............................ if tWndObj.elementExists("credit_count_2") then
  [100] getparam 1 .............................. <tCreditFurniPrice>
  [102] pushsymb 51 ............................. <#me>
  [104] pusharglist 2 ........................... <tCreditFurniPrice, #me>
  [106] objcall 75 .............................. <tCreditFurniPrice[#me]>
  [108] setlocal 1 .............................. tPrice = tCreditFurniPrice[#me]
  [110] getlocal 1 .............................. <tPrice>
  [112] pushzero ................................ <0>
  [113] eq ...................................... <tPrice = 0>
  [114] jmpifz [124] ............................ if tPrice = 0 then / else
  [117] pushcons 42 ............................. <EMPTY>
  [119] setlocal 2 .............................. tText = EMPTY
  [121] jmp [144]
  [124] pushcons 56 ............................. <"credit_trade_value">
  [126] pusharglist 1 ........................... <"credit_trade_value">
  [128] extcall 31 .............................. <getText("credit_trade_value")>
  [130] pushcons 57 ............................. <"%value%">
  [132] getlocal 1 .............................. <tPrice>
  [134] pusharglist 1 ........................... <tPrice>
  [136] extcall 192 ............................. <string(tPrice)>
  [138] pusharglist 3 ........................... <getText("credit_trade_value"), "%value%", string(tPrice)>
  [140] extcall 168 ............................. <replaceChunks(getText("credit_trade_value"), "%value%", string(tPrice))>
  [142] setlocal 2 .............................. tText = replaceChunks(getText("credit_trade_value"), "%value%", string(tPrice))
  [144] getlocal 0 .............................. <tWndObj>
  [146] pushcons 58 ............................. <"credit_count_2">
  [148] pusharglist 2 ........................... <tWndObj, "credit_count_2">
  [150] objcall 92 .............................. <tWndObj.getElement("credit_count_2")>
  [152] getlocal 2 .............................. <tText>
  [154] pusharglistnoret 2 ...................... <tWndObj.getElement("credit_count_2"), tText>
  [156] objcall 93 .............................. tWndObj.getElement("credit_count_2").setText(tText)
  [158] pushint8 1 .............................. <1>
  [160] pusharglistnoret 1 ...................... <1>
  [162] extcall 50 .............................. return 1
  [164] ret
end

on complete me, tdata
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 8 ............................... <me.close()>
  [  6] pusharglistnoret 1 ...................... <me.close()>
  [  8] extcall 50 .............................. return me.close()
  [ 10] ret
end

on isUnderTrade me, tStripID
  [  0] getprop 36 .............................. <pMyStripItems>
  [  2] getparam 1 .............................. <tStripID>
  [  4] pusharglist 2 ........................... <pMyStripItems, tStripID>
  [  6] objcall 194 ............................. <pMyStripItems.getPos(tStripID)>
  [  8] pushzero ................................ <0>
  [  9] gt ...................................... <pMyStripItems.getPos(tStripID) > 0>
  [ 10] pusharglistnoret 1 ...................... <pMyStripItems.getPos(tStripID) > 0>
  [ 12] extcall 50 .............................. return pMyStripItems.getPos(tStripID) > 0
  [ 14] ret
end

on getState me
  [  0] getprop 28 .............................. <pState>
  [  2] pusharglistnoret 1 ...................... <pState>
  [  4] extcall 50 .............................. return pState
  [  6] ret
end

on createItemImg me, tProps, tDownloadPrevented
  [  0] getparam 1 .............................. <tProps>
  [  2] pusharglist 1 ........................... <tProps>
  [  4] extcall 54 .............................. <voidp(tProps)>
  [  6] jmpifz [ 35] ............................ if voidp(tProps) then
  [  9] getparam 0 .............................. <me>
  [ 11] pushcons 59 ............................. <"Invalid props!">
  [ 13] pushsymb 17 ............................. <#createItemImg>
  [ 15] pushsymb 124 ............................ <#major>
  [ 17] pusharglistnoret 4 ...................... <me, "Invalid props!", #createItemImg, #major>
  [ 19] extcall 123 ............................. error(me, "Invalid props!", #createItemImg, #major)
  [ 21] pushint8 1 .............................. <1>
  [ 23] pushint8 1 .............................. <1>
  [ 25] pushint8 8 .............................. <8>
  [ 27] pusharglist 3 ........................... <1, 1, 8>
  [ 29] extcall 175 ............................. <image(1, 1, 8)>
  [ 31] pusharglistnoret 1 ...................... <image(1, 1, 8)>
  [ 33] extcall 50 .............................. return image(1, 1, 8)
  [ 35] pushsymb 196 ............................ <#ink>
  [ 37] pushint8 8 .............................. <8>
  [ 39] pusharglist 2 ........................... <[#ink: 8]>
  [ 41] pushproplist ............................ <[#ink: 8]>
  [ 42] setlocal 0 .............................. tImgProps = [#ink: 8]
  [ 44] getparam 1 .............................. <tProps>
  [ 46] pushsymb 152 ............................ <#data>
  [ 48] pusharglist 2 ........................... <tProps, #data>
  [ 50] objcall 75 .............................. <tProps[#data]>
  [ 52] pusharglist 1 ........................... <tProps[#data]>
  [ 54] extcall 54 .............................. <voidp(tProps[#data])>
  [ 56] jmpifz [ 69] ............................ if voidp(tProps[#data]) then
  [ 59] getparam 1 .............................. <tProps>
  [ 61] pushsymb 152 ............................ <#data>
  [ 63] pushcons 42 ............................. <EMPTY>
  [ 65] pusharglistnoret 3 ...................... <tProps, #data, EMPTY>
  [ 67] objcall 73 .............................. tProps[#data] = EMPTY
  [ 69] getparam 1 .............................. <tProps>
  [ 71] pushsymb 151 ............................ <#class>
  [ 73] pusharglist 2 ........................... <tProps, #class>
  [ 75] objcall 75 .............................. <tProps[#class]>
  [ 77] setlocal 1 .............................. tClass = tProps[#class]
  [ 79] getparam 1 .............................. <tProps>
  [ 81] pushsymb 151 ............................ <#class>
  [ 83] pusharglist 2 ........................... <tProps, #class>
  [ 85] objcall 75 .............................. <tProps[#class]>
  [ 87] pushcons 60 ............................. <"*">
  [ 89] containsstr ............................. <tProps[#class] contains "*">
  [ 90] jmpifz [128] ............................ if tProps[#class] contains "*" then
  [ 93] getparam 1 .............................. <tProps>
  [ 95] pushsymb 151 ............................ <#class>
  [ 97] pusharglist 2 ........................... <tProps, #class>
  [ 99] objcall 75 .............................. <tProps[#class]>
  [101] pushsymb 197 ............................ <#char>
  [103] pushint8 1 .............................. <1>
  [105] pushcons 60 ............................. <"*">
  [107] getparam 1 .............................. <tProps>
  [109] pushsymb 151 ............................ <#class>
  [111] pusharglist 2 ........................... <tProps, #class>
  [113] objcall 75 .............................. <tProps[#class]>
  [115] pusharglist 2 ........................... <"*", tProps[#class]>
  [117] extcall 198 ............................. <offset("*", tProps[#class])>
  [119] pushint8 1 .............................. <1>
  [121] sub ..................................... <offset("*", tProps[#class]) - 1>
  [122] pusharglist 4 ........................... <tProps[#class], #char, 1, offset("*", tProps[#class]) - 1>
  [124] objcall 199 ............................. <tProps[#class].char[1..offset("*", tProps[#class]) - 1]>
  [126] setlocal 1 .............................. tClass = tProps[#class].char[1..offset("*", tProps[#class]) - 1]
  [128] getparam 2 .............................. <tDownloadPrevented>
  [130] not ..................................... <not tDownloadPrevented>
  [131] jmpifz [292] ............................ if not tDownloadPrevented then
  [134] pushsymb 200 ............................ <#dynamicdownloader>
  [136] pusharglist 1 ........................... <#dynamicdownloader>
  [138] extcall 76 .............................. <getThread(#dynamicdownloader)>
  [140] setlocal 2 .............................. tDynThread = getThread(#dynamicdownloader)
  [142] getlocal 2 .............................. <tDynThread>
  [144] pushzero ................................ <0>
  [145] eq ...................................... <tDynThread = 0>
  [146] jmpifz [184] ............................ if tDynThread = 0 then / else
  [149] getparam 0 .............................. <me>
  [151] pushcons 61 ............................. <"Couldn't define member for trade item!">
  [153] pushcons 62 ............................. <RETURN>
  [155] joinstr ................................. <"Couldn't define member for trade item!" & RETURN>
  [156] getparam 1 .............................. <tProps>
  [158] joinstr ................................. <"Couldn't define member for trade item!" & RETURN & tProps>
  [159] pushsymb 17 ............................. <#createItemImg>
  [161] pushsymb 124 ............................ <#major>
  [163] pusharglistnoret 4 ...................... <me, "Couldn't define member for trade item!" & RETURN & tProps, #createItemImg, #major>
  [165] extcall 123 ............................. error(me, "Couldn't define member for trade item!" & RETURN & tProps, #createItemImg, #major)
  [167] pushint8 1 .............................. <1>
  [169] pushint8 18 ............................. <18>
  [171] pushint8 8 .............................. <8>
  [173] pusharglist 3 ........................... <1, 18, 8>
  [175] extcall 175 ............................. <image(1, 18, 8)>
  [177] pusharglistnoret 1 ...................... <image(1, 18, 8)>
  [179] extcall 50 .............................. return image(1, 18, 8)
  [181] jmp [292]
  [184] getlocal 2 .............................. <tDynThread>
  [186] pusharglist 1 ........................... <tDynThread>
  [188] objcall 82 .............................. <tDynThread.getComponent()>
  [190] setlocal 3 .............................. tDynComponent = tDynThread.getComponent()
  [192] pushcons 42 ............................. <EMPTY>
  [194] setlocal 4 .............................. tRoomSizePrefix = EMPTY
  [196] getparam 1 .............................. <tProps>
  [198] pushsymb 151 ............................ <#class>
  [200] pusharglist 2 ........................... <tProps, #class>
  [202] objcall 75 .............................. <tProps[#class]>
  [204] pushcons 43 ............................. <"poster">
  [206] containsstr ............................. <tProps[#class] contains "poster">
  [207] jmpifz [229] ............................ if tProps[#class] contains "poster" then / else
  [210] getlocal 1 .............................. <tClass>
  [212] pushcons 44 ............................. <"_">
  [214] joinstr ................................. <tClass & "_">
  [215] getparam 1 .............................. <tProps>
  [217] pushsymb 152 ............................ <#data>
  [219] pusharglist 2 ........................... <tProps, #data>
  [221] objcall 75 .............................. <tProps[#data]>
  [223] joinstr ................................. <tClass & "_" & tProps[#data]>
  [224] setlocal 5 .............................. tDownloadIdName = tClass & "_" & tProps[#data]
  [226] jmp [233]
  [229] getlocal 1 .............................. <tClass>
  [231] setlocal 5 .............................. tDownloadIdName = tClass
  [233] getlocal 4 .............................. <tRoomSizePrefix>
  [235] getlocal 5 .............................. <tDownloadIdName>
  [237] joinstr ................................. <tRoomSizePrefix & tDownloadIdName>
  [238] setlocal 5 .............................. tDownloadIdName = tRoomSizePrefix & tDownloadIdName
  [240] getlocal 3 .............................. <tDynComponent>
  [242] getlocal 5 .............................. <tDownloadIdName>
  [244] pushsymb 201 ............................ <#unknown>
  [246] getparam 0 .............................. <me>
  [248] pusharglist 1 ........................... <me>
  [250] objcall 89 .............................. <me.getID()>
  [252] pushsymb 18 ............................. <#traderItemDownloadCallback>
  [254] pushint8 1 .............................. <1>
  [256] getparam 1 .............................. <tProps>
  [258] pusharglist 7 ........................... <tDynComponent, tDownloadIdName, #unknown, me.getID(), #traderItemDownloadCallback, 1, tProps>
  [260] objcall 202 ............................. <tDynComponent.downloadCastDynamically(tDownloadIdName, #unknown, me.getID(), #traderItemDownloadCallback, 1, tProps)>
  [262] setlocal 6 .............................. tDownloading = tDynComponent.downloadCastDynamically(tDownloadIdName, #unknown, me.getID(), #traderItemDownloadCallback, 1, tProps)
  [264] getprop 44 .............................. <pRequiredDownloadsToTrade>
  [266] getlocal 5 .............................. <tDownloadIdName>
  [268] pusharglist 2 ........................... <pRequiredDownloadsToTrade, tDownloadIdName>
  [270] objcall 194 ............................. <pRequiredDownloadsToTrade.getPos(tDownloadIdName)>
  [272] pushzero ................................ <0>
  [273] eq ...................................... <pRequiredDownloadsToTrade.getPos(tDownloadIdName) = 0>
  [274] getlocal 6 .............................. <tDownloading>
  [276] and ..................................... <(pRequiredDownloadsToTrade.getPos(tDownloadIdName) = 0) and tDownloading>
  [277] jmpifz [288] ............................ if (pRequiredDownloadsToTrade.getPos(tDownloadIdName) = 0) and tDownloading then
  [280] getprop 44 .............................. <pRequiredDownloadsToTrade>
  [282] getlocal 5 .............................. <tDownloadIdName>
  [284] pusharglistnoret 2 ...................... <pRequiredDownloadsToTrade, tDownloadIdName>
  [286] objcall 104 ............................. pRequiredDownloadsToTrade.add(tDownloadIdName)
  [288] getprop 43 .............................. <pIconPlaceholderName>
  [290] setlocal 7 .............................. tMemStr = pIconPlaceholderName
  [292] getlocal 1 .............................. <tClass>
  [294] pushcons 63 ............................. <"post.it">
  [296] containsstr ............................. <tClass contains "post.it">
  [297] jmpifz [415] ............................ if tClass contains "post.it" then / else
  [300] getparam 1 .............................. <tProps>
  [302] pushsymb 152 ............................ <#data>
  [304] pusharglist 2 ........................... <tProps, #data>
  [306] objcall 75 .............................. <tProps[#data]>
  [308] pusharglist 1 ........................... <tProps[#data]>
  [310] extcall 203 ............................. <value(tProps[#data])>
  [312] pushfloat32 20.0 ........................ <20.0>
  [317] pushfloat32 6.0 ......................... <6.0>
  [322] div ..................................... <20.0 / 6.0>
  [323] div ..................................... <value(tProps[#data]) / (20.0 / 6.0)>
  [324] pusharglist 1 ........................... <value(tProps[#data]) / (20.0 / 6.0)>
  [326] extcall 172 ............................. <integer(value(tProps[#data]) / (20.0 / 6.0))>
  [328] setlocal 8 .............................. tCount = integer(value(tProps[#data]) / (20.0 / 6.0))
  [330] getlocal 8 .............................. <tCount>
  [332] pushint8 6 .............................. <6>
  [334] gt ...................................... <tCount > 6>
  [335] jmpifz [342] ............................ if tCount > 6 then
  [338] pushint8 6 .............................. <6>
  [340] setlocal 8 .............................. tCount = 6
  [342] getlocal 8 .............................. <tCount>
  [344] pushint8 1 .............................. <1>
  [346] lt ...................................... <tCount < 1>
  [347] jmpifz [354] ............................ if tCount < 1 then
  [350] pushint8 1 .............................. <1>
  [352] setlocal 8 .............................. tCount = 1
  [354] getlocal 1 .............................. <tClass>
  [356] pushcons 44 ............................. <"_">
  [358] joinstr ................................. <tClass & "_">
  [359] getlocal 8 .............................. <tCount>
  [361] joinstr ................................. <tClass & "_" & tCount>
  [362] pushcons 44 ............................. <"_">
  [364] joinstr ................................. <tClass & "_" & tCount & "_">
  [365] pushcons 64 ............................. <"small">
  [367] joinstr ................................. <tClass & "_" & tCount & "_" & "small">
  [368] pusharglist 1 ........................... <tClass & "_" & tCount & "_" & "small">
  [370] extcall 204 ............................. <memberExists(tClass & "_" & tCount & "_" & "small")>
  [372] jmpifz [394] ............................ if memberExists(tClass & "_" & tCount & "_" & "small") then / else
  [375] getlocal 1 .............................. <tClass>
  [377] pushcons 44 ............................. <"_">
  [379] joinstr ................................. <tClass & "_">
  [380] getlocal 8 .............................. <tCount>
  [382] joinstr ................................. <tClass & "_" & tCount>
  [383] pushcons 44 ............................. <"_">
  [385] joinstr ................................. <tClass & "_" & tCount & "_">
  [386] pushcons 64 ............................. <"small">
  [388] joinstr ................................. <tClass & "_" & tCount & "_" & "small">
  [389] setlocal 7 .............................. tMemStr = tClass & "_" & tCount & "_" & "small"
  [391] jmp [412]
  [394] getparam 0 .............................. <me>
  [396] pushcons 61 ............................. <"Couldn't define member for trade item!">
  [398] pushcons 62 ............................. <RETURN>
  [400] joinstr ................................. <"Couldn't define member for trade item!" & RETURN>
  [401] getparam 1 .............................. <tProps>
  [403] joinstr ................................. <"Couldn't define member for trade item!" & RETURN & tProps>
  [404] pushsymb 17 ............................. <#createItemImg>
  [406] pushsymb 124 ............................ <#major>
  [408] pusharglistnoret 4 ...................... <me, "Couldn't define member for trade item!" & RETURN & tProps, #createItemImg, #major>
  [410] extcall 123 ............................. error(me, "Couldn't define member for trade item!" & RETURN & tProps, #createItemImg, #major)
  [412] jmp [613]
  [415] getparam 1 .............................. <tProps>
  [417] pushsymb 151 ............................ <#class>
  [419] pusharglist 2 ........................... <tProps, #class>
  [421] objcall 75 .............................. <tProps[#class]>
  [423] pushcons 44 ............................. <"_">
  [425] joinstr ................................. <tProps[#class] & "_">
  [426] getparam 1 .............................. <tProps>
  [428] pushsymb 152 ............................ <#data>
  [430] pusharglist 2 ........................... <tProps, #data>
  [432] objcall 75 .............................. <tProps[#data]>
  [434] joinstr ................................. <tProps[#class] & "_" & tProps[#data]>
  [435] pushcons 65 ............................. <"_small">
  [437] joinstr ................................. <tProps[#class] & "_" & tProps[#data] & "_small">
  [438] pusharglist 1 ........................... <tProps[#class] & "_" & tProps[#data] & "_small">
  [440] extcall 204 ............................. <memberExists(tProps[#class] & "_" & tProps[#data] & "_small")>
  [442] jmpifz [473] ............................ if memberExists(tProps[#class] & "_" & tProps[#data] & "_small") then / else
  [445] getparam 1 .............................. <tProps>
  [447] pushsymb 151 ............................ <#class>
  [449] pusharglist 2 ........................... <tProps, #class>
  [451] objcall 75 .............................. <tProps[#class]>
  [453] pushcons 44 ............................. <"_">
  [455] joinstr ................................. <tProps[#class] & "_">
  [456] getparam 1 .............................. <tProps>
  [458] pushsymb 152 ............................ <#data>
  [460] pusharglist 2 ........................... <tProps, #data>
  [462] objcall 75 .............................. <tProps[#data]>
  [464] joinstr ................................. <tProps[#class] & "_" & tProps[#data]>
  [465] pushcons 65 ............................. <"_small">
  [467] joinstr ................................. <tProps[#class] & "_" & tProps[#data] & "_small">
  [468] setlocal 7 .............................. tMemStr = tProps[#class] & "_" & tProps[#data] & "_small"
  [470] jmp [613]
  [473] getparam 1 .............................. <tProps>
  [475] pushsymb 151 ............................ <#class>
  [477] pusharglist 2 ........................... <tProps, #class>
  [479] objcall 75 .............................. <tProps[#class]>
  [481] pushcons 65 ............................. <"_small">
  [483] joinstr ................................. <tProps[#class] & "_small">
  [484] pusharglist 1 ........................... <tProps[#class] & "_small">
  [486] extcall 204 ............................. <memberExists(tProps[#class] & "_small")>
  [488] jmpifz [507] ............................ if memberExists(tProps[#class] & "_small") then / else
  [491] getparam 1 .............................. <tProps>
  [493] pushsymb 151 ............................ <#class>
  [495] pusharglist 2 ........................... <tProps, #class>
  [497] objcall 75 .............................. <tProps[#class]>
  [499] pushcons 65 ............................. <"_small">
  [501] joinstr ................................. <tProps[#class] & "_small">
  [502] setlocal 7 .............................. tMemStr = tProps[#class] & "_small"
  [504] jmp [613]
  [507] getlocal 1 .............................. <tClass>
  [509] getparam 1 .............................. <tProps>
  [511] pushsymb 152 ............................ <#data>
  [513] pusharglist 2 ........................... <tProps, #data>
  [515] objcall 75 .............................. <tProps[#data]>
  [517] joinpadstr .............................. <tClass && tProps[#data]>
  [518] pushcons 65 ............................. <"_small">
  [520] joinstr ................................. <tClass && tProps[#data] & "_small">
  [521] pusharglist 1 ........................... <tClass && tProps[#data] & "_small">
  [523] extcall 204 ............................. <memberExists(tClass && tProps[#data] & "_small")>
  [525] jmpifz [547] ............................ if memberExists(tClass && tProps[#data] & "_small") then / else
  [528] getlocal 1 .............................. <tClass>
  [530] getparam 1 .............................. <tProps>
  [532] pushsymb 152 ............................ <#data>
  [534] pusharglist 2 ........................... <tProps, #data>
  [536] objcall 75 .............................. <tProps[#data]>
  [538] joinpadstr .............................. <tClass && tProps[#data]>
  [539] pushcons 65 ............................. <"_small">
  [541] joinstr ................................. <tClass && tProps[#data] & "_small">
  [542] setlocal 7 .............................. tMemStr = tClass && tProps[#data] & "_small"
  [544] jmp [613]
  [547] getlocal 1 .............................. <tClass>
  [549] pushcons 65 ............................. <"_small">
  [551] joinstr ................................. <tClass & "_small">
  [552] pusharglist 1 ........................... <tClass & "_small">
  [554] extcall 204 ............................. <memberExists(tClass & "_small")>
  [556] jmpifz [569] ............................ if memberExists(tClass & "_small") then / else
  [559] getlocal 1 .............................. <tClass>
  [561] pushcons 65 ............................. <"_small">
  [563] joinstr ................................. <tClass & "_small">
  [564] setlocal 7 .............................. tMemStr = tClass & "_small"
  [566] jmp [613]
  [569] pushcons 66 ............................. <"rightwall">
  [571] getlocal 1 .............................. <tClass>
  [573] joinpadstr .............................. <"rightwall" && tClass>
  [574] getparam 1 .............................. <tProps>
  [576] pushsymb 152 ............................ <#data>
  [578] pusharglist 2 ........................... <tProps, #data>
  [580] objcall 75 .............................. <tProps[#data]>
  [582] joinpadstr .............................. <"rightwall" && tClass && tProps[#data]>
  [583] pusharglist 1 ........................... <"rightwall" && tClass && tProps[#data]>
  [585] extcall 204 ............................. <memberExists("rightwall" && tClass && tProps[#data])>
  [587] jmpifz [609] ............................ if memberExists("rightwall" && tClass && tProps[#data]) then / else
  [590] pushcons 66 ............................. <"rightwall">
  [592] getlocal 1 .............................. <tClass>
  [594] joinpadstr .............................. <"rightwall" && tClass>
  [595] getparam 1 .............................. <tProps>
  [597] pushsymb 152 ............................ <#data>
  [599] pusharglist 2 ........................... <tProps, #data>
  [601] objcall 75 .............................. <tProps[#data]>
  [603] joinpadstr .............................. <"rightwall" && tClass && tProps[#data]>
  [604] setlocal 7 .............................. tMemStr = "rightwall" && tClass && tProps[#data]
  [606] jmp [613]
  [609] getprop 43 .............................. <pIconPlaceholderName>
  [611] setlocal 7 .............................. tMemStr = pIconPlaceholderName
  [613] pushcons 67 ............................. <"Preview_renderer">
  [615] pusharglist 1 ........................... <"Preview_renderer">
  [617] extcall 60 .............................. <getObject("Preview_renderer")>
  [619] getlocal 7 .............................. <tMemStr>
  [621] pusharglist 0 ........................... <>
  [623] extcall 118 ............................. <VOID>
  [625] getparam 1 .............................. <tProps>
  [627] pushsymb 205 ............................ <#colors>
  [629] pusharglist 2 ........................... <tProps, #colors>
  [631] objcall 75 .............................. <tProps[#colors]>
  [633] getparam 1 .............................. <tProps>
  [635] pushsymb 151 ............................ <#class>
  [637] pusharglist 2 ........................... <tProps, #class>
  [639] objcall 75 .............................. <tProps[#class]>
  [641] pusharglist 5 ........................... <getObject("Preview_renderer"), tMemStr, VOID, tProps[#colors], tProps[#class]>
  [643] objcall 206 ............................. <getObject("Preview_renderer").renderPreviewImage(tMemStr, VOID, tProps[#colors], tProps[#class])>
  [645] setlocal 9 .............................. tImage = getObject("Preview_renderer").renderPreviewImage(tMemStr, VOID, tProps[#colors], tProps[#class])
  [647] getlocal 9 .............................. <tImage>
  [649] pusharglist 1 ........................... <tImage>
  [651] extcall 54 .............................. <voidp(tImage)>
  [653] jmpifz [670] ............................ if voidp(tImage) then
  [656] pushint8 1 .............................. <1>
  [658] pushint8 18 ............................. <18>
  [660] pushint8 8 .............................. <8>
  [662] pusharglist 3 ........................... <1, 18, 8>
  [664] extcall 175 ............................. <image(1, 18, 8)>
  [666] pusharglistnoret 1 ...................... <image(1, 18, 8)>
  [668] extcall 50 .............................. return image(1, 18, 8)
  [670] getlocal 0 .............................. <tImgProps>
  [672] pushsymb 207 ............................ <#maskImage>
  [674] getlocal 9 .............................. <tImage>
  [676] pusharglist 1 ........................... <tImage>
  [678] objcall 208 ............................. <tImage.createMatte()>
  [680] pusharglistnoret 3 ...................... <tImgProps, #maskImage, tImage.createMatte()>
  [682] objcall 73 .............................. tImgProps[#maskImage] = tImage.createMatte()
  [684] getlocal 9 .............................. <tImage>
  [686] getobjprop 95 ........................... <tImage.width>
  [688] getlocal 9 .............................. <tImage>
  [690] getobjprop 97 ........................... <tImage.height>
  [692] pushint8 32 ............................. <32>
  [694] pusharglist 3 ........................... <tImage.width, tImage.height, 32>
  [696] extcall 175 ............................. <image(tImage.width, tImage.height, 32)>
  [698] setlocal 10 ............................. tNewImg = image(tImage.width, tImage.height, 32)
  [700] getlocal 10 ............................. <tNewImg>
  [702] getlocal 9 .............................. <tImage>
  [704] getlocal 9 .............................. <tImage>
  [706] getobjprop 39 ........................... <tImage.rect>
  [708] getlocal 9 .............................. <tImage>
  [710] getobjprop 39 ........................... <tImage.rect>
  [712] getlocal 0 .............................. <tImgProps>
  [714] pusharglistnoret 5 ...................... <tNewImg, tImage, tImage.rect, tImage.rect, tImgProps>
  [716] objcall 209 ............................. tNewImg.copyPixels(tImage, tImage.rect, tImage.rect, tImgProps)
  [718] getparam 0 .............................. <me>
  [720] getlocal 10 ............................. <tNewImg>
  [722] pusharglist 2 ........................... <me, tNewImg>
  [724] objcall 19 .............................. <me.cropToFit(tNewImg)>
  [726] pusharglistnoret 1 ...................... <me.cropToFit(tNewImg)>
  [728] extcall 50 .............................. return me.cropToFit(tNewImg)
  [730] ret
end

on traderItemDownloadCallback me, tDownloadedId, tSuccess, tCallbackParams
  [  0] getparam 2 .............................. <tSuccess>
  [  2] not ..................................... <not tSuccess>
  [  3] jmpifz [ 11] ............................ if not tSuccess then
  [  6] pushzero ................................ <0>
  [  7] pusharglistnoret 1 ...................... <0>
  [  9] extcall 50 .............................. return 0
  [ 11] getprop 44 .............................. <pRequiredDownloadsToTrade>
  [ 13] getparam 1 .............................. <tDownloadedId>
  [ 15] pusharglist 2 ........................... <pRequiredDownloadsToTrade, tDownloadedId>
  [ 17] objcall 194 ............................. <pRequiredDownloadsToTrade.getPos(tDownloadedId)>
  [ 19] pushzero ................................ <0>
  [ 20] gt ...................................... <pRequiredDownloadsToTrade.getPos(tDownloadedId) > 0>
  [ 21] jmpifz [ 32] ............................ if pRequiredDownloadsToTrade.getPos(tDownloadedId) > 0 then
  [ 24] getprop 44 .............................. <pRequiredDownloadsToTrade>
  [ 26] getparam 1 .............................. <tDownloadedId>
  [ 28] pusharglistnoret 2 ...................... <pRequiredDownloadsToTrade, tDownloadedId>
  [ 30] objcall 220 ............................. pRequiredDownloadsToTrade.deleteOne(tDownloadedId)
  [ 32] getprop 30 .............................. <pTraderWndID>
  [ 34] pusharglist 1 ........................... <pTraderWndID>
  [ 36] extcall 87 .............................. <getWindow(pTraderWndID)>
  [ 38] setlocal 0 .............................. tWndObj = getWindow(pTraderWndID)
  [ 40] getlocal 0 .............................. <tWndObj>
  [ 42] pushzero ................................ <0>
  [ 43] eq ...................................... <tWndObj = 0>
  [ 44] jmpifz [ 52] ............................ if tWndObj = 0 then
  [ 47] pushzero ................................ <0>
  [ 48] pusharglistnoret 1 ...................... <0>
  [ 50] extcall 50 .............................. return 0
  [ 52] getprop 35 .............................. <pItemListHe>
  [ 54] pusharglist 1 ........................... <pItemListHe>
  [ 56] extcall 150 ............................. <listp(pItemListHe)>
  [ 58] not ..................................... <not listp(pItemListHe)>
  [ 59] jmpifz [ 67] ............................ if not listp(pItemListHe) then
  [ 62] pushzero ................................ <0>
  [ 63] pusharglistnoret 1 ...................... <0>
  [ 65] extcall 50 .............................. return 0
  [ 67] pushint8 1 .............................. <1>
  [ 69] setlocal 1
  [ 71] getlocal 1
  [ 73] getprop 35 .............................. <pItemListHe>
  [ 75] getobjprop 105 .......................... <pItemListHe.count>
  [ 77] lteq
  [ 78] jmpifz [367] ............................ repeat with i = 1 to pItemListHe.count
  [ 81] getprop 35 .............................. <pItemListHe>
  [ 83] getlocal 1 .............................. <i>
  [ 85] pusharglist 2 ........................... <pItemListHe, i>
  [ 87] objcall 75 .............................. <pItemListHe[i]>
  [ 89] setlocal 2 .............................. tItemData = pItemListHe[i]
  [ 91] getlocal 2 .............................. <tItemData>
  [ 93] getobjprop 146 .......................... <tItemData.ilk>
  [ 95] pushsymb 147 ............................ <#propList>
  [ 97] nteq .................................... <tItemData.ilk <> #propList>
  [ 98] jmpifz [104] ............................ if tItemData.ilk <> #propList then
  [101] jmp [357] ............................... next repeat
  [104] getlocal 2 .............................. <tItemData>
  [106] pushsymb 151 ............................ <#class>
  [108] pusharglist 2 ........................... <tItemData, #class>
  [110] objcall 75 .............................. <tItemData[#class]>
  [112] setlocal 3 .............................. tClass = tItemData[#class]
  [114] getlocal 3 .............................. <tClass>
  [116] peek 0 .................................. case tClass of
  [118] pushcons 43 ............................. <"poster">
  [120] eq
  [121] jmpifz [143] ............................ (case) "poster":
  [124] getlocal 3 .............................. <tClass>
  [126] pushcons 44 ............................. <"_">
  [128] joinstr ................................. <tClass & "_">
  [129] getlocal 2 .............................. <tItemData>
  [131] pushsymb 152 ............................ <#data>
  [133] pusharglist 2 ........................... <tItemData, #data>
  [135] objcall 75 .............................. <tItemData[#data]>
  [137] joinstr ................................. <tClass & "_" & tItemData[#data]>
  [138] setlocal 4 .............................. tSlotID = tClass & "_" & tItemData[#data]
  [140] jmp [201]
  [143] peek 0
  [145] pushcons 45 ............................. <"song_disk">
  [147] eq
  [148] jmpifz [170] ............................ (case) "song_disk":
  [151] getlocal 3 .............................. <tClass>
  [153] pushcons 44 ............................. <"_">
  [155] joinstr ................................. <tClass & "_">
  [156] getlocal 2 .............................. <tItemData>
  [158] pushsymb 153 ............................ <#songID>
  [160] pusharglist 2 ........................... <tItemData, #songID>
  [162] objcall 75 .............................. <tItemData[#songID]>
  [164] joinstr ................................. <tClass & "_" & tItemData[#songID]>
  [165] setlocal 4 .............................. tSlotID = tClass & "_" & tItemData[#songID]
  [167] jmp [201]
  [170] peek 0
  [172] pushcons 46 ............................. <"ecotron_box">
  [174] eq
  [175] jmpifz [197] ............................ (case) "ecotron_box":
  [178] getlocal 3 .............................. <tClass>
  [180] pushcons 44 ............................. <"_">
  [182] joinstr ................................. <tClass & "_">
  [183] getlocal 2 .............................. <tItemData>
  [185] pushsymb 57 ............................. <#id>
  [187] pusharglist 2 ........................... <tItemData, #id>
  [189] objcall 75 .............................. <tItemData[#id]>
  [191] joinstr ................................. <tClass & "_" & tItemData[#id]>
  [192] setlocal 4 .............................. tSlotID = tClass & "_" & tItemData[#id]
  [194] jmp [201] ............................... (case) otherwise:
  [197] getlocal 3 .............................. <tClass>
  [199] setlocal 4 .............................. tSlotID = tClass
  [201] pop 1 ................................... end case
  [203] getprop 41 .............................. <pHerSlotProps>
  [205] getobjprop 146 .......................... <pHerSlotProps.ilk>
  [207] pushsymb 147 ............................ <#propList>
  [209] nteq .................................... <pHerSlotProps.ilk <> #propList>
  [210] jmpifz [216] ............................ if pHerSlotProps.ilk <> #propList then
  [213] jmp [357] ............................... next repeat
  [216] getprop 41 .............................. <pHerSlotProps>
  [218] getlocal 4 .............................. <tSlotID>
  [220] pusharglist 2 ........................... <pHerSlotProps, tSlotID>
  [222] objcall 75 .............................. <pHerSlotProps[tSlotID]>
  [224] setlocal 5 .............................. tSlotProps = pHerSlotProps[tSlotID]
  [226] getlocal 5 .............................. <tSlotProps>
  [228] pusharglist 1 ........................... <tSlotProps>
  [230] extcall 54 .............................. <voidp(tSlotProps)>
  [232] jmpifz [241] ............................ if voidp(tSlotProps) then
  [235] jmp [357] ............................... next repeat
  [238] jmp [357] ............................... next repeat
  [241] getlocal 5 .............................. <tSlotProps>
  [243] pushcons 53 ............................. <"count">
  [245] pusharglist 2 ........................... <tSlotProps, "count">
  [247] objcall 75 .............................. <tSlotProps["count"]>
  [249] setlocal 6 .............................. tCount = tSlotProps["count"]
  [251] getlocal 5 .............................. <tSlotProps>
  [253] pushcons 54 ............................. <"slot">
  [255] pusharglist 2 ........................... <tSlotProps, "slot">
  [257] objcall 75 .............................. <tSlotProps["slot"]>
  [259] setlocal 7 .............................. tSlot = tSlotProps["slot"]
  [261] getlocal 0 .............................. <tWndObj>
  [263] pushcons 14 ............................. <"trading_mystuff_">
  [265] getlocal 7 .............................. <tSlot>
  [267] joinstr ................................. <"trading_mystuff_" & tSlot>
  [268] pusharglist 2 ........................... <tWndObj, "trading_mystuff_" & tSlot>
  [270] objcall 94 .............................. <tWndObj.elementExists("trading_mystuff_" & tSlot)>
  [272] jmpifz [357] ............................ if tWndObj.elementExists("trading_mystuff_" & tSlot) then
  [275] getparam 0 .............................. <me>
  [277] getprop 35 .............................. <pItemListHe>
  [279] getlocal 1 .............................. <i>
  [281] pusharglist 2 ........................... <pItemListHe, i>
  [283] objcall 75 .............................. <pItemListHe[i]>
  [285] pushint8 1 .............................. <1>
  [287] pusharglist 3 ........................... <me, pItemListHe[i], 1>
  [289] objcall 17 .............................. <me.createItemImg(pItemListHe[i], 1)>
  [291] setlocal 8 .............................. tImage = me.createItemImg(pItemListHe[i], 1)
  [293] getlocal 8 .............................. <tImage>
  [295] getobjprop 146 .......................... <tImage.ilk>
  [297] pushsymb 175 ............................ <#image>
  [299] eq ...................................... <tImage.ilk = #image>
  [300] jmpifz [357] ............................ if tImage.ilk = #image then
  [303] getlocal 0 .............................. <tWndObj>
  [305] pushcons 22 ............................. <"trading_herstuff_">
  [307] getlocal 7 .............................. <tSlot>
  [309] joinstr ................................. <"trading_herstuff_" & tSlot>
  [310] pusharglist 2 ........................... <tWndObj, "trading_herstuff_" & tSlot>
  [312] objcall 92 .............................. <tWndObj.getElement("trading_herstuff_" & tSlot)>
  [314] setlocal 9 .............................. tElement = tWndObj.getElement("trading_herstuff_" & tSlot)
  [316] getlocal 9 .............................. <tElement>
  [318] getlocal 8 .............................. <tImage>
  [320] pusharglistnoret 2 ...................... <tElement, tImage>
  [322] objcall 170 ............................. tElement.feedImage(tImage)
  [324] getlocal 9 .............................. <tElement>
  [326] pushint16 200 ........................... <200>
  [329] pushint16 200 ........................... <200>
  [332] pushint16 200 ........................... <200>
  [335] pusharglist 3 ........................... <200, 200, 200>
  [337] extcall 141 ............................. <rgb(200, 200, 200)>
  [339] pusharglistnoret 2 ...................... <tElement, rgb(200, 200, 200)>
  [341] objcall 142 ............................. tElement.draw(rgb(200, 200, 200))
  [343] getlocal 5 .............................. <tSlotProps>
  [345] pushsymb 175 ............................ <#image>
  [347] getlocal 8 .............................. <tImage>
  [349] pusharglist 1 ........................... <tImage>
  [351] objcall 176 ............................. <tImage.duplicate()>
  [353] pusharglistnoret 3 ...................... <tSlotProps, #image, tImage.duplicate()>
  [355] objcall 154 ............................. tSlotProps.setaProp(#image, tImage.duplicate())
  [357] pushint8 1
  [359] getlocal 1
  [361] add
  [362] setlocal 1
  [364] endrepeat [ 71]
  [367] ret
end

on cropToFit me, tImage
  [  0] getparam 1 .............................. <tImage>
  [  2] pusharglist 1 ........................... <tImage>
  [  4] extcall 146 ............................. <ilk(tImage)>
  [  6] pushsymb 175 ............................ <#image>
  [  8] nteq .................................... <ilk(tImage) <> #image>
  [  9] jmpifz [ 26] ............................ if ilk(tImage) <> #image then
  [ 12] pushint8 1 .............................. <1>
  [ 14] pushint8 1 .............................. <1>
  [ 16] pushint8 8 .............................. <8>
  [ 18] pusharglist 3 ........................... <1, 1, 8>
  [ 20] extcall 175 ............................. <image(1, 1, 8)>
  [ 22] pusharglistnoret 1 ...................... <image(1, 1, 8)>
  [ 24] extcall 50 .............................. return image(1, 1, 8)
  [ 26] pushzero ................................ <0>
  [ 27] pushzero ................................ <0>
  [ 28] pushzero ................................ <0>
  [ 29] pushzero ................................ <0>
  [ 30] pusharglist 4 ........................... <0, 0, 0, 0>
  [ 32] extcall 39 .............................. <rect(0, 0, 0, 0)>
  [ 34] setlocal 0 .............................. tOffset = rect(0, 0, 0, 0)
  [ 36] getparam 1 .............................. <tImage>
  [ 38] getobjprop 95 ........................... <tImage.width>
  [ 40] getprop 38 .............................. <pItemSlotRect>
  [ 42] getobjprop 95 ........................... <pItemSlotRect.width>
  [ 44] lt ...................................... <tImage.width < pItemSlotRect.width>
  [ 45] jmpifz [ 88] ............................ if tImage.width < pItemSlotRect.width then
  [ 48] getlocal 0 .............................. <tOffset>
  [ 50] pushint8 1 .............................. <1>
  [ 52] getprop 38 .............................. <pItemSlotRect>
  [ 54] getobjprop 95 ........................... <pItemSlotRect.width>
  [ 56] getparam 1 .............................. <tImage>
  [ 58] getobjprop 95 ........................... <tImage.width>
  [ 60] sub ..................................... <pItemSlotRect.width - tImage.width>
  [ 61] pushint8 2 .............................. <2>
  [ 63] div ..................................... <(pItemSlotRect.width - tImage.width) / 2>
  [ 64] pusharglist 1 ........................... <(pItemSlotRect.width - tImage.width) / 2>
  [ 66] extcall 172 ............................. <integer((pItemSlotRect.width - tImage.width) / 2)>
  [ 68] pusharglistnoret 3 ...................... <tOffset, 1, integer((pItemSlotRect.width - tImage.width) / 2)>
  [ 70] objcall 73 .............................. tOffset[1] = integer((pItemSlotRect.width - tImage.width) / 2)
  [ 72] getlocal 0 .............................. <tOffset>
  [ 74] pushint8 3 .............................. <3>
  [ 76] getlocal 0 .............................. <tOffset>
  [ 78] pushint8 1 .............................. <1>
  [ 80] pusharglist 2 ........................... <tOffset, 1>
  [ 82] objcall 75 .............................. <tOffset[1]>
  [ 84] pusharglistnoret 3 ...................... <tOffset, 3, tOffset[1]>
  [ 86] objcall 73 .............................. tOffset[3] = tOffset[1]
  [ 88] getparam 1 .............................. <tImage>
  [ 90] getobjprop 97 ........................... <tImage.height>
  [ 92] getprop 38 .............................. <pItemSlotRect>
  [ 94] getobjprop 97 ........................... <pItemSlotRect.height>
  [ 96] lt ...................................... <tImage.height < pItemSlotRect.height>
  [ 97] jmpifz [140] ............................ if tImage.height < pItemSlotRect.height then
  [100] getlocal 0 .............................. <tOffset>
  [102] pushint8 2 .............................. <2>
  [104] getprop 38 .............................. <pItemSlotRect>
  [106] getobjprop 97 ........................... <pItemSlotRect.height>
  [108] getparam 1 .............................. <tImage>
  [110] getobjprop 97 ........................... <tImage.height>
  [112] sub ..................................... <pItemSlotRect.height - tImage.height>
  [113] pushint8 2 .............................. <2>
  [115] div ..................................... <(pItemSlotRect.height - tImage.height) / 2>
  [116] pusharglist 1 ........................... <(pItemSlotRect.height - tImage.height) / 2>
  [118] extcall 172 ............................. <integer((pItemSlotRect.height - tImage.height) / 2)>
  [120] pusharglistnoret 3 ...................... <tOffset, 2, integer((pItemSlotRect.height - tImage.height) / 2)>
  [122] objcall 73 .............................. tOffset[2] = integer((pItemSlotRect.height - tImage.height) / 2)
  [124] getlocal 0 .............................. <tOffset>
  [126] pushint8 4 .............................. <4>
  [128] getlocal 0 .............................. <tOffset>
  [130] pushint8 2 .............................. <2>
  [132] pusharglist 2 ........................... <tOffset, 2>
  [134] objcall 75 .............................. <tOffset[2]>
  [136] pusharglistnoret 3 ...................... <tOffset, 4, tOffset[2]>
  [138] objcall 73 .............................. tOffset[4] = tOffset[2]
  [140] getprop 38 .............................. <pItemSlotRect>
  [142] getobjprop 95 ........................... <pItemSlotRect.width>
  [144] getprop 38 .............................. <pItemSlotRect>
  [146] getobjprop 97 ........................... <pItemSlotRect.height>
  [148] pushint8 32 ............................. <32>
  [150] pusharglist 3 ........................... <pItemSlotRect.width, pItemSlotRect.height, 32>
  [152] extcall 175 ............................. <image(pItemSlotRect.width, pItemSlotRect.height, 32)>
  [154] setlocal 1 .............................. tNewImg = image(pItemSlotRect.width, pItemSlotRect.height, 32)
  [156] getlocal 1 .............................. <tNewImg>
  [158] getparam 1 .............................. <tImage>
  [160] getparam 1 .............................. <tImage>
  [162] getobjprop 39 ........................... <tImage.rect>
  [164] getlocal 0 .............................. <tOffset>
  [166] add ..................................... <tImage.rect + tOffset>
  [167] getparam 1 .............................. <tImage>
  [169] getobjprop 39 ........................... <tImage.rect>
  [171] pusharglistnoret 4 ...................... <tNewImg, tImage, tImage.rect + tOffset, tImage.rect>
  [173] objcall 209 ............................. tNewImg.copyPixels(tImage, tImage.rect + tOffset, tImage.rect)
  [175] getlocal 1 .............................. <tNewImg>
  [177] pusharglistnoret 1 ...................... <tNewImg>
  [179] extcall 50 .............................. return tNewImg
  [181] ret
end

on showInfo me, tText
  [  0] getprop 28 .............................. <pState>
  [  2] pushsymb 29 ............................. <#closed>
  [  4] eq ...................................... <pState = #closed>
  [  5] jmpifz [ 13] ............................ if pState = #closed then
  [  8] pushzero ................................ <0>
  [  9] pusharglistnoret 1 ...................... <0>
  [ 11] extcall 50 .............................. return 0
  [ 13] getparam 1 .............................. <tText>
  [ 15] pusharglist 1 ........................... <tText>
  [ 17] extcall 54 .............................. <voidp(tText)>
  [ 19] jmpifz [ 30] ............................ if voidp(tText) then
  [ 22] pushcons 68 ............................. <"trading_additems">
  [ 24] pusharglist 1 ........................... <"trading_additems">
  [ 26] extcall 31 .............................. <getText("trading_additems")>
  [ 28] setparam 1 .............................. tText = getText("trading_additems")
  [ 30] getprop 30 .............................. <pTraderWndID>
  [ 32] pusharglist 1 ........................... <pTraderWndID>
  [ 34] extcall 87 .............................. <getWindow(pTraderWndID)>
  [ 36] pushzero ................................ <0>
  [ 37] eq ...................................... <getWindow(pTraderWndID) = 0>
  [ 38] jmpifz [ 46] ............................ if getWindow(pTraderWndID) = 0 then
  [ 41] pushzero ................................ <0>
  [ 42] pusharglistnoret 1 ...................... <0>
  [ 44] extcall 50 .............................. return 0
  [ 46] getprop 30 .............................. <pTraderWndID>
  [ 48] pusharglist 1 ........................... <pTraderWndID>
  [ 50] extcall 87 .............................. <getWindow(pTraderWndID)>
  [ 52] pushcons 26 ............................. <"trading_instructions_text">
  [ 54] pusharglist 2 ........................... <getWindow(pTraderWndID), "trading_instructions_text">
  [ 56] objcall 92 .............................. <getWindow(pTraderWndID).getElement("trading_instructions_text")>
  [ 58] getparam 1 .............................. <tText>
  [ 60] pusharglist 2 ........................... <getWindow(pTraderWndID).getElement("trading_instructions_text"), tText>
  [ 62] objcall 93 .............................. <getWindow(pTraderWndID).getElement("trading_instructions_text").setText(tText)>
  [ 64] pusharglistnoret 1 ...................... <getWindow(pTraderWndID).getElement("trading_instructions_text").setText(tText)>
  [ 66] extcall 50 .............................. return getWindow(pTraderWndID).getElement("trading_instructions_text").setText(tText)
  [ 68] ret
end

on updateDetailsBubble me, towner, tSlotNumber
  [  0] getparam 1 .............................. <towner>
  [  2] peek 0 .................................. case towner of
  [  4] pushsymb 51 ............................. <#me>
  [  6] eq
  [  7] jmpifz [ 25] ............................ (case) #me:
  [ 10] pushcons 14 ............................. <"trading_mystuff_">
  [ 12] setlocal 0 .............................. tElemPrefix = "trading_mystuff_"
  [ 14] getprop 40 .............................. <pMySlotProps>
  [ 16] setlocal 1 .............................. tSlotProps = pMySlotProps
  [ 18] getprop 34 .............................. <pItemListMe>
  [ 20] setlocal 2 .............................. tItemList = pItemListMe
  [ 22] jmp [ 55]
  [ 25] peek 0
  [ 27] pushsymb 227 ............................ <#she>
  [ 29] eq
  [ 30] jmpifz [ 48] ............................ (case) #she:
  [ 33] pushcons 22 ............................. <"trading_herstuff_">
  [ 35] setlocal 0 .............................. tElemPrefix = "trading_herstuff_"
  [ 37] getprop 41 .............................. <pHerSlotProps>
  [ 39] setlocal 1 .............................. tSlotProps = pHerSlotProps
  [ 41] getprop 35 .............................. <pItemListHe>
  [ 43] setlocal 2 .............................. tItemList = pItemListHe
  [ 45] jmp [ 55] ............................... (case) otherwise:
  [ 48] pop 1
  [ 50] pushzero ................................ <0>
  [ 51] pusharglistnoret 1 ...................... <0>
  [ 53] extcall 50 .............................. return 0
  [ 55] pop 1 ................................... end case
  [ 57] getparam 2 .............................. <tSlotNumber>
  [ 59] getlocal 1 .............................. <tSlotProps>
  [ 61] getobjprop 105 .......................... <tSlotProps.count>
  [ 63] gt ...................................... <tSlotNumber > tSlotProps.count>
  [ 64] jmpifz [ 72] ............................ if tSlotNumber > tSlotProps.count then
  [ 67] pushzero ................................ <0>
  [ 68] pusharglistnoret 1 ...................... <0>
  [ 70] extcall 50 .............................. return 0
  [ 72] getprop 30 .............................. <pTraderWndID>
  [ 74] pusharglist 1 ........................... <pTraderWndID>
  [ 76] extcall 72 .............................. <windowExists(pTraderWndID)>
  [ 78] not ..................................... <not windowExists(pTraderWndID)>
  [ 79] jmpifz [ 87] ............................ if not windowExists(pTraderWndID) then
  [ 82] pushzero ................................ <0>
  [ 83] pusharglistnoret 1 ...................... <0>
  [ 85] extcall 50 .............................. return 0
  [ 87] getprop 30 .............................. <pTraderWndID>
  [ 89] pusharglist 1 ........................... <pTraderWndID>
  [ 91] extcall 87 .............................. <getWindow(pTraderWndID)>
  [ 93] setlocal 3 .............................. tTradeWindow = getWindow(pTraderWndID)
  [ 95] getlocal 3 .............................. <tTradeWindow>
  [ 97] pushzero ................................ <0>
  [ 98] eq ...................................... <tTradeWindow = 0>
  [ 99] jmpifz [107] ............................ if tTradeWindow = 0 then
  [102] pushzero ................................ <0>
  [103] pusharglistnoret 1 ...................... <0>
  [105] extcall 50 .............................. return 0
  [107] getlocal 3 .............................. <tTradeWindow>
  [109] getlocal 0 .............................. <tElemPrefix>
  [111] getparam 2 .............................. <tSlotNumber>
  [113] joinstr ................................. <tElemPrefix & tSlotNumber>
  [114] pusharglist 2 ........................... <tTradeWindow, tElemPrefix & tSlotNumber>
  [116] objcall 94 .............................. <tTradeWindow.elementExists(tElemPrefix & tSlotNumber)>
  [118] not ..................................... <not tTradeWindow.elementExists(tElemPrefix & tSlotNumber)>
  [119] jmpifz [127] ............................ if not tTradeWindow.elementExists(tElemPrefix & tSlotNumber) then
  [122] pushzero ................................ <0>
  [123] pusharglistnoret 1 ...................... <0>
  [125] extcall 50 .............................. return 0
  [127] getlocal 3 .............................. <tTradeWindow>
  [129] getlocal 0 .............................. <tElemPrefix>
  [131] getparam 2 .............................. <tSlotNumber>
  [133] joinstr ................................. <tElemPrefix & tSlotNumber>
  [134] pusharglist 2 ........................... <tTradeWindow, tElemPrefix & tSlotNumber>
  [136] objcall 92 .............................. <tTradeWindow.getElement(tElemPrefix & tSlotNumber)>
  [138] setlocal 4 .............................. tSlotElem = tTradeWindow.getElement(tElemPrefix & tSlotNumber)
  [140] getparam 0 .............................. <me>
  [142] pusharglistnoret 1 ...................... <me>
  [144] objcall 22 .............................. me.removeDetailsBubble()
  [146] getprop 45 .............................. <pDetailsBubbleId>
  [148] pushcons 69 ............................. <"Details Bubble Class">
  [150] pusharglist 2 ........................... <pDetailsBubbleId, "Details Bubble Class">
  [152] extcall 228 ............................. <createObject(pDetailsBubbleId, "Details Bubble Class")>
  [154] setlocal 5 .............................. tBubbleObj = createObject(pDetailsBubbleId, "Details Bubble Class")
  [156] getlocal 5 .............................. <tBubbleObj>
  [158] pushcons 70 ............................. <"habbo_trading_details.window">
  [160] getlocal 4 .............................. <tSlotElem>
  [162] pushsymb 39 ............................. <#rect>
  [164] pusharglist 2 ........................... <tSlotElem, #rect>
  [166] objcall 96 .............................. <tSlotElem.getProperty(#rect)>
  [168] pushsymb 229 ............................ <#right>
  [170] pusharglistnoret 4 ...................... <tBubbleObj, "habbo_trading_details.window", tSlotElem.getProperty(#rect), #right>
  [172] objcall 230 ............................. tBubbleObj.createWithContent("habbo_trading_details.window", tSlotElem.getProperty(#rect), #right)
  [174] getlocal 5 .............................. <tBubbleObj>
  [176] pusharglist 1 ........................... <tBubbleObj>
  [178] objcall 231 ............................. <tBubbleObj.getWindowObj()>
  [180] setlocal 6 .............................. tBubbleWindow = tBubbleObj.getWindowObj()
  [182] getlocal 6 .............................. <tBubbleWindow>
  [184] pusharglist 1 ........................... <tBubbleWindow>
  [186] extcall 232 ............................. <objectp(tBubbleWindow)>
  [188] not ..................................... <not objectp(tBubbleWindow)>
  [189] jmpifz [197] ............................ if not objectp(tBubbleWindow) then
  [192] pushzero ................................ <0>
  [193] pusharglistnoret 1 ...................... <0>
  [195] extcall 50 .............................. return 0
  [197] getprop 47 .............................. <pProductPreviewObjId>
  [199] pusharglist 1 ........................... <pProductPreviewObjId>
  [201] extcall 158 ............................. <objectExists(pProductPreviewObjId)>
  [203] not ..................................... <not objectExists(pProductPreviewObjId)>
  [204] jmpifz [218] ............................ if not objectExists(pProductPreviewObjId) then
  [207] getprop 47 .............................. <pProductPreviewObjId>
  [209] pushcons 71 ............................. <"Product Preview Class">
  [211] pusharglist 1 ........................... <["Product Preview Class"]>
  [213] pushlist ................................ <["Product Preview Class"]>
  [214] pusharglistnoret 2 ...................... <pProductPreviewObjId, ["Product Preview Class"]>
  [216] extcall 228 ............................. createObject(pProductPreviewObjId, ["Product Preview Class"])
  [218] getprop 47 .............................. <pProductPreviewObjId>
  [220] pusharglist 1 ........................... <pProductPreviewObjId>
  [222] extcall 60 .............................. <getObject(pProductPreviewObjId)>
  [224] setlocal 7 .............................. tPreviewObj = getObject(pProductPreviewObjId)
  [226] getlocal 1 .............................. <tSlotProps>
  [228] getparam 2 .............................. <tSlotNumber>
  [230] pusharglist 2 ........................... <tSlotProps, tSlotNumber>
  [232] objcall 75 .............................. <tSlotProps[tSlotNumber]>
  [234] pushcons 72 ............................. <"class">
  [236] pusharglist 2 ........................... <tSlotProps[tSlotNumber], "class">
  [238] objcall 149 ............................. <tSlotProps[tSlotNumber].getaProp("class")>
  [240] setlocal 8 .............................. tClass = tSlotProps[tSlotNumber].getaProp("class")
  [242] getlocal 1 .............................. <tSlotProps>
  [244] getparam 2 .............................. <tSlotNumber>
  [246] pusharglist 2 ........................... <tSlotProps, tSlotNumber>
  [248] objcall 177 ............................. <tSlotProps.getPropAt(tSlotNumber)>
  [250] setlocal 9 .............................. tSlotID = tSlotProps.getPropAt(tSlotNumber)
  [252] getlocal 2 .............................. <tItemList>
  [254] peek 0
  [256] pusharglist 1
  [258] extcall 105
  [260] pushint8 1
  [262] peek 0
  [264] peek 2
  [266] lteq
  [267] jmpifz [335] ............................ repeat with tItem in tItemList
  [270] peek 2
  [272] peek 1
  [274] pusharglist 2
  [276] extcall 75
  [278] setlocal 10
  [280] getlocal 10 ............................. <tItem>
  [282] pushsymb 151 ............................ <#class>
  [284] pusharglist 2 ........................... <tItem, #class>
  [286] objcall 75 .............................. <tItem[#class]>
  [288] getlocal 8 .............................. <tClass>
  [290] eq ...................................... <tItem[#class] = tClass>
  [291] jmpifz [330] ............................ if tItem[#class] = tClass then
  [294] getlocal 8 .............................. <tClass>
  [296] pushcons 43 ............................. <"poster">
  [298] eq ...................................... <tClass = "poster">
  [299] jmpifz [322] ............................ if tClass = "poster" then
  [302] pushcons 73 ............................. <"poster_">
  [304] getlocal 10 ............................. <tItem>
  [306] pushsymb 152 ............................ <#data>
  [308] pusharglist 2 ........................... <tItem, #data>
  [310] objcall 75 .............................. <tItem[#data]>
  [312] joinstr ................................. <"poster_" & tItem[#data]>
  [313] getlocal 9 .............................. <tSlotID>
  [315] nteq .................................... <("poster_" & tItem[#data]) <> tSlotID>
  [316] jmpifz [322] ............................ if ("poster_" & tItem[#data]) <> tSlotID then
  [319] jmp [330] ............................... next repeat
  [322] getlocal 10 ............................. <tItem>
  [324] pusharglist 1 ........................... <tItem>
  [326] objcall 176 ............................. <tItem.duplicate()>
  [328] setlocal 11 ............................. tItemData = tItem.duplicate()
  [330] pushint8 1
  [332] add
  [333] endrepeat [262]
  [335] pop 3
  [337] getlocal 11 ............................. <tItemData>
  [339] pusharglist 1 ........................... <tItemData>
  [341] extcall 54 .............................. <voidp(tItemData)>
  [343] jmpifz [351] ............................ if voidp(tItemData) then
  [346] pushzero ................................ <0>
  [347] pusharglistnoret 1 ...................... <0>
  [349] extcall 50 .............................. return 0
  [351] pusharglist 0 ........................... <[:]>
  [353] pushproplist ............................ <[:]>
  [354] setlocal 12 ............................. tPreviewData = [:]
  [356] getlocal 8 .............................. <tClass>
  [358] pushcons 43 ............................. <"poster">
  [360] eq ...................................... <tClass = "poster">
  [361] jmpifz [386] ............................ if tClass = "poster" then / else
  [364] getlocal 12 ............................. <tPreviewData>
  [366] pushsymb 151 ............................ <#class>
  [368] getlocal 8 .............................. <tClass>
  [370] getlocal 11 ............................. <tItemData>
  [372] pushsymb 152 ............................ <#data>
  [374] pusharglist 2 ........................... <tItemData, #data>
  [376] objcall 75 .............................. <tItemData[#data]>
  [378] joinpadstr .............................. <tClass && tItemData[#data]>
  [379] pusharglistnoret 3 ...................... <tPreviewData, #class, tClass && tItemData[#data]>
  [381] objcall 154 ............................. tPreviewData.setaProp(#class, tClass && tItemData[#data])
  [383] jmp [396]
  [386] getlocal 12 ............................. <tPreviewData>
  [388] pushsymb 151 ............................ <#class>
  [390] getlocal 8 .............................. <tClass>
  [392] pusharglistnoret 3 ...................... <tPreviewData, #class, tClass>
  [394] objcall 154 ............................. tPreviewData.setaProp(#class, tClass)
  [396] getlocal 12 ............................. <tPreviewData>
  [398] pushsymb 156 ............................ <#name>
  [400] getlocal 11 ............................. <tItemData>
  [402] pushsymb 156 ............................ <#name>
  [404] pusharglist 2 ........................... <tItemData, #name>
  [406] objcall 75 .............................. <tItemData[#name]>
  [408] pusharglistnoret 3 ...................... <tPreviewData, #name, tItemData[#name]>
  [410] objcall 154 ............................. tPreviewData.setaProp(#name, tItemData[#name])
  [412] getlocal 12 ............................. <tPreviewData>
  [414] pushsymb 233 ............................ <#custom>
  [416] getlocal 11 ............................. <tItemData>
  [418] pushsymb 233 ............................ <#custom>
  [420] pusharglist 2 ........................... <tItemData, #custom>
  [422] objcall 75 .............................. <tItemData[#custom]>
  [424] pusharglistnoret 3 ...................... <tPreviewData, #custom, tItemData[#custom]>
  [426] objcall 154 ............................. tPreviewData.setaProp(#custom, tItemData[#custom])
  [428] getlocal 12 ............................. <tPreviewData>
  [430] pushsymb 234 ............................ <#direction>
  [432] pushint8 2 .............................. <2>
  [434] pushint8 2 .............................. <2>
  [436] pushint8 2 .............................. <2>
  [438] pusharglist 3 ........................... <[2, 2, 2]>
  [440] pushlist ................................ <[2, 2, 2]>
  [441] pusharglistnoret 3 ...................... <tPreviewData, #direction, [2, 2, 2]>
  [443] objcall 154 ............................. tPreviewData.setaProp(#direction, [2, 2, 2])
  [445] getlocal 12 ............................. <tPreviewData>
  [447] pushsymb 235 ............................ <#dimensions>
  [449] getlocal 11 ............................. <tItemData>
  [451] pushsymb 235 ............................ <#dimensions>
  [453] pusharglist 2 ........................... <tItemData, #dimensions>
  [455] objcall 75 .............................. <tItemData[#dimensions]>
  [457] pusharglistnoret 3 ...................... <tPreviewData, #dimensions, tItemData[#dimensions]>
  [459] objcall 154 ............................. tPreviewData.setaProp(#dimensions, tItemData[#dimensions])
  [461] getlocal 12 ............................. <tPreviewData>
  [463] pushsymb 205 ............................ <#colors>
  [465] getlocal 11 ............................. <tItemData>
  [467] pushsymb 205 ............................ <#colors>
  [469] pusharglist 2 ........................... <tItemData, #colors>
  [471] objcall 75 .............................. <tItemData[#colors]>
  [473] pusharglistnoret 3 ...................... <tPreviewData, #colors, tItemData[#colors]>
  [475] objcall 154 ............................. tPreviewData.setaProp(#colors, tItemData[#colors])
  [477] getlocal 11 ............................. <tItemData>
  [479] pushsymb 236 ............................ <#striptype>
  [481] pusharglist 2 ........................... <tItemData, #striptype>
  [483] objcall 75 .............................. <tItemData[#striptype]>
  [485] peek 0 .................................. case tItemData[#striptype] of
  [487] pushcons 74 ............................. <"s">
  [489] eq
  [490] jmpifz [506] ............................ (case) "s":
  [493] getlocal 12 ............................. <tPreviewData>
  [495] pushsymb 237 ............................ <#objectType>
  [497] pushcons 74 ............................. <"s">
  [499] pusharglistnoret 3 ...................... <tPreviewData, #objectType, "s">
  [501] objcall 154 ............................. tPreviewData.setaProp(#objectType, "s")
  [503] jmp [534]
  [506] peek 0
  [508] pushcons 75 ............................. <"i">
  [510] eq
  [511] jmpifz [527] ............................ (case) "i":
  [514] getlocal 12 ............................. <tPreviewData>
  [516] pushsymb 237 ............................ <#objectType>
  [518] pushcons 75 ............................. <"i">
  [520] pusharglistnoret 3 ...................... <tPreviewData, #objectType, "i">
  [522] objcall 154 ............................. tPreviewData.setaProp(#objectType, "i")
  [524] jmp [534] ............................... (case) otherwise:
  [527] pop 1
  [529] pushzero ................................ <0>
  [530] pusharglistnoret 1 ...................... <0>
  [532] extcall 50 .............................. return 0
  [534] pop 1 ................................... end case
  [536] getlocal 7 .............................. <tPreviewObj>
  [538] pushzero ................................ <0>
  [539] eq ...................................... <tPreviewObj = 0>
  [540] jmpifz [548] ............................ if tPreviewObj = 0 then
  [543] pushzero ................................ <0>
  [544] pusharglistnoret 1 ...................... <0>
  [546] extcall 50 .............................. return 0
  [548] getlocal 7 .............................. <tPreviewObj>
  [550] getlocal 12 ............................. <tPreviewData>
  [552] pusharglistnoret 2 ...................... <tPreviewObj, tPreviewData>
  [554] objcall 238 ............................. tPreviewObj.define(tPreviewData)
  [556] getlocal 7 .............................. <tPreviewObj>
  [558] pusharglist 1 ........................... <tPreviewObj>
  [560] objcall 239 ............................. <tPreviewObj.getPicture()>
  [562] setlocal 13 ............................. tImage = tPreviewObj.getPicture()
  [564] getlocal 13 ............................. <tImage>
  [566] pushzero ................................ <0>
  [567] eq ...................................... <tImage = 0>
  [568] jmpifz [576] ............................ if tImage = 0 then
  [571] pushzero ................................ <0>
  [572] pusharglistnoret 1 ...................... <0>
  [574] extcall 50 .............................. return 0
  [576] getlocal 1 .............................. <tSlotProps>
  [578] getparam 2 .............................. <tSlotNumber>
  [580] pusharglist 2 ........................... <tSlotProps, tSlotNumber>
  [582] objcall 75 .............................. <tSlotProps[tSlotNumber]>
  [584] pushsymb 156 ............................ <#name>
  [586] pusharglist 2 ........................... <tSlotProps[tSlotNumber], #name>
  [588] objcall 75 .............................. <tSlotProps[tSlotNumber][#name]>
  [590] setlocal 14 ............................. tFurniName = tSlotProps[tSlotNumber][#name]
  [592] getlocal 6 .............................. <tBubbleWindow>
  [594] pushcons 76 ............................. <"trading_details_name">
  [596] pusharglist 2 ........................... <tBubbleWindow, "trading_details_name">
  [598] objcall 92 .............................. <tBubbleWindow.getElement("trading_details_name")>
  [600] setlocal 15 ............................. tNameElem = tBubbleWindow.getElement("trading_details_name")
  [602] getlocal 15 ............................. <tNameElem>
  [604] getlocal 14 ............................. <tFurniName>
  [606] pusharglistnoret 2 ...................... <tNameElem, tFurniName>
  [608] objcall 93 .............................. tNameElem.setText(tFurniName)
  [610] getlocal 15 ............................. <tNameElem>
  [612] pushsymb 95 ............................. <#width>
  [614] pusharglist 2 ........................... <tNameElem, #width>
  [616] objcall 96 .............................. <tNameElem.getProperty(#width)>
  [618] getlocal 13 ............................. <tImage>
  [620] getobjprop 95 ........................... <tImage.width>
  [622] sub ..................................... <tNameElem.getProperty(#width) - tImage.width>
  [623] pushint8 2 .............................. <2>
  [625] div ..................................... <(tNameElem.getProperty(#width) - tImage.width) / 2>
  [626] pushint8 10 ............................. <10>
  [628] pusharglist 2 ........................... <(tNameElem.getProperty(#width) - tImage.width) / 2, 10>
  [630] extcall 240 ............................. <max((tNameElem.getProperty(#width) - tImage.width) / 2, 10)>
  [632] setlocal 16 ............................. tMarginH = max((tNameElem.getProperty(#width) - tImage.width) / 2, 10)
  [634] pushint8 10 ............................. <10>
  [636] setlocal 17 ............................. tMarginV = 10
  [638] getlocal 13 ............................. <tImage>
  [640] getobjprop 95 ........................... <tImage.width>
  [642] getlocal 16 ............................. <tMarginH>
  [644] pushint8 2 .............................. <2>
  [646] mul ..................................... <tMarginH * 2>
  [647] add ..................................... <tImage.width + (tMarginH * 2)>
  [648] getlocal 13 ............................. <tImage>
  [650] getobjprop 97 ........................... <tImage.height>
  [652] getlocal 17 ............................. <tMarginV>
  [654] pushint8 2 .............................. <2>
  [656] mul ..................................... <tMarginV * 2>
  [657] add ..................................... <tImage.height + (tMarginV * 2)>
  [658] pushint8 32 ............................. <32>
  [660] pusharglist 3 ........................... <tImage.width + (tMarginH * 2), tImage.height + (tMarginV * 2), 32>
  [662] extcall 175 ............................. <image(tImage.width + (tMarginH * 2), tImage.height + (tMarginV * 2), 32)>
  [664] setlocal 18 ............................. tNewImage = image(tImage.width + (tMarginH * 2), tImage.height + (tMarginV * 2), 32)
  [666] getlocal 18 ............................. <tNewImage>
  [668] getlocal 13 ............................. <tImage>
  [670] getlocal 13 ............................. <tImage>
  [672] getobjprop 39 ........................... <tImage.rect>
  [674] getlocal 16 ............................. <tMarginH>
  [676] getlocal 17 ............................. <tMarginV>
  [678] getlocal 16 ............................. <tMarginH>
  [680] getlocal 17 ............................. <tMarginV>
  [682] pusharglist 4 ........................... <[tMarginH, tMarginV, tMarginH, tMarginV]>
  [684] pushlist ................................ <[tMarginH, tMarginV, tMarginH, tMarginV]>
  [685] add ..................................... <tImage.rect + [tMarginH, tMarginV, tMarginH, tMarginV]>
  [686] getlocal 13 ............................. <tImage>
  [688] getobjprop 39 ........................... <tImage.rect>
  [690] pusharglistnoret 4 ...................... <tNewImage, tImage, tImage.rect + [tMarginH, tMarginV, tMarginH, tMarginV], tImage.rect>
  [692] objcall 209 ............................. tNewImage.copyPixels(tImage, tImage.rect + [tMarginH, tMarginV, tMarginH, tMarginV], tImage.rect)
  [694] getlocal 18 ............................. <tNewImage>
  [696] setlocal 13 ............................. tImage = tNewImage
  [698] getlocal 6 .............................. <tBubbleWindow>
  [700] pushcons 77 ............................. <"trading_details_image">
  [702] pusharglist 2 ........................... <tBubbleWindow, "trading_details_image">
  [704] objcall 94 .............................. <tBubbleWindow.elementExists("trading_details_image")>
  [706] not ..................................... <not tBubbleWindow.elementExists("trading_details_image")>
  [707] jmpifz [715] ............................ if not tBubbleWindow.elementExists("trading_details_image") then
  [710] pushzero ................................ <0>
  [711] pusharglistnoret 1 ...................... <0>
  [713] extcall 50 .............................. return 0
  [715] getlocal 6 .............................. <tBubbleWindow>
  [717] pushcons 77 ............................. <"trading_details_image">
  [719] pusharglist 2 ........................... <tBubbleWindow, "trading_details_image">
  [721] objcall 92 .............................. <tBubbleWindow.getElement("trading_details_image")>
  [723] setlocal 19 ............................. tImageElem = tBubbleWindow.getElement("trading_details_image")
  [725] getlocal 13 ............................. <tImage>
  [727] getobjprop 95 ........................... <tImage.width>
  [729] getlocal 19 ............................. <tImageElem>
  [731] pushsymb 95 ............................. <#width>
  [733] pusharglist 2 ........................... <tImageElem, #width>
  [735] objcall 96 .............................. <tImageElem.getProperty(#width)>
  [737] sub ..................................... <tImage.width - tImageElem.getProperty(#width)>
  [738] setlocal 20 ............................. tOffsetX = tImage.width - tImageElem.getProperty(#width)
  [740] getlocal 13 ............................. <tImage>
  [742] getobjprop 97 ........................... <tImage.height>
  [744] getlocal 19 ............................. <tImageElem>
  [746] pushsymb 97 ............................. <#height>
  [748] pusharglist 2 ........................... <tImageElem, #height>
  [750] objcall 96 .............................. <tImageElem.getProperty(#height)>
  [752] sub ..................................... <tImage.height - tImageElem.getProperty(#height)>
  [753] setlocal 21 ............................. tOffsetY = tImage.height - tImageElem.getProperty(#height)
  [755] getlocal 6 .............................. <tBubbleWindow>
  [757] pushcons 77 ............................. <"trading_details_image">
  [759] pusharglist 2 ........................... <tBubbleWindow, "trading_details_image">
  [761] objcall 92 .............................. <tBubbleWindow.getElement("trading_details_image")>
  [763] getlocal 13 ............................. <tImage>
  [765] pusharglistnoret 2 ...................... <tBubbleWindow.getElement("trading_details_image"), tImage>
  [767] objcall 170 ............................. tBubbleWindow.getElement("trading_details_image").feedImage(tImage)
  [769] getlocal 6 .............................. <tBubbleWindow>
  [771] getlocal 20 ............................. <tOffsetX>
  [773] getlocal 21 ............................. <tOffsetY>
  [775] pusharglistnoret 3 ...................... <tBubbleWindow, tOffsetX, tOffsetY>
  [777] objcall 241 ............................. tBubbleWindow.resizeBy(tOffsetX, tOffsetY)
  [779] getlocal 5 .............................. <tBubbleObj>
  [781] pusharglistnoret 1 ...................... <tBubbleObj>
  [783] objcall 242 ............................. tBubbleObj.updateBubble()
  [785] getlocal 6 .............................. <tBubbleWindow>
  [787] pushcons 77 ............................. <"trading_details_image">
  [789] pusharglist 2 ........................... <tBubbleWindow, "trading_details_image">
  [791] objcall 92 .............................. <tBubbleWindow.getElement("trading_details_image")>
  [793] pushzero ................................ <0>
  [794] pushzero ................................ <0>
  [795] pushzero ................................ <0>
  [796] pusharglist 3 ........................... <0, 0, 0>
  [798] extcall 141 ............................. <rgb(0, 0, 0)>
  [800] pusharglistnoret 2 ...................... <tBubbleWindow.getElement("trading_details_image"), rgb(0, 0, 0)>
  [802] objcall 142 ............................. tBubbleWindow.getElement("trading_details_image").draw(rgb(0, 0, 0))
  [804] ret
end

on removeDetailsBubble me
  [  0] getprop 45 .............................. <pDetailsBubbleId>
  [  2] pusharglist 1 ........................... <pDetailsBubbleId>
  [  4] extcall 158 ............................. <objectExists(pDetailsBubbleId)>
  [  6] jmpifz [ 16] ............................ if objectExists(pDetailsBubbleId) then
  [  9] getprop 45 .............................. <pDetailsBubbleId>
  [ 11] pusharglistnoret 1 ...................... <pDetailsBubbleId>
  [ 13] extcall 262 ............................. removeObject(pDetailsBubbleId)
  [ 16] ret
end

on blendLockedSlots me, tBoolean
  [  0] getprop 28 .............................. <pState>
  [  2] pushsymb 29 ............................. <#closed>
  [  4] eq ...................................... <pState = #closed>
  [  5] jmpifz [ 13] ............................ if pState = #closed then
  [  8] pushzero ................................ <0>
  [  9] pusharglistnoret 1 ...................... <0>
  [ 11] extcall 50 .............................. return 0
  [ 13] pushint8 100 ............................ <100>
  [ 15] setlocal 0 .............................. tBlend = 100
  [ 17] getparam 1 .............................. <tBoolean>
  [ 19] jmpifz [ 26] ............................ if tBoolean then
  [ 22] pushint8 60 ............................. <60>
  [ 24] setlocal 0 .............................. tBlend = 60
  [ 26] getprop 30 .............................. <pTraderWndID>
  [ 28] pusharglist 1 ........................... <pTraderWndID>
  [ 30] extcall 87 .............................. <getWindow(pTraderWndID)>
  [ 32] setlocal 1 .............................. tWndObj = getWindow(pTraderWndID)
  [ 34] getlocal 1 .............................. <tWndObj>
  [ 36] pushzero ................................ <0>
  [ 37] eq ...................................... <tWndObj = 0>
  [ 38] jmpifz [ 46] ............................ if tWndObj = 0 then
  [ 41] pushzero ................................ <0>
  [ 42] pusharglistnoret 1 ...................... <0>
  [ 44] extcall 50 .............................. return 0
  [ 46] pushint8 1 .............................. <1>
  [ 48] setlocal 2
  [ 50] getlocal 2
  [ 52] getprop 34 .............................. <pItemListMe>
  [ 54] getobjprop 105 .......................... <pItemListMe.count>
  [ 56] lteq
  [ 57] jmpifz [110] ............................ repeat with i = 1 to pItemListMe.count
  [ 60] getlocal 1 .............................. <tWndObj>
  [ 62] pushcons 14 ............................. <"trading_mystuff_">
  [ 64] getlocal 2 .............................. <i>
  [ 66] joinstr ................................. <"trading_mystuff_" & i>
  [ 67] pusharglist 2 ........................... <tWndObj, "trading_mystuff_" & i>
  [ 69] objcall 92 .............................. <tWndObj.getElement("trading_mystuff_" & i)>
  [ 71] setlocal 3 .............................. tElement = tWndObj.getElement("trading_mystuff_" & i)
  [ 73] getlocal 3 .............................. <tElement>
  [ 75] pushzero ................................ <0>
  [ 76] nteq .................................... <tElement <> 0>
  [ 77] jmpifz [ 90] ............................ if tElement <> 0 then
  [ 80] getlocal 3 .............................. <tElement>
  [ 82] pushsymb 113 ............................ <#blend>
  [ 84] pushint8 60 ............................. <60>
  [ 86] pusharglistnoret 3 ...................... <tElement, #blend, 60>
  [ 88] objcall 81 .............................. tElement.setProperty(#blend, 60)
  [ 90] getlocal 2 .............................. <i>
  [ 92] getprop 37 .............................. <pMaxTradeItems>
  [ 94] eq ...................................... <i = pMaxTradeItems>
  [ 95] jmpifz [101] ............................ if i = pMaxTradeItems then
  [ 98] jmp [110] ............................... exit repeat
  [101] pushint8 1
  [103] getlocal 2
  [105] add
  [106] setlocal 2
  [108] endrepeat [ 50]
  [110] ret
end

on sendMessage me, tMessageName, tMessage
  [  0] getparam 1 .............................. <tMessageName>
  [  2] pusharglist 1 ........................... <tMessageName>
  [  4] extcall 265 ............................. <stringp(tMessageName)>
  [  7] not ..................................... <not stringp(tMessageName)>
  [  8] jmpifz [ 16] ............................ if not stringp(tMessageName) then
  [ 11] pushzero ................................ <0>
  [ 12] pusharglistnoret 1 ...................... <0>
  [ 14] extcall 50 .............................. return 0
  [ 16] getparam 2 .............................. <tMessage>
  [ 18] pusharglist 1 ........................... <tMessage>
  [ 20] extcall 54 .............................. <voidp(tMessage)>
  [ 22] not ..................................... <not voidp(tMessage)>
  [ 23] getparam 2 .............................. <tMessage>
  [ 25] getobjprop 146 .......................... <tMessage.ilk>
  [ 27] pushsymb 147 ............................ <#propList>
  [ 29] nteq .................................... <tMessage.ilk <> #propList>
  [ 30] and ..................................... <not voidp(tMessage) and (tMessage.ilk <> #propList)>
  [ 31] jmpifz [ 39] ............................ if not voidp(tMessage) and (tMessage.ilk <> #propList) then
  [ 34] pushzero ................................ <0>
  [ 35] pusharglistnoret 1 ...................... <0>
  [ 37] extcall 50 .............................. return 0
  [ 39] pushcons 78 ............................. <"connection.info.id">
  [ 41] pusharglist 1 ........................... <"connection.info.id">
  [ 43] extcall 267 ............................. <getVariable("connection.info.id")>
  [ 46] pusharglist 1 ........................... <getVariable("connection.info.id")>
  [ 48] extcall 266 ............................. <getConnection(getVariable("connection.info.id"))>
  [ 51] setlocal 0 .............................. tConn = getConnection(getVariable("connection.info.id"))
  [ 53] getlocal 0 .............................. <tConn>
  [ 55] not ..................................... <not tConn>
  [ 56] jmpifz [ 64] ............................ if not tConn then
  [ 59] pushzero ................................ <0>
  [ 60] pusharglistnoret 1 ...................... <0>
  [ 62] extcall 50 .............................. return 0
  [ 64] getlocal 0 .............................. <tConn>
  [ 66] getparam 1 .............................. <tMessageName>
  [ 68] getparam 2 .............................. <tMessage>
  [ 70] pusharglist 3 ........................... <tConn, tMessageName, tMessage>
  [ 72] objcall 268 ............................. <tConn.send(tMessageName, tMessage)>
  [ 75] pusharglistnoret 1 ...................... <tConn.send(tMessageName, tMessage)>
  [ 77] extcall 50 .............................. return tConn.send(tMessageName, tMessage)
  [ 79] ret
end

on eventProcTrading me, tEvent, tSprID, tParam
  [  0] pushint16 950 ........................... <950>
  [  3] pusharglistnoret 1 ...................... <950>
  [  5] extcall 71 .............................. sendProcessTracking(950)
  [  7] getprop 28 .............................. <pState>
  [  9] pushsymb 29 ............................. <#closed>
  [ 11] eq ...................................... <pState = #closed>
  [ 12] jmpifz [ 20] ............................ if pState = #closed then
  [ 15] pushzero ................................ <0>
  [ 16] pusharglistnoret 1 ...................... <0>
  [ 18] extcall 50 .............................. return 0
  [ 20] getparam 1 .............................. <tEvent>
  [ 22] peek 0 .................................. case tEvent of
  [ 24] pushsymb 119 ............................ <#mouseUp>
  [ 26] eq
  [ 27] jmpifz [820] ............................ (case) #mouseUp:
  [ 30] getparam 2 .............................. <tSprID>
  [ 32] peek 0 .................................. case tSprID of
  [ 34] pushcons 79 ............................. <"trading_confirm_check">
  [ 36] nteq
  [ 37] jmpifz [ 48] ............................ (case) "trading_confirm_check", ...
  [ 40] peek 0
  [ 42] pushcons 28 ............................. <"trading_accept">
  [ 44] eq
  [ 45] jmpifz [281] ............................ (case) ..., "trading_accept":
  [ 48] getprop 32 .............................. <pAcceptFlagMe>
  [ 50] jmpifz [ 70] ............................ if pAcceptFlagMe then / else
  [ 53] pop 2
  [ 55] getparam 0 .............................. <me>
  [ 57] pushcons 80 ............................. <"TRADE_UNACCEPT">
  [ 59] pusharglist 2 ........................... <me, "TRADE_UNACCEPT">
  [ 61] objcall 24 .............................. <me.sendMessage("TRADE_UNACCEPT")>
  [ 63] pusharglistnoret 1 ...................... <me.sendMessage("TRADE_UNACCEPT")>
  [ 65] extcall 50 .............................. return me.sendMessage("TRADE_UNACCEPT")
  [ 67] jmp [278]
  [ 70] getprop 41 .............................. <pHerSlotProps>
  [ 72] getobjprop 105 .......................... <pHerSlotProps.count>
  [ 74] pushzero ................................ <0>
  [ 75] eq ...................................... <pHerSlotProps.count = 0>
  [ 76] jmpifz [247] ............................ if pHerSlotProps.count = 0 then / else
  [ 79] getprop 44 .............................. <pRequiredDownloadsToTrade>
  [ 81] getobjprop 105 .......................... <pRequiredDownloadsToTrade.count>
  [ 83] pushzero ................................ <0>
  [ 84] gt ...................................... <pRequiredDownloadsToTrade.count > 0>
  [ 85] jmpifz [ 96] ............................ if pRequiredDownloadsToTrade.count > 0 then
  [ 88] pop 2
  [ 90] pushint8 1 .............................. <1>
  [ 92] pusharglistnoret 1 ...................... <1>
  [ 94] extcall 50 .............................. return 1
  [ 96] getprop 42 .............................. <pConfirmationWndID>
  [ 98] pusharglist 0 ........................... <>
  [100] extcall 118 ............................. <VOID>
  [102] pushzero ................................ <0>
  [103] pushzero ................................ <0>
  [104] pushsymb 272 ............................ <#modal>
  [107] pusharglist 5 ........................... <pConfirmationWndID, VOID, 0, 0, #modal>
  [109] extcall 86 .............................. <createWindow(pConfirmationWndID, VOID, 0, 0, #modal)>
  [111] not ..................................... <not createWindow(pConfirmationWndID, VOID, 0, 0, #modal)>
  [112] jmpifz [122] ............................ if not createWindow(pConfirmationWndID, VOID, 0, 0, #modal) then
  [115] pop 2
  [117] pushzero ................................ <0>
  [118] pusharglistnoret 1 ...................... <0>
  [120] extcall 50 .............................. return 0
  [122] getprop 42 .............................. <pConfirmationWndID>
  [124] pusharglist 1 ........................... <pConfirmationWndID>
  [126] extcall 87 .............................. <getWindow(pConfirmationWndID)>
  [128] setlocal 0 .............................. tWinObj = getWindow(pConfirmationWndID)
  [130] getlocal 0 .............................. <tWinObj>
  [132] pushzero ................................ <0>
  [133] eq ...................................... <tWinObj = 0>
  [134] jmpifz [144] ............................ if tWinObj = 0 then
  [137] pop 2
  [139] pushzero ................................ <0>
  [140] pusharglistnoret 1 ...................... <0>
  [142] extcall 50 .............................. return 0
  [144] pushcons 81 ............................. <"win_error">
  [146] pushcons 82 ............................. <"Notice!">
  [148] pusharglist 2 ........................... <"win_error", "Notice!">
  [150] extcall 31 .............................. <getText("win_error", "Notice!")>
  [152] setlocal 1 .............................. tWindowTitleStr = getText("win_error", "Notice!")
  [154] getlocal 0 .............................. <tWinObj>
  [156] pushsymb 273 ............................ <#title>
  [159] getlocal 1 .............................. <tWindowTitleStr>
  [161] pusharglistnoret 3 ...................... <tWinObj, #title, tWindowTitleStr>
  [163] objcall 81 .............................. tWinObj.setProperty(#title, tWindowTitleStr)
  [165] getlocal 0 .............................. <tWinObj>
  [167] pushcons 9 .............................. <"habbo_basic.window">
  [169] pusharglist 2 ........................... <tWinObj, "habbo_basic.window">
  [171] objcall 88 .............................. <tWinObj.merge("habbo_basic.window")>
  [173] not ..................................... <not tWinObj.merge("habbo_basic.window")>
  [174] jmpifz [189] ............................ if not tWinObj.merge("habbo_basic.window") then
  [177] pop 2
  [179] getlocal 0 .............................. <tWinObj>
  [181] pusharglist 1 ........................... <tWinObj>
  [183] objcall 8 ............................... <tWinObj.close()>
  [185] pusharglistnoret 1 ...................... <tWinObj.close()>
  [187] extcall 50 .............................. return tWinObj.close()
  [189] getlocal 0 .............................. <tWinObj>
  [191] pushcons 83 ............................. <"habbo_tradingalert_dialog.window">
  [193] pusharglist 2 ........................... <tWinObj, "habbo_tradingalert_dialog.window">
  [195] objcall 88 .............................. <tWinObj.merge("habbo_tradingalert_dialog.window")>
  [197] not ..................................... <not tWinObj.merge("habbo_tradingalert_dialog.window")>
  [198] jmpifz [213] ............................ if not tWinObj.merge("habbo_tradingalert_dialog.window") then
  [201] pop 2
  [203] getlocal 0 .............................. <tWinObj>
  [205] pusharglist 1 ........................... <tWinObj>
  [207] objcall 8 ............................... <tWinObj.close()>
  [209] pusharglistnoret 1 ...................... <tWinObj.close()>
  [211] extcall 50 .............................. return tWinObj.close()
  [213] getlocal 0 .............................. <tWinObj>
  [215] pusharglistnoret 1 ...................... <tWinObj>
  [217] objcall 274 ............................. tWinObj.center()
  [220] getlocal 0 .............................. <tWinObj>
  [222] pushsymb 26 ............................. <#eventProcTradingWarning>
  [224] getparam 0 .............................. <me>
  [226] pusharglist 1 ........................... <me>
  [228] objcall 89 .............................. <me.getID()>
  [230] pushsymb 119 ............................ <#mouseUp>
  [232] pusharglistnoret 4 ...................... <tWinObj, #eventProcTradingWarning, me.getID(), #mouseUp>
  [234] objcall 91 .............................. tWinObj.registerProcedure(#eventProcTradingWarning, me.getID(), #mouseUp)
  [236] pop 2
  [238] pushint8 1 .............................. <1>
  [240] pusharglistnoret 1 ...................... <1>
  [242] extcall 50 .............................. return 1
  [244] jmp [278]
  [247] getprop 44 .............................. <pRequiredDownloadsToTrade>
  [249] getobjprop 105 .......................... <pRequiredDownloadsToTrade.count>
  [251] pushzero ................................ <0>
  [252] gt ...................................... <pRequiredDownloadsToTrade.count > 0>
  [253] jmpifz [264] ............................ if pRequiredDownloadsToTrade.count > 0 then
  [256] pop 2
  [258] pushint8 1 .............................. <1>
  [260] pusharglistnoret 1 ...................... <1>
  [262] extcall 50 .............................. return 1
  [264] pop 2
  [266] getparam 0 .............................. <me>
  [268] pushcons 84 ............................. <"TRADE_ACCEPT">
  [270] pusharglist 2 ........................... <me, "TRADE_ACCEPT">
  [272] objcall 24 .............................. <me.sendMessage("TRADE_ACCEPT")>
  [274] pusharglistnoret 1 ...................... <me.sendMessage("TRADE_ACCEPT")>
  [276] extcall 50 .............................. return me.sendMessage("TRADE_ACCEPT")
  [278] jmp [317]
  [281] peek 0
  [283] pushcons 85 ............................. <"close">
  [285] nteq
  [286] jmpifz [297] ............................ (case) "close", ...
  [289] peek 0
  [291] pushcons 86 ............................. <"trading_cancel">
  [293] eq
  [294] jmpifz [317] ............................ (case) ..., "trading_cancel":
  [297] getparam 0 .............................. <me>
  [299] pushcons 87 ............................. <"TRADE_CLOSE">
  [301] pusharglistnoret 2 ...................... <me, "TRADE_CLOSE">
  [303] objcall 24 .............................. me.sendMessage("TRADE_CLOSE")
  [305] pop 2
  [307] getparam 0 .............................. <me>
  [309] pusharglist 1 ........................... <me>
  [311] objcall 8 ............................... <me.close()>
  [313] pusharglistnoret 1 ...................... <me.close()>
  [315] extcall 50 .............................. return me.close()
  [317] pop 1 ................................... end case
  [319] getparam 2 .............................. <tSprID>
  [321] pushcons 88 ............................. <"trading_mystuff">
  [323] containsstr ............................. <tSprID contains "trading_mystuff">
  [324] jmpifz [729] ............................ if tSprID contains "trading_mystuff" then
  [327] pushsymb 77 ............................. <#room>
  [329] pusharglist 1 ........................... <#room>
  [331] extcall 76 .............................. <getThread(#room)>
  [333] pusharglist 1 ........................... <getThread(#room)>
  [335] objcall 78 .............................. <getThread(#room).getInterface()>
  [337] pusharglist 1 ........................... <getThread(#room).getInterface()>
  [339] objcall 127 ............................. <getThread(#room).getInterface().getObjectMover()>
  [341] setlocal 2 .............................. tObjMover = getThread(#room).getInterface().getObjectMover()
  [343] getlocal 2 .............................. <tObjMover>
  [345] pusharglist 1 ........................... <tObjMover>
  [347] extcall 232 ............................. <objectp(tObjMover)>
  [349] jmpifz [729] ............................ if objectp(tObjMover) then
  [352] getlocal 2 .............................. <tObjMover>
  [354] pushsymb 275 ............................ <#clientID>
  [357] pusharglist 2 ........................... <tObjMover, #clientID>
  [359] objcall 96 .............................. <tObjMover.getProperty(#clientID)>
  [361] setlocal 3 .............................. tClientID = tObjMover.getProperty(#clientID)
  [363] getlocal 2 .............................. <tObjMover>
  [365] pushsymb 157 ............................ <#stripId>
  [367] pusharglist 2 ........................... <tObjMover, #stripId>
  [369] objcall 96 .............................. <tObjMover.getProperty(#stripId)>
  [371] setlocal 4 .............................. tStripID = tObjMover.getProperty(#stripId)
  [373] getlocal 4 .............................. <tStripID>
  [375] pushcons 42 ............................. <EMPTY>
  [377] nteq .................................... <tStripID <> EMPTY>
  [378] jmpifz [639] ............................ if tStripID <> EMPTY then / else
  [381] pushzero ................................ <0>
  [382] setlocal 5 .............................. tAllow = 0
  [384] getprop 40 .............................. <pMySlotProps>
  [386] getobjprop 105 .......................... <pMySlotProps.count>
  [388] getprop 37 .............................. <pMaxTradeItems>
  [390] lt ...................................... <pMySlotProps.count < pMaxTradeItems>
  [391] jmpifz [398] ............................ if pMySlotProps.count < pMaxTradeItems then
  [394] pushint8 1 .............................. <1>
  [396] setlocal 5 .............................. tAllow = 1
  [398] getlocal 5 .............................. <tAllow>
  [400] not ..................................... <not tAllow>
  [401] jmpifz [555] ............................ if not tAllow then
  [404] getlocal 2 .............................. <tObjMover>
  [406] pushsymb 276 ............................ <#clientProps>
  [409] pusharglist 2 ........................... <tObjMover, #clientProps>
  [411] objcall 96 .............................. <tObjMover.getProperty(#clientProps)>
  [413] setlocal 6 .............................. tObjProps = tObjMover.getProperty(#clientProps)
  [415] getlocal 6 .............................. <tObjProps>
  [417] getobjprop 146 .......................... <tObjProps.ilk>
  [419] pushsymb 147 ............................ <#propList>
  [421] nteq .................................... <tObjProps.ilk <> #propList>
  [422] jmpifz [432] ............................ if tObjProps.ilk <> #propList then
  [425] pop 1
  [427] pushzero ................................ <0>
  [428] pusharglistnoret 1 ...................... <0>
  [430] extcall 50 .............................. return 0
  [432] getlocal 6 .............................. <tObjProps>
  [434] pushsymb 151 ............................ <#class>
  [436] pusharglist 2 ........................... <tObjProps, #class>
  [438] objcall 149 ............................. <tObjProps.getaProp(#class)>
  [440] setlocal 7 .............................. tCurrentClass = tObjProps.getaProp(#class)
  [442] getlocal 7 .............................. <tCurrentClass>
  [444] pushcons 43 ............................. <"poster">
  [446] eq ...................................... <tCurrentClass = "poster">
  [447] jmpifz [463] ............................ if tCurrentClass = "poster" then
  [450] pushcons 73 ............................. <"poster_">
  [452] getlocal 6 .............................. <tObjProps>
  [454] pushsymb 152 ............................ <#data>
  [456] pusharglist 2 ........................... <tObjProps, #data>
  [458] objcall 149 ............................. <tObjProps.getaProp(#data)>
  [460] joinstr ................................. <"poster_" & tObjProps.getaProp(#data)>
  [461] setlocal 7 .............................. tCurrentClass = "poster_" & tObjProps.getaProp(#data)
  [463] getprop 34 .............................. <pItemListMe>
  [465] peek 0
  [467] pusharglist 1
  [469] extcall 105
  [471] pushint8 1
  [473] peek 0
  [475] peek 2
  [477] lteq
  [478] jmpifz [542] ............................ repeat with tItem in pItemListMe
  [481] peek 2
  [483] peek 1
  [485] pusharglist 2
  [487] extcall 75
  [489] setlocal 8
  [491] getlocal 8 .............................. <tItem>
  [493] pushsymb 151 ............................ <#class>
  [495] pusharglist 2 ........................... <tItem, #class>
  [497] objcall 149 ............................. <tItem.getaProp(#class)>
  [499] setlocal 9 .............................. tTargetClass = tItem.getaProp(#class)
  [501] getlocal 9 .............................. <tTargetClass>
  [503] pushcons 43 ............................. <"poster">
  [505] eq ...................................... <tTargetClass = "poster">
  [506] jmpifz [522] ............................ if tTargetClass = "poster" then
  [509] pushcons 73 ............................. <"poster_">
  [511] getlocal 8 .............................. <tItem>
  [513] pushsymb 152 ............................ <#data>
  [515] pusharglist 2 ........................... <tItem, #data>
  [517] objcall 149 ............................. <tItem.getaProp(#data)>
  [519] joinstr ................................. <"poster_" & tItem.getaProp(#data)>
  [520] setlocal 9 .............................. tTargetClass = "poster_" & tItem.getaProp(#data)
  [522] getlocal 7 .............................. <tCurrentClass>
  [524] getlocal 9 .............................. <tTargetClass>
  [526] eq ...................................... <tCurrentClass = tTargetClass>
  [527] jmpifz [537] ............................ if tCurrentClass = tTargetClass then
  [530] pushint8 1 .............................. <1>
  [532] setlocal 5 .............................. tAllow = 1
  [534] jmp [542] ............................... exit repeat
  [537] pushint8 1
  [539] add
  [540] endrepeat [473]
  [542] pop 3
  [544] getlocal 7 .............................. <tCurrentClass>
  [546] pushcons 45 ............................. <"song_disk">
  [548] eq ...................................... <tCurrentClass = "song_disk">
  [549] jmpifz [555] ............................ if tCurrentClass = "song_disk" then
  [552] pushzero ................................ <0>
  [553] setlocal 5 .............................. tAllow = 0
  [555] getlocal 5 .............................. <tAllow>
  [557] jmpifz [636] ............................ if tAllow then
  [560] getprop 32 .............................. <pAcceptFlagMe>
  [562] jmpifz [573] ............................ if pAcceptFlagMe then
  [565] getparam 0 .............................. <me>
  [567] pushcons 80 ............................. <"TRADE_UNACCEPT">
  [569] pusharglistnoret 2 ...................... <me, "TRADE_UNACCEPT">
  [571] objcall 24 .............................. me.sendMessage("TRADE_UNACCEPT")
  [573] getparam 0 .............................. <me>
  [575] pushcons 89 ............................. <"TRADE_ADDITEM">
  [577] pushsymb 172 ............................ <#integer>
  [579] getlocal 4 .............................. <tStripID>
  [581] pusharglist 1 ........................... <tStripID>
  [583] extcall 172 ............................. <integer(tStripID)>
  [585] pusharglist 2 ........................... <[#integer: integer(tStripID)]>
  [587] pushproplist ............................ <[#integer: integer(tStripID)]>
  [588] pusharglistnoret 3 ...................... <me, "TRADE_ADDITEM", [#integer: integer(tStripID)]>
  [590] objcall 24 .............................. me.sendMessage("TRADE_ADDITEM", [#integer: integer(tStripID)])
  [592] pushsymb 77 ............................. <#room>
  [594] pusharglist 1 ........................... <#room>
  [596] extcall 76 .............................. <getThread(#room)>
  [598] pusharglist 1 ........................... <getThread(#room)>
  [600] objcall 78 .............................. <getThread(#room).getInterface()>
  [602] pusharglistnoret 1 ...................... <getThread(#room).getInterface()>
  [604] objcall 79 .............................. getThread(#room).getInterface().cancelObjectMover()
  [606] pushsymb 77 ............................. <#room>
  [608] pusharglist 1 ........................... <#room>
  [610] extcall 76 .............................. <getThread(#room)>
  [612] pusharglist 1 ........................... <getThread(#room)>
  [614] objcall 78 .............................. <getThread(#room).getInterface()>
  [616] pushsymb 80 ............................. <#clickAction>
  [618] pushcons 8 .............................. <"tradeItem">
  [620] pusharglistnoret 3 ...................... <getThread(#room).getInterface(), #clickAction, "tradeItem">
  [622] objcall 81 .............................. getThread(#room).getInterface().setProperty(#clickAction, "tradeItem")
  [624] pop 1
  [626] getlocal 2 .............................. <tObjMover>
  [628] pusharglist 1 ........................... <tObjMover>
  [630] objcall 128 ............................. <tObjMover.clear()>
  [632] pusharglistnoret 1 ...................... <tObjMover.clear()>
  [634] extcall 50 .............................. return tObjMover.clear()
  [636] jmp [729]
  [639] getparam 2 .............................. <tSprID>
  [641] pushsymb 197 ............................ <#char>
  [643] getparam 2 .............................. <tSprID>
  [645] getobjprop 277 .......................... <tSprID.length>
  [648] pusharglist 3 ........................... <tSprID, #char, tSprID.length>
  [650] objcall 199 ............................. <tSprID.char[tSprID.length]>
  [652] pusharglist 1 ........................... <tSprID.char[tSprID.length]>
  [654] extcall 172 ............................. <integer(tSprID.char[tSprID.length])>
  [656] setlocal 10 ............................. tSlotID = integer(tSprID.char[tSprID.length])
  [658] getlocal 10 ............................. <tSlotID>
  [660] pushzero ................................ <0>
  [661] gt ...................................... <tSlotID > 0>
  [662] getlocal 10 ............................. <tSlotID>
  [664] getprop 40 .............................. <pMySlotProps>
  [666] getobjprop 105 .......................... <pMySlotProps.count>
  [668] lteq .................................... <tSlotID <= pMySlotProps.count>
  [669] and ..................................... <(tSlotID > 0) and (tSlotID <= pMySlotProps.count)>
  [670] jmpifz [729] ............................ if (tSlotID > 0) and (tSlotID <= pMySlotProps.count) then
  [673] getprop 40 .............................. <pMySlotProps>
  [675] getlocal 10 ............................. <tSlotID>
  [677] pusharglist 2 ........................... <pMySlotProps, tSlotID>
  [679] objcall 75 .............................. <pMySlotProps[tSlotID]>
  [681] pushsymb 157 ............................ <#stripId>
  [683] pusharglist 2 ........................... <pMySlotProps[tSlotID], #stripId>
  [685] objcall 149 ............................. <pMySlotProps[tSlotID].getaProp(#stripId)>
  [687] setlocal 4 .............................. tStripID = pMySlotProps[tSlotID].getaProp(#stripId)
  [689] getparam 0 .............................. <me>
  [691] pushcons 90 ............................. <"TRADE_REMOVE_ITEM">
  [693] pushsymb 172 ............................ <#integer>
  [695] getlocal 4 .............................. <tStripID>
  [697] pusharglist 1 ........................... <tStripID>
  [699] extcall 172 ............................. <integer(tStripID)>
  [701] pusharglist 2 ........................... <[#integer: integer(tStripID)]>
  [703] pushproplist ............................ <[#integer: integer(tStripID)]>
  [704] pusharglistnoret 3 ...................... <me, "TRADE_REMOVE_ITEM", [#integer: integer(tStripID)]>
  [706] objcall 24 .............................. me.sendMessage("TRADE_REMOVE_ITEM", [#integer: integer(tStripID)])
  [708] getparam 0 .............................. <me>
  [710] pushcons 91 ............................. <"GETSTRIP">
  [712] pushsymb 172 ............................ <#integer>
  [714] pushint8 4 .............................. <4>
  [716] pusharglist 2 ........................... <[#integer: 4]>
  [718] pushproplist ............................ <[#integer: 4]>
  [719] pusharglistnoret 3 ...................... <me, "GETSTRIP", [#integer: 4]>
  [721] objcall 24 .............................. me.sendMessage("GETSTRIP", [#integer: 4])
  [723] getparam 0 .............................. <me>
  [725] pusharglistnoret 1 ...................... <me>
  [727] objcall 22 .............................. me.removeDetailsBubble()
  [729] getparam 2 .............................. <tSprID>
  [731] pushcons 92 ............................. <"trading_herstuff">
  [733] containsstr ............................. <tSprID contains "trading_herstuff">
  [734] jmpifz [817] ............................ if tSprID contains "trading_herstuff" then
  [737] getparam 2 .............................. <tSprID>
  [739] pushsymb 197 ............................ <#char>
  [741] getparam 2 .............................. <tSprID>
  [743] pusharglist 1 ........................... <tSprID>
  [745] extcall 277 ............................. <length(tSprID)>
  [748] pusharglist 3 ........................... <tSprID, #char, length(tSprID)>
  [750] objcall 199 ............................. <tSprID.char[length(tSprID)]>
  [752] pusharglist 1 ........................... <tSprID.char[length(tSprID)]>
  [754] extcall 172 ............................. <integer(tSprID.char[length(tSprID)])>
  [756] getprop 41 .............................. <pHerSlotProps>
  [758] getobjprop 105 .......................... <pHerSlotProps.count>
  [760] lteq .................................... <integer(tSprID.char[length(tSprID)]) <= pHerSlotProps.count>
  [761] jmpifz [817] ............................ if integer(tSprID.char[length(tSprID)]) <= pHerSlotProps.count then
  [764] getprop 41 .............................. <pHerSlotProps>
  [766] getparam 2 .............................. <tSprID>
  [768] pushsymb 197 ............................ <#char>
  [770] getparam 2 .............................. <tSprID>
  [772] pusharglist 1 ........................... <tSprID>
  [774] extcall 277 ............................. <length(tSprID)>
  [777] pusharglist 3 ........................... <tSprID, #char, length(tSprID)>
  [779] objcall 199 ............................. <tSprID.char[length(tSprID)]>
  [781] pusharglist 1 ........................... <tSprID.char[length(tSprID)]>
  [783] extcall 172 ............................. <integer(tSprID.char[length(tSprID)])>
  [785] pusharglist 2 ........................... <pHerSlotProps, integer(tSprID.char[length(tSprID)])>
  [787] objcall 75 .............................. <pHerSlotProps[integer(tSprID.char[length(tSprID)])]>
  [789] pushsymb 153 ............................ <#songID>
  [791] pusharglist 2 ........................... <pHerSlotProps[integer(tSprID.char[length(tSprID)])], #songID>
  [793] objcall 75 .............................. <pHerSlotProps[integer(tSprID.char[length(tSprID)])][#songID]>
  [795] setlocal 11 ............................. tSongID = pHerSlotProps[integer(tSprID.char[length(tSprID)])][#songID]
  [797] getlocal 11 ............................. <tSongID>
  [799] pushzero ................................ <0>
  [800] gt ...................................... <tSongID > 0>
  [801] jmpifz [817] ............................ if tSongID > 0 then
  [804] pushsymb 278 ............................ <#listen_song>
  [807] getlocal 11 ............................. <tSongID>
  [809] pusharglist 1 ........................... <tSongID>
  [811] extcall 203 ............................. <value(tSongID)>
  [813] pusharglistnoret 2 ...................... <#listen_song, value(tSongID)>
  [815] extcall 55 .............................. executeMessage(#listen_song, value(tSongID))
  [817] jmp [1500]
  [820] peek 0
  [822] pushsymb 279 ............................ <#mouseEnter>
  [825] eq
  [826] jmpifz [1153] ........................... (case) #mouseEnter:
  [829] pushsymb 77 ............................. <#room>
  [831] pusharglist 1 ........................... <#room>
  [833] extcall 76 .............................. <getThread(#room)>
  [835] pusharglist 1 ........................... <getThread(#room)>
  [837] objcall 78 .............................. <getThread(#room).getInterface()>
  [839] pusharglist 1 ........................... <getThread(#room).getInterface()>
  [841] objcall 127 ............................. <getThread(#room).getInterface().getObjectMover()>
  [843] setlocal 2 .............................. tObjMover = getThread(#room).getInterface().getObjectMover()
  [845] getlocal 2 .............................. <tObjMover>
  [847] pushzero ................................ <0>
  [848] nteq .................................... <tObjMover <> 0>
  [849] jmpifz [859] ............................ if tObjMover <> 0 then
  [852] getlocal 2 .............................. <tObjMover>
  [854] pusharglistnoret 1 ...................... <tObjMover>
  [856] objcall 280 ............................. tObjMover.moveTrade()
  [859] getparam 2 .............................. <tSprID>
  [861] pushcons 88 ............................. <"trading_mystuff">
  [863] containsstr ............................. <tSprID contains "trading_mystuff">
  [864] jmpifz [992] ............................ if tSprID contains "trading_mystuff" then / else
  [867] getparam 2 .............................. <tSprID>
  [869] pushsymb 197 ............................ <#char>
  [871] getparam 2 .............................. <tSprID>
  [873] pusharglist 1 ........................... <tSprID>
  [875] extcall 277 ............................. <length(tSprID)>
  [878] pusharglist 3 ........................... <tSprID, #char, length(tSprID)>
  [880] objcall 199 ............................. <tSprID.char[length(tSprID)]>
  [882] pusharglist 1 ........................... <tSprID.char[length(tSprID)]>
  [884] extcall 172 ............................. <integer(tSprID.char[length(tSprID)])>
  [886] setlocal 12 ............................. tSlotIndex = integer(tSprID.char[length(tSprID)])
  [888] getlocal 12 ............................. <tSlotIndex>
  [890] getprop 40 .............................. <pMySlotProps>
  [892] getobjprop 105 .......................... <pMySlotProps.count>
  [894] gt ...................................... <tSlotIndex > pMySlotProps.count>
  [895] getlocal 2 .............................. <tObjMover>
  [897] pushsymb 275 ............................ <#clientID>
  [900] pusharglist 2 ........................... <tObjMover, #clientID>
  [902] objcall 96 .............................. <tObjMover.getProperty(#clientID)>
  [904] pushcons 42 ............................. <EMPTY>
  [906] nteq .................................... <tObjMover.getProperty(#clientID) <> EMPTY>
  [907] and ..................................... <(tSlotIndex > pMySlotProps.count) and (tObjMover.getProperty(#clientID) <> EMPTY)>
  [908] jmpifz [979] ............................ if (tSlotIndex > pMySlotProps.count) and (tObjMover.getProperty(#clientID) <> EMPTY) then / else
  [911] getprop 30 .............................. <pTraderWndID>
  [913] pusharglist 1 ........................... <pTraderWndID>
  [915] extcall 87 .............................. <getWindow(pTraderWndID)>
  [917] setlocal 13 ............................. tWndObj = getWindow(pTraderWndID)
  [919] getlocal 13 ............................. <tWndObj>
  [921] pushzero ................................ <0>
  [922] eq ...................................... <tWndObj = 0>
  [923] jmpifz [933] ............................ if tWndObj = 0 then
  [926] pop 1
  [928] pushzero ................................ <0>
  [929] pusharglistnoret 1 ...................... <0>
  [931] extcall 50 .............................. return 0
  [933] getlocal 13 ............................. <tWndObj>
  [935] getparam 2 .............................. <tSprID>
  [937] pusharglist 2 ........................... <tWndObj, tSprID>
  [939] objcall 92 .............................. <tWndObj.getElement(tSprID)>
  [941] setlocal 14 ............................. tElement = tWndObj.getElement(tSprID)
  [943] getlocal 14 ............................. <tElement>
  [945] pushzero ................................ <0>
  [946] eq ...................................... <tElement = 0>
  [947] jmpifz [957] ............................ if tElement = 0 then
  [950] pop 1
  [952] pushzero ................................ <0>
  [953] pusharglistnoret 1 ...................... <0>
  [955] extcall 50 .............................. return 0
  [957] getlocal 14 ............................. <tElement>
  [959] pushint16 200 ........................... <200>
  [962] pushint16 200 ........................... <200>
  [965] pushint16 200 ........................... <200>
  [968] pusharglist 3 ........................... <200, 200, 200>
  [970] extcall 141 ............................. <rgb(200, 200, 200)>
  [972] pusharglistnoret 2 ...................... <tElement, rgb(200, 200, 200)>
  [974] objcall 142 ............................. tElement.draw(rgb(200, 200, 200))
  [976] jmp [989]
  [979] getparam 0 .............................. <me>
  [981] pushsymb 51 ............................. <#me>
  [983] getlocal 12 ............................. <tSlotIndex>
  [985] pusharglistnoret 3 ...................... <me, #me, tSlotIndex>
  [987] objcall 21 .............................. me.updateDetailsBubble(#me, tSlotIndex)
  [989] jmp [1150]
  [992] getparam 2 .............................. <tSprID>
  [994] pushcons 92 ............................. <"trading_herstuff">
  [996] containsstr ............................. <tSprID contains "trading_herstuff">
  [997] jmpifz [1150] ........................... if tSprID contains "trading_herstuff" then
  [1000] getparam 2 ............................. <tSprID>
  [1002] pushsymb 197 ........................... <#char>
  [1004] getparam 2 ............................. <tSprID>
  [1006] pusharglist 1 .......................... <tSprID>
  [1008] extcall 277 ............................ <length(tSprID)>
  [1011] pusharglist 3 .......................... <tSprID, #char, length(tSprID)>
  [1013] objcall 199 ............................ <tSprID.char[length(tSprID)]>
  [1015] pusharglist 1 .......................... <tSprID.char[length(tSprID)]>
  [1017] extcall 172 ............................ <integer(tSprID.char[length(tSprID)])>
  [1019] setlocal 12 ............................ tSlotIndex = integer(tSprID.char[length(tSprID)])
  [1021] getlocal 12 ............................ <tSlotIndex>
  [1023] getprop 41 ............................. <pHerSlotProps>
  [1025] getobjprop 105 ......................... <pHerSlotProps.count>
  [1027] lteq ................................... <tSlotIndex <= pHerSlotProps.count>
  [1028] jmpifz [1150] .......................... if tSlotIndex <= pHerSlotProps.count then
  [1031] getparam 0 ............................. <me>
  [1033] pushsymb 227 ........................... <#she>
  [1035] getlocal 12 ............................ <tSlotIndex>
  [1037] pusharglistnoret 3 ..................... <me, #she, tSlotIndex>
  [1039] objcall 21 ............................. me.updateDetailsBubble(#she, tSlotIndex)
  [1041] getlocal 12 ............................ <tSlotIndex>
  [1043] getprop 41 ............................. <pHerSlotProps>
  [1045] getobjprop 105 ......................... <pHerSlotProps.count>
  [1047] lteq ................................... <tSlotIndex <= pHerSlotProps.count>
  [1048] jmpifz [1150] .......................... if tSlotIndex <= pHerSlotProps.count then
  [1051] getprop 41 ............................. <pHerSlotProps>
  [1053] getlocal 12 ............................ <tSlotIndex>
  [1055] pusharglist 2 .......................... <pHerSlotProps, tSlotIndex>
  [1057] objcall 75 ............................. <pHerSlotProps[tSlotIndex]>
  [1059] pushsymb 174 ........................... <#hiliteImage>
  [1061] pusharglist 2 .......................... <pHerSlotProps[tSlotIndex], #hiliteImage>
  [1063] objcall 75 ............................. <pHerSlotProps[tSlotIndex][#hiliteImage]>
  [1065] setlocal 15 ............................ tImage = pHerSlotProps[tSlotIndex][#hiliteImage]
  [1067] getlocal 15 ............................ <tImage>
  [1069] pusharglist 1 .......................... <tImage>
  [1071] extcall 54 ............................. <voidp(tImage)>
  [1073] not .................................... <not voidp(tImage)>
  [1074] jmpifz [1150] .......................... if not voidp(tImage) then
  [1077] getprop 30 ............................. <pTraderWndID>
  [1079] pusharglist 1 .......................... <pTraderWndID>
  [1081] extcall 87 ............................. <getWindow(pTraderWndID)>
  [1083] setlocal 13 ............................ tWndObj = getWindow(pTraderWndID)
  [1085] getlocal 13 ............................ <tWndObj>
  [1087] pushzero ............................... <0>
  [1088] eq ..................................... <tWndObj = 0>
  [1089] jmpifz [1099] .......................... if tWndObj = 0 then
  [1092] pop 1
  [1094] pushzero ............................... <0>
  [1095] pusharglistnoret 1 ..................... <0>
  [1097] extcall 50 ............................. return 0
  [1099] getlocal 13 ............................ <tWndObj>
  [1101] getparam 2 ............................. <tSprID>
  [1103] pusharglist 2 .......................... <tWndObj, tSprID>
  [1105] objcall 92 ............................. <tWndObj.getElement(tSprID)>
  [1107] setlocal 14 ............................ tElement = tWndObj.getElement(tSprID)
  [1109] getlocal 14 ............................ <tElement>
  [1111] pushzero ............................... <0>
  [1112] eq ..................................... <tElement = 0>
  [1113] jmpifz [1123] .......................... if tElement = 0 then
  [1116] pop 1
  [1118] pushzero ............................... <0>
  [1119] pusharglistnoret 1 ..................... <0>
  [1121] extcall 50 ............................. return 0
  [1123] getlocal 14 ............................ <tElement>
  [1125] getlocal 15 ............................ <tImage>
  [1127] pusharglistnoret 2 ..................... <tElement, tImage>
  [1129] objcall 170 ............................ tElement.feedImage(tImage)
  [1131] getlocal 14 ............................ <tElement>
  [1133] pushint16 200 .......................... <200>
  [1136] pushint16 200 .......................... <200>
  [1139] pushint16 200 .......................... <200>
  [1142] pusharglist 3 .......................... <200, 200, 200>
  [1144] extcall 141 ............................ <rgb(200, 200, 200)>
  [1146] pusharglistnoret 2 ..................... <tElement, rgb(200, 200, 200)>
  [1148] objcall 142 ............................ tElement.draw(rgb(200, 200, 200))
  [1150] jmp [1500]
  [1153] peek 0
  [1155] pushsymb 281 ........................... <#mouseLeave>
  [1158] eq
  [1159] jmpifz [1500] .......................... (case) #mouseLeave:
  [1162] getparam 2 ............................. <tSprID>
  [1164] pushcons 88 ............................ <"trading_mystuff">
  [1166] containsstr ............................ <tSprID contains "trading_mystuff">
  [1167] jmpifz [1317] .......................... if tSprID contains "trading_mystuff" then / else
  [1170] pushsymb 77 ............................ <#room>
  [1172] pusharglist 1 .......................... <#room>
  [1174] extcall 76 ............................. <getThread(#room)>
  [1176] pusharglist 1 .......................... <getThread(#room)>
  [1178] objcall 78 ............................. <getThread(#room).getInterface()>
  [1180] pusharglist 1 .......................... <getThread(#room).getInterface()>
  [1182] objcall 127 ............................ <getThread(#room).getInterface().getObjectMover()>
  [1184] setlocal 2 ............................. tObjMover = getThread(#room).getInterface().getObjectMover()
  [1186] getlocal 2 ............................. <tObjMover>
  [1188] pushzero ............................... <0>
  [1189] nteq ................................... <tObjMover <> 0>
  [1190] jmpifz [1200] .......................... if tObjMover <> 0 then
  [1193] getlocal 2 ............................. <tObjMover>
  [1195] pusharglistnoret 1 ..................... <tObjMover>
  [1197] objcall 280 ............................ tObjMover.moveTrade()
  [1200] getprop 30 ............................. <pTraderWndID>
  [1202] pusharglist 1 .......................... <pTraderWndID>
  [1204] extcall 87 ............................. <getWindow(pTraderWndID)>
  [1206] setlocal 13 ............................ tWndObj = getWindow(pTraderWndID)
  [1208] getlocal 13 ............................ <tWndObj>
  [1210] pushzero ............................... <0>
  [1211] eq ..................................... <tWndObj = 0>
  [1212] jmpifz [1222] .......................... if tWndObj = 0 then
  [1215] pop 1
  [1217] pushzero ............................... <0>
  [1218] pusharglistnoret 1 ..................... <0>
  [1220] extcall 50 ............................. return 0
  [1222] getlocal 13 ............................ <tWndObj>
  [1224] getparam 2 ............................. <tSprID>
  [1226] pusharglist 2 .......................... <tWndObj, tSprID>
  [1228] objcall 92 ............................. <tWndObj.getElement(tSprID)>
  [1230] setlocal 14 ............................ tElement = tWndObj.getElement(tSprID)
  [1232] getlocal 14 ............................ <tElement>
  [1234] pushzero ............................... <0>
  [1235] eq ..................................... <tElement = 0>
  [1236] jmpifz [1246] .......................... if tElement = 0 then
  [1239] pop 1
  [1241] pushzero ............................... <0>
  [1242] pusharglistnoret 1 ..................... <0>
  [1244] extcall 50 ............................. return 0
  [1246] getparam 2 ............................. <tSprID>
  [1248] pushsymb 197 ........................... <#char>
  [1250] getparam 2 ............................. <tSprID>
  [1252] pusharglist 1 .......................... <tSprID>
  [1254] extcall 277 ............................ <length(tSprID)>
  [1257] pusharglist 3 .......................... <tSprID, #char, length(tSprID)>
  [1259] objcall 199 ............................ <tSprID.char[length(tSprID)]>
  [1261] pusharglist 1 .......................... <tSprID.char[length(tSprID)]>
  [1263] extcall 172 ............................ <integer(tSprID.char[length(tSprID)])>
  [1265] getprop 40 ............................. <pMySlotProps>
  [1267] getobjprop 105 ......................... <pMySlotProps.count>
  [1269] lteq ................................... <integer(tSprID.char[length(tSprID)]) <= pMySlotProps.count>
  [1270] jmpifz [1292] .......................... if integer(tSprID.char[length(tSprID)]) <= pMySlotProps.count then / else
  [1273] getlocal 14 ............................ <tElement>
  [1275] pushint8 50 ............................ <50>
  [1277] pushint8 50 ............................ <50>
  [1279] pushint8 50 ............................ <50>
  [1281] pusharglist 3 .......................... <50, 50, 50>
  [1283] extcall 141 ............................ <rgb(50, 50, 50)>
  [1285] pusharglistnoret 2 ..................... <tElement, rgb(50, 50, 50)>
  [1287] objcall 142 ............................ tElement.draw(rgb(50, 50, 50))
  [1289] jmp [1308]
  [1292] getlocal 14 ............................ <tElement>
  [1294] pushint8 100 ........................... <100>
  [1296] pushint8 100 ........................... <100>
  [1298] pushint8 100 ........................... <100>
  [1300] pusharglist 3 .......................... <100, 100, 100>
  [1302] extcall 141 ............................ <rgb(100, 100, 100)>
  [1304] pusharglistnoret 2 ..................... <tElement, rgb(100, 100, 100)>
  [1306] objcall 142 ............................ tElement.draw(rgb(100, 100, 100))
  [1308] getparam 0 ............................. <me>
  [1310] pusharglistnoret 1 ..................... <me>
  [1312] objcall 22 ............................. me.removeDetailsBubble()
  [1314] jmp [1500]
  [1317] getparam 2 ............................. <tSprID>
  [1319] pushcons 92 ............................ <"trading_herstuff">
  [1321] containsstr ............................ <tSprID contains "trading_herstuff">
  [1322] jmpifz [1500] .......................... if tSprID contains "trading_herstuff" then
  [1325] getparam 0 ............................. <me>
  [1327] pusharglistnoret 1 ..................... <me>
  [1329] objcall 22 ............................. me.removeDetailsBubble()
  [1331] getparam 2 ............................. <tSprID>
  [1333] pushsymb 197 ........................... <#char>
  [1335] getparam 2 ............................. <tSprID>
  [1337] pusharglist 1 .......................... <tSprID>
  [1339] extcall 277 ............................ <length(tSprID)>
  [1342] pusharglist 3 .......................... <tSprID, #char, length(tSprID)>
  [1344] objcall 199 ............................ <tSprID.char[length(tSprID)]>
  [1346] pusharglist 1 .......................... <tSprID.char[length(tSprID)]>
  [1348] extcall 172 ............................ <integer(tSprID.char[length(tSprID)])>
  [1350] setlocal 12 ............................ tSlotIndex = integer(tSprID.char[length(tSprID)])
  [1352] getlocal 12 ............................ <tSlotIndex>
  [1354] getprop 41 ............................. <pHerSlotProps>
  [1356] getobjprop 105 ......................... <pHerSlotProps.count>
  [1358] lteq ................................... <tSlotIndex <= pHerSlotProps.count>
  [1359] jmpifz [1500] .......................... if tSlotIndex <= pHerSlotProps.count then
  [1362] getprop 41 ............................. <pHerSlotProps>
  [1364] getlocal 12 ............................ <tSlotIndex>
  [1366] pusharglist 2 .......................... <pHerSlotProps, tSlotIndex>
  [1368] objcall 75 ............................. <pHerSlotProps[tSlotIndex]>
  [1370] pushsymb 153 ........................... <#songID>
  [1372] pusharglist 2 .......................... <pHerSlotProps[tSlotIndex], #songID>
  [1374] objcall 75 ............................. <pHerSlotProps[tSlotIndex][#songID]>
  [1376] setlocal 11 ............................ tSongID = pHerSlotProps[tSlotIndex][#songID]
  [1378] getlocal 11 ............................ <tSongID>
  [1380] pusharglist 1 .......................... <tSongID>
  [1382] extcall 54 ............................. <voidp(tSongID)>
  [1384] not .................................... <not voidp(tSongID)>
  [1385] jmpifz [1401] .......................... if not voidp(tSongID) then
  [1388] pushsymb 282 ........................... <#do_not_listen_song>
  [1391] getlocal 11 ............................ <tSongID>
  [1393] pusharglist 1 .......................... <tSongID>
  [1395] extcall 203 ............................ <value(tSongID)>
  [1397] pusharglistnoret 2 ..................... <#do_not_listen_song, value(tSongID)>
  [1399] extcall 55 ............................. executeMessage(#do_not_listen_song, value(tSongID))
  [1401] getprop 30 ............................. <pTraderWndID>
  [1403] pusharglist 1 .......................... <pTraderWndID>
  [1405] extcall 87 ............................. <getWindow(pTraderWndID)>
  [1407] setlocal 13 ............................ tWndObj = getWindow(pTraderWndID)
  [1409] getlocal 13 ............................ <tWndObj>
  [1411] pushzero ............................... <0>
  [1412] eq ..................................... <tWndObj = 0>
  [1413] jmpifz [1423] .......................... if tWndObj = 0 then
  [1416] pop 1
  [1418] pushzero ............................... <0>
  [1419] pusharglistnoret 1 ..................... <0>
  [1421] extcall 50 ............................. return 0
  [1423] getlocal 13 ............................ <tWndObj>
  [1425] getparam 2 ............................. <tSprID>
  [1427] pusharglist 2 .......................... <tWndObj, tSprID>
  [1429] objcall 92 ............................. <tWndObj.getElement(tSprID)>
  [1431] setlocal 14 ............................ tElement = tWndObj.getElement(tSprID)
  [1433] getlocal 14 ............................ <tElement>
  [1435] pushzero ............................... <0>
  [1436] eq ..................................... <tElement = 0>
  [1437] jmpifz [1447] .......................... if tElement = 0 then
  [1440] pop 1
  [1442] pushzero ............................... <0>
  [1443] pusharglistnoret 1 ..................... <0>
  [1445] extcall 50 ............................. return 0
  [1447] getprop 41 ............................. <pHerSlotProps>
  [1449] getlocal 12 ............................ <tSlotIndex>
  [1451] pusharglist 2 .......................... <pHerSlotProps, tSlotIndex>
  [1453] objcall 75 ............................. <pHerSlotProps[tSlotIndex]>
  [1455] pushsymb 175 ........................... <#image>
  [1457] pusharglist 2 .......................... <pHerSlotProps[tSlotIndex], #image>
  [1459] objcall 75 ............................. <pHerSlotProps[tSlotIndex][#image]>
  [1461] setlocal 15 ............................ tImage = pHerSlotProps[tSlotIndex][#image]
  [1463] getlocal 15 ............................ <tImage>
  [1465] pusharglist 1 .......................... <tImage>
  [1467] extcall 54 ............................. <voidp(tImage)>
  [1469] not .................................... <not voidp(tImage)>
  [1470] jmpifz [1500] .......................... if not voidp(tImage) then
  [1473] getlocal 14 ............................ <tElement>
  [1475] getlocal 15 ............................ <tImage>
  [1477] pusharglistnoret 2 ..................... <tElement, tImage>
  [1479] objcall 170 ............................ tElement.feedImage(tImage)
  [1481] getlocal 14 ............................ <tElement>
  [1483] pushint16 200 .......................... <200>
  [1486] pushint16 200 .......................... <200>
  [1489] pushint16 200 .......................... <200>
  [1492] pusharglist 3 .......................... <200, 200, 200>
  [1494] extcall 141 ............................ <rgb(200, 200, 200)>
  [1496] pusharglistnoret 2 ..................... <tElement, rgb(200, 200, 200)>
  [1498] objcall 142 ............................ tElement.draw(rgb(200, 200, 200))
  [1500] pop 1 .................................. end case
  [1502] pushint16 951 .......................... <951>
  [1505] pusharglistnoret 1 ..................... <951>
  [1507] extcall 71 ............................. sendProcessTracking(951)
  [1509] ret
end

on eventProcTradingWarning me, tEvent, tElement, arg3, tWndName
  [  0] getparam 2 .............................. <tElement>
  [  2] pushcons 93 ............................. <"habbo_tradingalert_ok">
  [  4] eq ...................................... <tElement = "habbo_tradingalert_ok">
  [  5] jmpifz [ 33] ............................ if tElement = "habbo_tradingalert_ok" then / else
  [  8] pushint8 1 .............................. <1>
  [ 10] setprop 32 .............................. pAcceptFlagMe = 1
  [ 12] getparam 4 .............................. <tWndName>
  [ 14] pusharglistnoret 1 ...................... <tWndName>
  [ 16] extcall 129 ............................. removeWindow(tWndName)
  [ 18] getparam 0 .............................. <me>
  [ 20] pushcons 84 ............................. <"TRADE_ACCEPT">
  [ 22] pusharglist 2 ........................... <me, "TRADE_ACCEPT">
  [ 24] objcall 24 .............................. <me.sendMessage("TRADE_ACCEPT")>
  [ 26] pusharglistnoret 1 ...................... <me.sendMessage("TRADE_ACCEPT")>
  [ 28] extcall 50 .............................. return me.sendMessage("TRADE_ACCEPT")
  [ 30] jmp [ 53]
  [ 33] getparam 2 .............................. <tElement>
  [ 35] pushcons 94 ............................. <"habbo_tradingalert_cancel">
  [ 37] eq ...................................... <tElement = "habbo_tradingalert_cancel">
  [ 38] jmpifz [ 53] ............................ if tElement = "habbo_tradingalert_cancel" then
  [ 41] getparam 4 .............................. <tWndName>
  [ 43] pusharglistnoret 1 ...................... <tWndName>
  [ 45] extcall 129 ............................. removeWindow(tWndName)
  [ 47] pushint8 1 .............................. <1>
  [ 49] pusharglistnoret 1 ...................... <1>
  [ 51] extcall 50 .............................. return 1
  [ 53] ret
end

on eventProcTradingConfirmation me, tEvent, tElemID, tParam
  [  0] getparam 2 .............................. <tElemID>
  [  2] peek 0 .................................. case tElemID of
  [  4] pushcons 28 ............................. <"trading_accept">
  [  6] eq
  [  7] jmpifz [ 33] ............................ (case) "trading_accept":
  [ 10] getparam 0 .............................. <me>
  [ 12] pusharglistnoret 1 ...................... <me>
  [ 14] objcall 7 ............................... me.showWaitingView()
  [ 16] pop 1
  [ 18] getparam 0 .............................. <me>
  [ 20] pushcons 95 ............................. <"TRADE_CONFIRM_ACCEPT">
  [ 22] pusharglist 2 ........................... <me, "TRADE_CONFIRM_ACCEPT">
  [ 24] objcall 24 .............................. <me.sendMessage("TRADE_CONFIRM_ACCEPT")>
  [ 26] pusharglistnoret 1 ...................... <me.sendMessage("TRADE_CONFIRM_ACCEPT")>
  [ 28] extcall 50 .............................. return me.sendMessage("TRADE_CONFIRM_ACCEPT")
  [ 30] jmp [ 69]
  [ 33] peek 0
  [ 35] pushcons 86 ............................. <"trading_cancel">
  [ 37] nteq
  [ 38] jmpifz [ 49] ............................ (case) "trading_cancel", ...
  [ 41] peek 0
  [ 43] pushcons 85 ............................. <"close">
  [ 45] eq
  [ 46] jmpifz [ 69] ............................ (case) ..., "close":
  [ 49] getparam 0 .............................. <me>
  [ 51] pushcons 96 ............................. <"TRADE_CONFIRM_DECLINE">
  [ 53] pusharglistnoret 2 ...................... <me, "TRADE_CONFIRM_DECLINE">
  [ 55] objcall 24 .............................. me.sendMessage("TRADE_CONFIRM_DECLINE")
  [ 57] pop 1
  [ 59] getparam 0 .............................. <me>
  [ 61] pusharglist 1 ........................... <me>
  [ 63] objcall 8 ............................... <me.close()>
  [ 65] pusharglistnoret 1 ...................... <me.close()>
  [ 67] extcall 50 .............................. return me.close()
  [ 69] pop 1 ................................... end case
  [ 71] ret
end
