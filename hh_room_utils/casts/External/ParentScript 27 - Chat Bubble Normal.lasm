property pBgSprite, pUserSprite, pLocation, pTextParams, pBalloonImg, pBgMemName, pUserMemName, pItemId, pMargins, tVariations, pUserName, pUserId, pSourceLocation, pBalloonLeftMarg, pBalloonRightMarg

on construct me
  [  0] pusharglist 0 ........................... <>
  [  2] extcall 118 ............................. <VOID>
  [  4] setprop 1258 ............................ pItemId = VOID
  [  7] getparam 0 .............................. <me>
  [  9] pusharglist 1 ........................... <me>
  [ 11] objcall 89 .............................. <me.getID()>
  [ 13] pusharglist 1 ........................... <me.getID()>
  [ 15] extcall 301 ............................. <reserveSprite(me.getID())>
  [ 18] pusharglist 1 ........................... <reserveSprite(me.getID())>
  [ 20] extcall 300 ............................. <sprite(reserveSprite(me.getID()))>
  [ 23] setprop 1259 ............................ pBgSprite = sprite(reserveSprite(me.getID()))
  [ 26] getparam 0 .............................. <me>
  [ 28] pusharglist 1 ........................... <me>
  [ 30] objcall 89 .............................. <me.getID()>
  [ 32] pusharglist 1 ........................... <me.getID()>
  [ 34] extcall 301 ............................. <reserveSprite(me.getID())>
  [ 37] pusharglist 1 ........................... <reserveSprite(me.getID())>
  [ 39] extcall 300 ............................. <sprite(reserveSprite(me.getID()))>
  [ 42] setprop 1260 ............................ pUserSprite = sprite(reserveSprite(me.getID()))
  [ 45] pushcons 0 .............................. <EMPTY>
  [ 47] setprop 1261 ............................ pUserName = EMPTY
  [ 50] pushcons 0 .............................. <EMPTY>
  [ 52] setprop 320 ............................. pUserId = EMPTY
  [ 55] pusharglist 0 ........................... <>
  [ 57] extcall 118 ............................. <VOID>
  [ 59] setprop 1262 ............................ pSourceLocation = VOID
  [ 62] pusharglist 0 ........................... <[:]>
  [ 64] pushproplist ............................ <[:]>
  [ 65] setprop 1263 ............................ pMargins = [:]
  [ 68] getprop 1263 ............................ <pMargins>
  [ 71] pushsymb 695 ............................ <#left>
  [ 74] pushint8 5 .............................. <5>
  [ 76] pusharglistnoret 3 ...................... <pMargins, #left, 5>
  [ 78] objcall 73 .............................. pMargins[#left] = 5
  [ 80] getprop 1263 ............................ <pMargins>
  [ 83] pushsymb 229 ............................ <#right>
  [ 85] pushint8 6 .............................. <6>
  [ 87] pusharglistnoret 3 ...................... <pMargins, #right, 6>
  [ 89] objcall 73 .............................. pMargins[#right] = 6
  [ 91] getprop 1263 ............................ <pMargins>
  [ 94] pushsymb 1264 ........................... <#textleft>
  [ 97] pushint8 30 ............................. <30>
  [ 99] pusharglistnoret 3 ...................... <pMargins, #textleft, 30>
  [101] objcall 73 .............................. pMargins[#textleft] = 30
  [103] pushcons 0 .............................. <EMPTY>
  [105] setprop 1265 ............................ pBgMemName = EMPTY
  [108] pushcons 0 .............................. <EMPTY>
  [110] setprop 1266 ............................ pUserMemName = EMPTY
  [113] pushcons 1 .............................. <"CHAT">
  [115] pushcons 2 .............................. <"plain">
  [117] pushcons 3 .............................. <"SHOUT">
  [119] pushcons 4 .............................. <"bold">
  [121] pushcons 5 .............................. <"WHISPER">
  [123] pushcons 6 .............................. <"grey">
  [125] pushcons 7 .............................. <"OBJECT">
  [127] pushcons 2 .............................. <"plain">
  [129] pusharglist 8 ........................... <["CHAT": "plain", "SHOUT": "bold", "WHISPER": "grey", "OBJECT": "plain"]>
  [131] pushproplist ............................ <["CHAT": "plain", "SHOUT": "bold", "WHISPER": "grey", "OBJECT": "plain"]>
  [132] setprop 1267 ............................ tVariations = ["CHAT": "plain", "SHOUT": "bold", "WHISPER": "grey", "OBJECT": "plain"]
  [135] pusharglist 0 ........................... <[:]>
  [137] pushproplist ............................ <[:]>
  [138] setprop 1268 ............................ pTextParams = [:]
  [141] pushint8 1 .............................. <1>
  [143] setlocal 0
  [145] getlocal 0
  [147] getprop 1267 ............................ <tVariations>
  [150] getobjprop 105 .......................... <tVariations.count>
  [152] lteq
  [153] jmpifz [362] ............................ repeat with i = 1 to tVariations.count
  [156] pushcons 8 .............................. <"struct.font.">
  [158] getprop 1267 ............................ <tVariations>
  [161] getlocal 0 .............................. <i>
  [163] pusharglist 2 ........................... <tVariations, i>
  [165] objcall 75 .............................. <tVariations[i]>
  [167] joinstr ................................. <"struct.font." & tVariations[i]>
  [168] pusharglist 1 ........................... <"struct.font." & tVariations[i]>
  [170] extcall 111 ............................. <getStructVariable("struct.font." & tVariations[i])>
  [172] setlocal 1 .............................. tFontStruct = getStructVariable("struct.font." & tVariations[i])
  [174] pushcons 9 .............................. <"balloon.text.">
  [176] getprop 1267 ............................ <tVariations>
  [179] getlocal 0 .............................. <i>
  [181] pusharglist 2 ........................... <tVariations, i>
  [183] objcall 177 ............................. <tVariations.getPropAt(i)>
  [185] joinstr ................................. <"balloon.text." & tVariations.getPropAt(i)>
  [186] setlocal 2 .............................. tMemName = "balloon.text." & tVariations.getPropAt(i)
  [188] getlocal 2 .............................. <tMemName>
  [190] pusharglist 1 ........................... <tMemName>
  [192] extcall 204 ............................. <memberExists(tMemName)>
  [194] not ..................................... <not memberExists(tMemName)>
  [195] jmpifz [217] ............................ if not memberExists(tMemName) then / else
  [198] getlocal 2 .............................. <tMemName>
  [200] pushsymb 646 ............................ <#text>
  [203] pusharglist 2 ........................... <tMemName, #text>
  [205] extcall 645 ............................. <createMember(tMemName, #text)>
  [208] pusharglist 1 ........................... <createMember(tMemName, #text)>
  [210] extcall 134 ............................. <member(createMember(tMemName, #text))>
  [212] setlocal 3 .............................. tmember = member(createMember(tMemName, #text))
  [214] jmp [230]
  [217] getlocal 2 .............................. <tMemName>
  [219] pusharglist 1 ........................... <tMemName>
  [221] extcall 305 ............................. <getmemnum(tMemName)>
  [224] pusharglist 1 ........................... <getmemnum(tMemName)>
  [226] extcall 134 ............................. <member(getmemnum(tMemName))>
  [228] setlocal 3 .............................. tmember = member(getmemnum(tMemName))
  [230] getlocal 3 .............................. <tmember>
  [232] pushzero ................................ <0>
  [233] setobjprop 647 .......................... tmember.wordWrap = 0
  [236] getlocal 3 .............................. <tmember>
  [238] pushsymb 648 ............................ <#adjust>
  [241] setobjprop 649 .......................... tmember.boxType = #adjust
  [244] getlocal 3 .............................. <tmember>
  [246] pushzero ................................ <0>
  [247] setobjprop 650 .......................... tmember.antialias = 0
  [250] getlocal 3 .............................. <tmember>
  [252] getlocal 1 .............................. <tFontStruct>
  [254] pushsymb 651 ............................ <#font>
  [257] pusharglist 2 ........................... <tFontStruct, #font>
  [259] objcall 149 ............................. <tFontStruct.getaProp(#font)>
  [261] setobjprop 651 .......................... tmember.font = tFontStruct.getaProp(#font)
  [264] getlocal 3 .............................. <tmember>
  [266] getlocal 1 .............................. <tFontStruct>
  [268] pushsymb 652 ............................ <#fontSize>
  [271] pusharglist 2 ........................... <tFontStruct, #fontSize>
  [273] objcall 149 ............................. <tFontStruct.getaProp(#fontSize)>
  [275] setobjprop 652 .......................... tmember.fontSize = tFontStruct.getaProp(#fontSize)
  [278] getlocal 3 .............................. <tmember>
  [280] getlocal 1 .............................. <tFontStruct>
  [282] pushsymb 653 ............................ <#fontStyle>
  [285] pusharglist 2 ........................... <tFontStruct, #fontStyle>
  [287] objcall 149 ............................. <tFontStruct.getaProp(#fontStyle)>
  [289] setobjprop 653 .......................... tmember.fontStyle = tFontStruct.getaProp(#fontStyle)
  [292] getlocal 3 .............................. <tmember>
  [294] getlocal 1 .............................. <tFontStruct>
  [296] pushsymb 393 ............................ <#color>
  [299] pusharglist 2 ........................... <tFontStruct, #color>
  [301] objcall 149 ............................. <tFontStruct.getaProp(#color)>
  [303] setobjprop 393 .......................... tmember.color = tFontStruct.getaProp(#color)
  [306] getprop 1268 ............................ <pTextParams>
  [309] getprop 1267 ............................ <tVariations>
  [312] getlocal 0 .............................. <i>
  [314] pusharglist 2 ........................... <tVariations, i>
  [316] objcall 177 ............................. <tVariations.getPropAt(i)>
  [318] pushsymb 134 ............................ <#member>
  [320] getlocal 3 .............................. <tmember>
  [322] pushsymb 651 ............................ <#font>
  [325] getlocal 1 .............................. <tFontStruct>
  [327] pushsymb 651 ............................ <#font>
  [330] pusharglist 2 ........................... <tFontStruct, #font>
  [332] objcall 149 ............................. <tFontStruct.getaProp(#font)>
  [334] pushsymb 653 ............................ <#fontStyle>
  [337] getlocal 1 .............................. <tFontStruct>
  [339] pushsymb 653 ............................ <#fontStyle>
  [342] pusharglist 2 ........................... <tFontStruct, #fontStyle>
  [344] objcall 149 ............................. <tFontStruct.getaProp(#fontStyle)>
  [346] pusharglist 6 ........................... <[#member: tmember, #font: tFontStruct.getaProp(#font), #fontStyle: tFontStruct.getaProp(#fontStyle)]>
  [348] pushproplist ............................ <[#member: tmember, #font: tFontStruct.getaProp(#font), #fontStyle: tFontStruct.getaProp(#fontStyle)]>
  [349] pusharglistnoret 3 ...................... <pTextParams, tVariations.getPropAt(i), [#member: tmember, #font: tFontStruct.getaProp(#font), #fontStyle: tFontStruct.getaProp(#fontStyle)]>
  [351] objcall 73 .............................. pTextParams[tVariations.getPropAt(i)] = [#member: tmember, #font: tFontStruct.getaProp(#font), #fontStyle: tFontStruct.getaProp(#fontStyle)]
  [353] pushint8 1
  [355] getlocal 0
  [357] add
  [358] setlocal 0
  [360] endrepeat [145]
  [362] pusharglist 0 ........................... <[:]>
  [364] pushproplist ............................ <[:]>
  [365] setprop 1269 ............................ pBalloonImg = [:]
  [368] getprop 1269 ............................ <pBalloonImg>
  [371] pushsymb 695 ............................ <#left>
  [374] pushcons 10 ............................. <"chat_bubble_left">
  [376] pusharglist 1 ........................... <"chat_bubble_left">
  [378] extcall 305 ............................. <getmemnum("chat_bubble_left")>
  [381] pusharglist 1 ........................... <getmemnum("chat_bubble_left")>
  [383] extcall 134 ............................. <member(getmemnum("chat_bubble_left"))>
  [385] getchainedprop 175 ...................... <member(getmemnum("chat_bubble_left")).image>
  [387] pusharglist 1 ........................... <member(getmemnum("chat_bubble_left")).image>
  [389] objcall 176 ............................. <member(getmemnum("chat_bubble_left")).image.duplicate()>
  [391] pusharglistnoret 3 ...................... <pBalloonImg, #left, member(getmemnum("chat_bubble_left")).image.duplicate()>
  [393] objcall 169 ............................. pBalloonImg.addProp(#left, member(getmemnum("chat_bubble_left")).image.duplicate())
  [395] getprop 1269 ............................ <pBalloonImg>
  [398] pushsymb 1270 ........................... <#leftcolor>
  [401] pushcons 11 ............................. <"chat_bubble_left_color">
  [403] pusharglist 1 ........................... <"chat_bubble_left_color">
  [405] extcall 305 ............................. <getmemnum("chat_bubble_left_color")>
  [408] pusharglist 1 ........................... <getmemnum("chat_bubble_left_color")>
  [410] extcall 134 ............................. <member(getmemnum("chat_bubble_left_color"))>
  [412] getchainedprop 175 ...................... <member(getmemnum("chat_bubble_left_color")).image>
  [414] pusharglist 1 ........................... <member(getmemnum("chat_bubble_left_color")).image>
  [416] objcall 176 ............................. <member(getmemnum("chat_bubble_left_color")).image.duplicate()>
  [418] pusharglistnoret 3 ...................... <pBalloonImg, #leftcolor, member(getmemnum("chat_bubble_left_color")).image.duplicate()>
  [420] objcall 169 ............................. pBalloonImg.addProp(#leftcolor, member(getmemnum("chat_bubble_left_color")).image.duplicate())
  [422] getprop 1269 ............................ <pBalloonImg>
  [425] pushsymb 1271 ........................... <#middle>
  [428] pushcons 12 ............................. <"chat_bubble_middle">
  [430] pusharglist 1 ........................... <"chat_bubble_middle">
  [432] extcall 305 ............................. <getmemnum("chat_bubble_middle")>
  [435] pusharglist 1 ........................... <getmemnum("chat_bubble_middle")>
  [437] extcall 134 ............................. <member(getmemnum("chat_bubble_middle"))>
  [439] getchainedprop 175 ...................... <member(getmemnum("chat_bubble_middle")).image>
  [441] pusharglist 1 ........................... <member(getmemnum("chat_bubble_middle")).image>
  [443] objcall 176 ............................. <member(getmemnum("chat_bubble_middle")).image.duplicate()>
  [445] pusharglistnoret 3 ...................... <pBalloonImg, #middle, member(getmemnum("chat_bubble_middle")).image.duplicate()>
  [447] objcall 169 ............................. pBalloonImg.addProp(#middle, member(getmemnum("chat_bubble_middle")).image.duplicate())
  [449] getprop 1269 ............................ <pBalloonImg>
  [452] pushsymb 229 ............................ <#right>
  [454] pushcons 13 ............................. <"chat_bubble_right">
  [456] pusharglist 1 ........................... <"chat_bubble_right">
  [458] extcall 305 ............................. <getmemnum("chat_bubble_right")>
  [461] pusharglist 1 ........................... <getmemnum("chat_bubble_right")>
  [463] extcall 134 ............................. <member(getmemnum("chat_bubble_right"))>
  [465] getchainedprop 175 ...................... <member(getmemnum("chat_bubble_right")).image>
  [467] pusharglist 1 ........................... <member(getmemnum("chat_bubble_right")).image>
  [469] objcall 176 ............................. <member(getmemnum("chat_bubble_right")).image.duplicate()>
  [471] pusharglistnoret 3 ...................... <pBalloonImg, #right, member(getmemnum("chat_bubble_right")).image.duplicate()>
  [473] objcall 169 ............................. pBalloonImg.addProp(#right, member(getmemnum("chat_bubble_right")).image.duplicate())
  [475] getprop 1269 ............................ <pBalloonImg>
  [478] pushsymb 1272 ........................... <#pointer>
  [481] pushcons 14 ............................. <"chat_bubble_pointer">
  [483] pusharglist 1 ........................... <"chat_bubble_pointer">
  [485] extcall 305 ............................. <getmemnum("chat_bubble_pointer")>
  [488] pusharglist 1 ........................... <getmemnum("chat_bubble_pointer")>
  [490] extcall 134 ............................. <member(getmemnum("chat_bubble_pointer"))>
  [492] getchainedprop 175 ...................... <member(getmemnum("chat_bubble_pointer")).image>
  [494] pusharglist 1 ........................... <member(getmemnum("chat_bubble_pointer")).image>
  [496] objcall 176 ............................. <member(getmemnum("chat_bubble_pointer")).image.duplicate()>
  [498] pusharglistnoret 3 ...................... <pBalloonImg, #pointer, member(getmemnum("chat_bubble_pointer")).image.duplicate()>
  [500] objcall 169 ............................. pBalloonImg.addProp(#pointer, member(getmemnum("chat_bubble_pointer")).image.duplicate())
  [502] pushcons 15 ............................. <"balloons.leftmargin">
  [504] pusharglist 1 ........................... <"balloons.leftmargin">
  [506] extcall 478 ............................. <variableExists("balloons.leftmargin")>
  [509] jmpifz [526] ............................ if variableExists("balloons.leftmargin") then / else
  [512] pushcons 15 ............................. <"balloons.leftmargin">
  [514] pushzero ................................ <0>
  [515] pusharglist 2 ........................... <"balloons.leftmargin", 0>
  [517] extcall 326 ............................. <getIntVariable("balloons.leftmargin", 0)>
  [520] setprop 1273 ............................ pBalloonLeftMarg = getIntVariable("balloons.leftmargin", 0)
  [523] jmp [530]
  [526] pushzero ................................ <0>
  [527] setprop 1273 ............................ pBalloonLeftMarg = 0
  [530] pushcons 16 ............................. <"balloons.rightmargin">
  [532] pusharglist 1 ........................... <"balloons.rightmargin">
  [534] extcall 478 ............................. <variableExists("balloons.rightmargin")>
  [537] jmpifz [554] ............................ if variableExists("balloons.rightmargin") then / else
  [540] pushcons 16 ............................. <"balloons.rightmargin">
  [542] pushzero ................................ <0>
  [543] pusharglist 2 ........................... <"balloons.rightmargin", 0>
  [545] extcall 326 ............................. <getIntVariable("balloons.rightmargin", 0)>
  [548] setprop 1274 ............................ pBalloonRightMarg = getIntVariable("balloons.rightmargin", 0)
  [551] jmp [568]
  [554] pusharglist 0 ........................... <>
  [556] thebuiltin 664 .......................... <the stageRight>
  [559] pusharglist 0 ........................... <>
  [561] thebuiltin 998 .......................... <the stageLeft>
  [564] sub ..................................... <the stageRight - the stageLeft>
  [565] setprop 1274 ............................ pBalloonRightMarg = the stageRight - the stageLeft
  [568] ret
end

on deconstruct me
  [  0] getprop 1259 ............................ <pBgSprite>
  [  3] pusharglist 1 ........................... <pBgSprite>
  [  5] extcall 146 ............................. <ilk(pBgSprite)>
  [  7] pushsymb 300 ............................ <#sprite>
  [ 10] eq ...................................... <ilk(pBgSprite) = #sprite>
  [ 11] jmpifz [ 32] ............................ if ilk(pBgSprite) = #sprite then
  [ 14] getprop 1259 ............................ <pBgSprite>
  [ 17] getobjprop 303 .......................... <pBgSprite.spriteNum>
  [ 20] pusharglistnoret 1 ...................... <pBgSprite.spriteNum>
  [ 22] extcall 302 ............................. releaseSprite(pBgSprite.spriteNum)
  [ 25] pusharglist 0 ........................... <>
  [ 27] extcall 118 ............................. <VOID>
  [ 29] setprop 1259 ............................ pBgSprite = VOID
  [ 32] getprop 1260 ............................ <pUserSprite>
  [ 35] pusharglist 1 ........................... <pUserSprite>
  [ 37] extcall 146 ............................. <ilk(pUserSprite)>
  [ 39] pushsymb 300 ............................ <#sprite>
  [ 42] eq ...................................... <ilk(pUserSprite) = #sprite>
  [ 43] jmpifz [ 64] ............................ if ilk(pUserSprite) = #sprite then
  [ 46] getprop 1260 ............................ <pUserSprite>
  [ 49] getobjprop 303 .......................... <pUserSprite.spriteNum>
  [ 52] pusharglistnoret 1 ...................... <pUserSprite.spriteNum>
  [ 54] extcall 302 ............................. releaseSprite(pUserSprite.spriteNum)
  [ 57] pusharglist 0 ........................... <>
  [ 59] extcall 118 ............................. <VOID>
  [ 61] setprop 1260 ............................ pUserSprite = VOID
  [ 64] getprop 1265 ............................ <pBgMemName>
  [ 67] pusharglist 1 ........................... <pBgMemName>
  [ 69] extcall 204 ............................. <memberExists(pBgMemName)>
  [ 71] jmpifz [ 82] ............................ if memberExists(pBgMemName) then
  [ 74] getprop 1265 ............................ <pBgMemName>
  [ 77] pusharglistnoret 1 ...................... <pBgMemName>
  [ 79] extcall 642 ............................. removeMember(pBgMemName)
  [ 82] getprop 1266 ............................ <pUserMemName>
  [ 85] pusharglist 1 ........................... <pUserMemName>
  [ 87] extcall 204 ............................. <memberExists(pUserMemName)>
  [ 89] jmpifz [100] ............................ if memberExists(pUserMemName) then
  [ 92] getprop 1266 ............................ <pUserMemName>
  [ 95] pusharglistnoret 1 ...................... <pUserMemName>
  [ 97] extcall 642 ............................. removeMember(pUserMemName)
  [100] ret
end

on defineBalloon me, tMode, tColor, tUserName, tMessage, tItemID, tUserImg, tUserID, tSourceLoc
  [  0] pushcons 17 ............................. <"chat_item_background_">
  [  2] getparam 5 .............................. <tItemID>
  [  4] joinstr ................................. <"chat_item_background_" & tItemID>
  [  5] setlocal 0 .............................. tNewBgMemName = "chat_item_background_" & tItemID
  [  7] pushcons 18 ............................. <"chat_item_user_">
  [  9] getparam 3 .............................. <tUserName>
  [ 11] joinstr ................................. <"chat_item_user_" & tUserName>
  [ 12] setlocal 1 .............................. tNewUserMemName = "chat_item_user_" & tUserName
  [ 14] getlocal 0 .............................. <tNewBgMemName>
  [ 16] setprop 1265 ............................ pBgMemName = tNewBgMemName
  [ 19] getprop 1265 ............................ <pBgMemName>
  [ 22] pusharglist 1 ........................... <pBgMemName>
  [ 24] extcall 204 ............................. <memberExists(pBgMemName)>
  [ 26] not ..................................... <not memberExists(pBgMemName)>
  [ 27] jmpifz [ 41] ............................ if not memberExists(pBgMemName) then
  [ 30] getprop 1265 ............................ <pBgMemName>
  [ 33] pushsymb 455 ............................ <#bitmap>
  [ 36] pusharglistnoret 2 ...................... <pBgMemName, #bitmap>
  [ 38] extcall 645 ............................. createMember(pBgMemName, #bitmap)
  [ 41] getlocal 1 .............................. <tNewUserMemName>
  [ 43] setprop 1266 ............................ pUserMemName = tNewUserMemName
  [ 46] getprop 1266 ............................ <pUserMemName>
  [ 49] pusharglist 1 ........................... <pUserMemName>
  [ 51] extcall 204 ............................. <memberExists(pUserMemName)>
  [ 53] not ..................................... <not memberExists(pUserMemName)>
  [ 54] jmpifz [ 68] ............................ if not memberExists(pUserMemName) then
  [ 57] getprop 1266 ............................ <pUserMemName>
  [ 60] pushsymb 455 ............................ <#bitmap>
  [ 63] pusharglistnoret 2 ...................... <pUserMemName, #bitmap>
  [ 65] extcall 645 ............................. createMember(pUserMemName, #bitmap)
  [ 68] getparam 5 .............................. <tItemID>
  [ 70] setprop 1258 ............................ pItemId = tItemID
  [ 73] pushint16 150 ........................... <150>
  [ 76] setlocal 2 .............................. tMaxChars = 150
  [ 78] getparam 4 .............................. <tMessage>
  [ 80] getobjprop 277 .......................... <tMessage.length>
  [ 83] getlocal 2 .............................. <tMaxChars>
  [ 85] gt ...................................... <tMessage.length > tMaxChars>
  [ 86] jmpifz [101] ............................ if tMessage.length > tMaxChars then
  [ 89] getparam 4 .............................. <tMessage>
  [ 91] pushzero ................................ <0>
  [ 92] getlocal 2 .............................. <tMaxChars>
  [ 94] pusharglist 3 ........................... <tMessage, 0, tMaxChars>
  [ 96] extcall 1018 ............................ <chars(tMessage, 0, tMaxChars)>
  [ 99] setparam 4 .............................. tMessage = chars(tMessage, 0, tMaxChars)
  [101] getparam 0 .............................. <me>
  [103] getparam 3 .............................. <tUserName>
  [105] getparam 4 .............................. <tMessage>
  [107] getparam 1 .............................. <tMode>
  [109] pusharglist 4 ........................... <me, tUserName, tMessage, tMode>
  [111] objcall 1257 ............................ <me.renderText(tUserName, tMessage, tMode)>
  [114] setlocal 3 .............................. tTextImg = me.renderText(tUserName, tMessage, tMode)
  [116] getlocal 3 .............................. <tTextImg>
  [118] getobjprop 95 ........................... <tTextImg.width>
  [120] setlocal 4 .............................. tTextWidth = tTextImg.width
  [122] getparam 6 .............................. <tUserImg>
  [124] pusharglist 1 ........................... <tUserImg>
  [126] extcall 146 ............................. <ilk(tUserImg)>
  [128] pushsymb 175 ............................ <#image>
  [130] eq ...................................... <ilk(tUserImg) = #image>
  [131] jmpifz [140] ............................ if ilk(tUserImg) = #image then
  [134] getparam 6 .............................. <tUserImg>
  [136] getobjprop 95 ........................... <tUserImg.width>
  [138] setlocal 5 .............................. tUserImgWidth = tUserImg.width
  [140] getparam 6 .............................. <tUserImg>
  [142] pusharglist 1 ........................... <tUserImg>
  [144] extcall 146 ............................. <ilk(tUserImg)>
  [146] pushsymb 175 ............................ <#image>
  [148] eq ...................................... <ilk(tUserImg) = #image>
  [149] jmpifz [165] ............................ if ilk(tUserImg) = #image then / else
  [152] getparam 3 .............................. <tUserName>
  [154] setprop 1261 ............................ pUserName = tUserName
  [157] getparam 7 .............................. <tUserID>
  [159] setprop 320 ............................. pUserId = tUserID
  [162] jmp [175]
  [165] pushcons 0 .............................. <EMPTY>
  [167] setprop 1261 ............................ pUserName = EMPTY
  [170] pushcons 0 .............................. <EMPTY>
  [172] setprop 320 ............................. pUserId = EMPTY
  [175] getprop 1263 ............................ <pMargins>
  [178] pushsymb 1264 ........................... <#textleft>
  [181] pusharglist 2 ........................... <pMargins, #textleft>
  [183] objcall 75 .............................. <pMargins[#textleft]>
  [185] getlocal 4 .............................. <tTextWidth>
  [187] add ..................................... <pMargins[#textleft] + tTextWidth>
  [188] getprop 1263 ............................ <pMargins>
  [191] pushsymb 229 ............................ <#right>
  [193] pusharglist 2 ........................... <pMargins, #right>
  [195] objcall 75 .............................. <pMargins[#right]>
  [197] add ..................................... <pMargins[#textleft] + tTextWidth + pMargins[#right]>
  [198] setlocal 6 .............................. tBalloonWidth = pMargins[#textleft] + tTextWidth + pMargins[#right]
  [200] getparam 0 .............................. <me>
  [202] getlocal 6 .............................. <tBalloonWidth>
  [204] getparam 2 .............................. <tColor>
  [206] pusharglist 3 ........................... <me, tBalloonWidth, tColor>
  [208] objcall 1256 ............................ <me.renderBackground(tBalloonWidth, tColor)>
  [211] setlocal 7 .............................. tBackgroundImg = me.renderBackground(tBalloonWidth, tColor)
  [213] getprop 1263 ............................ <pMargins>
  [216] pushsymb 695 ............................ <#left>
  [219] pusharglist 2 ........................... <pMargins, #left>
  [221] objcall 75 .............................. <pMargins[#left]>
  [223] getlocal 5 .............................. <tUserImgWidth>
  [225] add ..................................... <pMargins[#left] + tUserImgWidth>
  [226] getprop 1263 ............................ <pMargins>
  [229] pushsymb 1276 ........................... <#separator>
  [232] pusharglist 2 ........................... <pMargins, #separator>
  [234] objcall 75 .............................. <pMargins[#separator]>
  [236] add ..................................... <pMargins[#left] + tUserImgWidth + pMargins[#separator]>
  [237] setlocal 8 .............................. tTextOffH = pMargins[#left] + tUserImgWidth + pMargins[#separator]
  [239] getprop 1263 ............................ <pMargins>
  [242] pushsymb 1264 ........................... <#textleft>
  [245] pusharglist 2 ........................... <pMargins, #textleft>
  [247] objcall 75 .............................. <pMargins[#textleft]>
  [249] setlocal 8 .............................. tTextOffH = pMargins[#textleft]
  [251] getprop 1269 ............................ <pBalloonImg>
  [254] pushsymb 1271 ........................... <#middle>
  [257] pusharglist 2 ........................... <pBalloonImg, #middle>
  [259] objcall 75 .............................. <pBalloonImg[#middle]>
  [261] getobjprop 97 ........................... <pBalloonImg[#middle].height>
  [263] getlocal 3 .............................. <tTextImg>
  [265] getobjprop 97 ........................... <tTextImg.height>
  [267] sub ..................................... <pBalloonImg[#middle].height - tTextImg.height>
  [268] pushint8 2 .............................. <2>
  [270] div ..................................... <(pBalloonImg[#middle].height - tTextImg.height) / 2>
  [271] pushint8 1 .............................. <1>
  [273] add ..................................... <((pBalloonImg[#middle].height - tTextImg.height) / 2) + 1>
  [274] setlocal 9 .............................. tTextOffV = ((pBalloonImg[#middle].height - tTextImg.height) / 2) + 1
  [276] getlocal 8 .............................. <tTextOffH>
  [278] getlocal 9 .............................. <tTextOffV>
  [280] getlocal 8 .............................. <tTextOffH>
  [282] getlocal 4 .............................. <tTextWidth>
  [284] add ..................................... <tTextOffH + tTextWidth>
  [285] getlocal 9 .............................. <tTextOffV>
  [287] getlocal 3 .............................. <tTextImg>
  [289] getobjprop 97 ........................... <tTextImg.height>
  [291] add ..................................... <tTextOffV + tTextImg.height>
  [292] pusharglist 4 ........................... <tTextOffH, tTextOffV, tTextOffH + tTextWidth, tTextOffV + tTextImg.height>
  [294] extcall 39 .............................. <rect(tTextOffH, tTextOffV, tTextOffH + tTextWidth, tTextOffV + tTextImg.height)>
  [296] setlocal 10 ............................. tTextDestRect = rect(tTextOffH, tTextOffV, tTextOffH + tTextWidth, tTextOffV + tTextImg.height)
  [298] getlocal 7 .............................. <tBackgroundImg>
  [300] getlocal 3 .............................. <tTextImg>
  [302] getlocal 10 ............................. <tTextDestRect>
  [304] getlocal 3 .............................. <tTextImg>
  [306] getobjprop 39 ........................... <tTextImg.rect>
  [308] pusharglistnoret 4 ...................... <tBackgroundImg, tTextImg, tTextDestRect, tTextImg.rect>
  [310] objcall 209 ............................. tBackgroundImg.copyPixels(tTextImg, tTextDestRect, tTextImg.rect)
  [312] getprop 1265 ............................ <pBgMemName>
  [315] pusharglist 1 ........................... <pBgMemName>
  [317] extcall 453 ............................. <getMember(pBgMemName)>
  [320] setlocal 11 ............................. tBgMem = getMember(pBgMemName)
  [322] getlocal 11 ............................. <tBgMem>
  [324] getlocal 7 .............................. <tBackgroundImg>
  [326] setobjprop 175 .......................... tBgMem.image = tBackgroundImg
  [328] getlocal 11 ............................. <tBgMem>
  [330] pushzero ................................ <0>
  [331] pushzero ................................ <0>
  [332] pusharglist 2 ........................... <0, 0>
  [334] extcall 330 ............................. <point(0, 0)>
  [337] setobjprop 899 .......................... tBgMem.regPoint = point(0, 0)
  [340] getprop 1266 ............................ <pUserMemName>
  [343] pusharglist 1 ........................... <pUserMemName>
  [345] extcall 453 ............................. <getMember(pUserMemName)>
  [348] setlocal 12 ............................. tUserMem = getMember(pUserMemName)
  [350] getparam 6 .............................. <tUserImg>
  [352] pusharglist 1 ........................... <tUserImg>
  [354] extcall 146 ............................. <ilk(tUserImg)>
  [356] pushsymb 175 ............................ <#image>
  [358] eq ...................................... <ilk(tUserImg) = #image>
  [359] jmpifz [371] ............................ if ilk(tUserImg) = #image then / else
  [362] getlocal 12 ............................. <tUserMem>
  [364] getparam 6 .............................. <tUserImg>
  [366] setobjprop 175 .......................... tUserMem.image = tUserImg
  [368] jmp [385]
  [371] getlocal 12 ............................. <tUserMem>
  [373] pushint8 1 .............................. <1>
  [375] pushint8 1 .............................. <1>
  [377] pushint8 8 .............................. <8>
  [379] pusharglist 3 ........................... <1, 1, 8>
  [381] extcall 175 ............................. <image(1, 1, 8)>
  [383] setobjprop 175 .......................... tUserMem.image = image(1, 1, 8)
  [385] getlocal 12 ............................. <tUserMem>
  [387] pushzero ................................ <0>
  [388] pushzero ................................ <0>
  [389] pusharglist 2 ........................... <0, 0>
  [391] extcall 330 ............................. <point(0, 0)>
  [394] setobjprop 899 .......................... tUserMem.regPoint = point(0, 0)
  [397] getprop 1259 ............................ <pBgSprite>
  [400] getlocal 11 ............................. <tBgMem>
  [402] setobjprop 134 .......................... pBgSprite.member = tBgMem
  [404] getprop 1260 ............................ <pUserSprite>
  [407] getlocal 12 ............................. <tUserMem>
  [409] setobjprop 134 .......................... pUserSprite.member = tUserMem
  [411] getprop 1259 ............................ <pBgSprite>
  [414] pushint8 8 .............................. <8>
  [416] setobjprop 196 .......................... pBgSprite.ink = 8
  [418] getprop 1260 ............................ <pUserSprite>
  [421] pushint8 8 .............................. <8>
  [423] setobjprop 196 .......................... pUserSprite.ink = 8
  [425] getparam 8 .............................. <tSourceLoc>
  [427] pusharglist 1 ........................... <tSourceLoc>
  [429] extcall 54 .............................. <voidp(tSourceLoc)>
  [431] not ..................................... <not voidp(tSourceLoc)>
  [432] jmpifz [470] ............................ if not voidp(tSourceLoc) then
  [435] getparam 0 .............................. <me>
  [437] getparam 8 .............................. <tSourceLoc>
  [439] pusharglist 2 ........................... <me, tSourceLoc>
  [441] objcall 1222 ............................ <me.setLocation(tSourceLoc)>
  [444] setlocal 13 ............................. tloc = me.setLocation(tSourceLoc)
  [446] getparam 0 .............................. <me>
  [448] getparam 8 .............................. <tSourceLoc>
  [450] pushint8 1 .............................. <1>
  [452] pusharglist 2 ........................... <tSourceLoc, 1>
  [454] objcall 75 .............................. <tSourceLoc[1]>
  [456] getlocal 13 ............................. <tloc>
  [458] pushint8 1 .............................. <1>
  [460] pusharglist 2 ........................... <tloc, 1>
  [462] objcall 75 .............................. <tloc[1]>
  [464] sub ..................................... <tSourceLoc[1] - tloc[1]>
  [465] pusharglistnoret 2 ...................... <me, tSourceLoc[1] - tloc[1]>
  [467] objcall 1255 ............................ me.addPointer(tSourceLoc[1] - tloc[1])
  [470] getprop 1260 ............................ <pUserSprite>
  [473] getobjprop 303 .......................... <pUserSprite.spriteNum>
  [476] getparam 0 .............................. <me>
  [478] pusharglist 1 ........................... <me>
  [480] objcall 89 .............................. <me.getID()>
  [482] pusharglistnoret 2 ...................... <pUserSprite.spriteNum, me.getID()>
  [484] extcall 854 ............................. setEventBroker(pUserSprite.spriteNum, me.getID())
  [487] getprop 1260 ............................ <pUserSprite>
  [490] pushsymb 1254 ........................... <#eventProcUserSelect>
  [493] getparam 0 .............................. <me>
  [495] pusharglist 1 ........................... <me>
  [497] objcall 89 .............................. <me.getID()>
  [499] pushsymb 860 ............................ <#mouseDown>
  [502] pusharglistnoret 4 ...................... <pUserSprite, #eventProcUserSelect, me.getID(), #mouseDown>
  [504] objcall 91 .............................. pUserSprite.registerProcedure(#eventProcUserSelect, me.getID(), #mouseDown)
  [506] getprop 1260 ............................ <pUserSprite>
  [509] pushcons 19 ............................. <"cursor.finger">
  [511] pusharglistnoret 2 ...................... <pUserSprite, "cursor.finger">
  [513] objcall 640 ............................. pUserSprite.setcursor("cursor.finger")
  [516] getprop 1259 ............................ <pBgSprite>
  [519] getobjprop 303 .......................... <pBgSprite.spriteNum>
  [522] getparam 0 .............................. <me>
  [524] pusharglist 1 ........................... <me>
  [526] objcall 89 .............................. <me.getID()>
  [528] pusharglistnoret 2 ...................... <pBgSprite.spriteNum, me.getID()>
  [530] extcall 854 ............................. setEventBroker(pBgSprite.spriteNum, me.getID())
  [533] getprop 1259 ............................ <pBgSprite>
  [536] pushsymb 1254 ........................... <#eventProcUserSelect>
  [539] getparam 0 .............................. <me>
  [541] pusharglist 1 ........................... <me>
  [543] objcall 89 .............................. <me.getID()>
  [545] pushsymb 860 ............................ <#mouseDown>
  [548] pusharglistnoret 4 ...................... <pBgSprite, #eventProcUserSelect, me.getID(), #mouseDown>
  [550] objcall 91 .............................. pBgSprite.registerProcedure(#eventProcUserSelect, me.getID(), #mouseDown)
  [552] pushint8 1 .............................. <1>
  [554] pusharglistnoret 1 ...................... <1>
  [556] extcall 50 .............................. return 1
  [558] ret
end

on eventProcUserSelect me, tEvent, tSprID
  [  0] getprop 320 ............................. <pUserId>
  [  3] pushcons 0 .............................. <EMPTY>
  [  5] nteq .................................... <pUserId <> EMPTY>
  [  6] jmpifz [ 33] ............................ if pUserId <> EMPTY then
  [  9] pushsymb 77 ............................. <#room>
  [ 11] pusharglist 1 ........................... <#room>
  [ 13] extcall 76 .............................. <getThread(#room)>
  [ 15] pusharglist 1 ........................... <getThread(#room)>
  [ 17] objcall 78 .............................. <getThread(#room).getInterface()>
  [ 19] setlocal 0 .............................. tRoomInterface = getThread(#room).getInterface()
  [ 21] getlocal 0 .............................. <tRoomInterface>
  [ 23] getparam 1 .............................. <tEvent>
  [ 25] getprop 320 ............................. <pUserId>
  [ 28] pusharglistnoret 3 ...................... <tRoomInterface, tEvent, pUserId>
  [ 30] objcall 526 ............................. tRoomInterface.eventProcUserObj(tEvent, pUserId)
  [ 33] ret
end

on showBalloon me, tVisible
  [  0] getparam 1 .............................. <tVisible>
  [  2] pusharglist 1 ........................... <tVisible>
  [  4] extcall 54 .............................. <voidp(tVisible)>
  [  6] jmpifz [ 13] ............................ if voidp(tVisible) then
  [  9] pushint8 1 .............................. <1>
  [ 11] setparam 1 .............................. tVisible = 1
  [ 13] getprop 1259 ............................ <pBgSprite>
  [ 16] pusharglist 1 ........................... <pBgSprite>
  [ 18] extcall 146 ............................. <ilk(pBgSprite)>
  [ 20] pushsymb 300 ............................ <#sprite>
  [ 23] eq ...................................... <ilk(pBgSprite) = #sprite>
  [ 24] jmpifz [ 34] ............................ if ilk(pBgSprite) = #sprite then
  [ 27] getprop 1259 ............................ <pBgSprite>
  [ 30] getparam 1 .............................. <tVisible>
  [ 32] setobjprop 106 .......................... pBgSprite.visible = tVisible
  [ 34] getprop 1260 ............................ <pUserSprite>
  [ 37] pusharglist 1 ........................... <pUserSprite>
  [ 39] extcall 146 ............................. <ilk(pUserSprite)>
  [ 41] pushsymb 300 ............................ <#sprite>
  [ 44] eq ...................................... <ilk(pUserSprite) = #sprite>
  [ 45] jmpifz [ 55] ............................ if ilk(pUserSprite) = #sprite then
  [ 48] getprop 1260 ............................ <pUserSprite>
  [ 51] getparam 1 .............................. <tVisible>
  [ 53] setobjprop 106 .......................... pUserSprite.visible = tVisible
  [ 55] ret
end

on moveVerticallyBy me, tMoveAmount
  [  0] getprop 1289 ............................ <pLocation>
  [  3] pushzero ................................ <0>
  [  4] getparam 1 .............................. <tMoveAmount>
  [  6] pusharglist 2 ........................... <0, tMoveAmount>
  [  8] extcall 330 ............................. <point(0, tMoveAmount)>
  [ 11] add ..................................... <pLocation + point(0, tMoveAmount)>
  [ 12] setlocal 0 .............................. tNewLocation = pLocation + point(0, tMoveAmount)
  [ 14] getparam 0 .............................. <me>
  [ 16] getlocal 0 .............................. <tNewLocation>
  [ 18] pusharglistnoret 2 ...................... <me, tNewLocation>
  [ 20] objcall 1222 ............................ me.setLocation(tNewLocation)
  [ 23] getlocal 0 .............................. <tNewLocation>
  [ 25] pushint8 2 .............................. <2>
  [ 27] pusharglist 2 ........................... <tNewLocation, 2>
  [ 29] objcall 75 .............................. <tNewLocation[2]>
  [ 31] pusharglistnoret 1 ...................... <tNewLocation[2]>
  [ 33] extcall 50 .............................. return tNewLocation[2]
  [ 35] ret
end

on setLocation me, tloc
  [  0] getparam 1 .............................. <tloc>
  [  2] pusharglist 1 ........................... <tloc>
  [  4] extcall 146 ............................. <ilk(tloc)>
  [  6] pushsymb 330 ............................ <#point>
  [  9] nteq .................................... <ilk(tloc) <> #point>
  [ 10] getparam 1 .............................. <tloc>
  [ 12] pusharglist 1 ........................... <tloc>
  [ 14] extcall 146 ............................. <ilk(tloc)>
  [ 16] pushsymb 519 ............................ <#list>
  [ 19] nteq .................................... <ilk(tloc) <> #list>
  [ 20] and ..................................... <(ilk(tloc) <> #point) and (ilk(tloc) <> #list)>
  [ 21] jmpifz [ 29] ............................ if (ilk(tloc) <> #point) and (ilk(tloc) <> #list) then
  [ 24] pushzero ................................ <0>
  [ 25] pusharglistnoret 1 ...................... <0>
  [ 27] extcall 50 .............................. return 0
  [ 29] getprop 1265 ............................ <pBgMemName>
  [ 32] pusharglist 1 ........................... <pBgMemName>
  [ 34] extcall 453 ............................. <getMember(pBgMemName)>
  [ 37] setlocal 0 .............................. tMem = getMember(pBgMemName)
  [ 39] getlocal 0 .............................. <tMem>
  [ 41] getobjprop 454 .......................... <tMem.type>
  [ 44] pushsymb 455 ............................ <#bitmap>
  [ 47] eq ...................................... <tMem.type = #bitmap>
  [ 48] jmpifz [ 62] ............................ if tMem.type = #bitmap then / else
  [ 51] getlocal 0 .............................. <tMem>
  [ 53] getchainedprop 175 ...................... <tMem.image>
  [ 55] getobjprop 95 ........................... <tMem.image.width>
  [ 57] setlocal 1 .............................. tMemWidth = tMem.image.width
  [ 59] jmp [ 67]
  [ 62] pushzero ................................ <0>
  [ 63] pusharglistnoret 1 ...................... <0>
  [ 65] extcall 50 .............................. return 0
  [ 67] getparam 1 .............................. <tloc>
  [ 69] pushint8 1 .............................. <1>
  [ 71] pusharglist 2 ........................... <tloc, 1>
  [ 73] objcall 75 .............................. <tloc[1]>
  [ 75] getlocal 1 .............................. <tMemWidth>
  [ 77] pushint8 2 .............................. <2>
  [ 79] div ..................................... <tMemWidth / 2>
  [ 80] sub ..................................... <tloc[1] - (tMemWidth / 2)>
  [ 81] setlocal 2 .............................. tRelativeLocH = tloc[1] - (tMemWidth / 2)
  [ 83] getlocal 2 .............................. <tRelativeLocH>
  [ 85] getprop 1273 ............................ <pBalloonLeftMarg>
  [ 88] pusharglist 2 ........................... <tRelativeLocH, pBalloonLeftMarg>
  [ 90] extcall 240 ............................. <max(tRelativeLocH, pBalloonLeftMarg)>
  [ 92] setlocal 2 .............................. tRelativeLocH = max(tRelativeLocH, pBalloonLeftMarg)
  [ 94] getlocal 2 .............................. <tRelativeLocH>
  [ 96] getprop 1274 ............................ <pBalloonRightMarg>
  [ 99] getprop 1259 ............................ <pBgSprite>
  [102] getchainedprop 134 ...................... <pBgSprite.member>
  [104] getchainedprop 175 ...................... <pBgSprite.member.image>
  [106] getobjprop 95 ........................... <pBgSprite.member.image.width>
  [108] sub ..................................... <pBalloonRightMarg - pBgSprite.member.image.width>
  [109] pusharglist 2 ........................... <tRelativeLocH, pBalloonRightMarg - pBgSprite.member.image.width>
  [111] extcall 1292 ............................ <min(tRelativeLocH, pBalloonRightMarg - pBgSprite.member.image.width)>
  [114] setlocal 2 .............................. tRelativeLocH = min(tRelativeLocH, pBalloonRightMarg - pBgSprite.member.image.width)
  [116] getparam 1 .............................. <tloc>
  [118] setprop 1289 ............................ pLocation = tloc
  [121] getprop 1259 ............................ <pBgSprite>
  [124] getlocal 2 .............................. <tRelativeLocH>
  [126] getprop 1289 ............................ <pLocation>
  [129] pushint8 2 .............................. <2>
  [131] pusharglist 2 ........................... <pLocation, 2>
  [133] objcall 75 .............................. <pLocation[2]>
  [135] pusharglist 2 ........................... <tRelativeLocH, pLocation[2]>
  [137] extcall 330 ............................. <point(tRelativeLocH, pLocation[2])>
  [140] setobjprop 306 .......................... pBgSprite.loc = point(tRelativeLocH, pLocation[2])
  [143] getprop 1260 ............................ <pUserSprite>
  [146] getchainedprop 134 ...................... <pUserSprite.member>
  [148] getchainedprop 175 ...................... <pUserSprite.member.image>
  [150] getobjprop 97 ........................... <pUserSprite.member.image.height>
  [152] getprop 1269 ............................ <pBalloonImg>
  [155] pushsymb 1271 ........................... <#middle>
  [158] pusharglist 2 ........................... <pBalloonImg, #middle>
  [160] objcall 75 .............................. <pBalloonImg[#middle]>
  [162] getobjprop 97 ........................... <pBalloonImg[#middle].height>
  [164] sub ..................................... <pUserSprite.member.image.height - pBalloonImg[#middle].height>
  [165] pushint8 2 .............................. <2>
  [167] div ..................................... <(pUserSprite.member.image.height - pBalloonImg[#middle].height) / 2>
  [168] setlocal 3 .............................. tUserSprOffV = (pUserSprite.member.image.height - pBalloonImg[#middle].height) / 2
  [170] getprop 1269 ............................ <pBalloonImg>
  [173] pushsymb 695 ............................ <#left>
  [176] pusharglist 2 ........................... <pBalloonImg, #left>
  [178] objcall 75 .............................. <pBalloonImg[#left]>
  [180] getobjprop 95 ........................... <pBalloonImg[#left].width>
  [182] getprop 1260 ............................ <pUserSprite>
  [185] getchainedprop 134 ...................... <pUserSprite.member>
  [187] getchainedprop 175 ...................... <pUserSprite.member.image>
  [189] getobjprop 95 ........................... <pUserSprite.member.image.width>
  [191] sub ..................................... <pBalloonImg[#left].width - pUserSprite.member.image.width>
  [192] pushint8 2 .............................. <2>
  [194] div ..................................... <(pBalloonImg[#left].width - pUserSprite.member.image.width) / 2>
  [195] pushint8 1 .............................. <1>
  [197] add ..................................... <((pBalloonImg[#left].width - pUserSprite.member.image.width) / 2) + 1>
  [198] setlocal 4 .............................. tUserOffH = ((pBalloonImg[#left].width - pUserSprite.member.image.width) / 2) + 1
  [200] getprop 1260 ............................ <pUserSprite>
  [203] getlocal 4 .............................. <tUserOffH>
  [205] getlocal 2 .............................. <tRelativeLocH>
  [207] add ..................................... <tUserOffH + tRelativeLocH>
  [208] getprop 1289 ............................ <pLocation>
  [211] pushint8 2 .............................. <2>
  [213] pusharglist 2 ........................... <pLocation, 2>
  [215] objcall 75 .............................. <pLocation[2]>
  [217] pushint8 1 .............................. <1>
  [219] inv ..................................... <-1>
  [220] getlocal 3 .............................. <tUserSprOffV>
  [222] mul ..................................... <-1 * tUserSprOffV>
  [223] add ..................................... <pLocation[2] + (-1 * tUserSprOffV)>
  [224] pusharglist 2 ........................... <tUserOffH + tRelativeLocH, pLocation[2] + (-1 * tUserSprOffV)>
  [226] extcall 330 ............................. <point(tUserOffH + tRelativeLocH, pLocation[2] + (-1 * tUserSprOffV))>
  [229] setobjprop 306 .......................... pUserSprite.loc = point(tUserOffH + tRelativeLocH, pLocation[2] + (-1 * tUserSprOffV))
  [232] getprop 1259 ............................ <pBgSprite>
  [235] pushcons 20 ............................. <"window.default.locz">
  [237] pusharglist 1 ........................... <"window.default.locz">
  [239] extcall 326 ............................. <getIntVariable("window.default.locz")>
  [242] pushint16 2000 .......................... <2000>
  [245] sub ..................................... <getIntVariable("window.default.locz") - 2000>
  [246] getprop 1289 ............................ <pLocation>
  [249] pushint8 2 .............................. <2>
  [251] pusharglist 2 ........................... <pLocation, 2>
  [253] objcall 75 .............................. <pLocation[2]>
  [255] pushint8 10 ............................. <10>
  [257] div ..................................... <pLocation[2] / 10>
  [258] add ..................................... <getIntVariable("window.default.locz") - 2000 + (pLocation[2] / 10)>
  [259] setobjprop 308 .......................... pBgSprite.locZ = getIntVariable("window.default.locz") - 2000 + (pLocation[2] / 10)
  [262] getprop 1260 ............................ <pUserSprite>
  [265] getprop 1259 ............................ <pBgSprite>
  [268] getobjprop 308 .......................... <pBgSprite.locZ>
  [271] pushint8 100 ............................ <100>
  [273] add ..................................... <pBgSprite.locZ + 100>
  [274] setobjprop 308 .......................... pUserSprite.locZ = pBgSprite.locZ + 100
  [277] getlocal 2 .............................. <tRelativeLocH>
  [279] getprop 1289 ............................ <pLocation>
  [282] pushint8 2 .............................. <2>
  [284] pusharglist 2 ........................... <pLocation, 2>
  [286] objcall 75 .............................. <pLocation[2]>
  [288] pusharglist 2 ........................... <tRelativeLocH, pLocation[2]>
  [290] extcall 330 ............................. <point(tRelativeLocH, pLocation[2])>
  [293] pusharglistnoret 1 ...................... <point(tRelativeLocH, pLocation[2])>
  [295] extcall 50 .............................. return point(tRelativeLocH, pLocation[2])
  [297] ret
end

on addPointer me, tPointerOffH
  [  0] getprop 1259 ............................ <pBgSprite>
  [  3] getchainedprop 134 ...................... <pBgSprite.member>
  [  5] getchainedprop 175 ...................... <pBgSprite.member.image>
  [  7] getobjprop 95 ........................... <pBgSprite.member.image.width>
  [  9] setlocal 0 .............................. tBalloonWidth = pBgSprite.member.image.width
  [ 11] getparam 1 .............................. <tPointerOffH>
  [ 13] getprop 1269 ............................ <pBalloonImg>
  [ 16] pushsymb 695 ............................ <#left>
  [ 19] pusharglist 2 ........................... <pBalloonImg, #left>
  [ 21] objcall 75 .............................. <pBalloonImg[#left]>
  [ 23] getobjprop 95 ........................... <pBalloonImg[#left].width>
  [ 25] lt ...................................... <tPointerOffH < pBalloonImg[#left].width>
  [ 26] jmpifz [ 46] ............................ if tPointerOffH < pBalloonImg[#left].width then / else
  [ 29] getprop 1269 ............................ <pBalloonImg>
  [ 32] pushsymb 695 ............................ <#left>
  [ 35] pusharglist 2 ........................... <pBalloonImg, #left>
  [ 37] objcall 75 .............................. <pBalloonImg[#left]>
  [ 39] getobjprop 95 ........................... <pBalloonImg[#left].width>
  [ 41] setparam 1 .............................. tPointerOffH = pBalloonImg[#left].width
  [ 43] jmp [ 82]
  [ 46] getparam 1 .............................. <tPointerOffH>
  [ 48] getlocal 0 .............................. <tBalloonWidth>
  [ 50] getprop 1269 ............................ <pBalloonImg>
  [ 53] pushsymb 229 ............................ <#right>
  [ 55] pusharglist 2 ........................... <pBalloonImg, #right>
  [ 57] objcall 75 .............................. <pBalloonImg[#right]>
  [ 59] getobjprop 95 ........................... <pBalloonImg[#right].width>
  [ 61] sub ..................................... <tBalloonWidth - pBalloonImg[#right].width>
  [ 62] gt ...................................... <tPointerOffH > (tBalloonWidth - pBalloonImg[#right].width)>
  [ 63] jmpifz [ 82] ............................ if tPointerOffH > (tBalloonWidth - pBalloonImg[#right].width) then
  [ 66] getlocal 0 .............................. <tBalloonWidth>
  [ 68] getprop 1269 ............................ <pBalloonImg>
  [ 71] pushsymb 229 ............................ <#right>
  [ 73] pusharglist 2 ........................... <pBalloonImg, #right>
  [ 75] objcall 75 .............................. <pBalloonImg[#right]>
  [ 77] getobjprop 95 ........................... <pBalloonImg[#right].width>
  [ 79] sub ..................................... <tBalloonWidth - pBalloonImg[#right].width>
  [ 80] setparam 1 .............................. tPointerOffH = tBalloonWidth - pBalloonImg[#right].width
  [ 82] getparam 1 .............................. <tPointerOffH>
  [ 84] setlocal 1 .............................. tStartX = tPointerOffH
  [ 86] getlocal 1 .............................. <tStartX>
  [ 88] getprop 1269 ............................ <pBalloonImg>
  [ 91] pushsymb 1272 ........................... <#pointer>
  [ 94] pusharglist 2 ........................... <pBalloonImg, #pointer>
  [ 96] objcall 75 .............................. <pBalloonImg[#pointer]>
  [ 98] getobjprop 95 ........................... <pBalloonImg[#pointer].width>
  [100] add ..................................... <tStartX + pBalloonImg[#pointer].width>
  [101] setlocal 2 .............................. tEndX = tStartX + pBalloonImg[#pointer].width
  [103] getprop 1269 ............................ <pBalloonImg>
  [106] pushsymb 1271 ........................... <#middle>
  [109] pusharglist 2 ........................... <pBalloonImg, #middle>
  [111] objcall 75 .............................. <pBalloonImg[#middle]>
  [113] getobjprop 97 ........................... <pBalloonImg[#middle].height>
  [115] pushint8 1 .............................. <1>
  [117] sub ..................................... <pBalloonImg[#middle].height - 1>
  [118] setlocal 3 .............................. tStartY = pBalloonImg[#middle].height - 1
  [120] getlocal 3 .............................. <tStartY>
  [122] getprop 1269 ............................ <pBalloonImg>
  [125] pushsymb 1272 ........................... <#pointer>
  [128] pusharglist 2 ........................... <pBalloonImg, #pointer>
  [130] objcall 75 .............................. <pBalloonImg[#pointer]>
  [132] getobjprop 97 ........................... <pBalloonImg[#pointer].height>
  [134] add ..................................... <tStartY + pBalloonImg[#pointer].height>
  [135] setlocal 4 .............................. tEndY = tStartY + pBalloonImg[#pointer].height
  [137] getlocal 1 .............................. <tStartX>
  [139] getlocal 3 .............................. <tStartY>
  [141] getlocal 2 .............................. <tEndX>
  [143] getlocal 4 .............................. <tEndY>
  [145] pusharglist 4 ........................... <tStartX, tStartY, tEndX, tEndY>
  [147] extcall 39 .............................. <rect(tStartX, tStartY, tEndX, tEndY)>
  [149] setlocal 5 .............................. tdestrect = rect(tStartX, tStartY, tEndX, tEndY)
  [151] getprop 1265 ............................ <pBgMemName>
  [154] pusharglist 1 ........................... <pBgMemName>
  [156] extcall 453 ............................. <getMember(pBgMemName)>
  [159] getobjprop 175 .......................... <getMember(pBgMemName).image>
  [161] setlocal 6 .............................. tBgImg = getMember(pBgMemName).image
  [163] getlocal 6 .............................. <tBgImg>
  [165] getprop 1269 ............................ <pBalloonImg>
  [168] pushsymb 1272 ........................... <#pointer>
  [171] pusharglist 2 ........................... <pBalloonImg, #pointer>
  [173] objcall 75 .............................. <pBalloonImg[#pointer]>
  [175] getlocal 5 .............................. <tdestrect>
  [177] getprop 1269 ............................ <pBalloonImg>
  [180] pushsymb 1272 ........................... <#pointer>
  [183] pusharglist 2 ........................... <pBalloonImg, #pointer>
  [185] objcall 75 .............................. <pBalloonImg[#pointer]>
  [187] getobjprop 39 ........................... <pBalloonImg[#pointer].rect>
  [189] pusharglistnoret 4 ...................... <tBgImg, pBalloonImg[#pointer], tdestrect, pBalloonImg[#pointer].rect>
  [191] objcall 209 ............................. tBgImg.copyPixels(pBalloonImg[#pointer], tdestrect, pBalloonImg[#pointer].rect)
  [193] ret
end

on getLowPoint me
  [  0] getprop 1289 ............................ <pLocation>
  [  3] pushint8 2 .............................. <2>
  [  5] pusharglist 2 ........................... <pLocation, 2>
  [  7] objcall 75 .............................. <pLocation[2]>
  [  9] pusharglistnoret 1 ...................... <pLocation[2]>
  [ 11] extcall 50 .............................. return pLocation[2]
  [ 13] ret
end

on getItemId me
  [  0] getprop 1258 ............................ <pItemId>
  [  3] pusharglistnoret 1 ...................... <pItemId>
  [  5] extcall 50 .............................. return pItemId
  [  7] ret
end

on getType me
  [  0] pushcons 21 ............................. <"NORMAL">
  [  2] pusharglistnoret 1 ...................... <"NORMAL">
  [  4] extcall 50 .............................. return "NORMAL"
  [  6] ret
end

on renderBackground me, tWidth, tBalloonColor
  [  0] getparam 2 .............................. <tBalloonColor>
  [  2] getobjprop 1303 ......................... <tBalloonColor.red>
  [  5] getparam 2 .............................. <tBalloonColor>
  [  7] getobjprop 1304 ......................... <tBalloonColor.green>
  [ 10] add ..................................... <tBalloonColor.red + tBalloonColor.green>
  [ 11] getparam 2 .............................. <tBalloonColor>
  [ 13] getobjprop 1305 ......................... <tBalloonColor.blue>
  [ 16] add ..................................... <tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue>
  [ 17] pushint16 600 ........................... <600>
  [ 20] gteq .................................... <(tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) >= 600>
  [ 21] jmpifz [ 76] ............................ if (tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) >= 600 then
  [ 24] pushzero ................................ <0>
  [ 25] pushzero ................................ <0>
  [ 26] pushzero ................................ <0>
  [ 27] pusharglist 3 ........................... <0, 0, 0>
  [ 29] extcall 141 ............................. <rgb(0, 0, 0)>
  [ 31] setlocal 0 .............................. tBalloonColorDarken = rgb(0, 0, 0)
  [ 33] getlocal 0 .............................. <tBalloonColorDarken>
  [ 35] getparam 2 .............................. <tBalloonColor>
  [ 37] getobjprop 1303 ......................... <tBalloonColor.red>
  [ 40] pushcons 22 ............................. <0.90000000000000002>
  [ 42] mul ..................................... <tBalloonColor.red * 0.90000000000000002>
  [ 43] setobjprop 1303 ......................... tBalloonColorDarken.red = tBalloonColor.red * 0.90000000000000002
  [ 46] getlocal 0 .............................. <tBalloonColorDarken>
  [ 48] getparam 2 .............................. <tBalloonColor>
  [ 50] getobjprop 1304 ......................... <tBalloonColor.green>
  [ 53] pushcons 22 ............................. <0.90000000000000002>
  [ 55] mul ..................................... <tBalloonColor.green * 0.90000000000000002>
  [ 56] setobjprop 1304 ......................... tBalloonColorDarken.green = tBalloonColor.green * 0.90000000000000002
  [ 59] getlocal 0 .............................. <tBalloonColorDarken>
  [ 61] getparam 2 .............................. <tBalloonColor>
  [ 63] getobjprop 1305 ......................... <tBalloonColor.blue>
  [ 66] pushcons 22 ............................. <0.90000000000000002>
  [ 68] mul ..................................... <tBalloonColor.blue * 0.90000000000000002>
  [ 69] setobjprop 1305 ......................... tBalloonColorDarken.blue = tBalloonColor.blue * 0.90000000000000002
  [ 72] getlocal 0 .............................. <tBalloonColorDarken>
  [ 74] setparam 2 .............................. tBalloonColor = tBalloonColorDarken
  [ 76] getparam 2 .............................. <tBalloonColor>
  [ 78] getobjprop 1303 ......................... <tBalloonColor.red>
  [ 81] getparam 2 .............................. <tBalloonColor>
  [ 83] getobjprop 1304 ......................... <tBalloonColor.green>
  [ 86] add ..................................... <tBalloonColor.red + tBalloonColor.green>
  [ 87] getparam 2 .............................. <tBalloonColor>
  [ 89] getobjprop 1305 ......................... <tBalloonColor.blue>
  [ 92] add ..................................... <tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue>
  [ 93] pushint8 100 ............................ <100>
  [ 95] lteq .................................... <(tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) <= 100>
  [ 96] jmpifz [151] ............................ if (tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) <= 100 then
  [ 99] pushzero ................................ <0>
  [100] pushzero ................................ <0>
  [101] pushzero ................................ <0>
  [102] pusharglist 3 ........................... <0, 0, 0>
  [104] extcall 141 ............................. <rgb(0, 0, 0)>
  [106] setlocal 0 .............................. tBalloonColorDarken = rgb(0, 0, 0)
  [108] getlocal 0 .............................. <tBalloonColorDarken>
  [110] getparam 2 .............................. <tBalloonColor>
  [112] getobjprop 1303 ......................... <tBalloonColor.red>
  [115] pushint8 3 .............................. <3>
  [117] mul ..................................... <tBalloonColor.red * 3>
  [118] setobjprop 1303 ......................... tBalloonColorDarken.red = tBalloonColor.red * 3
  [121] getlocal 0 .............................. <tBalloonColorDarken>
  [123] getparam 2 .............................. <tBalloonColor>
  [125] getobjprop 1304 ......................... <tBalloonColor.green>
  [128] pushint8 3 .............................. <3>
  [130] mul ..................................... <tBalloonColor.green * 3>
  [131] setobjprop 1304 ......................... tBalloonColorDarken.green = tBalloonColor.green * 3
  [134] getlocal 0 .............................. <tBalloonColorDarken>
  [136] getparam 2 .............................. <tBalloonColor>
  [138] getobjprop 1305 ......................... <tBalloonColor.blue>
  [141] pushint8 3 .............................. <3>
  [143] mul ..................................... <tBalloonColor.blue * 3>
  [144] setobjprop 1305 ......................... tBalloonColorDarken.blue = tBalloonColor.blue * 3
  [147] getlocal 0 .............................. <tBalloonColorDarken>
  [149] setparam 2 .............................. tBalloonColor = tBalloonColorDarken
  [151] getparam 1 .............................. <tWidth>
  [153] getprop 1269 ............................ <pBalloonImg>
  [156] pushsymb 695 ............................ <#left>
  [159] pusharglist 2 ........................... <pBalloonImg, #left>
  [161] objcall 75 .............................. <pBalloonImg[#left]>
  [163] getobjprop 97 ........................... <pBalloonImg[#left].height>
  [165] getprop 1269 ............................ <pBalloonImg>
  [168] pushsymb 1272 ........................... <#pointer>
  [171] pusharglist 2 ........................... <pBalloonImg, #pointer>
  [173] objcall 75 .............................. <pBalloonImg[#pointer]>
  [175] getobjprop 97 ........................... <pBalloonImg[#pointer].height>
  [177] add ..................................... <pBalloonImg[#left].height + pBalloonImg[#pointer].height>
  [178] pushint8 32 ............................. <32>
  [180] pusharglist 3 ........................... <tWidth, pBalloonImg[#left].height + pBalloonImg[#pointer].height, 32>
  [182] extcall 175 ............................. <image(tWidth, pBalloonImg[#left].height + pBalloonImg[#pointer].height, 32)>
  [184] setlocal 1 .............................. tNewImg = image(tWidth, pBalloonImg[#left].height + pBalloonImg[#pointer].height, 32)
  [186] pushzero ................................ <0>
  [187] setlocal 2 .............................. tStartPointY = 0
  [189] getprop 1269 ............................ <pBalloonImg>
  [192] pushsymb 695 ............................ <#left>
  [195] pusharglist 2 ........................... <pBalloonImg, #left>
  [197] objcall 75 .............................. <pBalloonImg[#left]>
  [199] getobjprop 97 ........................... <pBalloonImg[#left].height>
  [201] setlocal 3 .............................. tEndPointY = pBalloonImg[#left].height
  [203] pushzero ................................ <0>
  [204] setlocal 4 .............................. tStartPointX = 0
  [206] pushzero ................................ <0>
  [207] setlocal 5 .............................. tEndPointX = 0
  [209] pushsymb 695 ............................ <#left>
  [212] pushsymb 1270 ........................... <#leftcolor>
  [215] pushsymb 1271 ........................... <#middle>
  [218] pushsymb 229 ............................ <#right>
  [220] pusharglist 4 ........................... <[#left, #leftcolor, #middle, #right]>
  [222] pushlist ................................ <[#left, #leftcolor, #middle, #right]>
  [223] peek 0
  [225] pusharglist 1
  [227] extcall 105
  [229] pushint8 1
  [231] peek 0
  [233] peek 2
  [235] lteq
  [236] jmpifz [613] ............................ repeat with i in [#left, #leftcolor, #middle, #right]
  [239] peek 2
  [241] peek 1
  [243] pusharglist 2
  [245] extcall 75
  [247] setlocal 6
  [249] getlocal 5 .............................. <tEndPointX>
  [251] setlocal 4 .............................. tStartPointX = tEndPointX
  [253] getlocal 6 .............................. <i>
  [255] peek 0 .................................. case i of
  [257] pushsymb 695 ............................ <#left>
  [260] eq
  [261] jmpifz [329] ............................ (case) #left:
  [264] getlocal 5 .............................. <tEndPointX>
  [266] getprop 1269 ............................ <pBalloonImg>
  [269] getlocal 6 .............................. <i>
  [271] pusharglist 2 ........................... <pBalloonImg, i>
  [273] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [275] getobjprop 95 ........................... <pBalloonImg.getProp(i).width>
  [277] add ..................................... <tEndPointX + pBalloonImg.getProp(i).width>
  [278] setlocal 5 .............................. tEndPointX = tEndPointX + pBalloonImg.getProp(i).width
  [280] getlocal 4 .............................. <tStartPointX>
  [282] getlocal 2 .............................. <tStartPointY>
  [284] getlocal 5 .............................. <tEndPointX>
  [286] getlocal 3 .............................. <tEndPointY>
  [288] pusharglist 4 ........................... <tStartPointX, tStartPointY, tEndPointX, tEndPointY>
  [290] extcall 39 .............................. <rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)>
  [292] setlocal 7 .............................. tdestrect = rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)
  [294] getlocal 1 .............................. <tNewImg>
  [296] getprop 1269 ............................ <pBalloonImg>
  [299] getlocal 6 .............................. <i>
  [301] pusharglist 2 ........................... <pBalloonImg, i>
  [303] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [305] getlocal 7 .............................. <tdestrect>
  [307] getprop 1269 ............................ <pBalloonImg>
  [310] getlocal 6 .............................. <i>
  [312] pusharglist 2 ........................... <pBalloonImg, i>
  [314] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [316] getobjprop 39 ........................... <pBalloonImg.getProp(i).rect>
  [318] pusharglistnoret 4 ...................... <tNewImg, pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect>
  [320] objcall 209 ............................. tNewImg.copyPixels(pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect)
  [322] pushint8 1 .............................. <1>
  [324] setlocal 5 .............................. tEndPointX = 1
  [326] jmp [605]
  [329] peek 0
  [331] pushsymb 1270 ........................... <#leftcolor>
  [334] eq
  [335] jmpifz [453] ............................ (case) #leftcolor:
  [338] getlocal 5 .............................. <tEndPointX>
  [340] getprop 1269 ............................ <pBalloonImg>
  [343] getlocal 6 .............................. <i>
  [345] pusharglist 2 ........................... <pBalloonImg, i>
  [347] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [349] getobjprop 95 ........................... <pBalloonImg.getProp(i).width>
  [351] add ..................................... <tEndPointX + pBalloonImg.getProp(i).width>
  [352] setlocal 5 .............................. tEndPointX = tEndPointX + pBalloonImg.getProp(i).width
  [354] getlocal 4 .............................. <tStartPointX>
  [356] getlocal 2 .............................. <tStartPointY>
  [358] getlocal 5 .............................. <tEndPointX>
  [360] getlocal 2 .............................. <tStartPointY>
  [362] getprop 1269 ............................ <pBalloonImg>
  [365] getlocal 6 .............................. <i>
  [367] pusharglist 2 ........................... <pBalloonImg, i>
  [369] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [371] getobjprop 97 ........................... <pBalloonImg.getProp(i).height>
  [373] add ..................................... <tStartPointY + pBalloonImg.getProp(i).height>
  [374] pusharglist 4 ........................... <tStartPointX, tStartPointY, tEndPointX, tStartPointY + pBalloonImg.getProp(i).height>
  [376] extcall 39 .............................. <rect(tStartPointX, tStartPointY, tEndPointX, tStartPointY + pBalloonImg.getProp(i).height)>
  [378] pushzero ................................ <0>
  [379] pushint8 1 .............................. <1>
  [381] pushzero ................................ <0>
  [382] pushint8 1 .............................. <1>
  [384] pusharglist 4 ........................... <0, 1, 0, 1>
  [386] extcall 39 .............................. <rect(0, 1, 0, 1)>
  [388] add ..................................... <rect(tStartPointX, tStartPointY, tEndPointX, tStartPointY + pBalloonImg.getProp(i).height) + rect(0, 1, 0, 1)>
  [389] setlocal 7 .............................. tdestrect = rect(tStartPointX, tStartPointY, tEndPointX, tStartPointY + pBalloonImg.getProp(i).height) + rect(0, 1, 0, 1)
  [391] getprop 1269 ............................ <pBalloonImg>
  [394] getlocal 6 .............................. <i>
  [396] pusharglist 2 ........................... <pBalloonImg, i>
  [398] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [400] pusharglist 1 ........................... <pBalloonImg.getProp(i)>
  [402] objcall 208 ............................. <pBalloonImg.getProp(i).createMatte()>
  [404] setlocal 8 .............................. tMatte = pBalloonImg.getProp(i).createMatte()
  [406] getlocal 1 .............................. <tNewImg>
  [408] getprop 1269 ............................ <pBalloonImg>
  [411] getlocal 6 .............................. <i>
  [413] pusharglist 2 ........................... <pBalloonImg, i>
  [415] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [417] getlocal 7 .............................. <tdestrect>
  [419] getprop 1269 ............................ <pBalloonImg>
  [422] getlocal 6 .............................. <i>
  [424] pusharglist 2 ........................... <pBalloonImg, i>
  [426] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [428] getobjprop 39 ........................... <pBalloonImg.getProp(i).rect>
  [430] pushsymb 858 ............................ <#bgColor>
  [433] getparam 2 .............................. <tBalloonColor>
  [435] pushsymb 196 ............................ <#ink>
  [437] pushint8 41 ............................. <41>
  [439] pushsymb 207 ............................ <#maskImage>
  [441] getlocal 8 .............................. <tMatte>
  [443] pusharglist 6 ........................... <[#bgColor: tBalloonColor, #ink: 41, #maskImage: tMatte]>
  [445] pushproplist ............................ <[#bgColor: tBalloonColor, #ink: 41, #maskImage: tMatte]>
  [446] pusharglistnoret 5 ...................... <tNewImg, pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect, [#bgColor: tBalloonColor, #ink: 41, #maskImage: tMatte]>
  [448] objcall 209 ............................. tNewImg.copyPixels(pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect, [#bgColor: tBalloonColor, #ink: 41, #maskImage: tMatte])
  [450] jmp [605]
  [453] peek 0
  [455] pushsymb 1271 ........................... <#middle>
  [458] eq
  [459] jmpifz [539] ............................ (case) #middle:
  [462] getlocal 5 .............................. <tEndPointX>
  [464] getparam 1 .............................. <tWidth>
  [466] add ..................................... <tEndPointX + tWidth>
  [467] getprop 1269 ............................ <pBalloonImg>
  [470] pushsymb 695 ............................ <#left>
  [473] pusharglist 2 ........................... <pBalloonImg, #left>
  [475] objcall 199 ............................. <pBalloonImg.getProp(#left)>
  [477] getobjprop 95 ........................... <pBalloonImg.getProp(#left).width>
  [479] sub ..................................... <tEndPointX + tWidth - pBalloonImg.getProp(#left).width>
  [480] getprop 1269 ............................ <pBalloonImg>
  [483] pushsymb 229 ............................ <#right>
  [485] pusharglist 2 ........................... <pBalloonImg, #right>
  [487] objcall 199 ............................. <pBalloonImg.getProp(#right)>
  [489] getobjprop 95 ........................... <pBalloonImg.getProp(#right).width>
  [491] sub ..................................... <tEndPointX + tWidth - pBalloonImg.getProp(#left).width - pBalloonImg.getProp(#right).width>
  [492] setlocal 5 .............................. tEndPointX = tEndPointX + tWidth - pBalloonImg.getProp(#left).width - pBalloonImg.getProp(#right).width
  [494] getlocal 4 .............................. <tStartPointX>
  [496] getlocal 2 .............................. <tStartPointY>
  [498] getlocal 5 .............................. <tEndPointX>
  [500] getlocal 3 .............................. <tEndPointY>
  [502] pusharglist 4 ........................... <tStartPointX, tStartPointY, tEndPointX, tEndPointY>
  [504] extcall 39 .............................. <rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)>
  [506] setlocal 7 .............................. tdestrect = rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)
  [508] getlocal 1 .............................. <tNewImg>
  [510] getprop 1269 ............................ <pBalloonImg>
  [513] getlocal 6 .............................. <i>
  [515] pusharglist 2 ........................... <pBalloonImg, i>
  [517] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [519] getlocal 7 .............................. <tdestrect>
  [521] getprop 1269 ............................ <pBalloonImg>
  [524] getlocal 6 .............................. <i>
  [526] pusharglist 2 ........................... <pBalloonImg, i>
  [528] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [530] getobjprop 39 ........................... <pBalloonImg.getProp(i).rect>
  [532] pusharglistnoret 4 ...................... <tNewImg, pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect>
  [534] objcall 209 ............................. tNewImg.copyPixels(pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect)
  [536] jmp [605]
  [539] peek 0
  [541] pushsymb 229 ............................ <#right>
  [543] eq
  [544] jmpifz [605] ............................ (case) #right:
  [547] getlocal 5 .............................. <tEndPointX>
  [549] getprop 1269 ............................ <pBalloonImg>
  [552] getlocal 6 .............................. <i>
  [554] pusharglist 2 ........................... <pBalloonImg, i>
  [556] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [558] getobjprop 95 ........................... <pBalloonImg.getProp(i).width>
  [560] add ..................................... <tEndPointX + pBalloonImg.getProp(i).width>
  [561] setlocal 5 .............................. tEndPointX = tEndPointX + pBalloonImg.getProp(i).width
  [563] getlocal 4 .............................. <tStartPointX>
  [565] getlocal 2 .............................. <tStartPointY>
  [567] getlocal 5 .............................. <tEndPointX>
  [569] getlocal 3 .............................. <tEndPointY>
  [571] pusharglist 4 ........................... <tStartPointX, tStartPointY, tEndPointX, tEndPointY>
  [573] extcall 39 .............................. <rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)>
  [575] setlocal 7 .............................. tdestrect = rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)
  [577] getlocal 1 .............................. <tNewImg>
  [579] getprop 1269 ............................ <pBalloonImg>
  [582] getlocal 6 .............................. <i>
  [584] pusharglist 2 ........................... <pBalloonImg, i>
  [586] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [588] getlocal 7 .............................. <tdestrect>
  [590] getprop 1269 ............................ <pBalloonImg>
  [593] getlocal 6 .............................. <i>
  [595] pusharglist 2 ........................... <pBalloonImg, i>
  [597] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [599] getobjprop 39 ........................... <pBalloonImg.getProp(i).rect>
  [601] pusharglistnoret 4 ...................... <tNewImg, pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect>
  [603] objcall 209 ............................. tNewImg.copyPixels(pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect)
  [605] pop 1 ................................... end case
  [607] pushint8 1
  [609] add
  [610] endrepeat [231]
  [613] pop 3
  [615] getlocal 1 .............................. <tNewImg>
  [617] pusharglistnoret 1 ...................... <tNewImg>
  [619] extcall 50 .............................. return tNewImg
  [621] ret
end

on renderText me, tUserName, tChatMessage, tChatMode
  [  0] getprop 1268 ............................ <pTextParams>
  [  3] getparam 3 .............................. <tChatMode>
  [  5] pusharglist 2 ........................... <pTextParams, tChatMode>
  [  7] objcall 75 .............................. <pTextParams[tChatMode]>
  [  9] setlocal 0 .............................. tTextParams = pTextParams[tChatMode]
  [ 11] getlocal 0 .............................. <tTextParams>
  [ 13] pushsymb 134 ............................ <#member>
  [ 15] pusharglist 2 ........................... <tTextParams, #member>
  [ 17] objcall 75 .............................. <tTextParams[#member]>
  [ 19] setlocal 1 .............................. tmember = tTextParams[#member]
  [ 21] pushcons 23 ............................. <"struct.font.bold">
  [ 23] pusharglist 1 ........................... <"struct.font.bold">
  [ 25] extcall 111 ............................. <getStructVariable("struct.font.bold")>
  [ 27] setlocal 2 .............................. tBoldStruct = getStructVariable("struct.font.bold")
  [ 29] getparam 1 .............................. <tUserName>
  [ 31] pushcons 24 ............................. <":">
  [ 33] joinstr ................................. <tUserName & ":">
  [ 34] getparam 2 .............................. <tChatMessage>
  [ 36] joinpadstr .............................. <tUserName & ":" && tChatMessage>
  [ 37] setlocal 3 .............................. tText = tUserName & ":" && tChatMessage
  [ 39] getlocal 1 .............................. <tmember>
  [ 41] getlocal 3 .............................. <tText>
  [ 43] setobjprop 646 .......................... tmember.text = tText
  [ 46] getlocal 1 .............................. <tmember>
  [ 48] getlocal 0 .............................. <tTextParams>
  [ 50] pushsymb 651 ............................ <#font>
  [ 53] pusharglist 2 ........................... <tTextParams, #font>
  [ 55] objcall 75 .............................. <tTextParams[#font]>
  [ 57] setobjprop 651 .......................... tmember.font = tTextParams[#font]
  [ 60] getlocal 1 .............................. <tmember>
  [ 62] getlocal 0 .............................. <tTextParams>
  [ 64] pushsymb 653 ............................ <#fontStyle>
  [ 67] pusharglist 2 ........................... <tTextParams, #fontStyle>
  [ 69] objcall 75 .............................. <tTextParams[#fontStyle]>
  [ 71] setobjprop 653 .......................... tmember.fontStyle = tTextParams[#fontStyle]
  [ 74] getlocal 1 .............................. <tmember>
  [ 76] pushsymb 197 ............................ <#char>
  [ 78] pushint8 1 .............................. <1>
  [ 80] getparam 1 .............................. <tUserName>
  [ 82] getobjprop 277 .......................... <tUserName.length>
  [ 85] pushint8 1 .............................. <1>
  [ 87] add ..................................... <tUserName.length + 1>
  [ 88] pusharglist 4 ........................... <tmember, #char, 1, tUserName.length + 1>
  [ 90] objcall 1308 ............................ <tmember.char[1..tUserName.length + 1]>
  [ 93] getlocal 2 .............................. <tBoldStruct>
  [ 95] pushsymb 651 ............................ <#font>
  [ 98] pusharglist 2 ........................... <tBoldStruct, #font>
  [100] objcall 149 ............................. <tBoldStruct.getaProp(#font)>
  [102] setobjprop 651 .......................... tmember.char[1..tUserName.length + 1].font = tBoldStruct.getaProp(#font)
  [105] getlocal 1 .............................. <tmember>
  [107] pushsymb 197 ............................ <#char>
  [109] pushint8 1 .............................. <1>
  [111] getparam 1 .............................. <tUserName>
  [113] getobjprop 277 .......................... <tUserName.length>
  [116] pushint8 1 .............................. <1>
  [118] add ..................................... <tUserName.length + 1>
  [119] pusharglist 4 ........................... <tmember, #char, 1, tUserName.length + 1>
  [121] objcall 1308 ............................ <tmember.char[1..tUserName.length + 1]>
  [124] getlocal 2 .............................. <tBoldStruct>
  [126] pushsymb 653 ............................ <#fontStyle>
  [129] pusharglist 2 ........................... <tBoldStruct, #fontStyle>
  [131] objcall 149 ............................. <tBoldStruct.getaProp(#fontStyle)>
  [133] setobjprop 653 .......................... tmember.char[1..tUserName.length + 1].fontStyle = tBoldStruct.getaProp(#fontStyle)
  [136] getlocal 1 .............................. <tmember>
  [138] getlocal 1 .............................. <tmember>
  [140] pushsymb 197 ............................ <#char>
  [142] pusharglist 2 ........................... <tmember, #char>
  [144] objcall 105 ............................. <tmember.char.count>
  [146] pusharglist 2 ........................... <tmember, tmember.char.count>
  [148] objcall 654 ............................. <tmember.charPosToLoc(tmember.char.count)>
  [151] getobjprop 307 .......................... <tmember.charPosToLoc(tmember.char.count).locH>
  [154] getlocal 2 .............................. <tBoldStruct>
  [156] pushsymb 652 ............................ <#fontSize>
  [159] pusharglist 2 ........................... <tBoldStruct, #fontSize>
  [161] objcall 149 ............................. <tBoldStruct.getaProp(#fontSize)>
  [163] add ..................................... <tmember.charPosToLoc(tmember.char.count).locH + tBoldStruct.getaProp(#fontSize)>
  [164] setlocal 4 .............................. tTextWidth = tmember.charPosToLoc(tmember.char.count).locH + tBoldStruct.getaProp(#fontSize)
  [166] getlocal 1 .............................. <tmember>
  [168] pushzero ................................ <0>
  [169] pushzero ................................ <0>
  [170] getlocal 4 .............................. <tTextWidth>
  [172] getlocal 1 .............................. <tmember>
  [174] getobjprop 97 ........................... <tmember.height>
  [176] pusharglist 4 ........................... <0, 0, tTextWidth, tmember.height>
  [178] extcall 39 .............................. <rect(0, 0, tTextWidth, tmember.height)>
  [180] setobjprop 39 ........................... tmember.rect = rect(0, 0, tTextWidth, tmember.height)
  [182] getlocal 1 .............................. <tmember>
  [184] getchainedprop 175 ...................... <tmember.image>
  [186] pusharglist 1 ........................... <tmember.image>
  [188] objcall 176 ............................. <tmember.image.duplicate()>
  [190] setlocal 5 .............................. tTextImg = tmember.image.duplicate()
  [192] getlocal 5 .............................. <tTextImg>
  [194] pusharglistnoret 1 ...................... <tTextImg>
  [196] extcall 50 .............................. return tTextImg
  [198] ret
end

on flipH me, tImg
  [  0] getparam 1 .............................. <tImg>
  [  2] getobjprop 95 ........................... <tImg.width>
  [  4] getparam 1 .............................. <tImg>
  [  6] getobjprop 97 ........................... <tImg.height>
  [  8] getparam 1 .............................. <tImg>
  [ 10] getobjprop 710 .......................... <tImg.depth>
  [ 13] pusharglist 3 ........................... <tImg.width, tImg.height, tImg.depth>
  [ 15] extcall 175 ............................. <image(tImg.width, tImg.height, tImg.depth)>
  [ 17] setlocal 0 .............................. tImage = image(tImg.width, tImg.height, tImg.depth)
  [ 19] getparam 1 .............................. <tImg>
  [ 21] getobjprop 95 ........................... <tImg.width>
  [ 23] pushzero ................................ <0>
  [ 24] pusharglist 2 ........................... <tImg.width, 0>
  [ 26] extcall 330 ............................. <point(tImg.width, 0)>
  [ 29] pushzero ................................ <0>
  [ 30] pushzero ................................ <0>
  [ 31] pusharglist 2 ........................... <0, 0>
  [ 33] extcall 330 ............................. <point(0, 0)>
  [ 36] pushzero ................................ <0>
  [ 37] getparam 1 .............................. <tImg>
  [ 39] getobjprop 97 ........................... <tImg.height>
  [ 41] pusharglist 2 ........................... <0, tImg.height>
  [ 43] extcall 330 ............................. <point(0, tImg.height)>
  [ 46] getparam 1 .............................. <tImg>
  [ 48] getobjprop 95 ........................... <tImg.width>
  [ 50] getparam 1 .............................. <tImg>
  [ 52] getobjprop 97 ........................... <tImg.height>
  [ 54] pusharglist 2 ........................... <tImg.width, tImg.height>
  [ 56] extcall 330 ............................. <point(tImg.width, tImg.height)>
  [ 59] pusharglist 4 ........................... <[point(tImg.width, 0), point(0, 0), point(0, tImg.height), point(tImg.width, tImg.height)]>
  [ 61] pushlist ................................ <[point(tImg.width, 0), point(0, 0), point(0, tImg.height), point(tImg.width, tImg.height)]>
  [ 62] setlocal 1 .............................. tQuad = [point(tImg.width, 0), point(0, 0), point(0, tImg.height), point(tImg.width, tImg.height)]
  [ 64] getlocal 0 .............................. <tImage>
  [ 66] getparam 1 .............................. <tImg>
  [ 68] getlocal 1 .............................. <tQuad>
  [ 70] getparam 1 .............................. <tImg>
  [ 72] getobjprop 39 ........................... <tImg.rect>
  [ 74] pusharglistnoret 4 ...................... <tImage, tImg, tQuad, tImg.rect>
  [ 76] objcall 209 ............................. tImage.copyPixels(tImg, tQuad, tImg.rect)
  [ 78] getlocal 0 .............................. <tImage>
  [ 80] pusharglistnoret 1 ...................... <tImage>
  [ 82] extcall 50 .............................. return tImage
  [ 84] ret
end

on flipV me, tImg
  [  0] getparam 1 .............................. <tImg>
  [  2] getobjprop 95 ........................... <tImg.width>
  [  4] getparam 1 .............................. <tImg>
  [  6] getobjprop 97 ........................... <tImg.height>
  [  8] getparam 1 .............................. <tImg>
  [ 10] getobjprop 710 .......................... <tImg.depth>
  [ 13] pusharglist 3 ........................... <tImg.width, tImg.height, tImg.depth>
  [ 15] extcall 175 ............................. <image(tImg.width, tImg.height, tImg.depth)>
  [ 17] setlocal 0 .............................. tImage = image(tImg.width, tImg.height, tImg.depth)
  [ 19] pushzero ................................ <0>
  [ 20] getparam 1 .............................. <tImg>
  [ 22] getobjprop 97 ........................... <tImg.height>
  [ 24] pusharglist 2 ........................... <0, tImg.height>
  [ 26] extcall 330 ............................. <point(0, tImg.height)>
  [ 29] getparam 1 .............................. <tImg>
  [ 31] getobjprop 95 ........................... <tImg.width>
  [ 33] getparam 1 .............................. <tImg>
  [ 35] getobjprop 97 ........................... <tImg.height>
  [ 37] pusharglist 2 ........................... <tImg.width, tImg.height>
  [ 39] extcall 330 ............................. <point(tImg.width, tImg.height)>
  [ 42] getparam 1 .............................. <tImg>
  [ 44] getobjprop 95 ........................... <tImg.width>
  [ 46] pushzero ................................ <0>
  [ 47] pusharglist 2 ........................... <tImg.width, 0>
  [ 49] extcall 330 ............................. <point(tImg.width, 0)>
  [ 52] pushzero ................................ <0>
  [ 53] pushzero ................................ <0>
  [ 54] pusharglist 2 ........................... <0, 0>
  [ 56] extcall 330 ............................. <point(0, 0)>
  [ 59] pusharglist 4 ........................... <[point(0, tImg.height), point(tImg.width, tImg.height), point(tImg.width, 0), point(0, 0)]>
  [ 61] pushlist ................................ <[point(0, tImg.height), point(tImg.width, tImg.height), point(tImg.width, 0), point(0, 0)]>
  [ 62] setlocal 1 .............................. tQuad = [point(0, tImg.height), point(tImg.width, tImg.height), point(tImg.width, 0), point(0, 0)]
  [ 64] getlocal 0 .............................. <tImage>
  [ 66] getparam 1 .............................. <tImg>
  [ 68] getlocal 1 .............................. <tQuad>
  [ 70] getparam 1 .............................. <tImg>
  [ 72] getobjprop 39 ........................... <tImg.rect>
  [ 74] pusharglistnoret 4 ...................... <tImage, tImg, tQuad, tImg.rect>
  [ 76] objcall 209 ............................. tImage.copyPixels(tImg, tQuad, tImg.rect)
  [ 78] getlocal 0 .............................. <tImage>
  [ 80] pusharglistnoret 1 ...................... <tImage>
  [ 82] extcall 50 .............................. return tImage
  [ 84] ret
end
