property pBgSprite, pLocation, pTextParams, pBalloonImg, pBgMemName, pItemId, pMargins, tVariations, pUserName, pUserId, pSourceLocation, pBalloonLeftMarg, pBalloonRightMarg

on construct me
  [  0] pusharglist 0 ........................... <>
  [  2] extcall 118 ............................. <VOID>
  [  4] setprop 1258 ............................ pItemId = VOID
  [  7] getparam 0 .............................. <me>
  [  9] pusharglist 1 ........................... <me>
  [ 11] objcall 89 .............................. <me.getID()>
  [ 13] pusharglist 1 ........................... <me.getID()>
  [ 15] extcall 301 ............................. <reserveSprite(me.getID())>
  [ 18] pusharglist 1 ........................... <reserveSprite(me.getID())>
  [ 20] extcall 300 ............................. <sprite(reserveSprite(me.getID()))>
  [ 23] setprop 1259 ............................ pBgSprite = sprite(reserveSprite(me.getID()))
  [ 26] pushcons 0 .............................. <EMPTY>
  [ 28] setprop 1261 ............................ pUserName = EMPTY
  [ 31] pushcons 0 .............................. <EMPTY>
  [ 33] setprop 320 ............................. pUserId = EMPTY
  [ 36] pusharglist 0 ........................... <>
  [ 38] extcall 118 ............................. <VOID>
  [ 40] setprop 1262 ............................ pSourceLocation = VOID
  [ 43] pusharglist 0 ........................... <[:]>
  [ 45] pushproplist ............................ <[:]>
  [ 46] setprop 1263 ............................ pMargins = [:]
  [ 49] getprop 1263 ............................ <pMargins>
  [ 52] pushsymb 695 ............................ <#left>
  [ 55] pushint8 5 .............................. <5>
  [ 57] pusharglistnoret 3 ...................... <pMargins, #left, 5>
  [ 59] objcall 73 .............................. pMargins[#left] = 5
  [ 61] getprop 1263 ............................ <pMargins>
  [ 64] pushsymb 229 ............................ <#right>
  [ 66] pushint8 6 .............................. <6>
  [ 68] pusharglistnoret 3 ...................... <pMargins, #right, 6>
  [ 70] objcall 73 .............................. pMargins[#right] = 6
  [ 72] getprop 1263 ............................ <pMargins>
  [ 75] pushsymb 1264 ........................... <#textleft>
  [ 78] pushint8 30 ............................. <30>
  [ 80] pusharglistnoret 3 ...................... <pMargins, #textleft, 30>
  [ 82] objcall 73 .............................. pMargins[#textleft] = 30
  [ 84] pushcons 0 .............................. <EMPTY>
  [ 86] setprop 1265 ............................ pBgMemName = EMPTY
  [ 89] pushcons 1 .............................. <"CUSTOM">
  [ 91] pushcons 2 .............................. <"bold">
  [ 93] pusharglist 2 ........................... <["CUSTOM": "bold"]>
  [ 95] pushproplist ............................ <["CUSTOM": "bold"]>
  [ 96] setprop 1267 ............................ tVariations = ["CUSTOM": "bold"]
  [ 99] pusharglist 0 ........................... <[:]>
  [101] pushproplist ............................ <[:]>
  [102] setprop 1268 ............................ pTextParams = [:]
  [105] pushint8 1 .............................. <1>
  [107] setlocal 0
  [109] getlocal 0
  [111] getprop 1267 ............................ <tVariations>
  [114] getobjprop 105 .......................... <tVariations.count>
  [116] lteq
  [117] jmpifz [312] ............................ repeat with i = 1 to tVariations.count
  [120] pushcons 3 .............................. <"struct.font.">
  [122] getprop 1267 ............................ <tVariations>
  [125] getlocal 0 .............................. <i>
  [127] pusharglist 2 ........................... <tVariations, i>
  [129] objcall 75 .............................. <tVariations[i]>
  [131] joinstr ................................. <"struct.font." & tVariations[i]>
  [132] pusharglist 1 ........................... <"struct.font." & tVariations[i]>
  [134] extcall 111 ............................. <getStructVariable("struct.font." & tVariations[i])>
  [136] setlocal 1 .............................. tFontStruct = getStructVariable("struct.font." & tVariations[i])
  [138] pushcons 4 .............................. <"balloon.text.">
  [140] getprop 1267 ............................ <tVariations>
  [143] getlocal 0 .............................. <i>
  [145] pusharglist 2 ........................... <tVariations, i>
  [147] objcall 177 ............................. <tVariations.getPropAt(i)>
  [149] joinstr ................................. <"balloon.text." & tVariations.getPropAt(i)>
  [150] setlocal 2 .............................. tMemName = "balloon.text." & tVariations.getPropAt(i)
  [152] getlocal 2 .............................. <tMemName>
  [154] pusharglist 1 ........................... <tMemName>
  [156] extcall 204 ............................. <memberExists(tMemName)>
  [158] not ..................................... <not memberExists(tMemName)>
  [159] jmpifz [181] ............................ if not memberExists(tMemName) then / else
  [162] getlocal 2 .............................. <tMemName>
  [164] pushsymb 646 ............................ <#text>
  [167] pusharglist 2 ........................... <tMemName, #text>
  [169] extcall 645 ............................. <createMember(tMemName, #text)>
  [172] pusharglist 1 ........................... <createMember(tMemName, #text)>
  [174] extcall 134 ............................. <member(createMember(tMemName, #text))>
  [176] setlocal 3 .............................. tmember = member(createMember(tMemName, #text))
  [178] jmp [194]
  [181] getlocal 2 .............................. <tMemName>
  [183] pusharglist 1 ........................... <tMemName>
  [185] extcall 305 ............................. <getmemnum(tMemName)>
  [188] pusharglist 1 ........................... <getmemnum(tMemName)>
  [190] extcall 134 ............................. <member(getmemnum(tMemName))>
  [192] setlocal 3 .............................. tmember = member(getmemnum(tMemName))
  [194] getlocal 3 .............................. <tmember>
  [196] pushzero ................................ <0>
  [197] setobjprop 647 .......................... tmember.wordWrap = 0
  [200] getlocal 3 .............................. <tmember>
  [202] pushsymb 648 ............................ <#adjust>
  [205] setobjprop 649 .......................... tmember.boxType = #adjust
  [208] getlocal 3 .............................. <tmember>
  [210] pushzero ................................ <0>
  [211] setobjprop 650 .......................... tmember.antialias = 0
  [214] getlocal 3 .............................. <tmember>
  [216] getlocal 1 .............................. <tFontStruct>
  [218] pushsymb 651 ............................ <#font>
  [221] pusharglist 2 ........................... <tFontStruct, #font>
  [223] objcall 149 ............................. <tFontStruct.getaProp(#font)>
  [225] setobjprop 651 .......................... tmember.font = tFontStruct.getaProp(#font)
  [228] getlocal 3 .............................. <tmember>
  [230] getlocal 1 .............................. <tFontStruct>
  [232] pushsymb 652 ............................ <#fontSize>
  [235] pusharglist 2 ........................... <tFontStruct, #fontSize>
  [237] objcall 149 ............................. <tFontStruct.getaProp(#fontSize)>
  [239] setobjprop 652 .......................... tmember.fontSize = tFontStruct.getaProp(#fontSize)
  [242] getlocal 3 .............................. <tmember>
  [244] getlocal 1 .............................. <tFontStruct>
  [246] pushsymb 653 ............................ <#fontStyle>
  [249] pusharglist 2 ........................... <tFontStruct, #fontStyle>
  [251] objcall 149 ............................. <tFontStruct.getaProp(#fontStyle)>
  [253] setobjprop 653 .......................... tmember.fontStyle = tFontStruct.getaProp(#fontStyle)
  [256] getprop 1268 ............................ <pTextParams>
  [259] getprop 1267 ............................ <tVariations>
  [262] getlocal 0 .............................. <i>
  [264] pusharglist 2 ........................... <tVariations, i>
  [266] objcall 177 ............................. <tVariations.getPropAt(i)>
  [268] pushsymb 134 ............................ <#member>
  [270] getlocal 3 .............................. <tmember>
  [272] pushsymb 651 ............................ <#font>
  [275] getlocal 1 .............................. <tFontStruct>
  [277] pushsymb 651 ............................ <#font>
  [280] pusharglist 2 ........................... <tFontStruct, #font>
  [282] objcall 149 ............................. <tFontStruct.getaProp(#font)>
  [284] pushsymb 653 ............................ <#fontStyle>
  [287] getlocal 1 .............................. <tFontStruct>
  [289] pushsymb 653 ............................ <#fontStyle>
  [292] pusharglist 2 ........................... <tFontStruct, #fontStyle>
  [294] objcall 149 ............................. <tFontStruct.getaProp(#fontStyle)>
  [296] pusharglist 6 ........................... <[#member: tmember, #font: tFontStruct.getaProp(#font), #fontStyle: tFontStruct.getaProp(#fontStyle)]>
  [298] pushproplist ............................ <[#member: tmember, #font: tFontStruct.getaProp(#font), #fontStyle: tFontStruct.getaProp(#fontStyle)]>
  [299] pusharglistnoret 3 ...................... <pTextParams, tVariations.getPropAt(i), [#member: tmember, #font: tFontStruct.getaProp(#font), #fontStyle: tFontStruct.getaProp(#fontStyle)]>
  [301] objcall 73 .............................. pTextParams[tVariations.getPropAt(i)] = [#member: tmember, #font: tFontStruct.getaProp(#font), #fontStyle: tFontStruct.getaProp(#fontStyle)]
  [303] pushint8 1
  [305] getlocal 0
  [307] add
  [308] setlocal 0
  [310] endrepeat [109]
  [312] pusharglist 0 ........................... <[:]>
  [314] pushproplist ............................ <[:]>
  [315] setprop 1269 ............................ pBalloonImg = [:]
  [318] getprop 1269 ............................ <pBalloonImg>
  [321] pushsymb 695 ............................ <#left>
  [324] pushcons 5 .............................. <"chat_bubble_left">
  [326] pusharglist 1 ........................... <"chat_bubble_left">
  [328] extcall 305 ............................. <getmemnum("chat_bubble_left")>
  [331] pusharglist 1 ........................... <getmemnum("chat_bubble_left")>
  [333] extcall 134 ............................. <member(getmemnum("chat_bubble_left"))>
  [335] getchainedprop 175 ...................... <member(getmemnum("chat_bubble_left")).image>
  [337] pusharglist 1 ........................... <member(getmemnum("chat_bubble_left")).image>
  [339] objcall 176 ............................. <member(getmemnum("chat_bubble_left")).image.duplicate()>
  [341] pusharglistnoret 3 ...................... <pBalloonImg, #left, member(getmemnum("chat_bubble_left")).image.duplicate()>
  [343] objcall 169 ............................. pBalloonImg.addProp(#left, member(getmemnum("chat_bubble_left")).image.duplicate())
  [345] getprop 1269 ............................ <pBalloonImg>
  [348] pushsymb 1271 ........................... <#middle>
  [351] pushcons 6 .............................. <"chat_bubble_middle">
  [353] pusharglist 1 ........................... <"chat_bubble_middle">
  [355] extcall 305 ............................. <getmemnum("chat_bubble_middle")>
  [358] pusharglist 1 ........................... <getmemnum("chat_bubble_middle")>
  [360] extcall 134 ............................. <member(getmemnum("chat_bubble_middle"))>
  [362] getchainedprop 175 ...................... <member(getmemnum("chat_bubble_middle")).image>
  [364] pusharglist 1 ........................... <member(getmemnum("chat_bubble_middle")).image>
  [366] objcall 176 ............................. <member(getmemnum("chat_bubble_middle")).image.duplicate()>
  [368] pusharglistnoret 3 ...................... <pBalloonImg, #middle, member(getmemnum("chat_bubble_middle")).image.duplicate()>
  [370] objcall 169 ............................. pBalloonImg.addProp(#middle, member(getmemnum("chat_bubble_middle")).image.duplicate())
  [372] getprop 1269 ............................ <pBalloonImg>
  [375] pushsymb 229 ............................ <#right>
  [377] pushcons 7 .............................. <"chat_bubble_right">
  [379] pusharglist 1 ........................... <"chat_bubble_right">
  [381] extcall 305 ............................. <getmemnum("chat_bubble_right")>
  [384] pusharglist 1 ........................... <getmemnum("chat_bubble_right")>
  [386] extcall 134 ............................. <member(getmemnum("chat_bubble_right"))>
  [388] getchainedprop 175 ...................... <member(getmemnum("chat_bubble_right")).image>
  [390] pusharglist 1 ........................... <member(getmemnum("chat_bubble_right")).image>
  [392] objcall 176 ............................. <member(getmemnum("chat_bubble_right")).image.duplicate()>
  [394] pusharglistnoret 3 ...................... <pBalloonImg, #right, member(getmemnum("chat_bubble_right")).image.duplicate()>
  [396] objcall 169 ............................. pBalloonImg.addProp(#right, member(getmemnum("chat_bubble_right")).image.duplicate())
  [398] pushcons 8 .............................. <"balloons.leftmargin">
  [400] pusharglist 1 ........................... <"balloons.leftmargin">
  [402] extcall 478 ............................. <variableExists("balloons.leftmargin")>
  [405] jmpifz [422] ............................ if variableExists("balloons.leftmargin") then / else
  [408] pushcons 8 .............................. <"balloons.leftmargin">
  [410] pushzero ................................ <0>
  [411] pusharglist 2 ........................... <"balloons.leftmargin", 0>
  [413] extcall 326 ............................. <getIntVariable("balloons.leftmargin", 0)>
  [416] setprop 1273 ............................ pBalloonLeftMarg = getIntVariable("balloons.leftmargin", 0)
  [419] jmp [426]
  [422] pushzero ................................ <0>
  [423] setprop 1273 ............................ pBalloonLeftMarg = 0
  [426] pushcons 9 .............................. <"balloons.rightmargin">
  [428] pusharglist 1 ........................... <"balloons.rightmargin">
  [430] extcall 478 ............................. <variableExists("balloons.rightmargin")>
  [433] jmpifz [450] ............................ if variableExists("balloons.rightmargin") then / else
  [436] pushcons 9 .............................. <"balloons.rightmargin">
  [438] pushzero ................................ <0>
  [439] pusharglist 2 ........................... <"balloons.rightmargin", 0>
  [441] extcall 326 ............................. <getIntVariable("balloons.rightmargin", 0)>
  [444] setprop 1274 ............................ pBalloonRightMarg = getIntVariable("balloons.rightmargin", 0)
  [447] jmp [464]
  [450] pusharglist 0 ........................... <>
  [452] thebuiltin 664 .......................... <the stageRight>
  [455] pusharglist 0 ........................... <>
  [457] thebuiltin 998 .......................... <the stageLeft>
  [460] sub ..................................... <the stageRight - the stageLeft>
  [461] setprop 1274 ............................ pBalloonRightMarg = the stageRight - the stageLeft
  [464] ret
end

on deconstruct me
  [  0] getprop 1259 ............................ <pBgSprite>
  [  3] pusharglist 1 ........................... <pBgSprite>
  [  5] extcall 146 ............................. <ilk(pBgSprite)>
  [  7] pushsymb 300 ............................ <#sprite>
  [ 10] eq ...................................... <ilk(pBgSprite) = #sprite>
  [ 11] jmpifz [ 32] ............................ if ilk(pBgSprite) = #sprite then
  [ 14] getprop 1259 ............................ <pBgSprite>
  [ 17] getobjprop 303 .......................... <pBgSprite.spriteNum>
  [ 20] pusharglistnoret 1 ...................... <pBgSprite.spriteNum>
  [ 22] extcall 302 ............................. releaseSprite(pBgSprite.spriteNum)
  [ 25] pusharglist 0 ........................... <>
  [ 27] extcall 118 ............................. <VOID>
  [ 29] setprop 1259 ............................ pBgSprite = VOID
  [ 32] getprop 1265 ............................ <pBgMemName>
  [ 35] pusharglist 1 ........................... <pBgMemName>
  [ 37] extcall 204 ............................. <memberExists(pBgMemName)>
  [ 39] jmpifz [ 50] ............................ if memberExists(pBgMemName) then
  [ 42] getprop 1265 ............................ <pBgMemName>
  [ 45] pusharglistnoret 1 ...................... <pBgMemName>
  [ 47] extcall 642 ............................. removeMember(pBgMemName)
  [ 50] ret
end

on defineBalloon me, tMode, tColor, tMessage, tItemID, tSourceLoc
  [  0] pushcons 10 ............................. <"chat_item_background_">
  [  2] getparam 4 .............................. <tItemID>
  [  4] joinstr ................................. <"chat_item_background_" & tItemID>
  [  5] setlocal 0 .............................. tNewBgMemName = "chat_item_background_" & tItemID
  [  7] getlocal 0 .............................. <tNewBgMemName>
  [  9] setprop 1265 ............................ pBgMemName = tNewBgMemName
  [ 12] getprop 1265 ............................ <pBgMemName>
  [ 15] pusharglist 1 ........................... <pBgMemName>
  [ 17] extcall 204 ............................. <memberExists(pBgMemName)>
  [ 19] not ..................................... <not memberExists(pBgMemName)>
  [ 20] jmpifz [ 34] ............................ if not memberExists(pBgMemName) then
  [ 23] getprop 1265 ............................ <pBgMemName>
  [ 26] pushsymb 455 ............................ <#bitmap>
  [ 29] pusharglistnoret 2 ...................... <pBgMemName, #bitmap>
  [ 31] extcall 645 ............................. createMember(pBgMemName, #bitmap)
  [ 34] getparam 4 .............................. <tItemID>
  [ 36] setprop 1258 ............................ pItemId = tItemID
  [ 39] getparam 0 .............................. <me>
  [ 41] getparam 3 .............................. <tMessage>
  [ 43] getparam 1 .............................. <tMode>
  [ 45] pusharglist 3 ........................... <me, tMessage, tMode>
  [ 47] objcall 1257 ............................ <me.renderText(tMessage, tMode)>
  [ 50] setlocal 1 .............................. tTextImg = me.renderText(tMessage, tMode)
  [ 52] getlocal 1 .............................. <tTextImg>
  [ 54] getobjprop 95 ........................... <tTextImg.width>
  [ 56] setlocal 2 .............................. tTextWidth = tTextImg.width
  [ 58] getparam 2 .............................. <tColor>
  [ 60] pusharglist 0 ........................... <>
  [ 62] extcall 118 ............................. <VOID>
  [ 64] eq ...................................... <tColor = VOID>
  [ 65] jmpifz [ 83] ............................ if tColor = VOID then
  [ 68] pushint16 255 ........................... <255>
  [ 71] pushint16 255 ........................... <255>
  [ 74] pushint16 255 ........................... <255>
  [ 77] pusharglist 3 ........................... <255, 255, 255>
  [ 79] extcall 141 ............................. <rgb(255, 255, 255)>
  [ 81] setparam 2 .............................. tColor = rgb(255, 255, 255)
  [ 83] getprop 1263 ............................ <pMargins>
  [ 86] pushsymb 695 ............................ <#left>
  [ 89] pusharglist 2 ........................... <pMargins, #left>
  [ 91] objcall 75 .............................. <pMargins[#left]>
  [ 93] getlocal 2 .............................. <tTextWidth>
  [ 95] add ..................................... <pMargins[#left] + tTextWidth>
  [ 96] getprop 1263 ............................ <pMargins>
  [ 99] pushsymb 229 ............................ <#right>
  [101] pusharglist 2 ........................... <pMargins, #right>
  [103] objcall 75 .............................. <pMargins[#right]>
  [105] add ..................................... <pMargins[#left] + tTextWidth + pMargins[#right]>
  [106] setlocal 3 .............................. tBalloonWidth = pMargins[#left] + tTextWidth + pMargins[#right]
  [108] getparam 0 .............................. <me>
  [110] getlocal 3 .............................. <tBalloonWidth>
  [112] getparam 2 .............................. <tColor>
  [114] pusharglist 3 ........................... <me, tBalloonWidth, tColor>
  [116] objcall 1256 ............................ <me.renderBackground(tBalloonWidth, tColor)>
  [119] setlocal 4 .............................. tBackgroundImg = me.renderBackground(tBalloonWidth, tColor)
  [121] getprop 1263 ............................ <pMargins>
  [124] pushsymb 695 ............................ <#left>
  [127] pusharglist 2 ........................... <pMargins, #left>
  [129] objcall 75 .............................. <pMargins[#left]>
  [131] setlocal 5 .............................. tTextOffH = pMargins[#left]
  [133] getprop 1269 ............................ <pBalloonImg>
  [136] pushsymb 1271 ........................... <#middle>
  [139] pusharglist 2 ........................... <pBalloonImg, #middle>
  [141] objcall 75 .............................. <pBalloonImg[#middle]>
  [143] getobjprop 97 ........................... <pBalloonImg[#middle].height>
  [145] getlocal 1 .............................. <tTextImg>
  [147] getobjprop 97 ........................... <tTextImg.height>
  [149] sub ..................................... <pBalloonImg[#middle].height - tTextImg.height>
  [150] pushint8 2 .............................. <2>
  [152] div ..................................... <(pBalloonImg[#middle].height - tTextImg.height) / 2>
  [153] pushint8 1 .............................. <1>
  [155] add ..................................... <((pBalloonImg[#middle].height - tTextImg.height) / 2) + 1>
  [156] setlocal 6 .............................. tTextOffV = ((pBalloonImg[#middle].height - tTextImg.height) / 2) + 1
  [158] getlocal 5 .............................. <tTextOffH>
  [160] getlocal 6 .............................. <tTextOffV>
  [162] getlocal 5 .............................. <tTextOffH>
  [164] getlocal 2 .............................. <tTextWidth>
  [166] add ..................................... <tTextOffH + tTextWidth>
  [167] getlocal 6 .............................. <tTextOffV>
  [169] getlocal 1 .............................. <tTextImg>
  [171] getobjprop 97 ........................... <tTextImg.height>
  [173] add ..................................... <tTextOffV + tTextImg.height>
  [174] pusharglist 4 ........................... <tTextOffH, tTextOffV, tTextOffH + tTextWidth, tTextOffV + tTextImg.height>
  [176] extcall 39 .............................. <rect(tTextOffH, tTextOffV, tTextOffH + tTextWidth, tTextOffV + tTextImg.height)>
  [178] setlocal 7 .............................. tTextDestRect = rect(tTextOffH, tTextOffV, tTextOffH + tTextWidth, tTextOffV + tTextImg.height)
  [180] getlocal 4 .............................. <tBackgroundImg>
  [182] getlocal 1 .............................. <tTextImg>
  [184] getlocal 7 .............................. <tTextDestRect>
  [186] getlocal 1 .............................. <tTextImg>
  [188] getobjprop 39 ........................... <tTextImg.rect>
  [190] pusharglistnoret 4 ...................... <tBackgroundImg, tTextImg, tTextDestRect, tTextImg.rect>
  [192] objcall 209 ............................. tBackgroundImg.copyPixels(tTextImg, tTextDestRect, tTextImg.rect)
  [194] getprop 1265 ............................ <pBgMemName>
  [197] pusharglist 1 ........................... <pBgMemName>
  [199] extcall 453 ............................. <getMember(pBgMemName)>
  [202] setlocal 8 .............................. tBgMem = getMember(pBgMemName)
  [204] getlocal 8 .............................. <tBgMem>
  [206] getlocal 4 .............................. <tBackgroundImg>
  [208] setobjprop 175 .......................... tBgMem.image = tBackgroundImg
  [210] getlocal 8 .............................. <tBgMem>
  [212] pushzero ................................ <0>
  [213] pushzero ................................ <0>
  [214] pusharglist 2 ........................... <0, 0>
  [216] extcall 330 ............................. <point(0, 0)>
  [219] setobjprop 899 .......................... tBgMem.regPoint = point(0, 0)
  [222] getprop 1259 ............................ <pBgSprite>
  [225] getlocal 8 .............................. <tBgMem>
  [227] setobjprop 134 .......................... pBgSprite.member = tBgMem
  [229] getprop 1259 ............................ <pBgSprite>
  [232] pushint8 8 .............................. <8>
  [234] setobjprop 196 .......................... pBgSprite.ink = 8
  [236] pushint8 1 .............................. <1>
  [238] pusharglistnoret 1 ...................... <1>
  [240] extcall 50 .............................. return 1
  [242] ret
end

on showBalloon me, tVisible
  [  0] getparam 1 .............................. <tVisible>
  [  2] pusharglist 1 ........................... <tVisible>
  [  4] extcall 54 .............................. <voidp(tVisible)>
  [  6] jmpifz [ 13] ............................ if voidp(tVisible) then
  [  9] pushint8 1 .............................. <1>
  [ 11] setparam 1 .............................. tVisible = 1
  [ 13] getprop 1259 ............................ <pBgSprite>
  [ 16] pusharglist 1 ........................... <pBgSprite>
  [ 18] extcall 146 ............................. <ilk(pBgSprite)>
  [ 20] pushsymb 300 ............................ <#sprite>
  [ 23] eq ...................................... <ilk(pBgSprite) = #sprite>
  [ 24] jmpifz [ 34] ............................ if ilk(pBgSprite) = #sprite then
  [ 27] getprop 1259 ............................ <pBgSprite>
  [ 30] getparam 1 .............................. <tVisible>
  [ 32] setobjprop 106 .......................... pBgSprite.visible = tVisible
  [ 34] ret
end

on moveVerticallyBy me, tMoveAmount
  [  0] getprop 1289 ............................ <pLocation>
  [  3] pushzero ................................ <0>
  [  4] getparam 1 .............................. <tMoveAmount>
  [  6] pusharglist 2 ........................... <0, tMoveAmount>
  [  8] extcall 330 ............................. <point(0, tMoveAmount)>
  [ 11] add ..................................... <pLocation + point(0, tMoveAmount)>
  [ 12] setlocal 0 .............................. tNewLocation = pLocation + point(0, tMoveAmount)
  [ 14] getparam 0 .............................. <me>
  [ 16] getlocal 0 .............................. <tNewLocation>
  [ 18] pusharglistnoret 2 ...................... <me, tNewLocation>
  [ 20] objcall 1222 ............................ me.setLocation(tNewLocation)
  [ 23] getlocal 0 .............................. <tNewLocation>
  [ 25] pushint8 2 .............................. <2>
  [ 27] pusharglist 2 ........................... <tNewLocation, 2>
  [ 29] objcall 75 .............................. <tNewLocation[2]>
  [ 31] pusharglistnoret 1 ...................... <tNewLocation[2]>
  [ 33] extcall 50 .............................. return tNewLocation[2]
  [ 35] ret
end

on setLocation me, tloc
  [  0] getparam 1 .............................. <tloc>
  [  2] pusharglist 1 ........................... <tloc>
  [  4] extcall 146 ............................. <ilk(tloc)>
  [  6] pushsymb 330 ............................ <#point>
  [  9] nteq .................................... <ilk(tloc) <> #point>
  [ 10] getparam 1 .............................. <tloc>
  [ 12] pusharglist 1 ........................... <tloc>
  [ 14] extcall 146 ............................. <ilk(tloc)>
  [ 16] pushsymb 519 ............................ <#list>
  [ 19] nteq .................................... <ilk(tloc) <> #list>
  [ 20] and ..................................... <(ilk(tloc) <> #point) and (ilk(tloc) <> #list)>
  [ 21] jmpifz [ 29] ............................ if (ilk(tloc) <> #point) and (ilk(tloc) <> #list) then
  [ 24] pushzero ................................ <0>
  [ 25] pusharglistnoret 1 ...................... <0>
  [ 27] extcall 50 .............................. return 0
  [ 29] getprop 1265 ............................ <pBgMemName>
  [ 32] pusharglist 1 ........................... <pBgMemName>
  [ 34] extcall 453 ............................. <getMember(pBgMemName)>
  [ 37] setlocal 0 .............................. tMem = getMember(pBgMemName)
  [ 39] getlocal 0 .............................. <tMem>
  [ 41] getobjprop 454 .......................... <tMem.type>
  [ 44] pushsymb 455 ............................ <#bitmap>
  [ 47] eq ...................................... <tMem.type = #bitmap>
  [ 48] jmpifz [ 62] ............................ if tMem.type = #bitmap then / else
  [ 51] getlocal 0 .............................. <tMem>
  [ 53] getchainedprop 175 ...................... <tMem.image>
  [ 55] getobjprop 95 ........................... <tMem.image.width>
  [ 57] setlocal 1 .............................. tMemWidth = tMem.image.width
  [ 59] jmp [ 67]
  [ 62] pushzero ................................ <0>
  [ 63] pusharglistnoret 1 ...................... <0>
  [ 65] extcall 50 .............................. return 0
  [ 67] getparam 1 .............................. <tloc>
  [ 69] pushint8 1 .............................. <1>
  [ 71] pusharglist 2 ........................... <tloc, 1>
  [ 73] objcall 75 .............................. <tloc[1]>
  [ 75] getlocal 1 .............................. <tMemWidth>
  [ 77] pushint8 2 .............................. <2>
  [ 79] div ..................................... <tMemWidth / 2>
  [ 80] sub ..................................... <tloc[1] - (tMemWidth / 2)>
  [ 81] setlocal 2 .............................. tRelativeLocH = tloc[1] - (tMemWidth / 2)
  [ 83] getlocal 2 .............................. <tRelativeLocH>
  [ 85] getprop 1273 ............................ <pBalloonLeftMarg>
  [ 88] pusharglist 2 ........................... <tRelativeLocH, pBalloonLeftMarg>
  [ 90] extcall 240 ............................. <max(tRelativeLocH, pBalloonLeftMarg)>
  [ 92] setlocal 2 .............................. tRelativeLocH = max(tRelativeLocH, pBalloonLeftMarg)
  [ 94] getlocal 2 .............................. <tRelativeLocH>
  [ 96] getprop 1274 ............................ <pBalloonRightMarg>
  [ 99] getprop 1259 ............................ <pBgSprite>
  [102] getchainedprop 134 ...................... <pBgSprite.member>
  [104] getchainedprop 175 ...................... <pBgSprite.member.image>
  [106] getobjprop 95 ........................... <pBgSprite.member.image.width>
  [108] sub ..................................... <pBalloonRightMarg - pBgSprite.member.image.width>
  [109] pusharglist 2 ........................... <tRelativeLocH, pBalloonRightMarg - pBgSprite.member.image.width>
  [111] extcall 1292 ............................ <min(tRelativeLocH, pBalloonRightMarg - pBgSprite.member.image.width)>
  [114] setlocal 2 .............................. tRelativeLocH = min(tRelativeLocH, pBalloonRightMarg - pBgSprite.member.image.width)
  [116] getparam 1 .............................. <tloc>
  [118] setprop 1289 ............................ pLocation = tloc
  [121] getprop 1259 ............................ <pBgSprite>
  [124] getlocal 2 .............................. <tRelativeLocH>
  [126] getprop 1289 ............................ <pLocation>
  [129] pushint8 2 .............................. <2>
  [131] pusharglist 2 ........................... <pLocation, 2>
  [133] objcall 75 .............................. <pLocation[2]>
  [135] pusharglist 2 ........................... <tRelativeLocH, pLocation[2]>
  [137] extcall 330 ............................. <point(tRelativeLocH, pLocation[2])>
  [140] setobjprop 306 .......................... pBgSprite.loc = point(tRelativeLocH, pLocation[2])
  [143] getprop 1259 ............................ <pBgSprite>
  [146] pushcons 11 ............................. <"window.default.locz">
  [148] pusharglist 1 ........................... <"window.default.locz">
  [150] extcall 326 ............................. <getIntVariable("window.default.locz")>
  [153] pushint16 2000 .......................... <2000>
  [156] sub ..................................... <getIntVariable("window.default.locz") - 2000>
  [157] getprop 1289 ............................ <pLocation>
  [160] pushint8 2 .............................. <2>
  [162] pusharglist 2 ........................... <pLocation, 2>
  [164] objcall 75 .............................. <pLocation[2]>
  [166] pushint8 10 ............................. <10>
  [168] div ..................................... <pLocation[2] / 10>
  [169] add ..................................... <getIntVariable("window.default.locz") - 2000 + (pLocation[2] / 10)>
  [170] setobjprop 308 .......................... pBgSprite.locZ = getIntVariable("window.default.locz") - 2000 + (pLocation[2] / 10)
  [173] getlocal 2 .............................. <tRelativeLocH>
  [175] getprop 1289 ............................ <pLocation>
  [178] pushint8 2 .............................. <2>
  [180] pusharglist 2 ........................... <pLocation, 2>
  [182] objcall 75 .............................. <pLocation[2]>
  [184] pusharglist 2 ........................... <tRelativeLocH, pLocation[2]>
  [186] extcall 330 ............................. <point(tRelativeLocH, pLocation[2])>
  [189] pusharglistnoret 1 ...................... <point(tRelativeLocH, pLocation[2])>
  [191] extcall 50 .............................. return point(tRelativeLocH, pLocation[2])
  [193] ret
end

on getLowPoint me
  [  0] getprop 1289 ............................ <pLocation>
  [  3] pushint8 2 .............................. <2>
  [  5] pusharglist 2 ........................... <pLocation, 2>
  [  7] objcall 75 .............................. <pLocation[2]>
  [  9] pusharglistnoret 1 ...................... <pLocation[2]>
  [ 11] extcall 50 .............................. return pLocation[2]
  [ 13] ret
end

on getItemId me
  [  0] getprop 1258 ............................ <pItemId>
  [  3] pusharglistnoret 1 ...................... <pItemId>
  [  5] extcall 50 .............................. return pItemId
  [  7] ret
end

on getType me
  [  0] pushcons 1 .............................. <"CUSTOM">
  [  2] pusharglistnoret 1 ...................... <"CUSTOM">
  [  4] extcall 50 .............................. return "CUSTOM"
  [  6] ret
end

on renderBackground me, tWidth, tBalloonColor
  [  0] getparam 2 .............................. <tBalloonColor>
  [  2] getobjprop 1303 ......................... <tBalloonColor.red>
  [  5] getparam 2 .............................. <tBalloonColor>
  [  7] getobjprop 1304 ......................... <tBalloonColor.green>
  [ 10] add ..................................... <tBalloonColor.red + tBalloonColor.green>
  [ 11] getparam 2 .............................. <tBalloonColor>
  [ 13] getobjprop 1305 ......................... <tBalloonColor.blue>
  [ 16] add ..................................... <tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue>
  [ 17] pushint16 600 ........................... <600>
  [ 20] gteq .................................... <(tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) >= 600>
  [ 21] jmpifz [ 76] ............................ if (tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) >= 600 then
  [ 24] pushzero ................................ <0>
  [ 25] pushzero ................................ <0>
  [ 26] pushzero ................................ <0>
  [ 27] pusharglist 3 ........................... <0, 0, 0>
  [ 29] extcall 141 ............................. <rgb(0, 0, 0)>
  [ 31] setlocal 0 .............................. tBalloonColorDarken = rgb(0, 0, 0)
  [ 33] getlocal 0 .............................. <tBalloonColorDarken>
  [ 35] getparam 2 .............................. <tBalloonColor>
  [ 37] getobjprop 1303 ......................... <tBalloonColor.red>
  [ 40] pushcons 12 ............................. <0.90000000000000002>
  [ 42] mul ..................................... <tBalloonColor.red * 0.90000000000000002>
  [ 43] setobjprop 1303 ......................... tBalloonColorDarken.red = tBalloonColor.red * 0.90000000000000002
  [ 46] getlocal 0 .............................. <tBalloonColorDarken>
  [ 48] getparam 2 .............................. <tBalloonColor>
  [ 50] getobjprop 1304 ......................... <tBalloonColor.green>
  [ 53] pushcons 12 ............................. <0.90000000000000002>
  [ 55] mul ..................................... <tBalloonColor.green * 0.90000000000000002>
  [ 56] setobjprop 1304 ......................... tBalloonColorDarken.green = tBalloonColor.green * 0.90000000000000002
  [ 59] getlocal 0 .............................. <tBalloonColorDarken>
  [ 61] getparam 2 .............................. <tBalloonColor>
  [ 63] getobjprop 1305 ......................... <tBalloonColor.blue>
  [ 66] pushcons 12 ............................. <0.90000000000000002>
  [ 68] mul ..................................... <tBalloonColor.blue * 0.90000000000000002>
  [ 69] setobjprop 1305 ......................... tBalloonColorDarken.blue = tBalloonColor.blue * 0.90000000000000002
  [ 72] getlocal 0 .............................. <tBalloonColorDarken>
  [ 74] setparam 2 .............................. tBalloonColor = tBalloonColorDarken
  [ 76] getparam 2 .............................. <tBalloonColor>
  [ 78] getobjprop 1303 ......................... <tBalloonColor.red>
  [ 81] getparam 2 .............................. <tBalloonColor>
  [ 83] getobjprop 1304 ......................... <tBalloonColor.green>
  [ 86] add ..................................... <tBalloonColor.red + tBalloonColor.green>
  [ 87] getparam 2 .............................. <tBalloonColor>
  [ 89] getobjprop 1305 ......................... <tBalloonColor.blue>
  [ 92] add ..................................... <tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue>
  [ 93] pushint8 100 ............................ <100>
  [ 95] lteq .................................... <(tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) <= 100>
  [ 96] jmpifz [151] ............................ if (tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) <= 100 then
  [ 99] pushzero ................................ <0>
  [100] pushzero ................................ <0>
  [101] pushzero ................................ <0>
  [102] pusharglist 3 ........................... <0, 0, 0>
  [104] extcall 141 ............................. <rgb(0, 0, 0)>
  [106] setlocal 0 .............................. tBalloonColorDarken = rgb(0, 0, 0)
  [108] getlocal 0 .............................. <tBalloonColorDarken>
  [110] getparam 2 .............................. <tBalloonColor>
  [112] getobjprop 1303 ......................... <tBalloonColor.red>
  [115] pushint8 3 .............................. <3>
  [117] mul ..................................... <tBalloonColor.red * 3>
  [118] setobjprop 1303 ......................... tBalloonColorDarken.red = tBalloonColor.red * 3
  [121] getlocal 0 .............................. <tBalloonColorDarken>
  [123] getparam 2 .............................. <tBalloonColor>
  [125] getobjprop 1304 ......................... <tBalloonColor.green>
  [128] pushint8 3 .............................. <3>
  [130] mul ..................................... <tBalloonColor.green * 3>
  [131] setobjprop 1304 ......................... tBalloonColorDarken.green = tBalloonColor.green * 3
  [134] getlocal 0 .............................. <tBalloonColorDarken>
  [136] getparam 2 .............................. <tBalloonColor>
  [138] getobjprop 1305 ......................... <tBalloonColor.blue>
  [141] pushint8 3 .............................. <3>
  [143] mul ..................................... <tBalloonColor.blue * 3>
  [144] setobjprop 1305 ......................... tBalloonColorDarken.blue = tBalloonColor.blue * 3
  [147] getlocal 0 .............................. <tBalloonColorDarken>
  [149] setparam 2 .............................. tBalloonColor = tBalloonColorDarken
  [151] getparam 1 .............................. <tWidth>
  [153] getprop 1269 ............................ <pBalloonImg>
  [156] pushsymb 695 ............................ <#left>
  [159] pusharglist 2 ........................... <pBalloonImg, #left>
  [161] objcall 75 .............................. <pBalloonImg[#left]>
  [163] getobjprop 97 ........................... <pBalloonImg[#left].height>
  [165] getprop 1269 ............................ <pBalloonImg>
  [168] pushsymb 695 ............................ <#left>
  [171] pusharglist 2 ........................... <pBalloonImg, #left>
  [173] objcall 75 .............................. <pBalloonImg[#left]>
  [175] getobjprop 97 ........................... <pBalloonImg[#left].height>
  [177] add ..................................... <pBalloonImg[#left].height + pBalloonImg[#left].height>
  [178] pushint8 32 ............................. <32>
  [180] pusharglist 3 ........................... <tWidth, pBalloonImg[#left].height + pBalloonImg[#left].height, 32>
  [182] extcall 175 ............................. <image(tWidth, pBalloonImg[#left].height + pBalloonImg[#left].height, 32)>
  [184] setlocal 1 .............................. tNewImg = image(tWidth, pBalloonImg[#left].height + pBalloonImg[#left].height, 32)
  [186] pushzero ................................ <0>
  [187] setlocal 2 .............................. tStartPointY = 0
  [189] getprop 1269 ............................ <pBalloonImg>
  [192] pushsymb 695 ............................ <#left>
  [195] pusharglist 2 ........................... <pBalloonImg, #left>
  [197] objcall 75 .............................. <pBalloonImg[#left]>
  [199] getobjprop 97 ........................... <pBalloonImg[#left].height>
  [201] setlocal 3 .............................. tEndPointY = pBalloonImg[#left].height
  [203] pushzero ................................ <0>
  [204] setlocal 4 .............................. tStartPointX = 0
  [206] pushzero ................................ <0>
  [207] setlocal 5 .............................. tEndPointX = 0
  [209] pushsymb 695 ............................ <#left>
  [212] pushsymb 1271 ........................... <#middle>
  [215] pushsymb 229 ............................ <#right>
  [217] pusharglist 3 ........................... <[#left, #middle, #right]>
  [219] pushlist ................................ <[#left, #middle, #right]>
  [220] peek 0
  [222] pusharglist 1
  [224] extcall 105
  [226] pushint8 1
  [228] peek 0
  [230] peek 2
  [232] lteq
  [233] jmpifz [481] ............................ repeat with i in [#left, #middle, #right]
  [236] peek 2
  [238] peek 1
  [240] pusharglist 2
  [242] extcall 75
  [244] setlocal 6
  [246] getlocal 5 .............................. <tEndPointX>
  [248] setlocal 4 .............................. tStartPointX = tEndPointX
  [250] getlocal 6 .............................. <i>
  [252] peek 0 .................................. case i of
  [254] pushsymb 695 ............................ <#left>
  [257] eq
  [258] jmpifz [322] ............................ (case) #left:
  [261] getlocal 5 .............................. <tEndPointX>
  [263] getprop 1269 ............................ <pBalloonImg>
  [266] getlocal 6 .............................. <i>
  [268] pusharglist 2 ........................... <pBalloonImg, i>
  [270] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [272] getobjprop 95 ........................... <pBalloonImg.getProp(i).width>
  [274] add ..................................... <tEndPointX + pBalloonImg.getProp(i).width>
  [275] setlocal 5 .............................. tEndPointX = tEndPointX + pBalloonImg.getProp(i).width
  [277] getlocal 4 .............................. <tStartPointX>
  [279] getlocal 2 .............................. <tStartPointY>
  [281] getlocal 5 .............................. <tEndPointX>
  [283] getlocal 3 .............................. <tEndPointY>
  [285] pusharglist 4 ........................... <tStartPointX, tStartPointY, tEndPointX, tEndPointY>
  [287] extcall 39 .............................. <rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)>
  [289] setlocal 7 .............................. tdestrect = rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)
  [291] getlocal 1 .............................. <tNewImg>
  [293] getprop 1269 ............................ <pBalloonImg>
  [296] getlocal 6 .............................. <i>
  [298] pusharglist 2 ........................... <pBalloonImg, i>
  [300] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [302] getlocal 7 .............................. <tdestrect>
  [304] getprop 1269 ............................ <pBalloonImg>
  [307] getlocal 6 .............................. <i>
  [309] pusharglist 2 ........................... <pBalloonImg, i>
  [311] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [313] getobjprop 39 ........................... <pBalloonImg.getProp(i).rect>
  [315] pusharglistnoret 4 ...................... <tNewImg, pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect>
  [317] objcall 209 ............................. tNewImg.copyPixels(pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect)
  [319] jmp [474]
  [322] peek 0
  [324] pushsymb 1271 ........................... <#middle>
  [327] eq
  [328] jmpifz [408] ............................ (case) #middle:
  [331] getlocal 5 .............................. <tEndPointX>
  [333] getparam 1 .............................. <tWidth>
  [335] add ..................................... <tEndPointX + tWidth>
  [336] getprop 1269 ............................ <pBalloonImg>
  [339] pushsymb 695 ............................ <#left>
  [342] pusharglist 2 ........................... <pBalloonImg, #left>
  [344] objcall 199 ............................. <pBalloonImg.getProp(#left)>
  [346] getobjprop 95 ........................... <pBalloonImg.getProp(#left).width>
  [348] sub ..................................... <tEndPointX + tWidth - pBalloonImg.getProp(#left).width>
  [349] getprop 1269 ............................ <pBalloonImg>
  [352] pushsymb 229 ............................ <#right>
  [354] pusharglist 2 ........................... <pBalloonImg, #right>
  [356] objcall 199 ............................. <pBalloonImg.getProp(#right)>
  [358] getobjprop 95 ........................... <pBalloonImg.getProp(#right).width>
  [360] sub ..................................... <tEndPointX + tWidth - pBalloonImg.getProp(#left).width - pBalloonImg.getProp(#right).width>
  [361] setlocal 5 .............................. tEndPointX = tEndPointX + tWidth - pBalloonImg.getProp(#left).width - pBalloonImg.getProp(#right).width
  [363] getlocal 4 .............................. <tStartPointX>
  [365] getlocal 2 .............................. <tStartPointY>
  [367] getlocal 5 .............................. <tEndPointX>
  [369] getlocal 3 .............................. <tEndPointY>
  [371] pusharglist 4 ........................... <tStartPointX, tStartPointY, tEndPointX, tEndPointY>
  [373] extcall 39 .............................. <rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)>
  [375] setlocal 7 .............................. tdestrect = rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)
  [377] getlocal 1 .............................. <tNewImg>
  [379] getprop 1269 ............................ <pBalloonImg>
  [382] getlocal 6 .............................. <i>
  [384] pusharglist 2 ........................... <pBalloonImg, i>
  [386] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [388] getlocal 7 .............................. <tdestrect>
  [390] getprop 1269 ............................ <pBalloonImg>
  [393] getlocal 6 .............................. <i>
  [395] pusharglist 2 ........................... <pBalloonImg, i>
  [397] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [399] getobjprop 39 ........................... <pBalloonImg.getProp(i).rect>
  [401] pusharglistnoret 4 ...................... <tNewImg, pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect>
  [403] objcall 209 ............................. tNewImg.copyPixels(pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect)
  [405] jmp [474]
  [408] peek 0
  [410] pushsymb 229 ............................ <#right>
  [412] eq
  [413] jmpifz [474] ............................ (case) #right:
  [416] getlocal 5 .............................. <tEndPointX>
  [418] getprop 1269 ............................ <pBalloonImg>
  [421] getlocal 6 .............................. <i>
  [423] pusharglist 2 ........................... <pBalloonImg, i>
  [425] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [427] getobjprop 95 ........................... <pBalloonImg.getProp(i).width>
  [429] add ..................................... <tEndPointX + pBalloonImg.getProp(i).width>
  [430] setlocal 5 .............................. tEndPointX = tEndPointX + pBalloonImg.getProp(i).width
  [432] getlocal 4 .............................. <tStartPointX>
  [434] getlocal 2 .............................. <tStartPointY>
  [436] getlocal 5 .............................. <tEndPointX>
  [438] getlocal 3 .............................. <tEndPointY>
  [440] pusharglist 4 ........................... <tStartPointX, tStartPointY, tEndPointX, tEndPointY>
  [442] extcall 39 .............................. <rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)>
  [444] setlocal 7 .............................. tdestrect = rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)
  [446] getlocal 1 .............................. <tNewImg>
  [448] getprop 1269 ............................ <pBalloonImg>
  [451] getlocal 6 .............................. <i>
  [453] pusharglist 2 ........................... <pBalloonImg, i>
  [455] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [457] getlocal 7 .............................. <tdestrect>
  [459] getprop 1269 ............................ <pBalloonImg>
  [462] getlocal 6 .............................. <i>
  [464] pusharglist 2 ........................... <pBalloonImg, i>
  [466] objcall 199 ............................. <pBalloonImg.getProp(i)>
  [468] getobjprop 39 ........................... <pBalloonImg.getProp(i).rect>
  [470] pusharglistnoret 4 ...................... <tNewImg, pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect>
  [472] objcall 209 ............................. tNewImg.copyPixels(pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect)
  [474] pop 1 ................................... end case
  [476] pushint8 1
  [478] add
  [479] endrepeat [228]
  [481] pop 3
  [483] getlocal 1 .............................. <tNewImg>
  [485] pusharglistnoret 1 ...................... <tNewImg>
  [487] extcall 50 .............................. return tNewImg
  [489] ret
end

on renderText me, tChatMessage, tChatMode
  [  0] getprop 1268 ............................ <pTextParams>
  [  3] getparam 2 .............................. <tChatMode>
  [  5] pusharglist 2 ........................... <pTextParams, tChatMode>
  [  7] objcall 75 .............................. <pTextParams[tChatMode]>
  [  9] setlocal 0 .............................. tTextParams = pTextParams[tChatMode]
  [ 11] getlocal 0 .............................. <tTextParams>
  [ 13] pushsymb 134 ............................ <#member>
  [ 15] pusharglist 2 ........................... <tTextParams, #member>
  [ 17] objcall 75 .............................. <tTextParams[#member]>
  [ 19] setlocal 1 .............................. tmember = tTextParams[#member]
  [ 21] getparam 1 .............................. <tChatMessage>
  [ 23] setlocal 2 .............................. tText = tChatMessage
  [ 25] getlocal 1 .............................. <tmember>
  [ 27] getlocal 2 .............................. <tText>
  [ 29] setobjprop 646 .......................... tmember.text = tText
  [ 32] getlocal 1 .............................. <tmember>
  [ 34] getlocal 0 .............................. <tTextParams>
  [ 36] pushsymb 651 ............................ <#font>
  [ 39] pusharglist 2 ........................... <tTextParams, #font>
  [ 41] objcall 75 .............................. <tTextParams[#font]>
  [ 43] setobjprop 651 .......................... tmember.font = tTextParams[#font]
  [ 46] getlocal 1 .............................. <tmember>
  [ 48] getlocal 0 .............................. <tTextParams>
  [ 50] pushsymb 653 ............................ <#fontStyle>
  [ 53] pusharglist 2 ........................... <tTextParams, #fontStyle>
  [ 55] objcall 75 .............................. <tTextParams[#fontStyle]>
  [ 57] setobjprop 653 .......................... tmember.fontStyle = tTextParams[#fontStyle]
  [ 60] getlocal 1 .............................. <tmember>
  [ 62] getlocal 1 .............................. <tmember>
  [ 64] pushsymb 197 ............................ <#char>
  [ 66] pusharglist 2 ........................... <tmember, #char>
  [ 68] objcall 105 ............................. <tmember.char.count>
  [ 70] pusharglist 2 ........................... <tmember, tmember.char.count>
  [ 72] objcall 654 ............................. <tmember.charPosToLoc(tmember.char.count)>
  [ 75] getobjprop 307 .......................... <tmember.charPosToLoc(tmember.char.count).locH>
  [ 78] setlocal 3 .............................. tTextWidth = tmember.charPosToLoc(tmember.char.count).locH
  [ 80] getlocal 1 .............................. <tmember>
  [ 82] pushzero ................................ <0>
  [ 83] pushzero ................................ <0>
  [ 84] getlocal 3 .............................. <tTextWidth>
  [ 86] getlocal 1 .............................. <tmember>
  [ 88] getobjprop 97 ........................... <tmember.height>
  [ 90] pusharglist 4 ........................... <0, 0, tTextWidth, tmember.height>
  [ 92] extcall 39 .............................. <rect(0, 0, tTextWidth, tmember.height)>
  [ 94] setobjprop 39 ........................... tmember.rect = rect(0, 0, tTextWidth, tmember.height)
  [ 96] getlocal 1 .............................. <tmember>
  [ 98] getchainedprop 175 ...................... <tmember.image>
  [100] pusharglist 1 ........................... <tmember.image>
  [102] objcall 176 ............................. <tmember.image.duplicate()>
  [104] setlocal 4 .............................. tTextImg = tmember.image.duplicate()
  [106] getlocal 4 .............................. <tTextImg>
  [108] pusharglistnoret 1 ...................... <tTextImg>
  [110] extcall 50 .............................. return tTextImg
  [112] ret
end
