property pWallPatterns, pWallDefined, pWallModel, pFloorPatterns, pFloorDefined, pFloorModel

on construct me
  [  0] pushcons 0 .............................. <"wallpattern_patterns">
  [  2] pushzero ................................ <0>
  [  3] getfield ................................ <field("wallpattern_patterns")>
  [  4] setprop 5 ............................... pWallPatterns = field("wallpattern_patterns")
  [  6] pushcons 1 .............................. <"floorpattern_patterns">
  [  8] pushzero ................................ <0>
  [  9] getfield ................................ <field("floorpattern_patterns")>
  [ 10] setprop 6 ............................... pFloorPatterns = field("floorpattern_patterns")
  [ 12] pushzero ................................ <0>
  [ 13] setprop 7 ............................... pWallDefined = 0
  [ 15] pushzero ................................ <0>
  [ 16] setprop 8 ............................... pFloorDefined = 0
  [ 18] pushcons 2 .............................. <"room.default.wall">
  [ 20] pushcons 3 .............................. <"201">
  [ 22] pusharglist 2 ........................... <"room.default.wall", "201">
  [ 24] extcall 11 .............................. <getVariable("room.default.wall", "201")>
  [ 26] pusharglist 1 ........................... <getVariable("room.default.wall", "201")>
  [ 28] extcall 10 .............................. <string(getVariable("room.default.wall", "201"))>
  [ 30] setprop 9 ............................... pWallModel = string(getVariable("room.default.wall", "201"))
  [ 32] pushcons 4 .............................. <"room.default.floor">
  [ 34] pushcons 5 .............................. <"203">
  [ 36] pusharglist 2 ........................... <"room.default.floor", "203">
  [ 38] extcall 11 .............................. <getVariable("room.default.floor", "203")>
  [ 40] pusharglist 1 ........................... <getVariable("room.default.floor", "203")>
  [ 42] extcall 10 .............................. <string(getVariable("room.default.floor", "203"))>
  [ 44] setprop 12 .............................. pFloorModel = string(getVariable("room.default.floor", "203"))
  [ 46] pushint8 1 .............................. <1>
  [ 48] pusharglistnoret 1 ...................... <1>
  [ 50] extcall 13 .............................. return 1
  [ 52] ret
end

on prepare me
  [  0] getprop 7 ............................... <pWallDefined>
  [  2] not ..................................... <not pWallDefined>
  [  3] jmpifz [ 14] ............................ if not pWallDefined then
  [  6] getparam 0 .............................. <me>
  [  8] getprop 9 ............................... <pWallModel>
  [ 10] pusharglistnoret 2 ...................... <me, pWallModel>
  [ 12] objcall 3 ............................... me.setWallPaper(pWallModel)
  [ 14] getprop 8 ............................... <pFloorDefined>
  [ 16] not ..................................... <not pFloorDefined>
  [ 17] jmpifz [ 28] ............................ if not pFloorDefined then
  [ 20] getparam 0 .............................. <me>
  [ 22] getprop 12 .............................. <pFloorModel>
  [ 24] pusharglistnoret 2 ...................... <me, pFloorModel>
  [ 26] objcall 4 ............................... me.setFloorPattern(pFloorModel)
  [ 28] pushint8 1 .............................. <1>
  [ 30] pusharglistnoret 1 ...................... <1>
  [ 32] extcall 13 .............................. return 1
  [ 34] ret
end

on setProperty me, tKey, tValue
  [  0] getparam 1 .............................. <tKey>
  [  2] peek 0 .................................. case tKey of
  [  4] pushcons 6 .............................. <"wallpaper">
  [  6] eq
  [  7] jmpifz [ 27] ............................ (case) "wallpaper":
  [ 10] pop 1
  [ 12] getparam 0 .............................. <me>
  [ 14] getparam 2 .............................. <tValue>
  [ 16] pusharglist 2 ........................... <me, tValue>
  [ 18] objcall 3 ............................... <me.setWallPaper(tValue)>
  [ 20] pusharglistnoret 1 ...................... <me.setWallPaper(tValue)>
  [ 22] extcall 13 .............................. return me.setWallPaper(tValue)
  [ 24] jmp [ 49]
  [ 27] peek 0
  [ 29] pushcons 7 .............................. <"floor">
  [ 31] eq
  [ 32] jmpifz [ 49] ............................ (case) "floor":
  [ 35] pop 1
  [ 37] getparam 0 .............................. <me>
  [ 39] getparam 2 .............................. <tValue>
  [ 41] pusharglist 2 ........................... <me, tValue>
  [ 43] objcall 4 ............................... <me.setFloorPattern(tValue)>
  [ 45] pusharglistnoret 1 ...................... <me.setFloorPattern(tValue)>
  [ 47] extcall 13 .............................. return me.setFloorPattern(tValue)
  [ 49] pop 1 ................................... end case
  [ 51] ret
end

on setWallPaper me, tIndex
  [  0] getprop 5 ............................... <pWallPatterns>
  [  2] pushsymb 17 ............................. <#line>
  [  4] getparam 1 .............................. <tIndex>
  [  6] pushsymb 19 ............................. <#char>
  [  8] pushint8 1 .............................. <1>
  [ 10] getparam 1 .............................. <tIndex>
  [ 12] pusharglist 1 ........................... <tIndex>
  [ 14] extcall 20 .............................. <length(tIndex)>
  [ 16] pushint8 2 .............................. <2>
  [ 18] sub ..................................... <length(tIndex) - 2>
  [ 19] pusharglist 4 ........................... <tIndex, #char, 1, length(tIndex) - 2>
  [ 21] objcall 21 .............................. <tIndex.char[1..length(tIndex) - 2]>
  [ 23] pusharglist 1 ........................... <tIndex.char[1..length(tIndex) - 2]>
  [ 25] extcall 18 .............................. <integer(tIndex.char[1..length(tIndex) - 2])>
  [ 27] pusharglist 3 ........................... <pWallPatterns, #line, integer(tIndex.char[1..length(tIndex) - 2])>
  [ 29] objcall 21 .............................. <pWallPatterns.line[integer(tIndex.char[1..length(tIndex) - 2])]>
  [ 31] setlocal 0 .............................. tField = pWallPatterns.line[integer(tIndex.char[1..length(tIndex) - 2])]
  [ 33] getlocal 0 .............................. <tField>
  [ 35] pushcons 8 .............................. <EMPTY>
  [ 37] eq ...................................... <tField = EMPTY>
  [ 38] jmpifz [ 58] ............................ if tField = EMPTY then
  [ 41] getparam 0 .............................. <me>
  [ 43] pushcons 9 .............................. <"Invalid wall color index:">
  [ 45] getparam 1 .............................. <tIndex>
  [ 47] joinpadstr .............................. <"Invalid wall color index:" && tIndex>
  [ 48] pushsymb 3 .............................. <#setWallPaper>
  [ 50] pusharglist 3 ........................... <me, "Invalid wall color index:" && tIndex, #setWallPaper>
  [ 52] extcall 22 .............................. <error(me, "Invalid wall color index:" && tIndex, #setWallPaper)>
  [ 54] pusharglistnoret 1 ...................... <error(me, "Invalid wall color index:" && tIndex, #setWallPaper)>
  [ 56] extcall 13 .............................. return error(me, "Invalid wall color index:" && tIndex, #setWallPaper)
  [ 58] getlocal 0 .............................. <tField>
  [ 60] pusharglist 1 ........................... <tField>
  [ 62] extcall 23 .............................. <memberExists(tField)>
  [ 64] not ..................................... <not memberExists(tField)>
  [ 65] jmpifz [101] ............................ if not memberExists(tField) then
  [ 68] getparam 0 .............................. <me>
  [ 70] pushcons 9 .............................. <"Invalid wall color index:">
  [ 72] getparam 1 .............................. <tIndex>
  [ 74] joinpadstr .............................. <"Invalid wall color index:" && tIndex>
  [ 75] pushsymb 3 .............................. <#setWallPaper>
  [ 77] pusharglistnoret 3 ...................... <me, "Invalid wall color index:" && tIndex, #setWallPaper>
  [ 79] extcall 22 .............................. error(me, "Invalid wall color index:" && tIndex, #setWallPaper)
  [ 81] getparam 0 .............................. <me>
  [ 83] pushcons 2 .............................. <"room.default.wall">
  [ 85] pusharglist 1 ........................... <"room.default.wall">
  [ 87] extcall 11 .............................. <getVariable("room.default.wall")>
  [ 89] pusharglist 1 ........................... <getVariable("room.default.wall")>
  [ 91] extcall 10 .............................. <string(getVariable("room.default.wall"))>
  [ 93] pusharglist 2 ........................... <me, string(getVariable("room.default.wall"))>
  [ 95] objcall 3 ............................... <me.setWallPaper(string(getVariable("room.default.wall")))>
  [ 97] pusharglistnoret 1 ...................... <me.setWallPaper(string(getVariable("room.default.wall")))>
  [ 99] extcall 13 .............................. return me.setWallPaper(string(getVariable("room.default.wall")))
  [101] getlocal 0 .............................. <tField>
  [103] pushzero ................................ <0>
  [104] getfield ................................ <field(tField)>
  [105] setlocal 1 .............................. tmodel = field(tField)
  [107] getlocal 1 .............................. <tmodel>
  [109] pushsymb 17 ............................. <#line>
  [111] getparam 1 .............................. <tIndex>
  [113] pushsymb 19 ............................. <#char>
  [115] getparam 1 .............................. <tIndex>
  [117] pusharglist 1 ........................... <tIndex>
  [119] extcall 10 .............................. <string(tIndex)>
  [121] pusharglist 1 ........................... <string(tIndex)>
  [123] extcall 20 .............................. <length(string(tIndex))>
  [125] pushint8 1 .............................. <1>
  [127] sub ..................................... <length(string(tIndex)) - 1>
  [128] getparam 1 .............................. <tIndex>
  [130] pusharglist 1 ........................... <tIndex>
  [132] extcall 10 .............................. <string(tIndex)>
  [134] pusharglist 1 ........................... <string(tIndex)>
  [136] extcall 20 .............................. <length(string(tIndex))>
  [138] pusharglist 4 ........................... <tIndex, #char, length(string(tIndex)) - 1, length(string(tIndex))>
  [140] objcall 21 .............................. <tIndex.char[length(string(tIndex)) - 1..length(string(tIndex))]>
  [142] pusharglist 1 ........................... <tIndex.char[length(string(tIndex)) - 1..length(string(tIndex))]>
  [144] extcall 18 .............................. <integer(tIndex.char[length(string(tIndex)) - 1..length(string(tIndex))])>
  [146] pusharglist 3 ........................... <tmodel, #line, integer(tIndex.char[length(string(tIndex)) - 1..length(string(tIndex))])>
  [148] objcall 21 .............................. <tmodel.line[integer(tIndex.char[length(string(tIndex)) - 1..length(string(tIndex))])]>
  [150] setlocal 2 .............................. tPattern = tmodel.line[integer(tIndex.char[length(string(tIndex)) - 1..length(string(tIndex))])]
  [152] getlocal 2 .............................. <tPattern>
  [154] pushcons 8 .............................. <EMPTY>
  [156] eq ...................................... <tPattern = EMPTY>
  [157] jmpifz [177] ............................ if tPattern = EMPTY then
  [160] getparam 0 .............................. <me>
  [162] pushcons 9 .............................. <"Invalid wall color index:">
  [164] getparam 1 .............................. <tIndex>
  [166] joinpadstr .............................. <"Invalid wall color index:" && tIndex>
  [167] pushsymb 3 .............................. <#setWallPaper>
  [169] pusharglist 3 ........................... <me, "Invalid wall color index:" && tIndex, #setWallPaper>
  [171] extcall 22 .............................. <error(me, "Invalid wall color index:" && tIndex, #setWallPaper)>
  [173] pusharglistnoret 1 ...................... <error(me, "Invalid wall color index:" && tIndex, #setWallPaper)>
  [175] extcall 13 .............................. return error(me, "Invalid wall color index:" && tIndex, #setWallPaper)
  [177] getmovieprop 24 ......................... <the itemDelimiter>
  [179] setlocal 3 .............................. tDelim = the itemDelimiter
  [181] pushcons 10 ............................. <",">
  [183] setmovieprop 24 ......................... the itemDelimiter = ","
  [185] getlocal 2 .............................. <tPattern>
  [187] pushsymb 25 ............................. <#item>
  [189] pushint8 1 .............................. <1>
  [191] pusharglist 3 ........................... <tPattern, #item, 1>
  [193] objcall 21 .............................. <tPattern.item[1]>
  [195] setlocal 4 .............................. ttype = tPattern.item[1]
  [197] getlocal 2 .............................. <tPattern>
  [199] pushsymb 25 ............................. <#item>
  [201] pushint8 2 .............................. <2>
  [203] pusharglist 3 ........................... <tPattern, #item, 2>
  [205] objcall 21 .............................. <tPattern.item[2]>
  [207] setlocal 5 .............................. tPalette = tPattern.item[2]
  [209] getlocal 2 .............................. <tPattern>
  [211] pushsymb 25 ............................. <#item>
  [213] pushint8 3 .............................. <3>
  [215] pusharglist 3 ........................... <tPattern, #item, 3>
  [217] objcall 21 .............................. <tPattern.item[3]>
  [219] pusharglist 1 ........................... <tPattern.item[3]>
  [221] extcall 18 .............................. <integer(tPattern.item[3])>
  [223] setlocal 6 .............................. tR = integer(tPattern.item[3])
  [225] getlocal 2 .............................. <tPattern>
  [227] pushsymb 25 ............................. <#item>
  [229] pushint8 4 .............................. <4>
  [231] pusharglist 3 ........................... <tPattern, #item, 4>
  [233] objcall 21 .............................. <tPattern.item[4]>
  [235] pusharglist 1 ........................... <tPattern.item[4]>
  [237] extcall 18 .............................. <integer(tPattern.item[4])>
  [239] setlocal 7 .............................. tG = integer(tPattern.item[4])
  [241] getlocal 2 .............................. <tPattern>
  [243] pushsymb 25 ............................. <#item>
  [245] pushint8 5 .............................. <5>
  [247] pusharglist 3 ........................... <tPattern, #item, 5>
  [249] objcall 21 .............................. <tPattern.item[5]>
  [251] pusharglist 1 ........................... <tPattern.item[5]>
  [253] extcall 18 .............................. <integer(tPattern.item[5])>
  [255] setlocal 8 .............................. tB = integer(tPattern.item[5])
  [257] getlocal 6 .............................. <tR>
  [259] getlocal 7 .............................. <tG>
  [261] getlocal 8 .............................. <tB>
  [263] pusharglist 3 ........................... <tR, tG, tB>
  [265] extcall 26 .............................. <rgb(tR, tG, tB)>
  [267] setlocal 9 .............................. tColor = rgb(tR, tG, tB)
  [269] pushcons 11 ............................. <"left">
  [271] getlocal 9 .............................. <tColor>
  [273] pushint8 16 ............................. <16>
  [275] pushint8 16 ............................. <16>
  [277] pushint8 16 ............................. <16>
  [279] pusharglist 3 ........................... <16, 16, 16>
  [281] extcall 26 .............................. <rgb(16, 16, 16)>
  [283] sub ..................................... <tColor - rgb(16, 16, 16)>
  [284] pushcons 12 ............................. <"right">
  [286] getlocal 9 .............................. <tColor>
  [288] pushcons 13 ............................. <"a">
  [290] getlocal 9 .............................. <tColor>
  [292] pushint8 16 ............................. <16>
  [294] pushint8 16 ............................. <16>
  [296] pushint8 16 ............................. <16>
  [298] pusharglist 3 ........................... <16, 16, 16>
  [300] extcall 26 .............................. <rgb(16, 16, 16)>
  [302] sub ..................................... <tColor - rgb(16, 16, 16)>
  [303] pushcons 14 ............................. <"b">
  [305] getlocal 9 .............................. <tColor>
  [307] pusharglist 8 ........................... <["left": tColor - rgb(16, 16, 16), "right": tColor, "a": tColor - rgb(16, 16, 16), "b": tColor]>
  [309] pushproplist ............................ <["left": tColor - rgb(16, 16, 16), "right": tColor, "a": tColor - rgb(16, 16, 16), "b": tColor]>
  [310] setlocal 10 ............................. tColors = ["left": tColor - rgb(16, 16, 16), "right": tColor, "a": tColor - rgb(16, 16, 16), "b": tColor]
  [312] pushcons 15 ............................. <"_">
  [314] setmovieprop 24 ......................... the itemDelimiter = "_"
  [316] pushsymb 28 ............................. <#room>
  [318] pusharglist 1 ........................... <#room>
  [320] extcall 27 .............................. <getThread(#room)>
  [322] pusharglist 1 ........................... <getThread(#room)>
  [324] objcall 29 .............................. <getThread(#room).getComponent()>
  [326] pushsymb 30 ............................. <#list>
  [328] pusharglist 2 ........................... <getThread(#room).getComponent(), #list>
  [330] objcall 31 .............................. <getThread(#room).getComponent().getPassiveObject(#list)>
  [332] setlocal 11 ............................. tPieceList = getThread(#room).getComponent().getPassiveObject(#list)
  [334] pushzero ................................ <0>
  [335] setlocal 12 ............................. tObjPieceCount = 0
  [337] getlocal 11 ............................. <tPieceList>
  [339] peek 0
  [341] pusharglist 1
  [343] extcall 32
  [345] pushint8 1
  [347] peek 0
  [349] peek 2
  [351] lteq
  [352] jmpifz [677] ............................ repeat with tPiece in tPieceList
  [355] peek 2
  [357] peek 1
  [359] pusharglist 2
  [361] extcall 33
  [363] setlocal 13
  [365] getlocal 13 ............................. <tPiece>
  [367] pusharglist 1 ........................... <tPiece>
  [369] objcall 34 .............................. <tPiece.getSprites()>
  [371] setlocal 14 ............................. tSprList = tPiece.getSprites()
  [373] getlocal 14 ............................. <tSprList>
  [375] peek 0
  [377] pusharglist 1
  [379] extcall 32
  [381] pushint8 1
  [383] peek 0
  [385] peek 2
  [387] lteq
  [388] jmpifz [669] ............................ repeat with tSpr in tSprList
  [391] peek 2
  [393] peek 1
  [395] pusharglist 2
  [397] extcall 33
  [399] setlocal 15
  [401] getlocal 15 ............................. <tSpr>
  [403] getchainedprop 35 ....................... <tSpr.member>
  [405] getchainedprop 36 ....................... <tSpr.member.name>
  [407] pushsymb 25 ............................. <#item>
  [409] pushint8 1 .............................. <1>
  [411] pusharglist 3 ........................... <tSpr.member.name, #item, 1>
  [413] objcall 21 .............................. <tSpr.member.name.item[1]>
  [415] setlocal 16 ............................. tdir = tSpr.member.name.item[1]
  [417] getlocal 15 ............................. <tSpr>
  [419] getchainedprop 35 ....................... <tSpr.member>
  [421] getchainedprop 36 ....................... <tSpr.member.name>
  [423] pushsymb 25 ............................. <#item>
  [425] pushint8 2 .............................. <2>
  [427] pusharglist 3 ........................... <tSpr.member.name, #item, 2>
  [429] objcall 21 .............................. <tSpr.member.name.item[2]>
  [431] setlocal 17 ............................. tName = tSpr.member.name.item[2]
  [433] getlocal 15 ............................. <tSpr>
  [435] getchainedprop 35 ....................... <tSpr.member>
  [437] getchainedprop 36 ....................... <tSpr.member.name>
  [439] pushsymb 19 ............................. <#char>
  [441] getlocal 15 ............................. <tSpr>
  [443] getchainedprop 35 ....................... <tSpr.member>
  [445] getobjprop 36 ........................... <tSpr.member.name>
  [447] pusharglist 1 ........................... <tSpr.member.name>
  [449] extcall 20 .............................. <length(tSpr.member.name)>
  [451] pushint8 7 .............................. <7>
  [453] sub ..................................... <length(tSpr.member.name) - 7>
  [454] getlocal 15 ............................. <tSpr>
  [456] getchainedprop 35 ....................... <tSpr.member>
  [458] getobjprop 36 ........................... <tSpr.member.name>
  [460] pusharglist 1 ........................... <tSpr.member.name>
  [462] extcall 20 .............................. <length(tSpr.member.name)>
  [464] pusharglist 4 ........................... <tSpr.member.name, #char, length(tSpr.member.name) - 7, length(tSpr.member.name)>
  [466] objcall 21 .............................. <tSpr.member.name.char[length(tSpr.member.name) - 7..length(tSpr.member.name)]>
  [468] setlocal 18 ............................. tdata = tSpr.member.name.char[length(tSpr.member.name) - 7..length(tSpr.member.name)]
  [470] getlocal 16 ............................. <tdir>
  [472] setlocal 9 .............................. tColor = tdir
  [474] getlocal 9 .............................. <tColor>
  [476] pushcons 16 ............................. <"corner">
  [478] eq ...................................... <tColor = "corner">
  [479] jmpifz [509] ............................ if tColor = "corner" then
  [482] getlocal 18 ............................. <tdata>
  [484] pushsymb 19 ............................. <#char>
  [486] pushint8 2 .............................. <2>
  [488] pusharglist 3 ........................... <tdata, #char, 2>
  [490] objcall 21 .............................. <tdata.char[2]>
  [492] pushcons 13 ............................. <"a">
  [494] eq ...................................... <tdata.char[2] = "a">
  [495] jmpifz [505] ............................ if tdata.char[2] = "a" then / else
  [498] pushcons 12 ............................. <"right">
  [500] setlocal 9 .............................. tColor = "right"
  [502] jmp [509]
  [505] pushcons 11 ............................. <"left">
  [507] setlocal 9 .............................. tColor = "left"
  [509] getlocal 16 ............................. <tdir>
  [511] pushcons 15 ............................. <"_">
  [513] joinstr ................................. <tdir & "_">
  [514] getlocal 17 ............................. <tName>
  [516] joinstr ................................. <tdir & "_" & tName>
  [517] pushcons 15 ............................. <"_">
  [519] joinstr ................................. <tdir & "_" & tName & "_">
  [520] getlocal 4 .............................. <ttype>
  [522] joinstr ................................. <tdir & "_" & tName & "_" & ttype>
  [523] getlocal 18 ............................. <tdata>
  [525] joinstr ................................. <tdir & "_" & tName & "_" & ttype & tdata>
  [526] pusharglist 1 ........................... <tdir & "_" & tName & "_" & ttype & tdata>
  [528] extcall 23 .............................. <memberExists(tdir & "_" & tName & "_" & ttype & tdata)>
  [530] jmpifz [635] ............................ if memberExists(tdir & "_" & tName & "_" & ttype & tdata) then
  [533] getlocal 15 ............................. <tSpr>
  [535] getlocal 16 ............................. <tdir>
  [537] pushcons 15 ............................. <"_">
  [539] joinstr ................................. <tdir & "_">
  [540] getlocal 17 ............................. <tName>
  [542] joinstr ................................. <tdir & "_" & tName>
  [543] pushcons 15 ............................. <"_">
  [545] joinstr ................................. <tdir & "_" & tName & "_">
  [546] getlocal 4 .............................. <ttype>
  [548] joinstr ................................. <tdir & "_" & tName & "_" & ttype>
  [549] getlocal 18 ............................. <tdata>
  [551] joinstr ................................. <tdir & "_" & tName & "_" & ttype & tdata>
  [552] pusharglist 1 ........................... <tdir & "_" & tName & "_" & ttype & tdata>
  [554] extcall 37 .............................. <getmemnum(tdir & "_" & tName & "_" & ttype & tdata)>
  [556] pusharglist 1 ........................... <getmemnum(tdir & "_" & tName & "_" & ttype & tdata)>
  [558] extcall 35 .............................. <member(getmemnum(tdir & "_" & tName & "_" & ttype & tdata))>
  [560] setobjprop 35 ........................... tSpr.member = member(getmemnum(tdir & "_" & tName & "_" & ttype & tdata))
  [562] getlocal 15 ............................. <tSpr>
  [564] getlocal 10 ............................. <tColors>
  [566] getlocal 9 .............................. <tColor>
  [568] pusharglist 2 ........................... <tColors, tColor>
  [570] objcall 33 .............................. <tColors[tColor]>
  [572] setobjprop 38 ........................... tSpr.bgColor = tColors[tColor]
  [574] getlocal 15 ............................. <tSpr>
  [576] getchainedprop 35 ....................... <tSpr.member>
  [578] getlocal 5 .............................. <tPalette>
  [580] pusharglist 1 ........................... <tPalette>
  [582] extcall 37 .............................. <getmemnum(tPalette)>
  [584] pusharglist 1 ........................... <getmemnum(tPalette)>
  [586] extcall 35 .............................. <member(getmemnum(tPalette))>
  [588] setobjprop 39 ........................... tSpr.member.paletteRef = member(getmemnum(tPalette))
  [590] getlocal 12 ............................. <tObjPieceCount>
  [592] pushint8 1 .............................. <1>
  [594] add ..................................... <tObjPieceCount + 1>
  [595] setlocal 12 ............................. tObjPieceCount = tObjPieceCount + 1
  [597] getprop 7 ............................... <pWallDefined>
  [599] pushzero ................................ <0>
  [600] eq ...................................... <pWallDefined = 0>
  [601] jmpifz [616] ............................ if pWallDefined = 0 then
  [604] getlocal 15 ............................. <tSpr>
  [606] getlocal 15 ............................. <tSpr>
  [608] getobjprop 40 ........................... <tSpr.locZ>
  [610] pushint16 975 ........................... <975>
  [613] sub ..................................... <tSpr.locZ - 975>
  [614] setobjprop 40 ........................... tSpr.locZ = tSpr.locZ - 975
  [616] getlocal 15 ............................. <tSpr>
  [618] getobjprop 41 ........................... <tSpr.blend>
  [620] pushint8 100 ............................ <100>
  [622] eq ...................................... <tSpr.blend = 100>
  [623] jmpifz [632] ............................ if tSpr.blend = 100 then
  [626] getlocal 15 ............................. <tSpr>
  [628] pushint8 41 ............................. <41>
  [630] setobjprop 42 ........................... tSpr.ink = 41
  [632] jmp [663] ............................... next repeat
  [635] getparam 0 .............................. <me>
  [637] pushcons 17 ............................. <"Wall member not found:">
  [639] getlocal 16 ............................. <tdir>
  [641] joinpadstr .............................. <"Wall member not found:" && tdir>
  [642] pushcons 15 ............................. <"_">
  [644] joinstr ................................. <"Wall member not found:" && tdir & "_">
  [645] getlocal 17 ............................. <tName>
  [647] joinstr ................................. <"Wall member not found:" && tdir & "_" & tName>
  [648] pushcons 15 ............................. <"_">
  [650] joinstr ................................. <"Wall member not found:" && tdir & "_" & tName & "_">
  [651] getlocal 4 .............................. <ttype>
  [653] joinstr ................................. <"Wall member not found:" && tdir & "_" & tName & "_" & ttype>
  [654] getlocal 18 ............................. <tdata>
  [656] joinstr ................................. <"Wall member not found:" && tdir & "_" & tName & "_" & ttype & tdata>
  [657] pushsymb 3 .............................. <#setWallPaper>
  [659] pusharglistnoret 3 ...................... <me, "Wall member not found:" && tdir & "_" & tName & "_" & ttype & tdata, #setWallPaper>
  [661] extcall 22 .............................. error(me, "Wall member not found:" && tdir & "_" & tName & "_" & ttype & tdata, #setWallPaper)
  [663] pushint8 1
  [665] add
  [666] endrepeat [383]
  [669] pop 3
  [671] pushint8 1
  [673] add
  [674] endrepeat [347]
  [677] pop 3
  [679] getlocal 3 .............................. <tDelim>
  [681] setmovieprop 24 ......................... the itemDelimiter = tDelim
  [683] pushsymb 28 ............................. <#room>
  [685] pusharglist 1 ........................... <#room>
  [687] extcall 27 .............................. <getThread(#room)>
  [689] pusharglist 1 ........................... <getThread(#room)>
  [691] objcall 43 .............................. <getThread(#room).getInterface()>
  [693] setlocal 19 ............................. tInterface = getThread(#room).getInterface()
  [695] getlocal 19 ............................. <tInterface>
  [697] pusharglist 1 ........................... <tInterface>
  [699] extcall 44 .............................. <voidp(tInterface)>
  [701] not ..................................... <not voidp(tInterface)>
  [702] jmpifz [832] ............................ if not voidp(tInterface) then
  [705] getlocal 19 ............................. <tInterface>
  [707] pusharglist 1 ........................... <tInterface>
  [709] objcall 45 .............................. <tInterface.getRoomVisualizer()>
  [711] setlocal 20 ............................. tViz = tInterface.getRoomVisualizer()
  [713] getlocal 20 ............................. <tViz>
  [715] pusharglist 1 ........................... <tViz>
  [717] extcall 44 .............................. <voidp(tViz)>
  [719] not ..................................... <not voidp(tViz)>
  [720] jmpifz [832] ............................ if not voidp(tViz) then
  [723] getlocal 20 ............................. <tViz>
  [725] pushsymb 46 ............................. <#wallleft>
  [727] pushsymb 47 ............................. <#wallright>
  [729] pusharglist 2 ........................... <[#wallleft, #wallright]>
  [731] pushlist ................................ <[#wallleft, #wallright]>
  [732] pusharglist 2 ........................... <tViz, [#wallleft, #wallright]>
  [734] objcall 48 .............................. <tViz.getWrappedParts([#wallleft, #wallright])>
  [736] setlocal 21 ............................. tWrappedWallParts = tViz.getWrappedParts([#wallleft, #wallright])
  [738] getlocal 21 ............................. <tWrappedWallParts>
  [740] getobjprop 32 ........................... <tWrappedWallParts.count>
  [742] pushzero ................................ <0>
  [743] gt ...................................... <tWrappedWallParts.count > 0>
  [744] jmpifz [829] ............................ if tWrappedWallParts.count > 0 then / else
  [747] getlocal 21 ............................. <tWrappedWallParts>
  [749] peek 0
  [751] pusharglist 1
  [753] extcall 32
  [755] pushint8 1
  [757] peek 0
  [759] peek 2
  [761] lteq
  [762] jmpifz [824] ............................ repeat with tWrapper in tWrappedWallParts
  [765] peek 2
  [767] peek 1
  [769] pusharglist 2
  [771] extcall 33
  [773] setlocal 22
  [775] getlocal 22 ............................. <tWrapper>
  [777] getlocal 4 .............................. <ttype>
  [779] getlocal 5 .............................. <tPalette>
  [781] getlocal 10 ............................. <tColors>
  [783] pushcons 11 ............................. <"left">
  [785] pusharglist 2 ........................... <tColors, "left">
  [787] objcall 33 .............................. <tColors["left"]>
  [789] pushsymb 46 ............................. <#wallleft>
  [791] pusharglistnoret 5 ...................... <tWrapper, ttype, tPalette, tColors["left"], #wallleft>
  [793] objcall 49 .............................. tWrapper.setPartPattern(ttype, tPalette, tColors["left"], #wallleft)
  [795] getlocal 22 ............................. <tWrapper>
  [797] getlocal 4 .............................. <ttype>
  [799] getlocal 5 .............................. <tPalette>
  [801] getlocal 10 ............................. <tColors>
  [803] pushcons 12 ............................. <"right">
  [805] pusharglist 2 ........................... <tColors, "right">
  [807] objcall 33 .............................. <tColors["right"]>
  [809] pushsymb 47 ............................. <#wallright>
  [811] pusharglistnoret 5 ...................... <tWrapper, ttype, tPalette, tColors["right"], #wallright>
  [813] objcall 49 .............................. tWrapper.setPartPattern(ttype, tPalette, tColors["right"], #wallright)
  [815] pushint8 1 .............................. <1>
  [817] setlocal 23 ............................. tWrappedWallPartsDefined = 1
  [819] pushint8 1
  [821] add
  [822] endrepeat [757]
  [824] pop 3
  [826] jmp [832]
  [829] pushzero ................................ <0>
  [830] setlocal 23 ............................. tWrappedWallPartsDefined = 0
  [832] getlocal 11 ............................. <tPieceList>
  [834] getobjprop 32 ........................... <tPieceList.count>
  [836] pushzero ................................ <0>
  [837] eq ...................................... <tPieceList.count = 0>
  [838] getlocal 23 ............................. <tWrappedWallPartsDefined>
  [840] not ..................................... <not tWrappedWallPartsDefined>
  [841] and ..................................... <(tPieceList.count = 0) and not tWrappedWallPartsDefined>
  [842] jmpifz [860] ............................ if (tPieceList.count = 0) and not tWrappedWallPartsDefined then / else
  [845] getparam 1 .............................. <tIndex>
  [847] setprop 9 ............................... pWallModel = tIndex
  [849] pushzero ................................ <0>
  [850] setprop 7 ............................... pWallDefined = 0
  [852] pushzero ................................ <0>
  [853] pusharglistnoret 1 ...................... <0>
  [855] extcall 13 .............................. return 0
  [857] jmp [870]
  [860] pushint8 1 .............................. <1>
  [862] setprop 7 ............................... pWallDefined = 1
  [864] pushint8 1 .............................. <1>
  [866] pusharglistnoret 1 ...................... <1>
  [868] extcall 13 .............................. return 1
  [870] ret
end

on setFloorPattern me, tIndex
  [  0] getprop 6 ............................... <pFloorPatterns>
  [  2] pushsymb 17 ............................. <#line>
  [  4] getparam 1 .............................. <tIndex>
  [  6] pushsymb 19 ............................. <#char>
  [  8] pushint8 1 .............................. <1>
  [ 10] getparam 1 .............................. <tIndex>
  [ 12] pusharglist 1 ........................... <tIndex>
  [ 14] extcall 20 .............................. <length(tIndex)>
  [ 16] pushint8 2 .............................. <2>
  [ 18] sub ..................................... <length(tIndex) - 2>
  [ 19] pusharglist 4 ........................... <tIndex, #char, 1, length(tIndex) - 2>
  [ 21] objcall 21 .............................. <tIndex.char[1..length(tIndex) - 2]>
  [ 23] pusharglist 1 ........................... <tIndex.char[1..length(tIndex) - 2]>
  [ 25] extcall 18 .............................. <integer(tIndex.char[1..length(tIndex) - 2])>
  [ 27] pusharglist 3 ........................... <pFloorPatterns, #line, integer(tIndex.char[1..length(tIndex) - 2])>
  [ 29] objcall 21 .............................. <pFloorPatterns.line[integer(tIndex.char[1..length(tIndex) - 2])]>
  [ 31] setlocal 0 .............................. tField = pFloorPatterns.line[integer(tIndex.char[1..length(tIndex) - 2])]
  [ 33] getlocal 0 .............................. <tField>
  [ 35] pushcons 8 .............................. <EMPTY>
  [ 37] eq ...................................... <tField = EMPTY>
  [ 38] jmpifz [ 58] ............................ if tField = EMPTY then
  [ 41] getparam 0 .............................. <me>
  [ 43] pushcons 18 ............................. <"Invalid floor color index:">
  [ 45] getparam 1 .............................. <tIndex>
  [ 47] joinpadstr .............................. <"Invalid floor color index:" && tIndex>
  [ 48] pushsymb 4 .............................. <#setFloorPattern>
  [ 50] pusharglist 3 ........................... <me, "Invalid floor color index:" && tIndex, #setFloorPattern>
  [ 52] extcall 22 .............................. <error(me, "Invalid floor color index:" && tIndex, #setFloorPattern)>
  [ 54] pusharglistnoret 1 ...................... <error(me, "Invalid floor color index:" && tIndex, #setFloorPattern)>
  [ 56] extcall 13 .............................. return error(me, "Invalid floor color index:" && tIndex, #setFloorPattern)
  [ 58] getlocal 0 .............................. <tField>
  [ 60] pusharglist 1 ........................... <tField>
  [ 62] extcall 23 .............................. <memberExists(tField)>
  [ 64] not ..................................... <not memberExists(tField)>
  [ 65] jmpifz [101] ............................ if not memberExists(tField) then
  [ 68] getparam 0 .............................. <me>
  [ 70] pushcons 18 ............................. <"Invalid floor color index:">
  [ 72] getparam 1 .............................. <tIndex>
  [ 74] joinpadstr .............................. <"Invalid floor color index:" && tIndex>
  [ 75] pushsymb 75 ............................. <#setFloorPatterns>
  [ 77] pusharglistnoret 3 ...................... <me, "Invalid floor color index:" && tIndex, #setFloorPatterns>
  [ 79] extcall 22 .............................. error(me, "Invalid floor color index:" && tIndex, #setFloorPatterns)
  [ 81] getparam 0 .............................. <me>
  [ 83] pushcons 4 .............................. <"room.default.floor">
  [ 85] pusharglist 1 ........................... <"room.default.floor">
  [ 87] extcall 11 .............................. <getVariable("room.default.floor")>
  [ 89] pusharglist 1 ........................... <getVariable("room.default.floor")>
  [ 91] extcall 10 .............................. <string(getVariable("room.default.floor"))>
  [ 93] pusharglist 2 ........................... <me, string(getVariable("room.default.floor"))>
  [ 95] objcall 4 ............................... <me.setFloorPattern(string(getVariable("room.default.floor")))>
  [ 97] pusharglistnoret 1 ...................... <me.setFloorPattern(string(getVariable("room.default.floor")))>
  [ 99] extcall 13 .............................. return me.setFloorPattern(string(getVariable("room.default.floor")))
  [101] getlocal 0 .............................. <tField>
  [103] pushzero ................................ <0>
  [104] getfield ................................ <field(tField)>
  [105] setlocal 1 .............................. tmodel = field(tField)
  [107] getlocal 1 .............................. <tmodel>
  [109] pushsymb 17 ............................. <#line>
  [111] getparam 1 .............................. <tIndex>
  [113] pushsymb 19 ............................. <#char>
  [115] getparam 1 .............................. <tIndex>
  [117] pusharglist 1 ........................... <tIndex>
  [119] extcall 10 .............................. <string(tIndex)>
  [121] pusharglist 1 ........................... <string(tIndex)>
  [123] extcall 20 .............................. <length(string(tIndex))>
  [125] pushint8 1 .............................. <1>
  [127] sub ..................................... <length(string(tIndex)) - 1>
  [128] getparam 1 .............................. <tIndex>
  [130] pusharglist 1 ........................... <tIndex>
  [132] extcall 10 .............................. <string(tIndex)>
  [134] pusharglist 1 ........................... <string(tIndex)>
  [136] extcall 20 .............................. <length(string(tIndex))>
  [138] pusharglist 4 ........................... <tIndex, #char, length(string(tIndex)) - 1, length(string(tIndex))>
  [140] objcall 21 .............................. <tIndex.char[length(string(tIndex)) - 1..length(string(tIndex))]>
  [142] pusharglist 1 ........................... <tIndex.char[length(string(tIndex)) - 1..length(string(tIndex))]>
  [144] extcall 18 .............................. <integer(tIndex.char[length(string(tIndex)) - 1..length(string(tIndex))])>
  [146] pusharglist 3 ........................... <tmodel, #line, integer(tIndex.char[length(string(tIndex)) - 1..length(string(tIndex))])>
  [148] objcall 21 .............................. <tmodel.line[integer(tIndex.char[length(string(tIndex)) - 1..length(string(tIndex))])]>
  [150] setlocal 2 .............................. tPattern = tmodel.line[integer(tIndex.char[length(string(tIndex)) - 1..length(string(tIndex))])]
  [152] getlocal 2 .............................. <tPattern>
  [154] pushcons 8 .............................. <EMPTY>
  [156] eq ...................................... <tPattern = EMPTY>
  [157] jmpifz [177] ............................ if tPattern = EMPTY then
  [160] getparam 0 .............................. <me>
  [162] pushcons 18 ............................. <"Invalid floor color index:">
  [164] getparam 1 .............................. <tIndex>
  [166] joinpadstr .............................. <"Invalid floor color index:" && tIndex>
  [167] pushsymb 4 .............................. <#setFloorPattern>
  [169] pusharglist 3 ........................... <me, "Invalid floor color index:" && tIndex, #setFloorPattern>
  [171] extcall 22 .............................. <error(me, "Invalid floor color index:" && tIndex, #setFloorPattern)>
  [173] pusharglistnoret 1 ...................... <error(me, "Invalid floor color index:" && tIndex, #setFloorPattern)>
  [175] extcall 13 .............................. return error(me, "Invalid floor color index:" && tIndex, #setFloorPattern)
  [177] getmovieprop 24 ......................... <the itemDelimiter>
  [179] setlocal 3 .............................. tDelim = the itemDelimiter
  [181] pushcons 10 ............................. <",">
  [183] setmovieprop 24 ......................... the itemDelimiter = ","
  [185] getlocal 2 .............................. <tPattern>
  [187] pushsymb 25 ............................. <#item>
  [189] pushint8 1 .............................. <1>
  [191] pusharglist 3 ........................... <tPattern, #item, 1>
  [193] objcall 21 .............................. <tPattern.item[1]>
  [195] setlocal 4 .............................. ttype = tPattern.item[1]
  [197] getlocal 2 .............................. <tPattern>
  [199] pushsymb 25 ............................. <#item>
  [201] pushint8 2 .............................. <2>
  [203] pusharglist 3 ........................... <tPattern, #item, 2>
  [205] objcall 21 .............................. <tPattern.item[2]>
  [207] setlocal 5 .............................. tPalette = tPattern.item[2]
  [209] getlocal 2 .............................. <tPattern>
  [211] pushsymb 25 ............................. <#item>
  [213] pushint8 3 .............................. <3>
  [215] pusharglist 3 ........................... <tPattern, #item, 3>
  [217] objcall 21 .............................. <tPattern.item[3]>
  [219] pusharglist 1 ........................... <tPattern.item[3]>
  [221] extcall 18 .............................. <integer(tPattern.item[3])>
  [223] setlocal 6 .............................. tR = integer(tPattern.item[3])
  [225] getlocal 2 .............................. <tPattern>
  [227] pushsymb 25 ............................. <#item>
  [229] pushint8 4 .............................. <4>
  [231] pusharglist 3 ........................... <tPattern, #item, 4>
  [233] objcall 21 .............................. <tPattern.item[4]>
  [235] pusharglist 1 ........................... <tPattern.item[4]>
  [237] extcall 18 .............................. <integer(tPattern.item[4])>
  [239] setlocal 7 .............................. tG = integer(tPattern.item[4])
  [241] getlocal 2 .............................. <tPattern>
  [243] pushsymb 25 ............................. <#item>
  [245] pushint8 5 .............................. <5>
  [247] pusharglist 3 ........................... <tPattern, #item, 5>
  [249] objcall 21 .............................. <tPattern.item[5]>
  [251] pusharglist 1 ........................... <tPattern.item[5]>
  [253] extcall 18 .............................. <integer(tPattern.item[5])>
  [255] setlocal 8 .............................. tB = integer(tPattern.item[5])
  [257] getlocal 6 .............................. <tR>
  [259] getlocal 7 .............................. <tG>
  [261] getlocal 8 .............................. <tB>
  [263] pusharglist 3 ........................... <tR, tG, tB>
  [265] extcall 26 .............................. <rgb(tR, tG, tB)>
  [267] setlocal 9 .............................. tColor = rgb(tR, tG, tB)
  [269] pushsymb 28 ............................. <#room>
  [271] pusharglist 1 ........................... <#room>
  [273] extcall 27 .............................. <getThread(#room)>
  [275] pusharglist 1 ........................... <getThread(#room)>
  [277] objcall 43 .............................. <getThread(#room).getInterface()>
  [279] pusharglist 1 ........................... <getThread(#room).getInterface()>
  [281] objcall 45 .............................. <getThread(#room).getInterface().getRoomVisualizer()>
  [283] not ..................................... <not getThread(#room).getInterface().getRoomVisualizer()>
  [284] jmpifz [299] ............................ if not getThread(#room).getInterface().getRoomVisualizer() then
  [287] getparam 1 .............................. <tIndex>
  [289] setprop 12 .............................. pFloorModel = tIndex
  [291] pushzero ................................ <0>
  [292] setprop 8 ............................... pFloorDefined = 0
  [294] pushzero ................................ <0>
  [295] pusharglistnoret 1 ...................... <0>
  [297] extcall 13 .............................. return 0
  [299] pushsymb 28 ............................. <#room>
  [301] pusharglist 1 ........................... <#room>
  [303] extcall 27 .............................. <getThread(#room)>
  [305] pusharglist 1 ........................... <getThread(#room)>
  [307] objcall 43 .............................. <getThread(#room).getInterface()>
  [309] pusharglist 1 ........................... <getThread(#room).getInterface()>
  [311] objcall 45 .............................. <getThread(#room).getInterface().getRoomVisualizer()>
  [313] setlocal 10 ............................. tVisualizer = getThread(#room).getInterface().getRoomVisualizer()
  [315] pushint8 1 .............................. <1>
  [317] setlocal 11 ............................. tPieceId = 1
  [319] getlocal 10 ............................. <tVisualizer>
  [321] pushcons 7 .............................. <"floor">
  [323] getlocal 11 ............................. <tPieceId>
  [325] joinstr ................................. <"floor" & tPieceId>
  [326] pusharglist 2 ........................... <tVisualizer, "floor" & tPieceId>
  [328] objcall 76 .............................. <tVisualizer.getSprById("floor" & tPieceId)>
  [330] setlocal 12 ............................. tSpr = tVisualizer.getSprById("floor" & tPieceId)
  [332] getmovieprop 24 ......................... <the itemDelimiter>
  [334] setlocal 3 .............................. tDelim = the itemDelimiter
  [336] pushcons 15 ............................. <"_">
  [338] setmovieprop 24 ......................... the itemDelimiter = "_"
  [340] getlocal 12 ............................. <tSpr>
  [342] pushzero ................................ <0>
  [343] eq ...................................... <tSpr = 0>
  [344] not ..................................... <not (tSpr = 0)>
  [345] jmpifz [547] ............................ repeat while not (tSpr = 0)
  [348] getlocal 12 ............................. <tSpr>
  [350] getchainedprop 35 ....................... <tSpr.member>
  [352] getobjprop 36 ........................... <tSpr.member.name>
  [354] setlocal 13 ............................. tMem = tSpr.member.name
  [356] getlocal 13 ............................. <tMem>
  [358] pushsymb 25 ............................. <#item>
  [360] pushint8 1 .............................. <1>
  [362] pusharglist 3 ........................... <tMem, #item, 1>
  [364] objcall 21 .............................. <tMem.item[1]>
  [366] pushcons 15 ............................. <"_">
  [368] joinstr ................................. <tMem.item[1] & "_">
  [369] getlocal 13 ............................. <tMem>
  [371] pushsymb 25 ............................. <#item>
  [373] pushint8 2 .............................. <2>
  [375] pusharglist 3 ........................... <tMem, #item, 2>
  [377] objcall 21 .............................. <tMem.item[2]>
  [379] joinstr ................................. <tMem.item[1] & "_" & tMem.item[2]>
  [380] pushcons 15 ............................. <"_">
  [382] joinstr ................................. <tMem.item[1] & "_" & tMem.item[2] & "_">
  [383] setlocal 14 ............................. tClass = tMem.item[1] & "_" & tMem.item[2] & "_"
  [385] getlocal 13 ............................. <tMem>
  [387] pushsymb 25 ............................. <#item>
  [389] pushint8 4 .............................. <4>
  [391] pusharglist 3 ........................... <tMem, #item, 4>
  [393] objcall 21 .............................. <tMem.item[4]>
  [395] pushcons 15 ............................. <"_">
  [397] joinstr ................................. <tMem.item[4] & "_">
  [398] setlocal 15 ............................. tLayer = tMem.item[4] & "_"
  [400] getlocal 13 ............................. <tMem>
  [402] pushsymb 25 ............................. <#item>
  [404] pushint8 5 .............................. <5>
  [406] pusharglist 3 ........................... <tMem, #item, 5>
  [408] objcall 21 .............................. <tMem.item[5]>
  [410] pushcons 15 ............................. <"_">
  [412] joinstr ................................. <tMem.item[5] & "_">
  [413] setlocal 16 ............................. tObs1 = tMem.item[5] & "_"
  [415] getlocal 13 ............................. <tMem>
  [417] pushsymb 25 ............................. <#item>
  [419] pushint8 6 .............................. <6>
  [421] pusharglist 3 ........................... <tMem, #item, 6>
  [423] objcall 21 .............................. <tMem.item[6]>
  [425] pushcons 15 ............................. <"_">
  [427] joinstr ................................. <tMem.item[6] & "_">
  [428] setlocal 17 ............................. tdir = tMem.item[6] & "_"
  [430] getlocal 13 ............................. <tMem>
  [432] pushsymb 25 ............................. <#item>
  [434] pushint8 7 .............................. <7>
  [436] pusharglist 3 ........................... <tMem, #item, 7>
  [438] objcall 21 .............................. <tMem.item[7]>
  [440] setlocal 18 ............................. tObs2 = tMem.item[7]
  [442] getlocal 14 ............................. <tClass>
  [444] getlocal 4 .............................. <ttype>
  [446] joinstr ................................. <tClass & ttype>
  [447] pushcons 15 ............................. <"_">
  [449] joinstr ................................. <tClass & ttype & "_">
  [450] getlocal 15 ............................. <tLayer>
  [452] joinstr ................................. <tClass & ttype & "_" & tLayer>
  [453] getlocal 16 ............................. <tObs1>
  [455] joinstr ................................. <tClass & ttype & "_" & tLayer & tObs1>
  [456] getlocal 17 ............................. <tdir>
  [458] joinstr ................................. <tClass & ttype & "_" & tLayer & tObs1 & tdir>
  [459] getlocal 18 ............................. <tObs2>
  [461] joinstr ................................. <tClass & ttype & "_" & tLayer & tObs1 & tdir & tObs2>
  [462] setlocal 19 ............................. tNewMemName = tClass & ttype & "_" & tLayer & tObs1 & tdir & tObs2
  [464] getlocal 19 ............................. <tNewMemName>
  [466] pusharglist 1 ........................... <tNewMemName>
  [468] extcall 23 .............................. <memberExists(tNewMemName)>
  [470] jmpifz [483] ............................ if memberExists(tNewMemName) then
  [473] getlocal 12 ............................. <tSpr>
  [475] getlocal 19 ............................. <tNewMemName>
  [477] pusharglist 1 ........................... <tNewMemName>
  [479] extcall 35 .............................. <member(tNewMemName)>
  [481] setobjprop 35 ........................... tSpr.member = member(tNewMemName)
  [483] getlocal 12 ............................. <tSpr>
  [485] getlocal 9 .............................. <tColor>
  [487] setobjprop 38 ........................... tSpr.bgColor = tColor
  [489] getlocal 12 ............................. <tSpr>
  [491] getchainedprop 35 ....................... <tSpr.member>
  [493] getlocal 5 .............................. <tPalette>
  [495] pusharglist 1 ........................... <tPalette>
  [497] extcall 37 .............................. <getmemnum(tPalette)>
  [499] pusharglist 1 ........................... <getmemnum(tPalette)>
  [501] extcall 35 .............................. <member(getmemnum(tPalette))>
  [503] setobjprop 39 ........................... tSpr.member.paletteRef = member(getmemnum(tPalette))
  [505] getlocal 12 ............................. <tSpr>
  [507] pushint8 41 ............................. <41>
  [509] setobjprop 42 ........................... tSpr.ink = 41
  [511] getlocal 12 ............................. <tSpr>
  [513] getlocal 12 ............................. <tSpr>
  [515] getobjprop 40 ........................... <tSpr.locZ>
  [517] pushint32 1000000 ....................... <1000000>
  [522] sub ..................................... <tSpr.locZ - 1000000>
  [523] setobjprop 40 ........................... tSpr.locZ = tSpr.locZ - 1000000
  [525] getlocal 11 ............................. <tPieceId>
  [527] pushint8 1 .............................. <1>
  [529] add ..................................... <tPieceId + 1>
  [530] setlocal 11 ............................. tPieceId = tPieceId + 1
  [532] getlocal 10 ............................. <tVisualizer>
  [534] pushcons 7 .............................. <"floor">
  [536] getlocal 11 ............................. <tPieceId>
  [538] joinstr ................................. <"floor" & tPieceId>
  [539] pusharglist 2 ........................... <tVisualizer, "floor" & tPieceId>
  [541] objcall 76 .............................. <tVisualizer.getSprById("floor" & tPieceId)>
  [543] setlocal 12 ............................. tSpr = tVisualizer.getSprById("floor" & tPieceId)
  [545] endrepeat [340]
  [547] getlocal 3 .............................. <tDelim>
  [549] setmovieprop 24 ......................... the itemDelimiter = tDelim
  [551] getlocal 10 ............................. <tVisualizer>
  [553] pushsymb 77 ............................. <#floor>
  [555] pusharglist 1 ........................... <[#floor]>
  [557] pushlist ................................ <[#floor]>
  [558] pusharglist 2 ........................... <tVisualizer, [#floor]>
  [560] objcall 48 .............................. <tVisualizer.getWrappedParts([#floor])>
  [562] setlocal 20 ............................. tWrappedParts = tVisualizer.getWrappedParts([#floor])
  [564] getlocal 20 ............................. <tWrappedParts>
  [566] peek 0
  [568] pusharglist 1
  [570] extcall 32
  [572] pushint8 1
  [574] peek 0
  [576] peek 2
  [578] lteq
  [579] jmpifz [611] ............................ repeat with tWrapper in tWrappedParts
  [582] peek 2
  [584] peek 1
  [586] pusharglist 2
  [588] extcall 33
  [590] setlocal 21
  [592] getlocal 21 ............................. <tWrapper>
  [594] getlocal 4 .............................. <ttype>
  [596] getlocal 5 .............................. <tPalette>
  [598] getlocal 9 .............................. <tColor>
  [600] pushsymb 77 ............................. <#floor>
  [602] pusharglistnoret 5 ...................... <tWrapper, ttype, tPalette, tColor, #floor>
  [604] objcall 49 .............................. tWrapper.setPartPattern(ttype, tPalette, tColor, #floor)
  [606] pushint8 1
  [608] add
  [609] endrepeat [574]
  [611] pop 3
  [613] getlocal 3 .............................. <tDelim>
  [615] setmovieprop 24 ......................... the itemDelimiter = tDelim
  [617] pushint8 1 .............................. <1>
  [619] setprop 8 ............................... pFloorDefined = 1
  [621] pushint8 1 .............................. <1>
  [623] pusharglistnoret 1 ...................... <1>
  [625] extcall 13 .............................. return 1
  [627] ret
end
