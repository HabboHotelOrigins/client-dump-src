property pPageItemDownloader, pPersistentFurniData, pPersistentCatalogData, pStripData, pwidth, pheight, pTargetElement, pTargetScroll, pDealPreviewObj, pDealNumber, pDealNumbers, pSmallItemWidth, pSmallItemHeight, pNumberPosX, pNumberPosY, pPageId

on construct me
  [  0] pushsymb 559 ............................ <#catalogue>
  [  3] pusharglist 1 ........................... <#catalogue>
  [  5] extcall 471 ............................. <getThread(#catalogue)>
  [  8] pusharglist 1 ........................... <getThread(#catalogue)>
  [ 10] objcall 170 ............................. <getThread(#catalogue).getComponent()>
  [ 12] pusharglist 1 ........................... <getThread(#catalogue).getComponent()>
  [ 14] objcall 264 ............................. <getThread(#catalogue).getComponent().getPageItemDownloader()>
  [ 17] setprop 313 ............................. pPageItemDownloader = getThread(#catalogue).getComponent().getPageItemDownloader()
  [ 20] pusharglist 0 ........................... <>
  [ 22] extcall 55 .............................. <VOID>
  [ 24] setprop 546 ............................. pPersistentFurniData = VOID
  [ 27] pusharglist 0 ........................... <>
  [ 29] extcall 55 .............................. <VOID>
  [ 31] setprop 565 ............................. pPersistentCatalogData = VOID
  [ 34] pusharglist 0 ........................... <>
  [ 36] extcall 55 .............................. <VOID>
  [ 38] setprop 44 .............................. pStripData = VOID
  [ 40] pusharglist 0 ........................... <>
  [ 42] extcall 55 .............................. <VOID>
  [ 44] setprop 40 .............................. pwidth = VOID
  [ 46] pusharglist 0 ........................... <>
  [ 48] extcall 55 .............................. <VOID>
  [ 50] setprop 696 ............................. pheight = VOID
  [ 53] pusharglist 0 ........................... <>
  [ 55] extcall 55 .............................. <VOID>
  [ 57] setprop 117 ............................. pTargetElement = VOID
  [ 59] pusharglist 0 ........................... <>
  [ 61] extcall 55 .............................. <VOID>
  [ 63] setprop 119 ............................. pTargetScroll = VOID
  [ 65] pushcons 0 .............................. <"catalogue_deal_preview_object">
  [ 67] pusharglist 1 ........................... <"catalogue_deal_preview_object">
  [ 69] extcall 184 ............................. <getObject("catalogue_deal_preview_object")>
  [ 71] setprop 560 ............................. pDealPreviewObj = getObject("catalogue_deal_preview_object")
  [ 74] pushzero ................................ <0>
  [ 75] setprop 616 ............................. pDealNumber = 0
  [ 78] pusharglist 0 ........................... <[:]>
  [ 80] pushproplist ............................ <[:]>
  [ 81] setprop 697 ............................. pDealNumbers = [:]
  [ 84] pushzero ................................ <0>
  [ 85] setprop 35 .............................. pSmallItemWidth = 0
  [ 87] pushzero ................................ <0>
  [ 88] setprop 36 .............................. pSmallItemHeight = 0
  [ 90] pushcons 1 .............................. <"catalogue.deal.numberpos.x">
  [ 92] pusharglist 1 ........................... <"catalogue.deal.numberpos.x">
  [ 94] extcall 22 .............................. <getVariable("catalogue.deal.numberpos.x")>
  [ 96] setprop 698 ............................. pNumberPosX = getVariable("catalogue.deal.numberpos.x")
  [ 99] pushcons 2 .............................. <"catalogue.deal.numberpos.y">
  [101] pusharglist 1 ........................... <"catalogue.deal.numberpos.y">
  [103] extcall 22 .............................. <getVariable("catalogue.deal.numberpos.y")>
  [105] setprop 699 ............................. pNumberPosY = getVariable("catalogue.deal.numberpos.y")
  [108] pushint8 1 .............................. <1>
  [110] inv ..................................... <-1>
  [111] setprop 104 ............................. pPageId = -1
  [113] pushint8 1 .............................. <1>
  [115] pusharglistnoret 1 ...................... <1>
  [117] extcall 37 .............................. return 1
  [119] ret
end

on deconstruct me
  [  0] getprop 313 ............................. <pPageItemDownloader>
  [  3] getparam 0 .............................. <me>
  [  5] pushsymb 10 ............................. <#downloadCompleted>
  [  7] pusharglistnoret 3 ...................... <pPageItemDownloader, me, #downloadCompleted>
  [  9] objcall 453 ............................. pPageItemDownloader.removeCallback(me, #downloadCompleted)
  [ 12] pusharglist 0 ........................... <>
  [ 14] extcall 55 .............................. <VOID>
  [ 16] setprop 44 .............................. pStripData = VOID
  [ 18] pushint8 1 .............................. <1>
  [ 20] pusharglistnoret 1 ...................... <1>
  [ 22] extcall 37 .............................. return 1
  [ 24] ret
end

on define me, tdata, tWidth, tHeight, tPageID
  [  0] getparam 0 .............................. <me>
  [  2] getparam 4 .............................. <tPageID>
  [  4] setobjprop 104 .......................... me.pPageId = tPageID
  [  6] getparam 0 .............................. <me>
  [  8] getparam 1 .............................. <tdata>
  [ 10] setobjprop 44 ........................... me.pStripData = tdata
  [ 12] getparam 0 .............................. <me>
  [ 14] pusharglistnoret 1 ...................... <me>
  [ 16] objcall 695 ............................. me.resolveMembers()
  [ 19] ret
end

on setStripItemState me, tItemIndex, tstate
  [  0] getprop 44 .............................. <pStripData>
  [  2] pusharglist 1 ........................... <pStripData>
  [  4] extcall 43 .............................. <ilk(pStripData)>
  [  6] pushsymb 45 ............................. <#propList>
  [  8] nteq .................................... <ilk(pStripData) <> #propList>
  [  9] jmpifz [ 29] ............................ if ilk(pStripData) <> #propList then
  [ 12] getparam 0 .............................. <me>
  [ 14] pushcons 3 .............................. <"Strip data invalid">
  [ 16] pushsymb 694 ............................ <#setStripItemState>
  [ 19] pushsymb 47 ............................. <#major>
  [ 21] pusharglist 4 ........................... <me, "Strip data invalid", #setStripItemState, #major>
  [ 23] extcall 46 .............................. <error(me, "Strip data invalid", #setStripItemState, #major)>
  [ 25] pusharglistnoret 1 ...................... <error(me, "Strip data invalid", #setStripItemState, #major)>
  [ 27] extcall 37 .............................. return error(me, "Strip data invalid", #setStripItemState, #major)
  [ 29] getprop 44 .............................. <pStripData>
  [ 31] getparam 1 .............................. <tItemIndex>
  [ 33] pusharglist 2 ........................... <pStripData, tItemIndex>
  [ 35] objcall 41 .............................. <pStripData[tItemIndex]>
  [ 37] pushsymb 702 ............................ <#state>
  [ 40] getparam 2 .............................. <tstate>
  [ 42] pusharglistnoret 3 ...................... <pStripData[tItemIndex], #state, tstate>
  [ 44] objcall 254 ............................. pStripData[tItemIndex][#state] = tstate
  [ 46] ret
end

on setTargetElement me, tElement, tScroll
  [  0] getparam 1 .............................. <tElement>
  [  2] setprop 117 ............................. pTargetElement = tElement
  [  4] getprop 117 ............................. <pTargetElement>
  [  6] pushsymb 33 ............................. <#width>
  [  8] pusharglist 2 ........................... <pTargetElement, #width>
  [ 10] objcall 120 ............................. <pTargetElement.getProperty(#width)>
  [ 12] setprop 40 .............................. pwidth = pTargetElement.getProperty(#width)
  [ 14] getprop 117 ............................. <pTargetElement>
  [ 16] pushsymb 34 ............................. <#height>
  [ 18] pusharglist 2 ........................... <pTargetElement, #height>
  [ 20] objcall 120 ............................. <pTargetElement.getProperty(#height)>
  [ 22] setprop 696 ............................. pheight = pTargetElement.getProperty(#height)
  [ 25] getparam 2 .............................. <tScroll>
  [ 27] setprop 119 ............................. pTargetScroll = tScroll
  [ 29] ret
end

on selectItemAt me, tloc
  [  0] pusharglistnoret 0 ...................... <>
  [  2] extcall 37 .............................. return 
  [  4] ret
end

on getSelectedItem me
  [  0] pusharglist 0 ........................... <>
  [  2] extcall 55 .............................. <VOID>
  [  4] pusharglistnoret 1 ...................... <VOID>
  [  6] extcall 37 .............................. return VOID
  [  8] ret
end

on resolveSmallPreview me, tOffer
  [  0] getparam 1 .............................. <tOffer>
  [  2] pusharglist 1 ........................... <tOffer>
  [  4] extcall 57 .............................. <objectp(tOffer)>
  [  6] not ..................................... <not objectp(tOffer)>
  [  7] jmpifz [ 26] ............................ if not objectp(tOffer) then
  [ 10] getparam 0 .............................. <me>
  [ 12] pushcons 4 .............................. <"Invalid input format">
  [ 14] pushsymb 5 .............................. <#resolveSmallPreview>
  [ 16] pushsymb 47 ............................. <#major>
  [ 18] pusharglist 4 ........................... <me, "Invalid input format", #resolveSmallPreview, #major>
  [ 20] extcall 46 .............................. <error(me, "Invalid input format", #resolveSmallPreview, #major)>
  [ 22] pusharglistnoret 1 ...................... <error(me, "Invalid input format", #resolveSmallPreview, #major)>
  [ 24] extcall 37 .............................. return error(me, "Invalid input format", #resolveSmallPreview, #major)
  [ 26] getparam 1 .............................. <tOffer>
  [ 28] pusharglist 1 ........................... <tOffer>
  [ 30] objcall 59 .............................. <tOffer.getCount()>
  [ 32] pushint8 1 .............................. <1>
  [ 34] lt ...................................... <tOffer.getCount() < 1>
  [ 35] jmpifz [ 54] ............................ if tOffer.getCount() < 1 then
  [ 38] getparam 0 .............................. <me>
  [ 40] pushcons 5 .............................. <"Offer has no content">
  [ 42] pushsymb 5 .............................. <#resolveSmallPreview>
  [ 44] pushsymb 47 ............................. <#major>
  [ 46] pusharglist 4 ........................... <me, "Offer has no content", #resolveSmallPreview, #major>
  [ 48] extcall 46 .............................. <error(me, "Offer has no content", #resolveSmallPreview, #major)>
  [ 50] pusharglistnoret 1 ...................... <error(me, "Offer has no content", #resolveSmallPreview, #major)>
  [ 52] extcall 37 .............................. return error(me, "Offer has no content", #resolveSmallPreview, #major)
  [ 54] pushcons 6 .............................. <"ctlg_pic_">
  [ 56] setlocal 0 .............................. tPrevMember = "ctlg_pic_"
  [ 58] getparam 1 .............................. <tOffer>
  [ 60] pusharglist 1 ........................... <tOffer>
  [ 62] objcall 581 ............................. <tOffer.getName()>
  [ 65] setlocal 1 .............................. tOfferName = tOffer.getName()
  [ 67] getlocal 0 .............................. <tPrevMember>
  [ 69] pushcons 7 .............................. <"small_">
  [ 71] joinstr ................................. <tPrevMember & "small_">
  [ 72] getlocal 1 .............................. <tOfferName>
  [ 74] joinstr ................................. <tPrevMember & "small_" & tOfferName>
  [ 75] pusharglist 1 ........................... <tPrevMember & "small_" & tOfferName>
  [ 77] extcall 63 .............................. <memberExists(tPrevMember & "small_" & tOfferName)>
  [ 79] jmpifz [100] ............................ if memberExists(tPrevMember & "small_" & tOfferName) then
  [ 82] getlocal 0 .............................. <tPrevMember>
  [ 84] pushcons 7 .............................. <"small_">
  [ 86] joinstr ................................. <tPrevMember & "small_">
  [ 87] getlocal 1 .............................. <tOfferName>
  [ 89] joinstr ................................. <tPrevMember & "small_" & tOfferName>
  [ 90] pusharglist 1 ........................... <tPrevMember & "small_" & tOfferName>
  [ 92] extcall 21 .............................. <getMember(tPrevMember & "small_" & tOfferName)>
  [ 94] getobjprop 17 ........................... <getMember(tPrevMember & "small_" & tOfferName).image>
  [ 96] pusharglistnoret 1 ...................... <getMember(tPrevMember & "small_" & tOfferName).image>
  [ 98] extcall 37 .............................. return getMember(tPrevMember & "small_" & tOfferName).image
  [100] getparam 1 .............................. <tOffer>
  [102] pusharglist 1 ........................... <tOffer>
  [104] objcall 59 .............................. <tOffer.getCount()>
  [106] pushint8 1 .............................. <1>
  [108] eq ...................................... <tOffer.getCount() = 1>
  [109] jmpifz [540] ............................ if tOffer.getCount() = 1 then / else
  [112] getprop 546 ............................. <pPersistentFurniData>
  [115] getparam 1 .............................. <tOffer>
  [117] pushint8 1 .............................. <1>
  [119] pusharglist 2 ........................... <tOffer, 1>
  [121] objcall 60 .............................. <tOffer.getContent(1)>
  [123] pusharglist 1 ........................... <tOffer.getContent(1)>
  [125] objcall 61 .............................. <tOffer.getContent(1).getType()>
  [127] getparam 1 .............................. <tOffer>
  [129] pushint8 1 .............................. <1>
  [131] pusharglist 2 ........................... <tOffer, 1>
  [133] objcall 60 .............................. <tOffer.getContent(1)>
  [135] pusharglist 1 ........................... <tOffer.getContent(1)>
  [137] objcall 62 .............................. <tOffer.getContent(1).getClassId()>
  [139] pusharglist 3 ........................... <pPersistentFurniData, tOffer.getContent(1).getType(), tOffer.getContent(1).getClassId()>
  [141] objcall 487 ............................. <pPersistentFurniData.getProps(tOffer.getContent(1).getType(), tOffer.getContent(1).getClassId())>
  [144] setlocal 2 .............................. tFurniProps = pPersistentFurniData.getProps(tOffer.getContent(1).getType(), tOffer.getContent(1).getClassId())
  [146] getlocal 2 .............................. <tFurniProps>
  [148] pusharglist 1 ........................... <tFurniProps>
  [150] extcall 349 ............................. <listp(tFurniProps)>
  [153] not ..................................... <not listp(tFurniProps)>
  [154] jmpifz [169] ............................ if not listp(tFurniProps) then
  [157] pushcons 8 .............................. <"no_icon_small">
  [159] pusharglist 1 ........................... <"no_icon_small">
  [161] extcall 21 .............................. <getMember("no_icon_small")>
  [163] getobjprop 17 ........................... <getMember("no_icon_small").image>
  [165] pusharglistnoret 1 ...................... <getMember("no_icon_small").image>
  [167] extcall 37 .............................. return getMember("no_icon_small").image
  [169] getparam 0 .............................. <me>
  [171] getlocal 2 .............................. <tFurniProps>
  [173] pushsymb 268 ............................ <#class>
  [176] pusharglist 2 ........................... <tFurniProps, #class>
  [178] objcall 102 ............................. <tFurniProps.getaProp(#class)>
  [180] pusharglist 2 ........................... <me, tFurniProps.getaProp(#class)>
  [182] objcall 149 ............................. <me.getClassAsset(tFurniProps.getaProp(#class))>
  [184] setlocal 3 .............................. tClass = me.getClassAsset(tFurniProps.getaProp(#class))
  [186] getlocal 3 .............................. <tClass>
  [188] pushcons 9 .............................. <"poster">
  [190] eq ...................................... <tClass = "poster">
  [191] jmpifz [212] ............................ if tClass = "poster" then
  [194] getlocal 3 .............................. <tClass>
  [196] getparam 1 .............................. <tOffer>
  [198] pushint8 1 .............................. <1>
  [200] pusharglist 2 ........................... <tOffer, 1>
  [202] objcall 60 .............................. <tOffer.getContent(1)>
  [204] pusharglist 1 ........................... <tOffer.getContent(1)>
  [206] objcall 548 ............................. <tOffer.getContent(1).getExtraParam()>
  [209] joinpadstr .............................. <tClass && tOffer.getContent(1).getExtraParam()>
  [210] setlocal 3 .............................. tClass = tClass && tOffer.getContent(1).getExtraParam()
  [212] getlocal 2 .............................. <tFurniProps>
  [214] pushsymb 268 ............................ <#class>
  [217] pusharglist 2 ........................... <tFurniProps, #class>
  [219] objcall 102 ............................. <tFurniProps.getaProp(#class)>
  [221] pushcons 10 ............................. <"_small">
  [223] joinstr ................................. <tFurniProps.getaProp(#class) & "_small">
  [224] pusharglist 1 ........................... <tFurniProps.getaProp(#class) & "_small">
  [226] extcall 63 .............................. <memberExists(tFurniProps.getaProp(#class) & "_small")>
  [228] jmpifz [245] ............................ if memberExists(tFurniProps.getaProp(#class) & "_small") then
  [231] getlocal 2 .............................. <tFurniProps>
  [233] pushsymb 268 ............................ <#class>
  [236] pusharglist 2 ........................... <tFurniProps, #class>
  [238] objcall 102 ............................. <tFurniProps.getaProp(#class)>
  [240] pushcons 10 ............................. <"_small">
  [242] joinstr ................................. <tFurniProps.getaProp(#class) & "_small">
  [243] setlocal 4 .............................. tmember = tFurniProps.getaProp(#class) & "_small"
  [245] pushsymb 472 ............................ <#dynamicdownloader>
  [248] pusharglist 1 ........................... <#dynamicdownloader>
  [250] extcall 471 ............................. <getThread(#dynamicdownloader)>
  [253] pusharglist 1 ........................... <getThread(#dynamicdownloader)>
  [255] objcall 170 ............................. <getThread(#dynamicdownloader).getComponent()>
  [257] getlocal 3 .............................. <tClass>
  [259] pusharglist 2 ........................... <getThread(#dynamicdownloader).getComponent(), tClass>
  [261] objcall 582 ............................. <getThread(#dynamicdownloader).getComponent().isAssetDownloaded(tClass)>
  [264] jmpifz [537] ............................ if getThread(#dynamicdownloader).getComponent().isAssetDownloaded(tClass) then
  [267] pushcons 11 ............................. <"Preview_renderer">
  [269] pusharglist 1 ........................... <"Preview_renderer">
  [271] extcall 184 ............................. <getObject("Preview_renderer")>
  [273] getlocal 4 .............................. <tmember>
  [275] pusharglist 0 ........................... <>
  [277] extcall 55 .............................. <VOID>
  [279] getlocal 2 .............................. <tFurniProps>
  [281] pushsymb 547 ............................ <#partColors>
  [284] pusharglist 2 ........................... <tFurniProps, #partColors>
  [286] objcall 102 ............................. <tFurniProps.getaProp(#partColors)>
  [288] getlocal 3 .............................. <tClass>
  [290] pusharglist 5 ........................... <getObject("Preview_renderer"), tmember, VOID, tFurniProps.getaProp(#partColors), tClass>
  [292] objcall 145 ............................. <getObject("Preview_renderer").renderPreviewImage(tmember, VOID, tFurniProps.getaProp(#partColors), tClass)>
  [294] setlocal 5 .............................. tRenderedImage = getObject("Preview_renderer").renderPreviewImage(tmember, VOID, tFurniProps.getaProp(#partColors), tClass)
  [296] getlocal 5 .............................. <tRenderedImage>
  [298] pusharglist 1 ........................... <tRenderedImage>
  [300] extcall 43 .............................. <ilk(tRenderedImage)>
  [302] pushsymb 17 ............................. <#image>
  [304] eq ...................................... <ilk(tRenderedImage) = #image>
  [305] jmpifz [319] ............................ if ilk(tRenderedImage) = #image then / else
  [308] getlocal 5 .............................. <tRenderedImage>
  [310] pusharglist 1 ........................... <tRenderedImage>
  [312] objcall 107 ............................. <tRenderedImage.duplicate()>
  [314] setlocal 6 .............................. tImage = tRenderedImage.duplicate()
  [316] jmp [335]
  [319] getparam 0 .............................. <me>
  [321] pushcons 12 ............................. <"Deal preview rendered image missing.">
  [323] pushsymb 5 .............................. <#resolveSmallPreview>
  [325] pushsymb 58 ............................. <#minor>
  [327] pusharglist 4 ........................... <me, "Deal preview rendered image missing.", #resolveSmallPreview, #minor>
  [329] extcall 46 .............................. <error(me, "Deal preview rendered image missing.", #resolveSmallPreview, #minor)>
  [331] pusharglistnoret 1 ...................... <error(me, "Deal preview rendered image missing.", #resolveSmallPreview, #minor)>
  [333] extcall 37 .............................. return error(me, "Deal preview rendered image missing.", #resolveSmallPreview, #minor)
  [335] getparam 1 .............................. <tOffer>
  [337] pushint8 1 .............................. <1>
  [339] pusharglist 2 ........................... <tOffer, 1>
  [341] objcall 60 .............................. <tOffer.getContent(1)>
  [343] pusharglist 1 ........................... <tOffer.getContent(1)>
  [345] objcall 549 ............................. <tOffer.getContent(1).getProductCount()>
  [348] pushint8 1 .............................. <1>
  [350] gt ...................................... <tOffer.getContent(1).getProductCount() > 1>
  [351] jmpifz [531] ............................ if tOffer.getContent(1).getProductCount() > 1 then
  [354] getprop 560 ............................. <pDealPreviewObj>
  [357] pusharglist 1 ........................... <pDealPreviewObj>
  [359] extcall 57 .............................. <objectp(pDealPreviewObj)>
  [361] not ..................................... <not objectp(pDealPreviewObj)>
  [362] jmpifz [381] ............................ if not objectp(pDealPreviewObj) then
  [365] getparam 0 .............................. <me>
  [367] pushcons 13 ............................. <"Deal preview renderer object missing.">
  [369] pushsymb 5 .............................. <#resolveSmallPreview>
  [371] pusharglistnoret 3 ...................... <me, "Deal preview renderer object missing.", #resolveSmallPreview>
  [373] extcall 46 .............................. error(me, "Deal preview renderer object missing.", #resolveSmallPreview)
  [375] getlocal 6 .............................. <tImage>
  [377] pusharglistnoret 1 ...................... <tImage>
  [379] extcall 37 .............................. return tImage
  [381] getprop 560 ............................. <pDealPreviewObj>
  [384] getparam 1 .............................. <tOffer>
  [386] pushint8 1 .............................. <1>
  [388] pusharglist 2 ........................... <tOffer, 1>
  [390] objcall 60 .............................. <tOffer.getContent(1)>
  [392] pusharglist 1 ........................... <tOffer.getContent(1)>
  [394] objcall 549 ............................. <tOffer.getContent(1).getProductCount()>
  [397] pusharglist 2 ........................... <pDealPreviewObj, tOffer.getContent(1).getProductCount()>
  [399] objcall 632 ............................. <pDealPreviewObj.getNumberImage(tOffer.getContent(1).getProductCount())>
  [402] setlocal 7 .............................. tCountImg = pDealPreviewObj.getNumberImage(tOffer.getContent(1).getProductCount())
  [404] getlocal 6 .............................. <tImage>
  [406] getobjprop 33 ........................... <tImage.width>
  [408] getlocal 6 .............................. <tImage>
  [410] getobjprop 34 ........................... <tImage.height>
  [412] pushint8 32 ............................. <32>
  [414] pusharglist 3 ........................... <tImage.width, tImage.height, 32>
  [416] extcall 17 .............................. <image(tImage.width, tImage.height, 32)>
  [418] setlocal 8 .............................. tNewImg = image(tImage.width, tImage.height, 32)
  [420] getlocal 8 .............................. <tNewImg>
  [422] getlocal 6 .............................. <tImage>
  [424] getlocal 6 .............................. <tImage>
  [426] getobjprop 69 ........................... <tImage.rect>
  [428] getlocal 6 .............................. <tImage>
  [430] getobjprop 69 ........................... <tImage.rect>
  [432] pusharglistnoret 4 ...................... <tNewImg, tImage, tImage.rect, tImage.rect>
  [434] objcall 77 .............................. tNewImg.copyPixels(tImage, tImage.rect, tImage.rect)
  [436] getlocal 8 .............................. <tNewImg>
  [438] setlocal 6 .............................. tImage = tNewImg
  [440] getlocal 7 .............................. <tCountImg>
  [442] getobjprop 33 ........................... <tCountImg.width>
  [444] pushint8 2 .............................. <2>
  [446] add ..................................... <tCountImg.width + 2>
  [447] getlocal 6 .............................. <tImage>
  [449] getobjprop 33 ........................... <tImage.width>
  [451] gt ...................................... <(tCountImg.width + 2) > tImage.width>
  [452] jmpifz [497] ............................ if (tCountImg.width + 2) > tImage.width then
  [455] getlocal 7 .............................. <tCountImg>
  [457] getobjprop 33 ........................... <tCountImg.width>
  [459] pushint8 2 .............................. <2>
  [461] add ..................................... <tCountImg.width + 2>
  [462] getlocal 6 .............................. <tImage>
  [464] getobjprop 34 ........................... <tImage.height>
  [466] getlocal 6 .............................. <tImage>
  [468] getobjprop 633 .......................... <tImage.depth>
  [471] pusharglist 3 ........................... <tCountImg.width + 2, tImage.height, tImage.depth>
  [473] extcall 17 .............................. <image(tCountImg.width + 2, tImage.height, tImage.depth)>
  [475] setlocal 8 .............................. tNewImg = image(tCountImg.width + 2, tImage.height, tImage.depth)
  [477] getlocal 8 .............................. <tNewImg>
  [479] getlocal 6 .............................. <tImage>
  [481] getlocal 6 .............................. <tImage>
  [483] getobjprop 69 ........................... <tImage.rect>
  [485] getlocal 6 .............................. <tImage>
  [487] getobjprop 69 ........................... <tImage.rect>
  [489] pusharglistnoret 4 ...................... <tNewImg, tImage, tImage.rect, tImage.rect>
  [491] objcall 77 .............................. tNewImg.copyPixels(tImage, tImage.rect, tImage.rect)
  [493] getlocal 8 .............................. <tNewImg>
  [495] setlocal 6 .............................. tImage = tNewImg
  [497] getlocal 6 .............................. <tImage>
  [499] getlocal 7 .............................. <tCountImg>
  [501] getlocal 7 .............................. <tCountImg>
  [503] getobjprop 69 ........................... <tCountImg.rect>
  [505] pushint8 2 .............................. <2>
  [507] pushzero ................................ <0>
  [508] pushint8 2 .............................. <2>
  [510] pushzero ................................ <0>
  [511] pusharglist 4 ........................... <2, 0, 2, 0>
  [513] extcall 69 .............................. <rect(2, 0, 2, 0)>
  [515] add ..................................... <tCountImg.rect + rect(2, 0, 2, 0)>
  [516] getlocal 7 .............................. <tCountImg>
  [518] getobjprop 69 ........................... <tCountImg.rect>
  [520] pushsymb 84 ............................. <#ink>
  [522] pushint8 36 ............................. <36>
  [524] pusharglist 2 ........................... <[#ink: 36]>
  [526] pushproplist ............................ <[#ink: 36]>
  [527] pusharglistnoret 5 ...................... <tImage, tCountImg, tCountImg.rect + rect(2, 0, 2, 0), tCountImg.rect, [#ink: 36]>
  [529] objcall 77 .............................. tImage.copyPixels(tCountImg, tCountImg.rect + rect(2, 0, 2, 0), tCountImg.rect, [#ink: 36])
  [531] getlocal 6 .............................. <tImage>
  [533] pusharglistnoret 1 ...................... <tImage>
  [535] extcall 37 .............................. return tImage
  [537] jmp [637]
  [540] getprop 560 ............................. <pDealPreviewObj>
  [543] pusharglist 1 ........................... <pDealPreviewObj>
  [545] extcall 57 .............................. <objectp(pDealPreviewObj)>
  [547] not ..................................... <not objectp(pDealPreviewObj)>
  [548] jmpifz [565] ............................ if not objectp(pDealPreviewObj) then
  [551] getparam 0 .............................. <me>
  [553] pushcons 13 ............................. <"Deal preview renderer object missing.">
  [555] pushsymb 5 .............................. <#resolveSmallPreview>
  [557] pusharglist 3 ........................... <me, "Deal preview renderer object missing.", #resolveSmallPreview>
  [559] extcall 46 .............................. <error(me, "Deal preview renderer object missing.", #resolveSmallPreview)>
  [561] pusharglistnoret 1 ...................... <error(me, "Deal preview renderer object missing.", #resolveSmallPreview)>
  [563] extcall 37 .............................. return error(me, "Deal preview renderer object missing.", #resolveSmallPreview)
  [565] getprop 697 ............................. <pDealNumbers>
  [568] getlocal 1 .............................. <tOfferName>
  [570] pusharglist 2 ........................... <pDealNumbers, tOfferName>
  [572] objcall 102 ............................. <pDealNumbers.getaProp(tOfferName)>
  [574] pusharglist 1 ........................... <pDealNumbers.getaProp(tOfferName)>
  [576] extcall 78 .............................. <voidp(pDealNumbers.getaProp(tOfferName))>
  [578] jmpifz [603] ............................ if voidp(pDealNumbers.getaProp(tOfferName)) then
  [581] getprop 697 ............................. <pDealNumbers>
  [584] getlocal 1 .............................. <tOfferName>
  [586] getprop 616 ............................. <pDealNumber>
  [589] pusharglistnoret 3 ...................... <pDealNumbers, tOfferName, pDealNumber>
  [591] objcall 321 ............................. pDealNumbers.setaProp(tOfferName, pDealNumber)
  [594] getprop 616 ............................. <pDealNumber>
  [597] pushint8 1 .............................. <1>
  [599] add ..................................... <pDealNumber + 1>
  [600] setprop 616 ............................. pDealNumber = pDealNumber + 1
  [603] getprop 560 ............................. <pDealPreviewObj>
  [606] getprop 697 ............................. <pDealNumbers>
  [609] getlocal 1 .............................. <tOfferName>
  [611] pusharglist 2 ........................... <pDealNumbers, tOfferName>
  [613] objcall 41 .............................. <pDealNumbers[tOfferName]>
  [615] getparam 0 .............................. <me>
  [617] getparam 1 .............................. <tOffer>
  [619] pusharglist 2 ........................... <me, tOffer>
  [621] objcall 526 ............................. <me.convertOfferListToDeallist(tOffer)>
  [624] getprop 35 .............................. <pSmallItemWidth>
  [626] getprop 36 .............................. <pSmallItemHeight>
  [628] pusharglist 5 ........................... <pDealPreviewObj, pDealNumbers[tOfferName], me.convertOfferListToDeallist(tOffer), pSmallItemWidth, pSmallItemHeight>
  [630] objcall 634 ............................. <pDealPreviewObj.renderDealPreviewImage(pDealNumbers[tOfferName], me.convertOfferListToDeallist(tOffer), pSmallItemWidth, pSmallItemHeight)>
  [633] pusharglistnoret 1 ...................... <pDealPreviewObj.renderDealPreviewImage(pDealNumbers[tOfferName], me.convertOfferListToDeallist(tOffer), pSmallItemWidth, pSmallItemHeight)>
  [635] extcall 37 .............................. return pDealPreviewObj.renderDealPreviewImage(pDealNumbers[tOfferName], me.convertOfferListToDeallist(tOffer), pSmallItemWidth, pSmallItemHeight)
  [637] pusharglist 0 ........................... <>
  [639] extcall 55 .............................. <VOID>
  [641] pusharglistnoret 1 ...................... <VOID>
  [643] extcall 37 .............................. return VOID
  [645] ret
end

on resolveMembers me
  [  0] getprop 546 ............................. <pPersistentFurniData>
  [  3] pusharglist 1 ........................... <pPersistentFurniData>
  [  5] extcall 78 .............................. <voidp(pPersistentFurniData)>
  [  7] jmpifz [ 29] ............................ if voidp(pPersistentFurniData) then
  [ 10] pushcons 14 ............................. <"dynamicdownloader">
  [ 12] pusharglist 1 ........................... <"dynamicdownloader">
  [ 14] extcall 471 ............................. <getThread("dynamicdownloader")>
  [ 17] pusharglist 1 ........................... <getThread("dynamicdownloader")>
  [ 19] objcall 170 ............................. <getThread("dynamicdownloader").getComponent()>
  [ 21] pusharglist 1 ........................... <getThread("dynamicdownloader").getComponent()>
  [ 23] objcall 564 ............................. <getThread("dynamicdownloader").getComponent().getPersistentFurniDataObject()>
  [ 26] setprop 546 ............................. pPersistentFurniData = getThread("dynamicdownloader").getComponent().getPersistentFurniDataObject()
  [ 29] getprop 565 ............................. <pPersistentCatalogData>
  [ 32] pusharglist 1 ........................... <pPersistentCatalogData>
  [ 34] extcall 78 .............................. <voidp(pPersistentCatalogData)>
  [ 36] jmpifz [ 58] ............................ if voidp(pPersistentCatalogData) then
  [ 39] pushcons 15 ............................. <"catalogue">
  [ 41] pusharglist 1 ........................... <"catalogue">
  [ 43] extcall 471 ............................. <getThread("catalogue")>
  [ 46] pusharglist 1 ........................... <getThread("catalogue")>
  [ 48] objcall 170 ............................. <getThread("catalogue").getComponent()>
  [ 50] pusharglist 1 ........................... <getThread("catalogue").getComponent()>
  [ 52] objcall 299 ............................. <getThread("catalogue").getComponent().getPersistentCatalogDataObject()>
  [ 55] setprop 565 ............................. pPersistentCatalogData = getThread("catalogue").getComponent().getPersistentCatalogDataObject()
  [ 58] pusharglist 0 ........................... <[]>
  [ 60] pushlist ................................ <[]>
  [ 61] setlocal 0 .............................. tObjectLoadList = []
  [ 63] getprop 44 .............................. <pStripData>
  [ 65] pusharglist 1 ........................... <pStripData>
  [ 67] extcall 78 .............................. <voidp(pStripData)>
  [ 69] jmpifz [ 87] ............................ if voidp(pStripData) then
  [ 72] getparam 0 .............................. <me>
  [ 74] pushcons 16 ............................. <"Stripdata missing">
  [ 76] pushsymb 695 ............................ <#resolveMembers>
  [ 79] pusharglist 3 ........................... <me, "Stripdata missing", #resolveMembers>
  [ 81] extcall 46 .............................. <error(me, "Stripdata missing", #resolveMembers)>
  [ 83] pusharglistnoret 1 ...................... <error(me, "Stripdata missing", #resolveMembers)>
  [ 85] extcall 37 .............................. return error(me, "Stripdata missing", #resolveMembers)
  [ 87] pushint8 1 .............................. <1>
  [ 89] setprop 616 ............................. pDealNumber = 1
  [ 92] pushzero ................................ <0>
  [ 93] setlocal 1 .............................. i = 0
  [ 95] getprop 44 .............................. <pStripData>
  [ 97] peek 0
  [ 99] pusharglist 1
  [101] extcall 48
  [103] pushint8 1
  [105] peek 0
  [107] peek 2
  [109] lteq
  [110] jmpifz [582] ............................ repeat with tProduct in pStripData
  [113] peek 2
  [115] peek 1
  [117] pusharglist 2
  [119] extcall 41
  [121] setlocal 2
  [123] getlocal 1 .............................. <i>
  [125] pushint8 1 .............................. <1>
  [127] add ..................................... <i + 1>
  [128] setlocal 1 .............................. i = i + 1
  [130] getlocal 2 .............................. <tProduct>
  [132] pusharglist 1 ........................... <tProduct>
  [134] objcall 59 .............................. <tProduct.getCount()>
  [136] pushint8 1 .............................. <1>
  [138] lt ...................................... <tProduct.getCount() < 1>
  [139] jmpifz [158] ............................ if tProduct.getCount() < 1 then
  [142] getparam 0 .............................. <me>
  [144] pushcons 17 ............................. <"Offer group contains no offers">
  [146] pushsymb 695 ............................ <#resolveMembers>
  [149] pushsymb 58 ............................. <#minor>
  [151] pusharglistnoret 4 ...................... <me, "Offer group contains no offers", #resolveMembers, #minor>
  [153] extcall 46 .............................. error(me, "Offer group contains no offers", #resolveMembers, #minor)
  [155] jmp [576] ............................... next repeat
  [158] getlocal 2 .............................. <tProduct>
  [160] pushint8 1 .............................. <1>
  [162] pusharglist 2 ........................... <tProduct, 1>
  [164] objcall 344 ............................. <tProduct.getOffer(1)>
  [167] pusharglist 1 ........................... <tProduct.getOffer(1)>
  [169] objcall 59 .............................. <tProduct.getOffer(1).getCount()>
  [171] pushint8 1 .............................. <1>
  [173] lt ...................................... <tProduct.getOffer(1).getCount() < 1>
  [174] jmpifz [193] ............................ if tProduct.getOffer(1).getCount() < 1 then
  [177] getparam 0 .............................. <me>
  [179] pushcons 18 ............................. <"Offer at index 1 has no content">
  [181] pushsymb 695 ............................ <#resolveMembers>
  [184] pushsymb 58 ............................. <#minor>
  [186] pusharglistnoret 4 ...................... <me, "Offer at index 1 has no content", #resolveMembers, #minor>
  [188] extcall 46 .............................. error(me, "Offer at index 1 has no content", #resolveMembers, #minor)
  [190] jmp [576] ............................... next repeat
  [193] getlocal 2 .............................. <tProduct>
  [195] pushint8 1 .............................. <1>
  [197] pusharglist 2 ........................... <tProduct, 1>
  [199] objcall 344 ............................. <tProduct.getOffer(1)>
  [202] setlocal 3 .............................. tOffer = tProduct.getOffer(1)
  [204] getparam 0 .............................. <me>
  [206] getlocal 3 .............................. <tOffer>
  [208] pusharglist 2 ........................... <me, tOffer>
  [210] objcall 5 ............................... <me.resolveSmallPreview(tOffer)>
  [212] setlocal 4 .............................. tSmallPrev = me.resolveSmallPreview(tOffer)
  [214] getlocal 4 .............................. <tSmallPrev>
  [216] pusharglist 1 ........................... <tSmallPrev>
  [218] extcall 43 .............................. <ilk(tSmallPrev)>
  [220] pushsymb 17 ............................. <#image>
  [222] eq ...................................... <ilk(tSmallPrev) = #image>
  [223] jmpifz [235] ............................ if ilk(tSmallPrev) = #image then
  [226] getlocal 2 .............................. <tProduct>
  [228] getlocal 4 .............................. <tSmallPrev>
  [230] pusharglistnoret 2 ...................... <tProduct, tSmallPrev>
  [232] objcall 637 ............................. tProduct.setSmallPreview(tSmallPrev)
  [235] getlocal 3 .............................. <tOffer>
  [237] pusharglist 1 ........................... <tOffer>
  [239] objcall 59 .............................. <tOffer.getCount()>
  [241] pushint8 1 .............................. <1>
  [243] eq ...................................... <tOffer.getCount() = 1>
  [244] jmpifz [397] ............................ if tOffer.getCount() = 1 then
  [247] getprop 546 ............................. <pPersistentFurniData>
  [250] getlocal 3 .............................. <tOffer>
  [252] pushint8 1 .............................. <1>
  [254] pusharglist 2 ........................... <tOffer, 1>
  [256] objcall 60 .............................. <tOffer.getContent(1)>
  [258] pusharglist 1 ........................... <tOffer.getContent(1)>
  [260] objcall 61 .............................. <tOffer.getContent(1).getType()>
  [262] getlocal 3 .............................. <tOffer>
  [264] pushint8 1 .............................. <1>
  [266] pusharglist 2 ........................... <tOffer, 1>
  [268] objcall 60 .............................. <tOffer.getContent(1)>
  [270] pusharglist 1 ........................... <tOffer.getContent(1)>
  [272] objcall 62 .............................. <tOffer.getContent(1).getClassId()>
  [274] pusharglist 3 ........................... <pPersistentFurniData, tOffer.getContent(1).getType(), tOffer.getContent(1).getClassId()>
  [276] objcall 487 ............................. <pPersistentFurniData.getProps(tOffer.getContent(1).getType(), tOffer.getContent(1).getClassId())>
  [279] setlocal 5 .............................. tFurniProps = pPersistentFurniData.getProps(tOffer.getContent(1).getType(), tOffer.getContent(1).getClassId())
  [281] getlocal 5 .............................. <tFurniProps>
  [283] pusharglist 1 ........................... <tFurniProps>
  [285] extcall 349 ............................. <listp(tFurniProps)>
  [288] not ..................................... <not listp(tFurniProps)>
  [289] jmpifz [295] ............................ if not listp(tFurniProps) then
  [292] jmp [576] ............................... next repeat
  [295] getparam 0 .............................. <me>
  [297] getlocal 5 .............................. <tFurniProps>
  [299] pushsymb 268 ............................ <#class>
  [302] pusharglist 2 ........................... <tFurniProps, #class>
  [304] objcall 102 ............................. <tFurniProps.getaProp(#class)>
  [306] pusharglist 2 ........................... <me, tFurniProps.getaProp(#class)>
  [308] objcall 149 ............................. <me.getClassAsset(tFurniProps.getaProp(#class))>
  [310] setlocal 6 .............................. tClass = me.getClassAsset(tFurniProps.getaProp(#class))
  [312] getlocal 6 .............................. <tClass>
  [314] pushcons 9 .............................. <"poster">
  [316] eq ...................................... <tClass = "poster">
  [317] jmpifz [338] ............................ if tClass = "poster" then
  [320] getlocal 6 .............................. <tClass>
  [322] getlocal 3 .............................. <tOffer>
  [324] pushint8 1 .............................. <1>
  [326] pusharglist 2 ........................... <tOffer, 1>
  [328] objcall 60 .............................. <tOffer.getContent(1)>
  [330] pusharglist 1 ........................... <tOffer.getContent(1)>
  [332] objcall 548 ............................. <tOffer.getContent(1).getExtraParam()>
  [335] joinpadstr .............................. <tClass && tOffer.getContent(1).getExtraParam()>
  [336] setlocal 6 .............................. tClass = tClass && tOffer.getContent(1).getExtraParam()
  [338] pushsymb 472 ............................ <#dynamicdownloader>
  [341] pusharglist 1 ........................... <#dynamicdownloader>
  [343] extcall 471 ............................. <getThread(#dynamicdownloader)>
  [346] pusharglist 1 ........................... <getThread(#dynamicdownloader)>
  [348] objcall 170 ............................. <getThread(#dynamicdownloader).getComponent()>
  [350] getlocal 6 .............................. <tClass>
  [352] pusharglist 2 ........................... <getThread(#dynamicdownloader).getComponent(), tClass>
  [354] objcall 582 ............................. <getThread(#dynamicdownloader).getComponent().isAssetDownloaded(tClass)>
  [357] not ..................................... <not getThread(#dynamicdownloader).getComponent().isAssetDownloaded(tClass)>
  [358] jmpifz [397] ............................ if not getThread(#dynamicdownloader).getComponent().isAssetDownloaded(tClass) then
  [361] getlocal 0 .............................. <tObjectLoadList>
  [363] pushsymb 473 ............................ <#assetId>
  [366] getlocal 6 .............................. <tClass>
  [368] pushsymb 399 ............................ <#type>
  [371] pushsymb 478 ............................ <#furni>
  [374] pushsymb 100 ............................ <#props>
  [376] pushsymb 105 ............................ <#itemIndex>
  [378] getlocal 1 .............................. <i>
  [380] pushsymb 103 ............................ <#pageid>
  [382] getparam 0 .............................. <me>
  [384] getobjprop 104 .......................... <me.pPageId>
  [386] pusharglist 4 ........................... <[#itemIndex: i, #pageid: me.pPageId]>
  [388] pushproplist ............................ <[#itemIndex: i, #pageid: me.pPageId]>
  [389] pusharglist 6 ........................... <[#assetId: tClass, #type: #furni, #props: [#itemIndex: i, #pageid: me.pPageId]]>
  [391] pushproplist ............................ <[#assetId: tClass, #type: #furni, #props: [#itemIndex: i, #pageid: me.pPageId]]>
  [392] pusharglistnoret 2 ...................... <tObjectLoadList, [#assetId: tClass, #type: #furni, #props: [#itemIndex: i, #pageid: me.pPageId]]>
  [394] objcall 339 ............................. tObjectLoadList.add([#assetId: tClass, #type: #furni, #props: [#itemIndex: i, #pageid: me.pPageId]])
  [397] getlocal 3 .............................. <tOffer>
  [399] pusharglist 1 ........................... <tOffer>
  [401] objcall 59 .............................. <tOffer.getCount()>
  [403] pushint8 1 .............................. <1>
  [405] gt ...................................... <tOffer.getCount() > 1>
  [406] jmpifz [576] ............................ if tOffer.getCount() > 1 then
  [409] pushint8 1 .............................. <1>
  [411] setlocal 1
  [413] getlocal 1
  [415] getlocal 3 .............................. <tOffer>
  [417] pusharglist 1 ........................... <tOffer>
  [419] objcall 59 .............................. <tOffer.getCount()>
  [421] lteq
  [422] jmpifz [576] ............................ repeat with i = 1 to tOffer.getCount()
  [425] getlocal 3 .............................. <tOffer>
  [427] getlocal 1 .............................. <i>
  [429] pusharglist 2 ........................... <tOffer, i>
  [431] objcall 60 .............................. <tOffer.getContent(i)>
  [433] setlocal 7 .............................. tDealItem = tOffer.getContent(i)
  [435] getprop 546 ............................. <pPersistentFurniData>
  [438] getlocal 7 .............................. <tDealItem>
  [440] pusharglist 1 ........................... <tDealItem>
  [442] objcall 61 .............................. <tDealItem.getType()>
  [444] getlocal 7 .............................. <tDealItem>
  [446] pusharglist 1 ........................... <tDealItem>
  [448] objcall 62 .............................. <tDealItem.getClassId()>
  [450] pusharglist 3 ........................... <pPersistentFurniData, tDealItem.getType(), tDealItem.getClassId()>
  [452] objcall 487 ............................. <pPersistentFurniData.getProps(tDealItem.getType(), tDealItem.getClassId())>
  [455] setlocal 5 .............................. tFurniProps = pPersistentFurniData.getProps(tDealItem.getType(), tDealItem.getClassId())
  [457] getlocal 5 .............................. <tFurniProps>
  [459] pusharglist 1 ........................... <tFurniProps>
  [461] extcall 349 ............................. <listp(tFurniProps)>
  [464] not ..................................... <not listp(tFurniProps)>
  [465] jmpifz [471] ............................ if not listp(tFurniProps) then
  [468] jmp [567] ............................... next repeat
  [471] getparam 0 .............................. <me>
  [473] getlocal 5 .............................. <tFurniProps>
  [475] pushsymb 268 ............................ <#class>
  [478] pusharglist 2 ........................... <tFurniProps, #class>
  [480] objcall 102 ............................. <tFurniProps.getaProp(#class)>
  [482] pusharglist 2 ........................... <me, tFurniProps.getaProp(#class)>
  [484] objcall 149 ............................. <me.getClassAsset(tFurniProps.getaProp(#class))>
  [486] setlocal 6 .............................. tClass = me.getClassAsset(tFurniProps.getaProp(#class))
  [488] getlocal 6 .............................. <tClass>
  [490] pushcons 9 .............................. <"poster">
  [492] eq ...................................... <tClass = "poster">
  [493] jmpifz [508] ............................ if tClass = "poster" then
  [496] getlocal 6 .............................. <tClass>
  [498] getlocal 7 .............................. <tDealItem>
  [500] pusharglist 1 ........................... <tDealItem>
  [502] objcall 548 ............................. <tDealItem.getExtraParam()>
  [505] joinpadstr .............................. <tClass && tDealItem.getExtraParam()>
  [506] setlocal 6 .............................. tClass = tClass && tDealItem.getExtraParam()
  [508] pushsymb 472 ............................ <#dynamicdownloader>
  [511] pusharglist 1 ........................... <#dynamicdownloader>
  [513] extcall 471 ............................. <getThread(#dynamicdownloader)>
  [516] pusharglist 1 ........................... <getThread(#dynamicdownloader)>
  [518] objcall 170 ............................. <getThread(#dynamicdownloader).getComponent()>
  [520] getlocal 6 .............................. <tClass>
  [522] pusharglist 2 ........................... <getThread(#dynamicdownloader).getComponent(), tClass>
  [524] objcall 582 ............................. <getThread(#dynamicdownloader).getComponent().isAssetDownloaded(tClass)>
  [527] not ..................................... <not getThread(#dynamicdownloader).getComponent().isAssetDownloaded(tClass)>
  [528] jmpifz [567] ............................ if not getThread(#dynamicdownloader).getComponent().isAssetDownloaded(tClass) then
  [531] getlocal 0 .............................. <tObjectLoadList>
  [533] pushsymb 473 ............................ <#assetId>
  [536] getlocal 6 .............................. <tClass>
  [538] pushsymb 399 ............................ <#type>
  [541] pushsymb 478 ............................ <#furni>
  [544] pushsymb 100 ............................ <#props>
  [546] pushsymb 105 ............................ <#itemIndex>
  [548] getlocal 1 .............................. <i>
  [550] pushsymb 103 ............................ <#pageid>
  [552] getparam 0 .............................. <me>
  [554] getobjprop 104 .......................... <me.pPageId>
  [556] pusharglist 4 ........................... <[#itemIndex: i, #pageid: me.pPageId]>
  [558] pushproplist ............................ <[#itemIndex: i, #pageid: me.pPageId]>
  [559] pusharglist 6 ........................... <[#assetId: tClass, #type: #furni, #props: [#itemIndex: i, #pageid: me.pPageId]]>
  [561] pushproplist ............................ <[#assetId: tClass, #type: #furni, #props: [#itemIndex: i, #pageid: me.pPageId]]>
  [562] pusharglistnoret 2 ...................... <tObjectLoadList, [#assetId: tClass, #type: #furni, #props: [#itemIndex: i, #pageid: me.pPageId]]>
  [564] objcall 339 ............................. tObjectLoadList.add([#assetId: tClass, #type: #furni, #props: [#itemIndex: i, #pageid: me.pPageId]])
  [567] pushint8 1
  [569] getlocal 1
  [571] add
  [572] setlocal 1
  [574] endrepeat [413]
  [576] pushint8 1
  [578] add
  [579] endrepeat [105]
  [582] pop 3
  [584] getlocal 0 .............................. <tObjectLoadList>
  [586] getobjprop 48 ........................... <tObjectLoadList.count>
  [588] pushzero ................................ <0>
  [589] gt ...................................... <tObjectLoadList.count > 0>
  [590] jmpifz [605] ............................ if tObjectLoadList.count > 0 then
  [593] getprop 313 ............................. <pPageItemDownloader>
  [596] getparam 0 .............................. <me>
  [598] pushsymb 10 ............................. <#downloadCompleted>
  [600] pusharglistnoret 3 ...................... <pPageItemDownloader, me, #downloadCompleted>
  [602] objcall 452 ............................. pPageItemDownloader.defineCallback(me, #downloadCompleted)
  [605] getlocal 0 .............................. <tObjectLoadList>
  [607] peek 0
  [609] pusharglist 1
  [611] extcall 48
  [613] pushint8 1
  [615] peek 0
  [617] peek 2
  [619] lteq
  [620] jmpifz [672] ............................ repeat with tLoadObject in tObjectLoadList
  [623] peek 2
  [625] peek 1
  [627] pusharglist 2
  [629] extcall 41
  [631] setlocal 8
  [633] getprop 313 ............................. <pPageItemDownloader>
  [636] getlocal 8 .............................. <tLoadObject>
  [638] pushsymb 399 ............................ <#type>
  [641] pusharglist 2 ........................... <tLoadObject, #type>
  [643] objcall 41 .............................. <tLoadObject[#type]>
  [645] getlocal 8 .............................. <tLoadObject>
  [647] pushsymb 473 ............................ <#assetId>
  [650] pusharglist 2 ........................... <tLoadObject, #assetId>
  [652] objcall 41 .............................. <tLoadObject[#assetId]>
  [654] getlocal 8 .............................. <tLoadObject>
  [656] pushsymb 100 ............................ <#props>
  [658] pusharglist 2 ........................... <tLoadObject, #props>
  [660] objcall 41 .............................. <tLoadObject[#props]>
  [662] pusharglistnoret 4 ...................... <pPageItemDownloader, tLoadObject[#type], tLoadObject[#assetId], tLoadObject[#props]>
  [664] objcall 455 ............................. pPageItemDownloader.registerDownload(tLoadObject[#type], tLoadObject[#assetId], tLoadObject[#props])
  [667] pushint8 1
  [669] add
  [670] endrepeat [615]
  [672] pop 3
  [674] ret
end

on getClassAsset me, tClassName
  [  0] getparam 1 .............................. <tClassName>
  [  2] pusharglist 1 ........................... <tClassName>
  [  4] extcall 43 .............................. <ilk(tClassName)>
  [  6] pushsymb 291 ............................ <#string>
  [  9] nteq .................................... <ilk(tClassName) <> #string>
  [ 10] jmpifz [ 19] ............................ if ilk(tClassName) <> #string then
  [ 13] pushcons 19 ............................. <EMPTY>
  [ 15] pusharglistnoret 1 ...................... <EMPTY>
  [ 17] extcall 37 .............................. return EMPTY
  [ 19] getparam 1 .............................. <tClassName>
  [ 21] setlocal 0 .............................. tClass = tClassName
  [ 23] getlocal 0 .............................. <tClass>
  [ 25] pushcons 20 ............................. <"*">
  [ 27] containsstr ............................. <tClass contains "*">
  [ 28] jmpifz [ 56] ............................ if tClass contains "*" then
  [ 31] getlocal 0 .............................. <tClass>
  [ 33] pushsymb 292 ............................ <#char>
  [ 36] pushint8 1 .............................. <1>
  [ 38] pushcons 20 ............................. <"*">
  [ 40] getlocal 0 .............................. <tClass>
  [ 42] pusharglist 2 ........................... <"*", tClass>
  [ 44] extcall 293 ............................. <offset("*", tClass)>
  [ 47] pushint8 1 .............................. <1>
  [ 49] sub ..................................... <offset("*", tClass) - 1>
  [ 50] pusharglist 4 ........................... <tClass, #char, 1, offset("*", tClass) - 1>
  [ 52] objcall 123 ............................. <tClass.char[1..offset("*", tClass) - 1]>
  [ 54] setlocal 0 .............................. tClass = tClass.char[1..offset("*", tClass) - 1]
  [ 56] getlocal 0 .............................. <tClass>
  [ 58] pusharglistnoret 1 ...................... <tClass>
  [ 60] extcall 37 .............................. return tClass
  [ 62] ret
end

on downloadCompleted me, tProps
  [  0] getparam 1 .............................. <tProps>
  [  2] pushsymb 100 ............................ <#props>
  [  4] pusharglist 2 ........................... <tProps, #props>
  [  6] objcall 41 .............................. <tProps[#props]>
  [  8] pushsymb 101 ............................ <#imagedownload>
  [ 10] pusharglist 2 ........................... <tProps[#props], #imagedownload>
  [ 12] objcall 102 ............................. <tProps[#props].getaProp(#imagedownload)>
  [ 14] jmpifz [ 21] ............................ if tProps[#props].getaProp(#imagedownload) then
  [ 17] pusharglistnoret 0 ...................... <>
  [ 19] extcall 37 .............................. return 
  [ 21] getparam 1 .............................. <tProps>
  [ 23] pushsymb 100 ............................ <#props>
  [ 25] pusharglist 2 ........................... <tProps, #props>
  [ 27] objcall 41 .............................. <tProps[#props]>
  [ 29] pushsymb 103 ............................ <#pageid>
  [ 31] pusharglist 2 ........................... <tProps[#props], #pageid>
  [ 33] objcall 102 ............................. <tProps[#props].getaProp(#pageid)>
  [ 35] getparam 0 .............................. <me>
  [ 37] getobjprop 104 .......................... <me.pPageId>
  [ 39] nteq .................................... <tProps[#props].getaProp(#pageid) <> me.pPageId>
  [ 40] jmpifz [ 47] ............................ if tProps[#props].getaProp(#pageid) <> me.pPageId then
  [ 43] pusharglistnoret 0 ...................... <>
  [ 45] extcall 37 .............................. return 
  [ 47] getprop 44 .............................. <pStripData>
  [ 49] pusharglist 1 ........................... <pStripData>
  [ 51] extcall 43 .............................. <ilk(pStripData)>
  [ 53] pushsymb 45 ............................. <#propList>
  [ 55] nteq .................................... <ilk(pStripData) <> #propList>
  [ 56] jmpifz [ 63] ............................ if ilk(pStripData) <> #propList then
  [ 59] pusharglistnoret 0 ...................... <>
  [ 61] extcall 37 .............................. return 
  [ 63] getparam 1 .............................. <tProps>
  [ 65] pushsymb 100 ............................ <#props>
  [ 67] pusharglist 2 ........................... <tProps, #props>
  [ 69] objcall 41 .............................. <tProps[#props]>
  [ 71] pushsymb 105 ............................ <#itemIndex>
  [ 73] pusharglist 2 ........................... <tProps[#props], #itemIndex>
  [ 75] objcall 41 .............................. <tProps[#props][#itemIndex]>
  [ 77] setlocal 0 .............................. tItemIndex = tProps[#props][#itemIndex]
  [ 79] getlocal 0 .............................. <tItemIndex>
  [ 81] pusharglist 1 ........................... <tItemIndex>
  [ 83] extcall 78 .............................. <voidp(tItemIndex)>
  [ 85] jmpifz [ 92] ............................ if voidp(tItemIndex) then
  [ 88] pusharglistnoret 0 ...................... <>
  [ 90] extcall 37 .............................. return 
  [ 92] getprop 44 .............................. <pStripData>
  [ 94] getobjprop 48 ........................... <pStripData.count>
  [ 96] getlocal 0 .............................. <tItemIndex>
  [ 98] lt ...................................... <pStripData.count < tItemIndex>
  [ 99] jmpifz [106] ............................ if pStripData.count < tItemIndex then
  [102] pusharglistnoret 0 ...................... <>
  [104] extcall 37 .............................. return 
  [106] getprop 44 .............................. <pStripData>
  [108] getlocal 0 .............................. <tItemIndex>
  [110] pusharglist 2 ........................... <pStripData, tItemIndex>
  [112] objcall 41 .............................. <pStripData[tItemIndex]>
  [114] pusharglist 1 ........................... <pStripData[tItemIndex]>
  [116] objcall 59 .............................. <pStripData[tItemIndex].getCount()>
  [118] pushint8 1 .............................. <1>
  [120] lt ...................................... <pStripData[tItemIndex].getCount() < 1>
  [121] jmpifz [140] ............................ if pStripData[tItemIndex].getCount() < 1 then
  [124] getparam 0 .............................. <me>
  [126] pushcons 21 ............................. <"Offergroup contains no offers">
  [128] pushsymb 10 ............................. <#downloadCompleted>
  [130] pushsymb 47 ............................. <#major>
  [132] pusharglist 4 ........................... <me, "Offergroup contains no offers", #downloadCompleted, #major>
  [134] extcall 46 .............................. <error(me, "Offergroup contains no offers", #downloadCompleted, #major)>
  [136] pusharglistnoret 1 ...................... <error(me, "Offergroup contains no offers", #downloadCompleted, #major)>
  [138] extcall 37 .............................. return error(me, "Offergroup contains no offers", #downloadCompleted, #major)
  [140] getparam 0 .............................. <me>
  [142] getprop 44 .............................. <pStripData>
  [144] getlocal 0 .............................. <tItemIndex>
  [146] pusharglist 2 ........................... <pStripData, tItemIndex>
  [148] objcall 41 .............................. <pStripData[tItemIndex]>
  [150] pushint8 1 .............................. <1>
  [152] pusharglist 2 ........................... <pStripData[tItemIndex], 1>
  [154] objcall 344 ............................. <pStripData[tItemIndex].getOffer(1)>
  [157] pusharglist 2 ........................... <me, pStripData[tItemIndex].getOffer(1)>
  [159] objcall 5 ............................... <me.resolveSmallPreview(pStripData[tItemIndex].getOffer(1))>
  [161] setlocal 1 .............................. tSmallPrev = me.resolveSmallPreview(pStripData[tItemIndex].getOffer(1))
  [163] getlocal 1 .............................. <tSmallPrev>
  [165] pusharglist 1 ........................... <tSmallPrev>
  [167] extcall 43 .............................. <ilk(tSmallPrev)>
  [169] pushsymb 17 ............................. <#image>
  [171] eq ...................................... <ilk(tSmallPrev) = #image>
  [172] jmpifz [190] ............................ if ilk(tSmallPrev) = #image then
  [175] getprop 44 .............................. <pStripData>
  [177] getlocal 0 .............................. <tItemIndex>
  [179] pusharglist 2 ........................... <pStripData, tItemIndex>
  [181] objcall 41 .............................. <pStripData[tItemIndex]>
  [183] getlocal 1 .............................. <tSmallPrev>
  [185] pusharglistnoret 2 ...................... <pStripData[tItemIndex], tSmallPrev>
  [187] objcall 637 ............................. pStripData[tItemIndex].setSmallPreview(tSmallPrev)
  [190] pusharglistnoret 0 ...................... <>
  [192] extcall 37 .............................. return 
  [194] ret
end

on convertOfferListToDeallist me, tOffer
  [  0] getparam 1 .............................. <tOffer>
  [  2] pusharglist 1 ........................... <tOffer>
  [  4] extcall 57 .............................. <objectp(tOffer)>
  [  6] not ..................................... <not objectp(tOffer)>
  [  7] jmpifz [ 27] ............................ if not objectp(tOffer) then
  [ 10] getparam 0 .............................. <me>
  [ 12] pushcons 4 .............................. <"Invalid input format">
  [ 14] pushsymb 526 ............................ <#convertOfferListToDeallist>
  [ 17] pushsymb 47 ............................. <#major>
  [ 19] pusharglist 4 ........................... <me, "Invalid input format", #convertOfferListToDeallist, #major>
  [ 21] extcall 46 .............................. <error(me, "Invalid input format", #convertOfferListToDeallist, #major)>
  [ 23] pusharglistnoret 1 ...................... <error(me, "Invalid input format", #convertOfferListToDeallist, #major)>
  [ 25] extcall 37 .............................. return error(me, "Invalid input format", #convertOfferListToDeallist, #major)
  [ 27] getparam 1 .............................. <tOffer>
  [ 29] pusharglist 1 ........................... <tOffer>
  [ 31] objcall 59 .............................. <tOffer.getCount()>
  [ 33] pushint8 1 .............................. <1>
  [ 35] lt ...................................... <tOffer.getCount() < 1>
  [ 36] jmpifz [ 52] ............................ if tOffer.getCount() < 1 then
  [ 39] getparam 0 .............................. <me>
  [ 41] pushcons 5 .............................. <"Offer has no content">
  [ 43] pushsymb 526 ............................ <#convertOfferListToDeallist>
  [ 46] pushsymb 58 ............................. <#minor>
  [ 48] pusharglistnoret 4 ...................... <me, "Offer has no content", #convertOfferListToDeallist, #minor>
  [ 50] extcall 46 .............................. error(me, "Offer has no content", #convertOfferListToDeallist, #minor)
  [ 52] getparam 0 .............................. <me>
  [ 54] getobjprop 546 .......................... <me.pPersistentFurniData>
  [ 57] pusharglist 1 ........................... <me.pPersistentFurniData>
  [ 59] extcall 57 .............................. <objectp(me.pPersistentFurniData)>
  [ 61] not ..................................... <not objectp(me.pPersistentFurniData)>
  [ 62] jmpifz [ 85] ............................ if not objectp(me.pPersistentFurniData) then
  [ 65] getparam 0 .............................. <me>
  [ 67] pushcons 22 ............................. <"Persistent furnidata object is missing">
  [ 69] pushsymb 526 ............................ <#convertOfferListToDeallist>
  [ 72] pushsymb 47 ............................. <#major>
  [ 74] pusharglistnoret 4 ...................... <me, "Persistent furnidata object is missing", #convertOfferListToDeallist, #major>
  [ 76] extcall 46 .............................. error(me, "Persistent furnidata object is missing", #convertOfferListToDeallist, #major)
  [ 78] pusharglist 0 ........................... <[]>
  [ 80] pushlist ................................ <[]>
  [ 81] pusharglistnoret 1 ...................... <[]>
  [ 83] extcall 37 .............................. return []
  [ 85] pusharglist 0 ........................... <[]>
  [ 87] pushlist ................................ <[]>
  [ 88] setlocal 0 .............................. tDealList = []
  [ 90] pushint8 1 .............................. <1>
  [ 92] setlocal 1
  [ 94] getlocal 1
  [ 96] getparam 1 .............................. <tOffer>
  [ 98] pusharglist 1 ........................... <tOffer>
  [100] objcall 59 .............................. <tOffer.getCount()>
  [102] lteq
  [103] jmpifz [235] ............................ repeat with i = 1 to tOffer.getCount()
  [106] getparam 0 .............................. <me>
  [108] getchainedprop 546 ...................... <me.pPersistentFurniData>
  [111] getparam 1 .............................. <tOffer>
  [113] getlocal 1 .............................. <i>
  [115] pusharglist 2 ........................... <tOffer, i>
  [117] objcall 60 .............................. <tOffer.getContent(i)>
  [119] pusharglist 1 ........................... <tOffer.getContent(i)>
  [121] objcall 61 .............................. <tOffer.getContent(i).getType()>
  [123] getparam 1 .............................. <tOffer>
  [125] getlocal 1 .............................. <i>
  [127] pusharglist 2 ........................... <tOffer, i>
  [129] objcall 60 .............................. <tOffer.getContent(i)>
  [131] pusharglist 1 ........................... <tOffer.getContent(i)>
  [133] objcall 62 .............................. <tOffer.getContent(i).getClassId()>
  [135] pusharglist 3 ........................... <me.pPersistentFurniData, tOffer.getContent(i).getType(), tOffer.getContent(i).getClassId()>
  [137] objcall 487 ............................. <me.pPersistentFurniData.getProps(tOffer.getContent(i).getType(), tOffer.getContent(i).getClassId())>
  [140] setlocal 2 .............................. tFurniProps = me.pPersistentFurniData.getProps(tOffer.getContent(i).getType(), tOffer.getContent(i).getClassId())
  [142] getlocal 2 .............................. <tFurniProps>
  [144] pusharglist 1 ........................... <tFurniProps>
  [146] extcall 78 .............................. <voidp(tFurniProps)>
  [148] jmpifz [177] ............................ if voidp(tFurniProps) then
  [151] getlocal 0 .............................. <tDealList>
  [153] pushsymb 268 ............................ <#class>
  [156] pushcons 19 ............................. <EMPTY>
  [158] pushsymb 547 ............................ <#partColors>
  [161] pushcons 19 ............................. <EMPTY>
  [163] pushsymb 48 ............................. <#count>
  [165] pushzero ................................ <0>
  [166] pusharglist 6 ........................... <[#class: EMPTY, #partColors: EMPTY, #count: 0]>
  [168] pushproplist ............................ <[#class: EMPTY, #partColors: EMPTY, #count: 0]>
  [169] pusharglistnoret 2 ...................... <tDealList, [#class: EMPTY, #partColors: EMPTY, #count: 0]>
  [171] objcall 339 ............................. tDealList.add([#class: EMPTY, #partColors: EMPTY, #count: 0])
  [174] jmp [226] ............................... next repeat
  [177] getlocal 0 .............................. <tDealList>
  [179] pushsymb 268 ............................ <#class>
  [182] getlocal 2 .............................. <tFurniProps>
  [184] pushsymb 268 ............................ <#class>
  [187] pusharglist 2 ........................... <tFurniProps, #class>
  [189] objcall 41 .............................. <tFurniProps[#class]>
  [191] pushsymb 547 ............................ <#partColors>
  [194] getlocal 2 .............................. <tFurniProps>
  [196] pushsymb 547 ............................ <#partColors>
  [199] pusharglist 2 ........................... <tFurniProps, #partColors>
  [201] objcall 41 .............................. <tFurniProps[#partColors]>
  [203] pushsymb 48 ............................. <#count>
  [205] getparam 1 .............................. <tOffer>
  [207] getlocal 1 .............................. <i>
  [209] pusharglist 2 ........................... <tOffer, i>
  [211] objcall 60 .............................. <tOffer.getContent(i)>
  [213] pusharglist 1 ........................... <tOffer.getContent(i)>
  [215] objcall 549 ............................. <tOffer.getContent(i).getProductCount()>
  [218] pusharglist 6 ........................... <[#class: tFurniProps[#class], #partColors: tFurniProps[#partColors], #count: tOffer.getContent(i).getProductCount()]>
  [220] pushproplist ............................ <[#class: tFurniProps[#class], #partColors: tFurniProps[#partColors], #count: tOffer.getContent(i).getProductCount()]>
  [221] pusharglistnoret 2 ...................... <tDealList, [#class: tFurniProps[#class], #partColors: tFurniProps[#partColors], #count: tOffer.getContent(i).getProductCount()]>
  [223] objcall 339 ............................. tDealList.add([#class: tFurniProps[#class], #partColors: tFurniProps[#partColors], #count: tOffer.getContent(i).getProductCount()])
  [226] pushint8 1
  [228] getlocal 1
  [230] add
  [231] setlocal 1
  [233] endrepeat [ 94]
  [235] getlocal 0 .............................. <tDealList>
  [237] pusharglistnoret 1 ...................... <tDealList>
  [239] extcall 37 .............................. return tDealList
  [241] ret
end
