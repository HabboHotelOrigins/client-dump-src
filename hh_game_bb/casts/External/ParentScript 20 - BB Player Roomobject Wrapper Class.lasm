property pRoomIndex, pRoomComponentObj

on construct me
  [  0] pushint8 1 .............................. <1>
  [  2] pusharglistnoret 1 ...................... <1>
  [  4] extcall 28 .............................. return 1
  [  6] ret
end

on deconstruct me
  [  0] getparam 0 .............................. <me>
  [  2] pusharglistnoret 1 ...................... <me>
  [  4] objcall 315 ............................. me.removeRoomObject()
  [  7] pusharglist 0 ........................... <>
  [  9] extcall 116 ............................. <VOID>
  [ 11] setprop 415 ............................. pRoomComponentObj = VOID
  [ 14] pushsymb 304 ............................ <#session>
  [ 17] pusharglist 1 ........................... <#session>
  [ 19] extcall 166 ............................. <getObject(#session)>
  [ 21] pushcons 0 .............................. <"user_index">
  [ 23] pusharglist 2 ........................... <getObject(#session), "user_index">
  [ 25] objcall 305 ............................. <getObject(#session).exists("user_index")>
  [ 28] not ..................................... <not getObject(#session).exists("user_index")>
  [ 29] jmpifz [ 38] ............................ if not getObject(#session).exists("user_index") then
  [ 32] pushint8 1 .............................. <1>
  [ 34] pusharglistnoret 1 ...................... <1>
  [ 36] extcall 28 .............................. return 1
  [ 38] getprop 416 ............................. <pRoomIndex>
  [ 41] pushsymb 304 ............................ <#session>
  [ 44] pusharglist 1 ........................... <#session>
  [ 46] extcall 166 ............................. <getObject(#session)>
  [ 48] pushcons 0 .............................. <"user_index">
  [ 50] pusharglist 2 ........................... <getObject(#session), "user_index">
  [ 52] objcall 306 ............................. <getObject(#session).GET("user_index")>
  [ 55] eq ...................................... <pRoomIndex = getObject(#session).GET("user_index")>
  [ 56] jmpifz [104] ............................ if pRoomIndex = getObject(#session).GET("user_index") then
  [ 59] pushsymb 304 ............................ <#session>
  [ 62] pusharglist 1 ........................... <#session>
  [ 64] extcall 166 ............................. <getObject(#session)>
  [ 66] pushcons 0 .............................. <"user_index">
  [ 68] pusharglistnoret 2 ...................... <getObject(#session), "user_index">
  [ 70] objcall 417 ............................. getObject(#session).Remove("user_index")
  [ 73] pushsymb 304 ............................ <#session>
  [ 76] pusharglist 1 ........................... <#session>
  [ 78] extcall 166 ............................. <getObject(#session)>
  [ 80] pushcons 1 .............................. <"user_game_index">
  [ 82] pusharglist 2 ........................... <getObject(#session), "user_game_index">
  [ 84] objcall 305 ............................. <getObject(#session).exists("user_game_index")>
  [ 87] jmpifz [104] ............................ if getObject(#session).exists("user_game_index") then
  [ 90] pushsymb 304 ............................ <#session>
  [ 93] pusharglist 1 ........................... <#session>
  [ 95] extcall 166 ............................. <getObject(#session)>
  [ 97] pushcons 1 .............................. <"user_game_index">
  [ 99] pusharglistnoret 2 ...................... <getObject(#session), "user_game_index">
  [101] objcall 417 ............................. getObject(#session).Remove("user_game_index")
  [104] pushint8 1 .............................. <1>
  [106] pusharglistnoret 1 ...................... <1>
  [108] extcall 28 .............................. return 1
  [110] ret
end

on define me, tdata
  [  0] getparam 1 .............................. <tdata>
  [  2] pushsymb 418 ............................ <#room_index>
  [  5] getparam 1 .............................. <tdata>
  [  7] pushsymb 419 ............................ <#roomindex>
  [ 10] pusharglist 2 ........................... <tdata, #roomindex>
  [ 12] objcall 31 .............................. <tdata[#roomindex]>
  [ 14] pusharglistnoret 3 ...................... <tdata, #room_index, tdata[#roomindex]>
  [ 16] objcall 123 ............................. tdata[#room_index] = tdata[#roomindex]
  [ 18] getparam 1 .............................. <tdata>
  [ 20] pushsymb 418 ............................ <#room_index>
  [ 23] pusharglist 2 ........................... <tdata, #room_index>
  [ 25] objcall 31 .............................. <tdata[#room_index]>
  [ 27] pushzero ................................ <0>
  [ 28] lt ...................................... <tdata[#room_index] < 0>
  [ 29] jmpifz [ 49] ............................ if tdata[#room_index] < 0 then
  [ 32] getparam 0 .............................. <me>
  [ 34] pushcons 2 .............................. <"Invalid room index for avatar:">
  [ 36] getparam 1 .............................. <tdata>
  [ 38] joinpadstr .............................. <"Invalid room index for avatar:" && tdata>
  [ 39] pushsymb 135 ............................ <#define>
  [ 41] pusharglist 3 ........................... <me, "Invalid room index for avatar:" && tdata, #define>
  [ 43] extcall 173 ............................. <error(me, "Invalid room index for avatar:" && tdata, #define)>
  [ 45] pusharglistnoret 1 ...................... <error(me, "Invalid room index for avatar:" && tdata, #define)>
  [ 47] extcall 28 .............................. return error(me, "Invalid room index for avatar:" && tdata, #define)
  [ 49] getparam 1 .............................. <tdata>
  [ 51] pushsymb 418 ............................ <#room_index>
  [ 54] pusharglist 2 ........................... <tdata, #room_index>
  [ 56] objcall 31 .............................. <tdata[#room_index]>
  [ 58] pusharglist 1 ........................... <tdata[#room_index]>
  [ 60] extcall 420 ............................. <string(tdata[#room_index])>
  [ 63] setprop 416 ............................. pRoomIndex = string(tdata[#room_index])
  [ 66] getparam 1 .............................. <tdata>
  [ 68] pushsymb 278 ............................ <#name>
  [ 71] pusharglist 2 ........................... <tdata, #name>
  [ 73] objcall 31 .............................. <tdata[#name]>
  [ 75] pushsymb 304 ............................ <#session>
  [ 78] pusharglist 1 ........................... <#session>
  [ 80] extcall 166 ............................. <getObject(#session)>
  [ 82] pushsymb 421 ............................ <#userName>
  [ 85] pusharglist 2 ........................... <getObject(#session), #userName>
  [ 87] objcall 306 ............................. <getObject(#session).GET(#userName)>
  [ 90] eq ...................................... <tdata[#name] = getObject(#session).GET(#userName)>
  [ 91] jmpifz [133] ............................ if tdata[#name] = getObject(#session).GET(#userName) then
  [ 94] pushsymb 304 ............................ <#session>
  [ 97] pusharglist 1 ........................... <#session>
  [ 99] extcall 166 ............................. <getObject(#session)>
  [101] pushcons 0 .............................. <"user_index">
  [103] getprop 416 ............................. <pRoomIndex>
  [106] pusharglistnoret 3 ...................... <getObject(#session), "user_index", pRoomIndex>
  [108] objcall 388 ............................. getObject(#session).set("user_index", pRoomIndex)
  [111] pushsymb 304 ............................ <#session>
  [114] pusharglist 1 ........................... <#session>
  [116] extcall 166 ............................. <getObject(#session)>
  [118] pushcons 1 .............................. <"user_game_index">
  [120] getparam 1 .............................. <tdata>
  [122] pushsymb 197 ............................ <#id>
  [124] pusharglist 2 ........................... <tdata, #id>
  [126] objcall 31 .............................. <tdata[#id]>
  [128] pusharglistnoret 3 ...................... <getObject(#session), "user_game_index", tdata[#id]>
  [130] objcall 388 ............................. getObject(#session).set("user_game_index", tdata[#id])
  [133] getparam 0 .............................. <me>
  [135] getparam 1 .............................. <tdata>
  [137] pusharglist 2 ........................... <me, tdata>
  [139] objcall 314 ............................. <me.createRoomObject(tdata)>
  [142] pusharglistnoret 1 ...................... <me.createRoomObject(tdata)>
  [144] extcall 28 .............................. return me.createRoomObject(tdata)
  [146] ret
end

on setLocation me, tdata
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 346 ............................. <me.getRoomObject()>
  [  7] setlocal 0 .............................. tUserObject = me.getRoomObject()
  [  9] getlocal 0 .............................. <tUserObject>
  [ 11] pushzero ................................ <0>
  [ 12] eq ...................................... <tUserObject = 0>
  [ 13] jmpifz [ 21] ............................ if tUserObject = 0 then
  [ 16] pushzero ................................ <0>
  [ 17] pusharglistnoret 1 ...................... <0>
  [ 19] extcall 28 .............................. return 0
  [ 21] getparam 1 .............................. <tdata>
  [ 23] pusharglist 1 ........................... <tdata>
  [ 25] extcall 224 ............................. <listp(tdata)>
  [ 27] not ..................................... <not listp(tdata)>
  [ 28] jmpifz [ 36] ............................ if not listp(tdata) then
  [ 31] pushzero ................................ <0>
  [ 32] pusharglistnoret 1 ...................... <0>
  [ 34] extcall 28 .............................. return 0
  [ 36] getlocal 0 .............................. <tUserObject>
  [ 38] getparam 1 .............................. <tdata>
  [ 40] pushsymb 60 ............................. <#x>
  [ 42] pusharglist 2 ........................... <tdata, #x>
  [ 44] objcall 31 .............................. <tdata[#x]>
  [ 46] getparam 1 .............................. <tdata>
  [ 48] pushsymb 61 ............................. <#y>
  [ 50] pusharglist 2 ........................... <tdata, #y>
  [ 52] objcall 31 .............................. <tdata[#y]>
  [ 54] getparam 1 .............................. <tdata>
  [ 56] pushsymb 62 ............................. <#z>
  [ 58] pusharglist 2 ........................... <tdata, #z>
  [ 60] objcall 31 .............................. <tdata[#z]>
  [ 62] getparam 1 .............................. <tdata>
  [ 64] pushsymb 341 ............................ <#dirBody>
  [ 67] pusharglist 2 ........................... <tdata, #dirBody>
  [ 69] objcall 31 .............................. <tdata[#dirBody]>
  [ 71] getparam 1 .............................. <tdata>
  [ 73] pushsymb 341 ............................ <#dirBody>
  [ 76] pusharglist 2 ........................... <tdata, #dirBody>
  [ 78] objcall 31 .............................. <tdata[#dirBody]>
  [ 80] pusharglist 6 ........................... <tUserObject, tdata[#x], tdata[#y], tdata[#z], tdata[#dirBody], tdata[#dirBody]>
  [ 82] objcall 14 .............................. <tUserObject.resetValues(tdata[#x], tdata[#y], tdata[#z], tdata[#dirBody], tdata[#dirBody])>
  [ 84] pusharglistnoret 1 ...................... <tUserObject.resetValues(tdata[#x], tdata[#y], tdata[#z], tdata[#dirBody], tdata[#dirBody])>
  [ 86] extcall 28 .............................. return tUserObject.resetValues(tdata[#x], tdata[#y], tdata[#z], tdata[#dirBody], tdata[#dirBody])
  [ 88] ret
end

on setTarget me, tCurrentLoc, tNextLoc
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 346 ............................. <me.getRoomObject()>
  [  7] setlocal 0 .............................. tUserObject = me.getRoomObject()
  [  9] getlocal 0 .............................. <tUserObject>
  [ 11] pushzero ................................ <0>
  [ 12] eq ...................................... <tUserObject = 0>
  [ 13] jmpifz [ 21] ............................ if tUserObject = 0 then
  [ 16] pushzero ................................ <0>
  [ 17] pusharglistnoret 1 ...................... <0>
  [ 19] extcall 28 .............................. return 0
  [ 21] getparam 2 .............................. <tNextLoc>
  [ 23] pusharglist 1 ........................... <tNextLoc>
  [ 25] extcall 224 ............................. <listp(tNextLoc)>
  [ 27] jmpifz [ 85] ............................ if listp(tNextLoc) then
  [ 30] pushcons 3 .............................. <"mv ">
  [ 32] getparam 2 .............................. <tNextLoc>
  [ 34] pushsymb 60 ............................. <#x>
  [ 36] pusharglist 2 ........................... <tNextLoc, #x>
  [ 38] objcall 31 .............................. <tNextLoc[#x]>
  [ 40] joinstr ................................. <"mv " & tNextLoc[#x]>
  [ 41] pushcons 4 .............................. <",">
  [ 43] joinstr ................................. <"mv " & tNextLoc[#x] & ",">
  [ 44] getparam 2 .............................. <tNextLoc>
  [ 46] pushsymb 61 ............................. <#y>
  [ 48] pusharglist 2 ........................... <tNextLoc, #y>
  [ 50] objcall 31 .............................. <tNextLoc[#y]>
  [ 52] joinstr ................................. <"mv " & tNextLoc[#x] & "," & tNextLoc[#y]>
  [ 53] pushcons 4 .............................. <",">
  [ 55] joinstr ................................. <"mv " & tNextLoc[#x] & "," & tNextLoc[#y] & ",">
  [ 56] getparam 2 .............................. <tNextLoc>
  [ 58] pushsymb 62 ............................. <#z>
  [ 60] pusharglist 2 ........................... <tNextLoc, #z>
  [ 62] objcall 31 .............................. <tNextLoc[#z]>
  [ 64] joinstr ................................. <"mv " & tNextLoc[#x] & "," & tNextLoc[#y] & "," & tNextLoc[#z]>
  [ 65] setlocal 1 .............................. tParams = "mv " & tNextLoc[#x] & "," & tNextLoc[#y] & "," & tNextLoc[#z]
  [ 67] pushcons 5 .............................. <"action_mv">
  [ 69] pusharglist 1 ........................... <"action_mv">
  [ 71] extcall 423 ............................. <symbol("action_mv")>
  [ 74] getlocal 0 .............................. <tUserObject>
  [ 76] pusharglist 1 ........................... <[tUserObject]>
  [ 78] pushlist ................................ <[tUserObject]>
  [ 79] getlocal 1 .............................. <tParams>
  [ 81] pusharglistnoret 3 ...................... <symbol("action_mv"), [tUserObject], tParams>
  [ 83] extcall 103 ............................. call(symbol("action_mv"), [tUserObject], tParams)
  [ 85] getparam 1 .............................. <tCurrentLoc>
  [ 87] pusharglist 1 ........................... <tCurrentLoc>
  [ 89] extcall 224 ............................. <listp(tCurrentLoc)>
  [ 91] jmpifz [124] ............................ if listp(tCurrentLoc) then
  [ 94] getlocal 0 .............................. <tUserObject>
  [ 96] getparam 1 .............................. <tCurrentLoc>
  [ 98] pushsymb 60 ............................. <#x>
  [100] pusharglist 2 ........................... <tCurrentLoc, #x>
  [102] objcall 31 .............................. <tCurrentLoc[#x]>
  [104] getparam 1 .............................. <tCurrentLoc>
  [106] pushsymb 61 ............................. <#y>
  [108] pusharglist 2 ........................... <tCurrentLoc, #y>
  [110] objcall 31 .............................. <tCurrentLoc[#y]>
  [112] getparam 1 .............................. <tCurrentLoc>
  [114] pushsymb 62 ............................. <#z>
  [116] pusharglist 2 ........................... <tCurrentLoc, #z>
  [118] objcall 31 .............................. <tCurrentLoc[#z]>
  [120] pusharglistnoret 4 ...................... <tUserObject, tCurrentLoc[#x], tCurrentLoc[#y], tCurrentLoc[#z]>
  [122] objcall 13 .............................. tUserObject.Refresh(tCurrentLoc[#x], tCurrentLoc[#y], tCurrentLoc[#z])
  [124] pushint8 1 .............................. <1>
  [126] pusharglistnoret 1 ...................... <1>
  [128] extcall 28 .............................. return 1
  [130] ret
end

on roomObjectAction me, tAction, tdata
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 346 ............................. <me.getRoomObject()>
  [  7] setlocal 0 .............................. tUserObject = me.getRoomObject()
  [  9] getlocal 0 .............................. <tUserObject>
  [ 11] pushzero ................................ <0>
  [ 12] eq ...................................... <tUserObject = 0>
  [ 13] jmpifz [ 21] ............................ if tUserObject = 0 then
  [ 16] pushzero ................................ <0>
  [ 17] pusharglistnoret 1 ...................... <0>
  [ 19] extcall 28 .............................. return 0
  [ 21] getlocal 0 .............................. <tUserObject>
  [ 23] getparam 1 .............................. <tAction>
  [ 25] getparam 2 .............................. <tdata>
  [ 27] pusharglist 3 ........................... <tUserObject, tAction, tdata>
  [ 29] objcall 2 ............................... <tUserObject.roomObjectAction(tAction, tdata)>
  [ 31] pusharglistnoret 1 ...................... <tUserObject.roomObjectAction(tAction, tdata)>
  [ 33] extcall 28 .............................. return tUserObject.roomObjectAction(tAction, tdata)
  [ 35] ret
end

on getPicture me
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 346 ............................. <me.getRoomObject()>
  [  7] setlocal 0 .............................. tUserObject = me.getRoomObject()
  [  9] getlocal 0 .............................. <tUserObject>
  [ 11] pushzero ................................ <0>
  [ 12] eq ...................................... <tUserObject = 0>
  [ 13] jmpifz [ 21] ............................ if tUserObject = 0 then
  [ 16] pushzero ................................ <0>
  [ 17] pusharglistnoret 1 ...................... <0>
  [ 19] extcall 28 .............................. return 0
  [ 21] getlocal 0 .............................. <tUserObject>
  [ 23] pusharglist 1 ........................... <tUserObject>
  [ 25] objcall 12 .............................. <tUserObject.getPicture()>
  [ 27] pusharglistnoret 1 ...................... <tUserObject.getPicture()>
  [ 29] extcall 28 .............................. return tUserObject.getPicture()
  [ 31] ret
end

on getRoomObject me
  [  0] pushsymb 386 ............................ <#room_component>
  [  3] pusharglist 1 ........................... <#room_component>
  [  5] extcall 166 ............................. <getObject(#room_component)>
  [  7] setlocal 0 .............................. tRoomComponentObj = getObject(#room_component)
  [  9] getlocal 0 .............................. <tRoomComponentObj>
  [ 11] pushzero ................................ <0>
  [ 12] eq ...................................... <tRoomComponentObj = 0>
  [ 13] jmpifz [ 31] ............................ if tRoomComponentObj = 0 then
  [ 16] getparam 0 .............................. <me>
  [ 18] pushcons 6 .............................. <"Room component unavailable!">
  [ 20] pushsymb 346 ............................ <#getRoomObject>
  [ 23] pusharglist 3 ........................... <me, "Room component unavailable!", #getRoomObject>
  [ 25] extcall 173 ............................. <error(me, "Room component unavailable!", #getRoomObject)>
  [ 27] pusharglistnoret 1 ...................... <error(me, "Room component unavailable!", #getRoomObject)>
  [ 29] extcall 28 .............................. return error(me, "Room component unavailable!", #getRoomObject)
  [ 31] getlocal 0 .............................. <tRoomComponentObj>
  [ 33] getprop 416 ............................. <pRoomIndex>
  [ 36] pusharglist 2 ........................... <tRoomComponentObj, pRoomIndex>
  [ 38] objcall 426 ............................. <tRoomComponentObj.getUserObject(pRoomIndex)>
  [ 41] pusharglistnoret 1 ...................... <tRoomComponentObj.getUserObject(pRoomIndex)>
  [ 43] extcall 28 .............................. return tRoomComponentObj.getUserObject(pRoomIndex)
  [ 45] ret
end

on createRoomObject me, tdata
  [  0] pushsymb 386 ............................ <#room_component>
  [  3] pusharglist 1 ........................... <#room_component>
  [  5] extcall 166 ............................. <getObject(#room_component)>
  [  7] setprop 415 ............................. pRoomComponentObj = getObject(#room_component)
  [ 10] getprop 415 ............................. <pRoomComponentObj>
  [ 13] pushzero ................................ <0>
  [ 14] eq ...................................... <pRoomComponentObj = 0>
  [ 15] jmpifz [ 33] ............................ if pRoomComponentObj = 0 then
  [ 18] getparam 0 .............................. <me>
  [ 20] pushcons 6 .............................. <"Room component unavailable!">
  [ 22] pushsymb 314 ............................ <#createRoomObject>
  [ 25] pusharglist 3 ........................... <me, "Room component unavailable!", #createRoomObject>
  [ 27] extcall 173 ............................. <error(me, "Room component unavailable!", #createRoomObject)>
  [ 29] pusharglistnoret 1 ...................... <error(me, "Room component unavailable!", #createRoomObject)>
  [ 31] extcall 28 .............................. return error(me, "Room component unavailable!", #createRoomObject)
  [ 33] pushcons 7 .............................. <"Figure_System">
  [ 35] pusharglist 1 ........................... <"Figure_System">
  [ 37] extcall 166 ............................. <getObject("Figure_System")>
  [ 39] setlocal 0 .............................. tFigureSystemObj = getObject("Figure_System")
  [ 41] getlocal 0 .............................. <tFigureSystemObj>
  [ 43] pushzero ................................ <0>
  [ 44] eq ...................................... <tFigureSystemObj = 0>
  [ 45] jmpifz [ 63] ............................ if tFigureSystemObj = 0 then
  [ 48] getparam 0 .............................. <me>
  [ 50] pushcons 8 .............................. <"Figure system unavailable!">
  [ 52] pushsymb 314 ............................ <#createRoomObject>
  [ 55] pusharglist 3 ........................... <me, "Figure system unavailable!", #createRoomObject>
  [ 57] extcall 173 ............................. <error(me, "Figure system unavailable!", #createRoomObject)>
  [ 59] pusharglistnoret 1 ...................... <error(me, "Figure system unavailable!", #createRoomObject)>
  [ 61] extcall 28 .............................. return error(me, "Figure system unavailable!", #createRoomObject)
  [ 63] getprop 415 ............................. <pRoomComponentObj>
  [ 66] getprop 416 ............................. <pRoomIndex>
  [ 69] pusharglist 2 ........................... <pRoomComponentObj, pRoomIndex>
  [ 71] objcall 427 ............................. <pRoomComponentObj.userObjectExists(pRoomIndex)>
  [ 74] jmpifz [ 83] ............................ if pRoomComponentObj.userObjectExists(pRoomIndex) then
  [ 77] pushint8 1 .............................. <1>
  [ 79] pusharglistnoret 1 ...................... <1>
  [ 81] extcall 28 .............................. return 1
  [ 83] pusharglist 0 ........................... <[:]>
  [ 85] pushproplist ............................ <[:]>
  [ 86] setlocal 1 .............................. tAvatarStruct = [:]
  [ 88] pushcons 9 .............................. <"bb_gamesystem.roomobject.player.class">
  [ 90] setlocal 2 .............................. tClassID = "bb_gamesystem.roomobject.player.class"
  [ 92] getlocal 2 .............................. <tClassID>
  [ 94] pusharglist 1 ........................... <tClassID>
  [ 96] extcall 428 ............................. <getVariable(tClassID)>
  [ 99] setlocal 3 .............................. tPlayerClass = getVariable(tClassID)
  [101] getprop 415 ............................. <pRoomComponentObj>
  [104] pusharglist 1 ........................... <pRoomComponentObj>
  [106] objcall 387 ............................. <pRoomComponentObj.getClassContainer()>
  [109] setlocal 4 .............................. tClassContainer = pRoomComponentObj.getClassContainer()
  [111] getlocal 4 .............................. <tClassContainer>
  [113] pushzero ................................ <0>
  [114] eq ...................................... <tClassContainer = 0>
  [115] jmpifz [133] ............................ if tClassContainer = 0 then
  [118] getparam 0 .............................. <me>
  [120] pushcons 10 ............................. <"Unable to find class container.">
  [122] pushsymb 314 ............................ <#createRoomObject>
  [125] pusharglist 3 ........................... <me, "Unable to find class container.", #createRoomObject>
  [127] extcall 173 ............................. <error(me, "Unable to find class container.", #createRoomObject)>
  [129] pusharglistnoret 1 ...................... <error(me, "Unable to find class container.", #createRoomObject)>
  [131] extcall 28 .............................. return error(me, "Unable to find class container.", #createRoomObject)
  [133] getlocal 4 .............................. <tClassContainer>
  [135] getlocal 2 .............................. <tClassID>
  [137] getlocal 3 .............................. <tPlayerClass>
  [139] pusharglistnoret 3 ...................... <tClassContainer, tClassID, tPlayerClass>
  [141] objcall 388 ............................. tClassContainer.set(tClassID, tPlayerClass)
  [144] getlocal 1 .............................. <tAvatarStruct>
  [146] pushsymb 374 ............................ <#class>
  [149] getlocal 2 .............................. <tClassID>
  [151] pusharglistnoret 3 ...................... <tAvatarStruct, #class, tClassID>
  [153] objcall 138 ............................. tAvatarStruct.setaProp(#class, tClassID)
  [155] getparam 1 .............................. <tdata>
  [157] pushsymb 419 ............................ <#roomindex>
  [160] pusharglist 2 ........................... <tdata, #roomindex>
  [162] objcall 31 .............................. <tdata[#roomindex]>
  [164] pusharglist 1 ........................... <tdata[#roomindex]>
  [166] extcall 420 ............................. <string(tdata[#roomindex])>
  [169] setlocal 5 .............................. tUserStrId = string(tdata[#roomindex])
  [171] getlocal 1 .............................. <tAvatarStruct>
  [173] pushsymb 197 ............................ <#id>
  [175] getlocal 5 .............................. <tUserStrId>
  [177] pusharglistnoret 3 ...................... <tAvatarStruct, #id, tUserStrId>
  [179] objcall 352 ............................. tAvatarStruct.addProp(#id, tUserStrId)
  [182] getlocal 1 .............................. <tAvatarStruct>
  [184] pushsymb 278 ............................ <#name>
  [187] getparam 1 .............................. <tdata>
  [189] pushsymb 278 ............................ <#name>
  [192] pusharglist 2 ........................... <tdata, #name>
  [194] objcall 31 .............................. <tdata[#name]>
  [196] pusharglistnoret 3 ...................... <tAvatarStruct, #name, tdata[#name]>
  [198] objcall 352 ............................. tAvatarStruct.addProp(#name, tdata[#name])
  [201] getlocal 1 .............................. <tAvatarStruct>
  [203] pushsymb 383 ............................ <#direction>
  [206] getparam 1 .............................. <tdata>
  [208] pushsymb 341 ............................ <#dirBody>
  [211] pusharglist 2 ........................... <tdata, #dirBody>
  [213] objcall 31 .............................. <tdata[#dirBody]>
  [215] pushzero ................................ <0>
  [216] pusharglist 2 ........................... <[tdata[#dirBody], 0]>
  [218] pushlist ................................ <[tdata[#dirBody], 0]>
  [219] pusharglistnoret 3 ...................... <tAvatarStruct, #direction, [tdata[#dirBody], 0]>
  [221] objcall 352 ............................. tAvatarStruct.addProp(#direction, [tdata[#dirBody], 0])
  [224] getlocal 1 .............................. <tAvatarStruct>
  [226] pushsymb 60 ............................. <#x>
  [228] getparam 1 .............................. <tdata>
  [230] pushsymb 60 ............................. <#x>
  [232] pusharglist 2 ........................... <tdata, #x>
  [234] objcall 31 .............................. <tdata[#x]>
  [236] pusharglistnoret 3 ...................... <tAvatarStruct, #x, tdata[#x]>
  [238] objcall 352 ............................. tAvatarStruct.addProp(#x, tdata[#x])
  [241] getlocal 1 .............................. <tAvatarStruct>
  [243] pushsymb 61 ............................. <#y>
  [245] getparam 1 .............................. <tdata>
  [247] pushsymb 61 ............................. <#y>
  [249] pusharglist 2 ........................... <tdata, #y>
  [251] objcall 31 .............................. <tdata[#y]>
  [253] pusharglistnoret 3 ...................... <tAvatarStruct, #y, tdata[#y]>
  [255] objcall 352 ............................. tAvatarStruct.addProp(#y, tdata[#y])
  [258] getlocal 1 .............................. <tAvatarStruct>
  [260] pushsymb 429 ............................ <#h>
  [263] getparam 1 .............................. <tdata>
  [265] pushsymb 62 ............................. <#z>
  [267] pusharglist 2 ........................... <tdata, #z>
  [269] objcall 31 .............................. <tdata[#z]>
  [271] pusharglistnoret 3 ...................... <tAvatarStruct, #h, tdata[#z]>
  [273] objcall 352 ............................. tAvatarStruct.addProp(#h, tdata[#z])
  [276] getlocal 1 .............................. <tAvatarStruct>
  [278] pushsymb 430 ............................ <#custom>
  [281] getparam 1 .............................. <tdata>
  [283] pushsymb 431 ............................ <#mission>
  [286] pusharglist 2 ........................... <tdata, #mission>
  [288] objcall 31 .............................. <tdata[#mission]>
  [290] pusharglistnoret 3 ...................... <tAvatarStruct, #custom, tdata[#mission]>
  [292] objcall 352 ............................. tAvatarStruct.addProp(#custom, tdata[#mission])
  [295] getlocal 1 .............................. <tAvatarStruct>
  [297] pushsymb 432 ............................ <#sex>
  [300] getparam 1 .............................. <tdata>
  [302] pushsymb 432 ............................ <#sex>
  [305] pusharglist 2 ........................... <tdata, #sex>
  [307] objcall 31 .............................. <tdata[#sex]>
  [309] pusharglistnoret 3 ...................... <tAvatarStruct, #sex, tdata[#sex]>
  [311] objcall 352 ............................. tAvatarStruct.addProp(#sex, tdata[#sex])
  [314] getlocal 1 .............................. <tAvatarStruct>
  [316] pushsymb 257 ............................ <#teamId>
  [319] getparam 1 .............................. <tdata>
  [321] pushsymb 257 ............................ <#teamId>
  [324] pusharglist 2 ........................... <tdata, #teamId>
  [326] objcall 31 .............................. <tdata[#teamId]>
  [328] pusharglistnoret 3 ...................... <tAvatarStruct, #teamId, tdata[#teamId]>
  [330] objcall 352 ............................. tAvatarStruct.addProp(#teamId, tdata[#teamId])
  [333] getparam 1 .............................. <tdata>
  [335] pushsymb 278 ............................ <#name>
  [338] pusharglist 2 ........................... <tdata, #name>
  [340] objcall 31 .............................. <tdata[#name]>
  [342] pushsymb 304 ............................ <#session>
  [345] pusharglist 1 ........................... <#session>
  [347] extcall 166 ............................. <getObject(#session)>
  [349] pushsymb 421 ............................ <#userName>
  [352] pusharglist 2 ........................... <getObject(#session), #userName>
  [354] objcall 306 ............................. <getObject(#session).GET(#userName)>
  [357] eq ...................................... <tdata[#name] = getObject(#session).GET(#userName)>
  [358] jmpifz [377] ............................ if tdata[#name] = getObject(#session).GET(#userName) then
  [361] pushsymb 304 ............................ <#session>
  [364] pusharglist 1 ........................... <#session>
  [366] extcall 166 ............................. <getObject(#session)>
  [368] pushcons 0 .............................. <"user_index">
  [370] getlocal 5 .............................. <tUserStrId>
  [372] pusharglistnoret 3 ...................... <getObject(#session), "user_index", tUserStrId>
  [374] objcall 388 ............................. getObject(#session).set("user_index", tUserStrId)
  [377] getlocal 0 .............................. <tFigureSystemObj>
  [379] getparam 1 .............................. <tdata>
  [381] pushsymb 433 ............................ <#figure>
  [384] pusharglist 2 ........................... <tdata, #figure>
  [386] objcall 31 .............................. <tdata[#figure]>
  [388] getparam 1 .............................. <tdata>
  [390] pushsymb 432 ............................ <#sex>
  [393] pusharglist 2 ........................... <tdata, #sex>
  [395] objcall 31 .............................. <tdata[#sex]>
  [397] pushcons 11 ............................. <"user">
  [399] pusharglist 4 ........................... <tFigureSystemObj, tdata[#figure], tdata[#sex], "user">
  [401] objcall 434 ............................. <tFigureSystemObj.parseFigure(tdata[#figure], tdata[#sex], "user")>
  [404] setlocal 6 .............................. tFigure = tFigureSystemObj.parseFigure(tdata[#figure], tdata[#sex], "user")
  [406] getparam 1 .............................. <tdata>
  [408] pushsymb 257 ............................ <#teamId>
  [411] pusharglist 2 ........................... <tdata, #teamId>
  [413] objcall 31 .............................. <tdata[#teamId]>
  [415] pushint8 1 .............................. <1>
  [417] add ..................................... <tdata[#teamId] + 1>
  [418] setlocal 7 .............................. tTeamId = tdata[#teamId] + 1
  [420] pushcons 12 ............................. <"#E73929">
  [422] pusharglist 1 ........................... <"#E73929">
  [424] extcall 34 .............................. <rgb("#E73929")>
  [426] pushcons 13 ............................. <"#217BEF">
  [428] pusharglist 1 ........................... <"#217BEF">
  [430] extcall 34 .............................. <rgb("#217BEF")>
  [432] pushcons 14 ............................. <"#FFCE21">
  [434] pusharglist 1 ........................... <"#FFCE21">
  [436] extcall 34 .............................. <rgb("#FFCE21")>
  [438] pushcons 15 ............................. <"#8CE700">
  [440] pusharglist 1 ........................... <"#8CE700">
  [442] extcall 34 .............................. <rgb("#8CE700")>
  [444] pusharglist 4 ........................... <[rgb("#E73929"), rgb("#217BEF"), rgb("#FFCE21"), rgb("#8CE700")]>
  [446] pushlist ................................ <[rgb("#E73929"), rgb("#217BEF"), rgb("#FFCE21"), rgb("#8CE700")]>
  [447] setlocal 8 .............................. tTeamColors = [rgb("#E73929"), rgb("#217BEF"), rgb("#FFCE21"), rgb("#8CE700")]
  [449] pushcons 16 ............................. <"model">
  [451] pushcons 17 ............................. <"001">
  [453] pushcons 18 ............................. <"color">
  [455] getlocal 8 .............................. <tTeamColors>
  [457] getlocal 7 .............................. <tTeamId>
  [459] pusharglist 2 ........................... <tTeamColors, tTeamId>
  [461] objcall 31 .............................. <tTeamColors[tTeamId]>
  [463] pusharglist 4 ........................... <["model": "001", "color": tTeamColors[tTeamId]]>
  [465] pushproplist ............................ <["model": "001", "color": tTeamColors[tTeamId]]>
  [466] setlocal 9 .............................. tBallModel = ["model": "001", "color": tTeamColors[tTeamId]]
  [468] getlocal 6 .............................. <tFigure>
  [470] pushcons 19 ............................. <"bl">
  [472] getlocal 9 .............................. <tBallModel>
  [474] pusharglistnoret 3 ...................... <tFigure, "bl", tBallModel>
  [476] objcall 352 ............................. tFigure.addProp("bl", tBallModel)
  [479] getlocal 1 .............................. <tAvatarStruct>
  [481] pushsymb 433 ............................ <#figure>
  [484] getlocal 6 .............................. <tFigure>
  [486] pusharglistnoret 3 ...................... <tAvatarStruct, #figure, tFigure>
  [488] objcall 352 ............................. tAvatarStruct.addProp(#figure, tFigure)
  [491] getprop 415 ............................. <pRoomComponentObj>
  [494] getlocal 1 .............................. <tAvatarStruct>
  [496] pusharglist 2 ........................... <pRoomComponentObj, tAvatarStruct>
  [498] objcall 435 ............................. <pRoomComponentObj.validateUserObjects(tAvatarStruct)>
  [501] not ..................................... <not pRoomComponentObj.validateUserObjects(tAvatarStruct)>
  [502] jmpifz [523] ............................ if not pRoomComponentObj.validateUserObjects(tAvatarStruct) then / else
  [505] getparam 0 .............................. <me>
  [507] pushcons 20 ............................. <"BB: Room couldn't create avatar!">
  [509] pushsymb 314 ............................ <#createRoomObject>
  [512] pusharglist 3 ........................... <me, "BB: Room couldn't create avatar!", #createRoomObject>
  [514] extcall 173 ............................. <error(me, "BB: Room couldn't create avatar!", #createRoomObject)>
  [516] pusharglistnoret 1 ...................... <error(me, "BB: Room couldn't create avatar!", #createRoomObject)>
  [518] extcall 28 .............................. return error(me, "BB: Room couldn't create avatar!", #createRoomObject)
  [520] jmp [529]
  [523] pushint8 1 .............................. <1>
  [525] pusharglistnoret 1 ...................... <1>
  [527] extcall 28 .............................. return 1
  [529] ret
end

on removeRoomObject me
  [  0] pushsymb 386 ............................ <#room_component>
  [  3] pusharglist 1 ........................... <#room_component>
  [  5] extcall 166 ............................. <getObject(#room_component)>
  [  7] setlocal 0 .............................. tRoomComponentObj = getObject(#room_component)
  [  9] getlocal 0 .............................. <tRoomComponentObj>
  [ 11] pushzero ................................ <0>
  [ 12] eq ...................................... <tRoomComponentObj = 0>
  [ 13] jmpifz [ 31] ............................ if tRoomComponentObj = 0 then
  [ 16] getparam 0 .............................. <me>
  [ 18] pushcons 6 .............................. <"Room component unavailable!">
  [ 20] pushsymb 315 ............................ <#removeRoomObject>
  [ 23] pusharglist 3 ........................... <me, "Room component unavailable!", #removeRoomObject>
  [ 25] extcall 173 ............................. <error(me, "Room component unavailable!", #removeRoomObject)>
  [ 27] pusharglistnoret 1 ...................... <error(me, "Room component unavailable!", #removeRoomObject)>
  [ 29] extcall 28 .............................. return error(me, "Room component unavailable!", #removeRoomObject)
  [ 31] getprop 416 ............................. <pRoomIndex>
  [ 34] pusharglist 0 ........................... <>
  [ 36] extcall 116 ............................. <VOID>
  [ 38] eq ...................................... <pRoomIndex = VOID>
  [ 39] jmpifz [ 47] ............................ if pRoomIndex = VOID then
  [ 42] pushzero ................................ <0>
  [ 43] pusharglistnoret 1 ...................... <0>
  [ 45] extcall 28 .............................. return 0
  [ 47] getlocal 0 .............................. <tRoomComponentObj>
  [ 49] getprop 416 ............................. <pRoomIndex>
  [ 52] pusharglist 2 ........................... <tRoomComponentObj, pRoomIndex>
  [ 54] objcall 441 ............................. <tRoomComponentObj.removeUserObject(pRoomIndex)>
  [ 57] pusharglistnoret 1 ...................... <tRoomComponentObj.removeUserObject(pRoomIndex)>
  [ 59] extcall 28 .............................. return tRoomComponentObj.removeUserObject(pRoomIndex)
  [ 61] ret
end
