property pBottomBarId, pCarriedPowerupId, pCarriedPowerupType, pCarriedPowerupTimeToLive, pUpdateCounter

on construct me
  [  0] pushzero ................................ <0>
  [  1] setprop 485 ............................. pUpdateCounter = 0
  [  4] pushzero ................................ <0>
  [  5] setprop 486 ............................. pCarriedPowerupId = 0
  [  8] pushzero ................................ <0>
  [  9] setprop 487 ............................. pCarriedPowerupType = 0
  [ 12] pushzero ................................ <0>
  [ 13] setprop 488 ............................. pCarriedPowerupTimeToLive = 0
  [ 16] pushcons 0 .............................. <"RoomBarID">
  [ 18] setprop 489 ............................. pBottomBarId = "RoomBarID"
  [ 21] pushsymb 490 ............................ <#roomReady>
  [ 24] getparam 0 .............................. <me>
  [ 26] pusharglist 1 ........................... <me>
  [ 28] objcall 245 ............................. <me.getID()>
  [ 30] pushsymb 483 ............................ <#replaceRoomBar>
  [ 33] pusharglistnoret 3 ...................... <#roomReady, me.getID(), #replaceRoomBar>
  [ 35] extcall 289 ............................. registerMessage(#roomReady, me.getID(), #replaceRoomBar)
  [ 38] pushsymb 1197 ........................... <#updateInfostandAvatar>
  [ 41] getparam 0 .............................. <me>
  [ 43] pusharglist 1 ........................... <me>
  [ 45] objcall 245 ............................. <me.getID()>
  [ 47] pushsymb 1198 ........................... <#updateRoomBarFigure>
  [ 50] pusharglistnoret 3 ...................... <#updateInfostandAvatar, me.getID(), #updateRoomBarFigure>
  [ 52] extcall 289 ............................. registerMessage(#updateInfostandAvatar, me.getID(), #updateRoomBarFigure)
  [ 55] pushint8 1 .............................. <1>
  [ 57] pusharglistnoret 1 ...................... <1>
  [ 59] extcall 28 .............................. return 1
  [ 61] ret
end

on deconstruct me
  [  0] pushsymb 490 ............................ <#roomReady>
  [  3] getparam 0 .............................. <me>
  [  5] pusharglist 1 ........................... <me>
  [  7] objcall 245 ............................. <me.getID()>
  [  9] pusharglistnoret 2 ...................... <#roomReady, me.getID()>
  [ 11] extcall 291 ............................. unregisterMessage(#roomReady, me.getID())
  [ 14] pushsymb 1197 ........................... <#updateInfostandAvatar>
  [ 17] getparam 0 .............................. <me>
  [ 19] pusharglist 1 ........................... <me>
  [ 21] objcall 245 ............................. <me.getID()>
  [ 23] pusharglistnoret 2 ...................... <#updateInfostandAvatar, me.getID()>
  [ 25] extcall 291 ............................. unregisterMessage(#updateInfostandAvatar, me.getID())
  [ 28] getprop 489 ............................. <pBottomBarId>
  [ 31] pusharglistnoret 1 ...................... <pBottomBarId>
  [ 33] extcall 491 ............................. removeWindow(pBottomBarId)
  [ 36] pushint8 1 .............................. <1>
  [ 38] pusharglistnoret 1 ...................... <1>
  [ 40] extcall 28 .............................. return 1
  [ 42] ret
end

on Refresh me, tTopic, tdata
  [  0] getparam 1 .............................. <tTopic>
  [  2] peek 0 .................................. case tTopic of
  [  4] pushsymb 196 ............................ <#bb_event_1>
  [  6] eq
  [  7] jmpifz [ 57] ............................ (case) #bb_event_1:
  [ 10] getprop 487 ............................. <pCarriedPowerupType>
  [ 13] pushzero ................................ <0>
  [ 14] eq ...................................... <pCarriedPowerupType = 0>
  [ 15] jmpifz [ 26] ............................ if pCarriedPowerupType = 0 then
  [ 18] pop 1
  [ 20] pushint8 1 .............................. <1>
  [ 22] pusharglistnoret 1 ...................... <1>
  [ 24] extcall 28 .............................. return 1
  [ 26] getparam 2 .............................. <tdata>
  [ 28] pushsymb 197 ............................ <#id>
  [ 30] pusharglist 2 ........................... <tdata, #id>
  [ 32] objcall 31 .............................. <tdata[#id]>
  [ 34] getprop 486 ............................. <pCarriedPowerupId>
  [ 37] eq ...................................... <tdata[#id] = pCarriedPowerupId>
  [ 38] jmpifz [ 54] ............................ if tdata[#id] = pCarriedPowerupId then
  [ 41] pop 1
  [ 43] getparam 0 .............................. <me>
  [ 45] pusharglist 1 ........................... <me>
  [ 47] objcall 477 ............................. <me.clearBottomBarPowerup()>
  [ 50] pusharglistnoret 1 ...................... <me.clearBottomBarPowerup()>
  [ 52] extcall 28 .............................. return me.clearBottomBarPowerup()
  [ 54] jmp [363]
  [ 57] peek 0
  [ 59] pushsymb 198 ............................ <#bb_event_3>
  [ 61] eq
  [ 62] jmpifz [193] ............................ (case) #bb_event_3:
  [ 65] getparam 0 .............................. <me>
  [ 67] pusharglist 1 ........................... <me>
  [ 69] objcall 201 ............................. <me.getGameSystem()>
  [ 71] setlocal 0 .............................. tGameSystem = me.getGameSystem()
  [ 73] getlocal 0 .............................. <tGameSystem>
  [ 75] pushzero ................................ <0>
  [ 76] eq ...................................... <tGameSystem = 0>
  [ 77] jmpifz [ 87] ............................ if tGameSystem = 0 then
  [ 80] pop 1
  [ 82] pushzero ................................ <0>
  [ 83] pusharglistnoret 1 ...................... <0>
  [ 85] extcall 28 .............................. return 0
  [ 87] getlocal 0 .............................. <tGameSystem>
  [ 89] pusharglist 1 ........................... <tGameSystem>
  [ 91] objcall 294 ............................. <tGameSystem.getSpectatorModeFlag()>
  [ 94] jmpifz [105] ............................ if tGameSystem.getSpectatorModeFlag() then
  [ 97] pop 1
  [ 99] pushint8 1 .............................. <1>
  [101] pusharglistnoret 1 ...................... <1>
  [103] extcall 28 .............................. return 1
  [105] getparam 2 .............................. <tdata>
  [107] pushsymb 220 ............................ <#playerId>
  [109] pusharglist 2 ........................... <tdata, #playerId>
  [111] objcall 31 .............................. <tdata[#playerId]>
  [113] getparam 0 .............................. <me>
  [115] pusharglist 1 ........................... <me>
  [117] objcall 322 ............................. <me.getOwnGameIndex()>
  [120] nteq .................................... <tdata[#playerId] <> me.getOwnGameIndex()>
  [121] jmpifz [132] ............................ if tdata[#playerId] <> me.getOwnGameIndex() then
  [124] pop 1
  [126] pushint8 1 .............................. <1>
  [128] pusharglistnoret 1 ...................... <1>
  [130] extcall 28 .............................. return 1
  [132] getparam 2 .............................. <tdata>
  [134] pushsymb 202 ............................ <#powerupid>
  [136] pusharglist 2 ........................... <tdata, #powerupid>
  [138] objcall 31 .............................. <tdata[#powerupid]>
  [140] setprop 486 ............................. pCarriedPowerupId = tdata[#powerupid]
  [143] getparam 2 .............................. <tdata>
  [145] pushsymb 206 ............................ <#powerupType>
  [147] pusharglist 2 ........................... <tdata, #powerupType>
  [149] objcall 31 .............................. <tdata[#powerupType]>
  [151] setprop 487 ............................. pCarriedPowerupType = tdata[#powerupType]
  [154] getlocal 0 .............................. <tGameSystem>
  [156] getprop 486 ............................. <pCarriedPowerupId>
  [159] pushsymb 492 ............................ <#timetolive>
  [162] pusharglist 3 ........................... <tGameSystem, pCarriedPowerupId, #timetolive>
  [164] objcall 349 ............................. <tGameSystem.getGameObjectProperty(pCarriedPowerupId, #timetolive)>
  [167] setprop 488 ............................. pCarriedPowerupTimeToLive = tGameSystem.getGameObjectProperty(pCarriedPowerupId, #timetolive)
  [170] getparam 0 .............................. <me>
  [172] pusharglist 1 ........................... <me>
  [174] objcall 245 ............................. <me.getID()>
  [176] pusharglistnoret 1 ...................... <me.getID()>
  [178] extcall 247 ............................. receiveUpdate(me.getID())
  [180] getparam 0 .............................. <me>
  [182] getprop 487 ............................. <pCarriedPowerupType>
  [185] pusharglistnoret 2 ...................... <me, pCarriedPowerupType>
  [187] objcall 479 ............................. me.setActivateButton(pCarriedPowerupType)
  [190] jmp [363]
  [193] peek 0
  [195] pushsymb 205 ............................ <#bb_event_5>
  [197] eq
  [198] jmpifz [288] ............................ (case) #bb_event_5:
  [201] getparam 0 .............................. <me>
  [203] pusharglist 1 ........................... <me>
  [205] objcall 201 ............................. <me.getGameSystem()>
  [207] setlocal 0 .............................. tGameSystem = me.getGameSystem()
  [209] getlocal 0 .............................. <tGameSystem>
  [211] pushzero ................................ <0>
  [212] eq ...................................... <tGameSystem = 0>
  [213] jmpifz [223] ............................ if tGameSystem = 0 then
  [216] pop 1
  [218] pushzero ................................ <0>
  [219] pusharglistnoret 1 ...................... <0>
  [221] extcall 28 .............................. return 0
  [223] getparam 0 .............................. <me>
  [225] pusharglist 1 ........................... <me>
  [227] objcall 201 ............................. <me.getGameSystem()>
  [229] pusharglist 1 ........................... <me.getGameSystem()>
  [231] objcall 294 ............................. <me.getGameSystem().getSpectatorModeFlag()>
  [234] jmpifz [245] ............................ if me.getGameSystem().getSpectatorModeFlag() then
  [237] pop 1
  [239] pushint8 1 .............................. <1>
  [241] pusharglistnoret 1 ...................... <1>
  [243] extcall 28 .............................. return 1
  [245] getparam 2 .............................. <tdata>
  [247] pushsymb 220 ............................ <#playerId>
  [249] pusharglist 2 ........................... <tdata, #playerId>
  [251] objcall 31 .............................. <tdata[#playerId]>
  [253] getparam 0 .............................. <me>
  [255] pusharglist 1 ........................... <me>
  [257] objcall 322 ............................. <me.getOwnGameIndex()>
  [260] nteq .................................... <tdata[#playerId] <> me.getOwnGameIndex()>
  [261] jmpifz [272] ............................ if tdata[#playerId] <> me.getOwnGameIndex() then
  [264] pop 1
  [266] pushint8 1 .............................. <1>
  [268] pusharglistnoret 1 ...................... <1>
  [270] extcall 28 .............................. return 1
  [272] pop 1
  [274] getparam 0 .............................. <me>
  [276] pusharglist 1 ........................... <me>
  [278] objcall 477 ............................. <me.clearBottomBarPowerup()>
  [281] pusharglistnoret 1 ...................... <me.clearBottomBarPowerup()>
  [283] extcall 28 .............................. return me.clearBottomBarPowerup()
  [285] jmp [363]
  [288] peek 0
  [290] pushsymb 207 ............................ <#gameend>
  [292] eq
  [293] jmpifz [312] ............................ (case) #gameend:
  [296] pop 1
  [298] getparam 0 .............................. <me>
  [300] pusharglist 1 ........................... <me>
  [302] objcall 477 ............................. <me.clearBottomBarPowerup()>
  [305] pusharglistnoret 1 ...................... <me.clearBottomBarPowerup()>
  [307] extcall 28 .............................. return me.clearBottomBarPowerup()
  [309] jmp [363]
  [312] peek 0
  [314] pushsymb 481 ............................ <#setfxicon>
  [317] eq
  [318] jmpifz [339] ............................ (case) #setfxicon:
  [321] pop 1
  [323] getparam 0 .............................. <me>
  [325] getparam 2 .............................. <tdata>
  [327] pusharglist 2 ........................... <me, tdata>
  [329] objcall 481 ............................. <me.setfxicon(tdata)>
  [332] pusharglistnoret 1 ...................... <me.setfxicon(tdata)>
  [334] extcall 28 .............................. return me.setfxicon(tdata)
  [336] jmp [363]
  [339] peek 0
  [341] pushsymb 482 ............................ <#setmusicicon>
  [344] eq
  [345] jmpifz [363] ............................ (case) #setmusicicon:
  [348] pop 1
  [350] getparam 0 .............................. <me>
  [352] getparam 2 .............................. <tdata>
  [354] pusharglist 2 ........................... <me, tdata>
  [356] objcall 482 ............................. <me.setmusicicon(tdata)>
  [359] pusharglistnoret 1 ...................... <me.setmusicicon(tdata)>
  [361] extcall 28 .............................. return me.setmusicicon(tdata)
  [363] pop 1 ................................... end case
  [365] pushint8 1 .............................. <1>
  [367] pusharglistnoret 1 ...................... <1>
  [369] extcall 28 .............................. return 1
  [371] ret
end

on update me
  [  0] getprop 485 ............................. <pUpdateCounter>
  [  3] pushint8 1 .............................. <1>
  [  5] add ..................................... <pUpdateCounter + 1>
  [  6] setprop 485 ............................. pUpdateCounter = pUpdateCounter + 1
  [  9] getprop 485 ............................. <pUpdateCounter>
  [ 12] pushint8 2 .............................. <2>
  [ 14] lt ...................................... <pUpdateCounter < 2>
  [ 15] jmpifz [ 24] ............................ if pUpdateCounter < 2 then
  [ 18] pushint8 1 .............................. <1>
  [ 20] pusharglistnoret 1 ...................... <1>
  [ 22] extcall 28 .............................. return 1
  [ 24] pushzero ................................ <0>
  [ 25] setprop 485 ............................. pUpdateCounter = 0
  [ 28] getprop 488 ............................. <pCarriedPowerupTimeToLive>
  [ 31] pushzero ................................ <0>
  [ 32] gt ...................................... <pCarriedPowerupTimeToLive > 0>
  [ 33] jmpifz [ 43] ............................ if pCarriedPowerupTimeToLive > 0 then
  [ 36] getparam 0 .............................. <me>
  [ 38] pusharglistnoret 1 ...................... <me>
  [ 40] objcall 476 ............................. me.animatePowerupTimer()
  [ 43] ret
end

on animatePowerupTimer me
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 201 ............................. <me.getGameSystem()>
  [  6] getprop 486 ............................. <pCarriedPowerupId>
  [  9] pushsymb 492 ............................ <#timetolive>
  [ 12] pusharglist 3 ........................... <me.getGameSystem(), pCarriedPowerupId, #timetolive>
  [ 14] objcall 349 ............................. <me.getGameSystem().getGameObjectProperty(pCarriedPowerupId, #timetolive)>
  [ 17] setlocal 0 .............................. tObjectTimeToLive = me.getGameSystem().getGameObjectProperty(pCarriedPowerupId, #timetolive)
  [ 19] getlocal 0 .............................. <tObjectTimeToLive>
  [ 21] getprop 488 ............................. <pCarriedPowerupTimeToLive>
  [ 24] eq ...................................... <tObjectTimeToLive = pCarriedPowerupTimeToLive>
  [ 25] jmpifz [ 34] ............................ if tObjectTimeToLive = pCarriedPowerupTimeToLive then
  [ 28] pushint8 1 .............................. <1>
  [ 30] pusharglistnoret 1 ...................... <1>
  [ 32] extcall 28 .............................. return 1
  [ 34] getlocal 0 .............................. <tObjectTimeToLive>
  [ 36] setprop 488 ............................. pCarriedPowerupTimeToLive = tObjectTimeToLive
  [ 39] getparam 0 .............................. <me>
  [ 41] getprop 488 ............................. <pCarriedPowerupTimeToLive>
  [ 44] pusharglistnoret 2 ...................... <me, pCarriedPowerupTimeToLive>
  [ 46] objcall 480 ............................. me.updatePowerupTimer(pCarriedPowerupTimeToLive)
  [ 49] ret
end

on clearBottomBarPowerup me
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 245 ............................. <me.getID()>
  [  6] pusharglistnoret 1 ...................... <me.getID()>
  [  8] extcall 244 ............................. removeUpdate(me.getID())
  [ 10] pushzero ................................ <0>
  [ 11] setprop 487 ............................. pCarriedPowerupType = 0
  [ 14] pushzero ................................ <0>
  [ 15] setprop 488 ............................. pCarriedPowerupTimeToLive = 0
  [ 18] getparam 0 .............................. <me>
  [ 20] pushzero ................................ <0>
  [ 21] pusharglistnoret 2 ...................... <me, 0>
  [ 23] objcall 479 ............................. me.setActivateButton(0)
  [ 26] getparam 0 .............................. <me>
  [ 28] pushint8 1 .............................. <1>
  [ 30] inv ..................................... <-1>
  [ 31] pusharglistnoret 2 ...................... <me, -1>
  [ 33] objcall 480 ............................. me.updatePowerupTimer(-1)
  [ 36] pushint8 1 .............................. <1>
  [ 38] pusharglistnoret 1 ...................... <1>
  [ 40] extcall 28 .............................. return 1
  [ 42] ret
end

on activateButtonPressed me
  [  0] getprop 487 ............................. <pCarriedPowerupType>
  [  3] pushzero ................................ <0>
  [  4] eq ...................................... <pCarriedPowerupType = 0>
  [  5] jmpifz [ 14] ............................ if pCarriedPowerupType = 0 then
  [  8] pushint8 1 .............................. <1>
  [ 10] pusharglistnoret 1 ...................... <1>
  [ 12] extcall 28 .............................. return 1
  [ 14] getparam 0 .............................. <me>
  [ 16] pusharglist 1 ........................... <me>
  [ 18] objcall 201 ............................. <me.getGameSystem()>
  [ 20] setlocal 0 .............................. tGameSystem = me.getGameSystem()
  [ 22] getlocal 0 .............................. <tGameSystem>
  [ 24] pushzero ................................ <0>
  [ 25] eq ...................................... <tGameSystem = 0>
  [ 26] jmpifz [ 34] ............................ if tGameSystem = 0 then
  [ 29] pushzero ................................ <0>
  [ 30] pusharglistnoret 1 ...................... <0>
  [ 32] extcall 28 .............................. return 0
  [ 34] getlocal 0 .............................. <tGameSystem>
  [ 36] pushsymb 181 ............................ <#integer>
  [ 38] pushint8 4 .............................. <4>
  [ 40] pushsymb 181 ............................ <#integer>
  [ 42] getprop 486 ............................. <pCarriedPowerupId>
  [ 45] pusharglist 4 ........................... <[#integer: 4, #integer: pCarriedPowerupId]>
  [ 47] pushproplist ............................ <[#integer: 4, #integer: pCarriedPowerupId]>
  [ 48] pusharglistnoret 2 ...................... <tGameSystem, [#integer: 4, #integer: pCarriedPowerupId]>
  [ 50] objcall 299 ............................. tGameSystem.sendGameEventMessage([#integer: 4, #integer: pCarriedPowerupId])
  [ 53] getparam 0 .............................. <me>
  [ 55] pusharglist 1 ........................... <me>
  [ 57] objcall 477 ............................. <me.clearBottomBarPowerup()>
  [ 60] pusharglistnoret 1 ...................... <me.clearBottomBarPowerup()>
  [ 62] extcall 28 .............................. return me.clearBottomBarPowerup()
  [ 64] ret
end

on setActivateButton me, tstate
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 201 ............................. <me.getGameSystem()>
  [  6] pusharglist 1 ........................... <me.getGameSystem()>
  [  8] objcall 294 ............................. <me.getGameSystem().getSpectatorModeFlag()>
  [ 11] jmpifz [ 20] ............................ if me.getGameSystem().getSpectatorModeFlag() then
  [ 14] pushint8 1 .............................. <1>
  [ 16] pusharglistnoret 1 ...................... <1>
  [ 18] extcall 28 .............................. return 1
  [ 20] getprop 489 ............................. <pBottomBarId>
  [ 23] pusharglist 1 ........................... <pBottomBarId>
  [ 25] extcall 494 ............................. <getWindow(pBottomBarId)>
  [ 28] setlocal 0 .............................. tWndObj = getWindow(pBottomBarId)
  [ 30] getlocal 0 .............................. <tWndObj>
  [ 32] pushzero ................................ <0>
  [ 33] eq ...................................... <tWndObj = 0>
  [ 34] jmpifz [ 42] ............................ if tWndObj = 0 then
  [ 37] pushzero ................................ <0>
  [ 38] pusharglistnoret 1 ...................... <0>
  [ 40] extcall 28 .............................. return 0
  [ 42] getlocal 0 .............................. <tWndObj>
  [ 44] pushcons 1 .............................. <"bb2_button_powerup">
  [ 46] pusharglist 2 ........................... <tWndObj, "bb2_button_powerup">
  [ 48] objcall 495 ............................. <tWndObj.getElement("bb2_button_powerup")>
  [ 51] setlocal 1 .............................. tElem = tWndObj.getElement("bb2_button_powerup")
  [ 53] getlocal 1 .............................. <tElem>
  [ 55] pushzero ................................ <0>
  [ 56] eq ...................................... <tElem = 0>
  [ 57] jmpifz [ 65] ............................ if tElem = 0 then
  [ 60] pushzero ................................ <0>
  [ 61] pusharglistnoret 1 ...................... <0>
  [ 63] extcall 28 .............................. return 0
  [ 65] getlocal 1 .............................. <tElem>
  [ 67] pushsymb 470 ............................ <#sprite>
  [ 70] pusharglist 2 ........................... <tElem, #sprite>
  [ 72] objcall 496 ............................. <tElem.getProperty(#sprite)>
  [ 75] setlocal 2 .............................. tsprite = tElem.getProperty(#sprite)
  [ 77] getparam 1 .............................. <tstate>
  [ 79] pushint8 6 .............................. <6>
  [ 81] eq ...................................... <tstate = 6>
  [ 82] jmpifz [131] ............................ if tstate = 6 then / else
  [ 85] getparam 0 .............................. <me>
  [ 87] pusharglist 1 ........................... <me>
  [ 89] objcall 201 ............................. <me.getGameSystem()>
  [ 91] getparam 0 .............................. <me>
  [ 93] pusharglist 1 ........................... <me>
  [ 95] objcall 322 ............................. <me.getOwnGameIndex()>
  [ 98] pushsymb 257 ............................ <#teamId>
  [101] pusharglist 3 ........................... <me.getGameSystem(), me.getOwnGameIndex(), #teamId>
  [103] objcall 349 ............................. <me.getGameSystem().getGameObjectProperty(me.getOwnGameIndex(), #teamId)>
  [106] setlocal 3 .............................. tTeamId = me.getGameSystem().getGameObjectProperty(me.getOwnGameIndex(), #teamId)
  [108] pushcons 2 .............................. <"bb2_button_pwrup_">
  [110] getparam 1 .............................. <tstate>
  [112] joinstr ................................. <"bb2_button_pwrup_" & tstate>
  [113] pushcons 3 .............................. <"_">
  [115] joinstr ................................. <"bb2_button_pwrup_" & tstate & "_">
  [116] getlocal 3 .............................. <tTeamId>
  [118] pushint8 1 .............................. <1>
  [120] add ..................................... <tTeamId + 1>
  [121] joinstr ................................. <"bb2_button_pwrup_" & tstate & "_" & tTeamId + 1>
  [122] pusharglist 1 ........................... <"bb2_button_pwrup_" & tstate & "_" & tTeamId + 1>
  [124] extcall 238 ............................. <getmemnum("bb2_button_pwrup_" & tstate & "_" & tTeamId + 1)>
  [126] setlocal 4 .............................. tMemNum = getmemnum("bb2_button_pwrup_" & tstate & "_" & tTeamId + 1)
  [128] jmp [142]
  [131] pushcons 2 .............................. <"bb2_button_pwrup_">
  [133] getparam 1 .............................. <tstate>
  [135] joinstr ................................. <"bb2_button_pwrup_" & tstate>
  [136] pusharglist 1 ........................... <"bb2_button_pwrup_" & tstate>
  [138] extcall 238 ............................. <getmemnum("bb2_button_pwrup_" & tstate)>
  [140] setlocal 4 .............................. tMemNum = getmemnum("bb2_button_pwrup_" & tstate)
  [142] getlocal 4 .............................. <tMemNum>
  [144] pushzero ................................ <0>
  [145] lteq .................................... <tMemNum <= 0>
  [146] jmpifz [167] ............................ if tMemNum <= 0 then
  [149] getparam 0 .............................. <me>
  [151] pushcons 4 .............................. <"Unable to locate image for powerup button:">
  [153] getparam 1 .............................. <tstate>
  [155] joinpadstr .............................. <"Unable to locate image for powerup button:" && tstate>
  [156] pushsymb 479 ............................ <#setActivateButton>
  [159] pusharglist 3 ........................... <me, "Unable to locate image for powerup button:" && tstate, #setActivateButton>
  [161] extcall 173 ............................. <error(me, "Unable to locate image for powerup button:" && tstate, #setActivateButton)>
  [163] pusharglistnoret 1 ...................... <error(me, "Unable to locate image for powerup button:" && tstate, #setActivateButton)>
  [165] extcall 28 .............................. return error(me, "Unable to locate image for powerup button:" && tstate, #setActivateButton)
  [167] getlocal 2 .............................. <tsprite>
  [169] getobjprop 129 .......................... <tsprite.ilk>
  [171] pushsymb 470 ............................ <#sprite>
  [174] nteq .................................... <tsprite.ilk <> #sprite>
  [175] jmpifz [193] ............................ if tsprite.ilk <> #sprite then
  [178] getparam 0 .............................. <me>
  [180] pushcons 5 .............................. <"Unable to locate sprite for powerup button">
  [182] pushsymb 479 ............................ <#setActivateButton>
  [185] pusharglist 3 ........................... <me, "Unable to locate sprite for powerup button", #setActivateButton>
  [187] extcall 173 ............................. <error(me, "Unable to locate sprite for powerup button", #setActivateButton)>
  [189] pusharglistnoret 1 ...................... <error(me, "Unable to locate sprite for powerup button", #setActivateButton)>
  [191] extcall 28 .............................. return error(me, "Unable to locate sprite for powerup button", #setActivateButton)
  [193] getlocal 1 .............................. <tElem>
  [195] getlocal 4 .............................. <tMemNum>
  [197] pusharglist 1 ........................... <tMemNum>
  [199] extcall 91 .............................. <member(tMemNum)>
  [201] getobjprop 44 ........................... <member(tMemNum).image>
  [203] pusharglistnoret 2 ...................... <tElem, member(tMemNum).image>
  [205] objcall 497 ............................. tElem.feedImage(member(tMemNum).image)
  [208] getparam 1 .............................. <tstate>
  [210] pushzero ................................ <0>
  [211] gt ...................................... <tstate > 0>
  [212] jmpifz [227] ............................ if tstate > 0 then / else
  [215] getlocal 2 .............................. <tsprite>
  [217] pushcons 6 .............................. <"cursor.finger">
  [219] pusharglistnoret 2 ...................... <tsprite, "cursor.finger">
  [221] objcall 498 ............................. tsprite.setcursor("cursor.finger")
  [224] jmp [235]
  [227] getlocal 2 .............................. <tsprite>
  [229] pushzero ................................ <0>
  [230] pusharglistnoret 2 ...................... <tsprite, 0>
  [232] objcall 498 ............................. tsprite.setcursor(0)
  [235] pushint8 1 .............................. <1>
  [237] pusharglistnoret 1 ...................... <1>
  [239] extcall 28 .............................. return 1
  [241] ret
end

on updatePowerupTimer me, tstate
  [  0] getprop 489 ............................. <pBottomBarId>
  [  3] pusharglist 1 ........................... <pBottomBarId>
  [  5] extcall 494 ............................. <getWindow(pBottomBarId)>
  [  8] setlocal 0 .............................. tWndObj = getWindow(pBottomBarId)
  [ 10] getlocal 0 .............................. <tWndObj>
  [ 12] pushzero ................................ <0>
  [ 13] eq ...................................... <tWndObj = 0>
  [ 14] jmpifz [ 22] ............................ if tWndObj = 0 then
  [ 17] pushzero ................................ <0>
  [ 18] pusharglistnoret 1 ...................... <0>
  [ 20] extcall 28 .............................. return 0
  [ 22] getlocal 0 .............................. <tWndObj>
  [ 24] pushcons 7 .............................. <"bb2_image_powerup_timer">
  [ 26] pusharglist 2 ........................... <tWndObj, "bb2_image_powerup_timer">
  [ 28] objcall 495 ............................. <tWndObj.getElement("bb2_image_powerup_timer")>
  [ 31] setlocal 1 .............................. tElem = tWndObj.getElement("bb2_image_powerup_timer")
  [ 33] getlocal 1 .............................. <tElem>
  [ 35] pushzero ................................ <0>
  [ 36] eq ...................................... <tElem = 0>
  [ 37] jmpifz [ 45] ............................ if tElem = 0 then
  [ 40] pushzero ................................ <0>
  [ 41] pusharglistnoret 1 ...................... <0>
  [ 43] extcall 28 .............................. return 0
  [ 45] getlocal 1 .............................. <tElem>
  [ 47] pushsymb 470 ............................ <#sprite>
  [ 50] pusharglist 2 ........................... <tElem, #sprite>
  [ 52] objcall 496 ............................. <tElem.getProperty(#sprite)>
  [ 55] setlocal 2 .............................. tsprite = tElem.getProperty(#sprite)
  [ 57] getlocal 2 .............................. <tsprite>
  [ 59] getobjprop 129 .......................... <tsprite.ilk>
  [ 61] pushsymb 470 ............................ <#sprite>
  [ 64] nteq .................................... <tsprite.ilk <> #sprite>
  [ 65] jmpifz [ 83] ............................ if tsprite.ilk <> #sprite then
  [ 68] getparam 0 .............................. <me>
  [ 70] pushcons 8 .............................. <"Unable to locate sprite for powerup timer">
  [ 72] pushsymb 480 ............................ <#updatePowerupTimer>
  [ 75] pusharglist 3 ........................... <me, "Unable to locate sprite for powerup timer", #updatePowerupTimer>
  [ 77] extcall 173 ............................. <error(me, "Unable to locate sprite for powerup timer", #updatePowerupTimer)>
  [ 79] pusharglistnoret 1 ...................... <error(me, "Unable to locate sprite for powerup timer", #updatePowerupTimer)>
  [ 81] extcall 28 .............................. return error(me, "Unable to locate sprite for powerup timer", #updatePowerupTimer)
  [ 83] getparam 1 .............................. <tstate>
  [ 85] pushint8 11 ............................. <11>
  [ 87] gt ...................................... <tstate > 11>
  [ 88] jmpifz [ 95] ............................ if tstate > 11 then
  [ 91] pushint8 11 ............................. <11>
  [ 93] setparam 1 .............................. tstate = 11
  [ 95] getparam 1 .............................. <tstate>
  [ 97] pushint8 5 .............................. <5>
  [ 99] eq ...................................... <tstate = 5>
  [100] jmpifz [113] ............................ if tstate = 5 then
  [103] getparam 0 .............................. <me>
  [105] pushsymb 199 ............................ <#soundeffect>
  [107] pushcons 9 .............................. <"5sec-powerup-activation-v1">
  [109] pusharglistnoret 3 ...................... <me, #soundeffect, "5sec-powerup-activation-v1">
  [111] objcall 200 ............................. me.sendGameSystemEvent(#soundeffect, "5sec-powerup-activation-v1")
  [113] pushcons 10 ............................. <"bb2_timer_pwrup_">
  [115] getparam 1 .............................. <tstate>
  [117] joinstr ................................. <"bb2_timer_pwrup_" & tstate>
  [118] pusharglist 1 ........................... <"bb2_timer_pwrup_" & tstate>
  [120] extcall 238 ............................. <getmemnum("bb2_timer_pwrup_" & tstate)>
  [122] setlocal 3 .............................. tMemNum = getmemnum("bb2_timer_pwrup_" & tstate)
  [124] getlocal 2 .............................. <tsprite>
  [126] getlocal 3 .............................. <tMemNum>
  [128] pusharglist 1 ........................... <tMemNum>
  [130] extcall 91 .............................. <member(tMemNum)>
  [132] pusharglist 2 ........................... <tsprite, member(tMemNum)>
  [134] objcall 279 ............................. <tsprite.setMember(member(tMemNum))>
  [137] pusharglistnoret 1 ...................... <tsprite.setMember(member(tMemNum))>
  [139] extcall 28 .............................. return tsprite.setMember(member(tMemNum))
  [141] ret
end

on setfxicon me, tstate
  [  0] getprop 489 ............................. <pBottomBarId>
  [  3] pusharglist 1 ........................... <pBottomBarId>
  [  5] extcall 494 ............................. <getWindow(pBottomBarId)>
  [  8] setlocal 0 .............................. tWndObj = getWindow(pBottomBarId)
  [ 10] getlocal 0 .............................. <tWndObj>
  [ 12] pushzero ................................ <0>
  [ 13] eq ...................................... <tWndObj = 0>
  [ 14] jmpifz [ 22] ............................ if tWndObj = 0 then
  [ 17] pushzero ................................ <0>
  [ 18] pusharglistnoret 1 ...................... <0>
  [ 20] extcall 28 .............................. return 0
  [ 22] getlocal 0 .............................. <tWndObj>
  [ 24] pushcons 11 ............................. <"gs_int_fx_image">
  [ 26] pusharglist 2 ........................... <tWndObj, "gs_int_fx_image">
  [ 28] objcall 495 ............................. <tWndObj.getElement("gs_int_fx_image")>
  [ 31] setlocal 1 .............................. tElem = tWndObj.getElement("gs_int_fx_image")
  [ 33] getlocal 1 .............................. <tElem>
  [ 35] pushzero ................................ <0>
  [ 36] eq ...................................... <tElem = 0>
  [ 37] jmpifz [ 45] ............................ if tElem = 0 then
  [ 40] pushzero ................................ <0>
  [ 41] pusharglistnoret 1 ...................... <0>
  [ 43] extcall 28 .............................. return 0
  [ 45] getparam 1 .............................. <tstate>
  [ 47] jmpifz [ 57] ............................ if tstate then / else
  [ 50] pushcons 12 ............................. <"bb2_soundon">
  [ 52] setlocal 2 .............................. tMemName = "bb2_soundon"
  [ 54] jmp [ 61]
  [ 57] pushcons 13 ............................. <"bb2_soundoff">
  [ 59] setlocal 2 .............................. tMemName = "bb2_soundoff"
  [ 61] getlocal 2 .............................. <tMemName>
  [ 63] pusharglist 1 ........................... <tMemName>
  [ 65] extcall 238 ............................. <getmemnum(tMemName)>
  [ 67] pusharglist 1 ........................... <getmemnum(tMemName)>
  [ 69] extcall 91 .............................. <member(getmemnum(tMemName))>
  [ 71] setlocal 3 .............................. tmember = member(getmemnum(tMemName))
  [ 73] getlocal 3 .............................. <tmember>
  [ 75] getobjprop 501 .......................... <tmember.type>
  [ 78] pushsymb 502 ............................ <#bitmap>
  [ 81] eq ...................................... <tmember.type = #bitmap>
  [ 82] jmpifz [ 98] ............................ if tmember.type = #bitmap then
  [ 85] getlocal 1 .............................. <tElem>
  [ 87] pushsymb 44 ............................. <#image>
  [ 89] getlocal 3 .............................. <tmember>
  [ 91] getobjprop 44 ........................... <tmember.image>
  [ 93] pusharglistnoret 3 ...................... <tElem, #image, tmember.image>
  [ 95] objcall 503 ............................. tElem.setProperty(#image, tmember.image)
  [ 98] pushint8 1 .............................. <1>
  [100] pusharglistnoret 1 ...................... <1>
  [102] extcall 28 .............................. return 1
  [104] ret
end

on setmusicicon me, tstate
  [  0] getprop 489 ............................. <pBottomBarId>
  [  3] pusharglist 1 ........................... <pBottomBarId>
  [  5] extcall 494 ............................. <getWindow(pBottomBarId)>
  [  8] setlocal 0 .............................. tWndObj = getWindow(pBottomBarId)
  [ 10] getlocal 0 .............................. <tWndObj>
  [ 12] pushzero ................................ <0>
  [ 13] eq ...................................... <tWndObj = 0>
  [ 14] jmpifz [ 22] ............................ if tWndObj = 0 then
  [ 17] pushzero ................................ <0>
  [ 18] pusharglistnoret 1 ...................... <0>
  [ 20] extcall 28 .............................. return 0
  [ 22] getlocal 0 .............................. <tWndObj>
  [ 24] pushcons 14 ............................. <"gs_int_music_image">
  [ 26] pusharglist 2 ........................... <tWndObj, "gs_int_music_image">
  [ 28] objcall 495 ............................. <tWndObj.getElement("gs_int_music_image")>
  [ 31] setlocal 1 .............................. tElem = tWndObj.getElement("gs_int_music_image")
  [ 33] getlocal 1 .............................. <tElem>
  [ 35] pushzero ................................ <0>
  [ 36] eq ...................................... <tElem = 0>
  [ 37] jmpifz [ 45] ............................ if tElem = 0 then
  [ 40] pushzero ................................ <0>
  [ 41] pusharglistnoret 1 ...................... <0>
  [ 43] extcall 28 .............................. return 0
  [ 45] getparam 1 .............................. <tstate>
  [ 47] jmpifz [ 57] ............................ if tstate then / else
  [ 50] pushcons 15 ............................. <"bb2_musicon">
  [ 52] setlocal 2 .............................. tMemName = "bb2_musicon"
  [ 54] jmp [ 61]
  [ 57] pushcons 16 ............................. <"bb2_musicoff">
  [ 59] setlocal 2 .............................. tMemName = "bb2_musicoff"
  [ 61] getlocal 2 .............................. <tMemName>
  [ 63] pusharglist 1 ........................... <tMemName>
  [ 65] extcall 238 ............................. <getmemnum(tMemName)>
  [ 67] pusharglist 1 ........................... <getmemnum(tMemName)>
  [ 69] extcall 91 .............................. <member(getmemnum(tMemName))>
  [ 71] setlocal 3 .............................. tmember = member(getmemnum(tMemName))
  [ 73] getlocal 3 .............................. <tmember>
  [ 75] getobjprop 501 .......................... <tmember.type>
  [ 78] pushsymb 502 ............................ <#bitmap>
  [ 81] eq ...................................... <tmember.type = #bitmap>
  [ 82] jmpifz [ 98] ............................ if tmember.type = #bitmap then
  [ 85] getlocal 1 .............................. <tElem>
  [ 87] pushsymb 44 ............................. <#image>
  [ 89] getlocal 3 .............................. <tmember>
  [ 91] getobjprop 44 ........................... <tmember.image>
  [ 93] pusharglistnoret 3 ...................... <tElem, #image, tmember.image>
  [ 95] objcall 503 ............................. tElem.setProperty(#image, tmember.image)
  [ 98] pushint8 1 .............................. <1>
  [100] pusharglistnoret 1 ...................... <1>
  [102] extcall 28 .............................. return 1
  [104] ret
end

on replaceRoomBar me
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 201 ............................. <me.getGameSystem()>
  [  6] pusharglist 1 ........................... <me.getGameSystem()>
  [  8] objcall 294 ............................. <me.getGameSystem().getSpectatorModeFlag()>
  [ 11] jmpifz [ 20] ............................ if me.getGameSystem().getSpectatorModeFlag() then
  [ 14] pushint8 1 .............................. <1>
  [ 16] pusharglistnoret 1 ...................... <1>
  [ 18] extcall 28 .............................. return 1
  [ 20] getprop 489 ............................. <pBottomBarId>
  [ 23] pusharglistnoret 1 ...................... <pBottomBarId>
  [ 25] extcall 491 ............................. removeWindow(pBottomBarId)
  [ 28] getprop 489 ............................. <pBottomBarId>
  [ 31] pushcons 17 ............................. <"empty.window">
  [ 33] pushzero ................................ <0>
  [ 34] pushint16 483 ........................... <483>
  [ 37] pusharglistnoret 4 ...................... <pBottomBarId, "empty.window", 0, 483>
  [ 39] extcall 505 ............................. createWindow(pBottomBarId, "empty.window", 0, 483)
  [ 42] getprop 489 ............................. <pBottomBarId>
  [ 45] pusharglist 1 ........................... <pBottomBarId>
  [ 47] extcall 494 ............................. <getWindow(pBottomBarId)>
  [ 50] setlocal 0 .............................. tWndObj = getWindow(pBottomBarId)
  [ 52] getlocal 0 .............................. <tWndObj>
  [ 54] pushzero ................................ <0>
  [ 55] eq ...................................... <tWndObj = 0>
  [ 56] jmpifz [ 64] ............................ if tWndObj = 0 then
  [ 59] pushzero ................................ <0>
  [ 60] pusharglistnoret 1 ...................... <0>
  [ 62] extcall 28 .............................. return 0
  [ 64] getlocal 0 .............................. <tWndObj>
  [ 66] pushint8 1 .............................. <1>
  [ 68] pusharglistnoret 2 ...................... <tWndObj, 1>
  [ 70] objcall 506 ............................. tWndObj.lock(1)
  [ 73] getlocal 0 .............................. <tWndObj>
  [ 75] pusharglistnoret 1 ...................... <tWndObj>
  [ 77] objcall 507 ............................. tWndObj.unmerge()
  [ 80] pushcons 18 ............................. <"bb2_ui.window">
  [ 82] setlocal 1 .............................. tLayout = "bb2_ui.window"
  [ 84] getlocal 0 .............................. <tWndObj>
  [ 86] getlocal 1 .............................. <tLayout>
  [ 88] pusharglist 2 ........................... <tWndObj, tLayout>
  [ 90] objcall 508 ............................. <tWndObj.merge(tLayout)>
  [ 93] not ..................................... <not tWndObj.merge(tLayout)>
  [ 94] jmpifz [102] ............................ if not tWndObj.merge(tLayout) then
  [ 97] pushzero ................................ <0>
  [ 98] pusharglistnoret 1 ...................... <0>
  [100] extcall 28 .............................. return 0
  [102] getparam 0 .............................. <me>
  [104] pusharglistnoret 1 ...................... <me>
  [106] objcall 1198 ............................ me.updateRoomBarFigure()
  [109] getlocal 0 .............................. <tWndObj>
  [111] getparam 0 .............................. <me>
  [113] pusharglist 1 ........................... <me>
  [115] objcall 245 ............................. <me.getID()>
  [117] pusharglistnoret 2 ...................... <tWndObj, me.getID()>
  [119] objcall 511 ............................. tWndObj.registerClient(me.getID())
  [122] getlocal 0 .............................. <tWndObj>
  [124] pushsymb 484 ............................ <#eventProcRoomBar>
  [127] getparam 0 .............................. <me>
  [129] pusharglist 1 ........................... <me>
  [131] objcall 245 ............................. <me.getID()>
  [133] pushsymb 512 ............................ <#mouseUp>
  [136] pusharglistnoret 4 ...................... <tWndObj, #eventProcRoomBar, me.getID(), #mouseUp>
  [138] objcall 513 ............................. tWndObj.registerProcedure(#eventProcRoomBar, me.getID(), #mouseUp)
  [141] getlocal 0 .............................. <tWndObj>
  [143] pushsymb 484 ............................ <#eventProcRoomBar>
  [146] getparam 0 .............................. <me>
  [148] pusharglist 1 ........................... <me>
  [150] objcall 245 ............................. <me.getID()>
  [152] pushsymb 514 ............................ <#keyDown>
  [155] pusharglistnoret 4 ...................... <tWndObj, #eventProcRoomBar, me.getID(), #keyDown>
  [157] objcall 513 ............................. tWndObj.registerProcedure(#eventProcRoomBar, me.getID(), #keyDown)
  [160] getlocal 0 .............................. <tWndObj>
  [162] pushsymb 484 ............................ <#eventProcRoomBar>
  [165] getparam 0 .............................. <me>
  [167] pusharglist 1 ........................... <me>
  [169] objcall 245 ............................. <me.getID()>
  [171] pushsymb 515 ............................ <#mouseEnter>
  [174] pusharglistnoret 4 ...................... <tWndObj, #eventProcRoomBar, me.getID(), #mouseEnter>
  [176] objcall 513 ............................. tWndObj.registerProcedure(#eventProcRoomBar, me.getID(), #mouseEnter)
  [179] getlocal 0 .............................. <tWndObj>
  [181] pushsymb 484 ............................ <#eventProcRoomBar>
  [184] getparam 0 .............................. <me>
  [186] pusharglist 1 ........................... <me>
  [188] objcall 245 ............................. <me.getID()>
  [190] pushsymb 516 ............................ <#mouseLeave>
  [193] pusharglistnoret 4 ...................... <tWndObj, #eventProcRoomBar, me.getID(), #mouseLeave>
  [195] objcall 513 ............................. tWndObj.registerProcedure(#eventProcRoomBar, me.getID(), #mouseLeave)
  [198] getparam 0 .............................. <me>
  [200] pushzero ................................ <0>
  [201] pusharglistnoret 2 ...................... <me, 0>
  [203] objcall 479 ............................. me.setActivateButton(0)
  [206] getparam 0 .............................. <me>
  [208] pusharglist 0 ........................... <>
  [210] extcall 517 ............................. <getSoundState()>
  [213] pusharglistnoret 2 ...................... <me, getSoundState()>
  [215] objcall 481 ............................. me.setfxicon(getSoundState())
  [218] getparam 0 .............................. <me>
  [220] pusharglist 0 ........................... <>
  [222] extcall 517 ............................. <getSoundState()>
  [225] pusharglistnoret 2 ...................... <me, getSoundState()>
  [227] objcall 482 ............................. me.setmusicicon(getSoundState())
  [230] getlocal 0 .............................. <tWndObj>
  [232] pushcons 19 ............................. <"chat_field">
  [234] pusharglist 2 ........................... <tWndObj, "chat_field">
  [236] objcall 495 ............................. <tWndObj.getElement("chat_field")>
  [239] setlocal 2 .............................. tElem = tWndObj.getElement("chat_field")
  [241] getlocal 2 .............................. <tElem>
  [243] pushzero ................................ <0>
  [244] eq ...................................... <tElem = 0>
  [245] jmpifz [253] ............................ if tElem = 0 then
  [248] pushzero ................................ <0>
  [249] pusharglistnoret 1 ...................... <0>
  [251] extcall 28 .............................. return 0
  [253] pusharglistnoret 0 ...................... <>
  [255] extcall 518 ............................. updateStage()
  [258] getlocal 2 .............................. <tElem>
  [260] pushint8 1 .............................. <1>
  [262] pusharglistnoret 2 ...................... <tElem, 1>
  [264] objcall 519 ............................. tElem.setEdit(1)
  [267] getlocal 2 .............................. <tElem>
  [269] pushint8 1 .............................. <1>
  [271] pusharglist 2 ........................... <tElem, 1>
  [273] objcall 520 ............................. <tElem.setFocus(1)>
  [276] pusharglistnoret 1 ...................... <tElem.setFocus(1)>
  [278] extcall 28 .............................. return tElem.setFocus(1)
  [280] pushint8 1 .............................. <1>
  [282] pusharglistnoret 1 ...................... <1>
  [284] extcall 28 .............................. return 1
  [286] ret
end

on eventProcRoomBar me, tEvent, tSprID, tParam
  [  0] getparam 1 .............................. <tEvent>
  [  2] pushsymb 512 ............................ <#mouseUp>
  [  5] eq ...................................... <tEvent = #mouseUp>
  [  6] jmpifz [ 86] ............................ if tEvent = #mouseUp then
  [  9] getparam 2 .............................. <tSprID>
  [ 11] peek 0 .................................. case tSprID of
  [ 13] pushcons 1 .............................. <"bb2_button_powerup">
  [ 15] eq
  [ 16] jmpifz [ 35] ............................ (case) "bb2_button_powerup":
  [ 19] pop 1
  [ 21] getparam 0 .............................. <me>
  [ 23] pusharglist 1 ........................... <me>
  [ 25] objcall 478 ............................. <me.activateButtonPressed()>
  [ 28] pusharglistnoret 1 ...................... <me.activateButtonPressed()>
  [ 30] extcall 28 .............................. return me.activateButtonPressed()
  [ 32] jmp [ 84]
  [ 35] peek 0
  [ 37] pushcons 11 ............................. <"gs_int_fx_image">
  [ 39] eq
  [ 40] jmpifz [ 61] ............................ (case) "gs_int_fx_image":
  [ 43] pop 1
  [ 45] getparam 0 .............................. <me>
  [ 47] pushsymb 522 ............................ <#setfx>
  [ 50] pusharglist 2 ........................... <me, #setfx>
  [ 52] objcall 200 ............................. <me.sendGameSystemEvent(#setfx)>
  [ 54] pusharglistnoret 1 ...................... <me.sendGameSystemEvent(#setfx)>
  [ 56] extcall 28 .............................. return me.sendGameSystemEvent(#setfx)
  [ 58] jmp [ 84]
  [ 61] peek 0
  [ 63] pushcons 14 ............................. <"gs_int_music_image">
  [ 65] eq
  [ 66] jmpifz [ 84] ............................ (case) "gs_int_music_image":
  [ 69] pop 1
  [ 71] getparam 0 .............................. <me>
  [ 73] pushsymb 523 ............................ <#setmusic>
  [ 76] pusharglist 2 ........................... <me, #setmusic>
  [ 78] objcall 200 ............................. <me.sendGameSystemEvent(#setmusic)>
  [ 80] pusharglistnoret 1 ...................... <me.sendGameSystemEvent(#setmusic)>
  [ 82] extcall 28 .............................. return me.sendGameSystemEvent(#setmusic)
  [ 84] pop 1 ................................... end case
  [ 86] getparam 1 .............................. <tEvent>
  [ 88] pushsymb 514 ............................ <#keyDown>
  [ 91] eq ...................................... <tEvent = #keyDown>
  [ 92] jmpifz [126] ............................ if tEvent = #keyDown then
  [ 95] pusharglist 0 ........................... <>
  [ 97] thebuiltin 524 .......................... <the key>
  [100] pushcons 20 ............................. <TAB>
  [102] eq ...................................... <the key = TAB>
  [103] pusharglist 0 ........................... <>
  [105] thebuiltin 525 .......................... <the keyCode>
  [108] pushint8 125 ............................ <125>
  [110] eq ...................................... <the keyCode = 125>
  [111] or ...................................... <(the key = TAB) or (the keyCode = 125)>
  [112] jmpifz [126] ............................ if (the key = TAB) or (the keyCode = 125) then
  [115] getparam 0 .............................. <me>
  [117] pusharglist 1 ........................... <me>
  [119] objcall 478 ............................. <me.activateButtonPressed()>
  [122] pusharglistnoret 1 ...................... <me.activateButtonPressed()>
  [124] extcall 28 .............................. return me.activateButtonPressed()
  [126] pushcons 21 ............................. <"RoomBarProgram">
  [128] pusharglist 1 ........................... <"RoomBarProgram">
  [130] extcall 166 ............................. <getObject("RoomBarProgram")>
  [132] setlocal 0 .............................. tRoomInt = getObject("RoomBarProgram")
  [134] getlocal 0 .............................. <tRoomInt>
  [136] pushzero ................................ <0>
  [137] eq ...................................... <tRoomInt = 0>
  [138] jmpifz [146] ............................ if tRoomInt = 0 then
  [141] pushzero ................................ <0>
  [142] pusharglistnoret 1 ...................... <0>
  [144] extcall 28 .............................. return 0
  [146] getlocal 0 .............................. <tRoomInt>
  [148] getparam 1 .............................. <tEvent>
  [150] getparam 2 .............................. <tSprID>
  [152] getparam 3 .............................. <tParam>
  [154] pusharglist 4 ........................... <tRoomInt, tEvent, tSprID, tParam>
  [156] objcall 484 ............................. <tRoomInt.eventProcRoomBar(tEvent, tSprID, tParam)>
  [159] pusharglistnoret 1 ...................... <tRoomInt.eventProcRoomBar(tEvent, tSprID, tParam)>
  [161] extcall 28 .............................. return tRoomInt.eventProcRoomBar(tEvent, tSprID, tParam)
  [163] ret
end

on getOwnGameIndex me
  [  0] pushsymb 304 ............................ <#session>
  [  3] pusharglist 1 ........................... <#session>
  [  5] extcall 166 ............................. <getObject(#session)>
  [  7] setlocal 0 .............................. tSession = getObject(#session)
  [  9] getlocal 0 .............................. <tSession>
  [ 11] pushcons 22 ............................. <"user_game_index">
  [ 13] pusharglist 2 ........................... <tSession, "user_game_index">
  [ 15] objcall 305 ............................. <tSession.exists("user_game_index")>
  [ 18] not ..................................... <not tSession.exists("user_game_index")>
  [ 19] jmpifz [ 27] ............................ if not tSession.exists("user_game_index") then
  [ 22] pushzero ................................ <0>
  [ 23] pusharglistnoret 1 ...................... <0>
  [ 25] extcall 28 .............................. return 0
  [ 27] getlocal 0 .............................. <tSession>
  [ 29] pushcons 22 ............................. <"user_game_index">
  [ 31] pusharglist 2 ........................... <tSession, "user_game_index">
  [ 33] objcall 306 ............................. <tSession.GET("user_game_index")>
  [ 36] pusharglistnoret 1 ...................... <tSession.GET("user_game_index")>
  [ 38] extcall 28 .............................. return tSession.GET("user_game_index")
  [ 40] ret
end

on updateRoomBarFigure me
  [  0] pushcons 23 ............................. <"Figure_Preview">
  [  2] pusharglist 1 ........................... <"Figure_Preview">
  [  4] extcall 309 ............................. <objectExists("Figure_Preview")>
  [  7] jmpifz [ 29] ............................ if objectExists("Figure_Preview") then
  [ 10] pushcons 23 ............................. <"Figure_Preview">
  [ 12] pusharglist 1 ........................... <"Figure_Preview">
  [ 14] extcall 166 ............................. <getObject("Figure_Preview")>
  [ 16] getprop 489 ............................. <pBottomBarId>
  [ 19] pushcons 24 ............................. <"bb2_avatar_face">
  [ 21] pushsymb 509 ............................ <#head>
  [ 24] pusharglistnoret 4 ...................... <getObject("Figure_Preview"), pBottomBarId, "bb2_avatar_face", #head>
  [ 26] objcall 510 ............................. getObject("Figure_Preview").createHumanPartPreview(pBottomBarId, "bb2_avatar_face", #head)
  [ 29] ret
end
