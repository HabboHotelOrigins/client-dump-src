property pState, pMaxBalloons, pAvailableBalloons, pVisibleBalloons, pBalloonBuffer, pBalloonPulse, pReservedSprites, pScrollStep, pFastScrollStep, pAutoScrollTime, pScrollCounter, pScrollBy, pMaxWidth, pFirstLocz, pStartV, pMarginH, pMarginV, pMoveOffsetV, pLastMsg, pLastBalloonId, pBalloonColor, pDefaultTextColor, pBalloonImg, pTextMember

on construct me
  [  0] pushint16 140 ........................... <140>
  [  3] setprop 1156 ............................ pAutoScrollTime = 140
  [  6] pushcons 0 .............................. <"chat.balloon.scrollstep">
  [  8] pusharglist 1 ........................... <"chat.balloon.scrollstep">
  [ 10] extcall 516 ............................. <variableExists("chat.balloon.scrollstep")>
  [ 13] jmpifz [ 29] ............................ if variableExists("chat.balloon.scrollstep") then / else
  [ 16] pushcons 0 .............................. <"chat.balloon.scrollstep">
  [ 18] pusharglist 1 ........................... <"chat.balloon.scrollstep">
  [ 20] extcall 740 ............................. <getIntVariable("chat.balloon.scrollstep")>
  [ 23] setprop 1152 ............................ pScrollStep = getIntVariable("chat.balloon.scrollstep")
  [ 26] jmp [ 34]
  [ 29] pushint8 3 .............................. <3>
  [ 31] setprop 1152 ............................ pScrollStep = 3
  [ 34] pushsymb 738 ............................ <#normal>
  [ 37] setprop 1154 ............................ pState = #normal
  [ 40] pushzero ................................ <0>
  [ 41] setprop 1155 ............................ pScrollCounter = 0
  [ 44] pusharglist 0 ........................... <[:]>
  [ 46] pushproplist ............................ <[:]>
  [ 47] setprop 1113 ............................ pVisibleBalloons = [:]
  [ 50] pusharglist 0 ........................... <[:]>
  [ 52] pushproplist ............................ <[:]>
  [ 53] setprop 1112 ............................ pAvailableBalloons = [:]
  [ 56] pusharglist 0 ........................... <[]>
  [ 58] pushlist ................................ <[]>
  [ 59] setprop 1135 ............................ pBalloonBuffer = []
  [ 62] pushint8 6 .............................. <6>
  [ 64] pushint8 1 .............................. <1>
  [ 66] add ..................................... <6 + 1>
  [ 67] setprop 1104 ............................ pMaxBalloons = 6 + 1
  [ 70] pushcons 1 .............................. <"window.default.locz">
  [ 72] pusharglist 1 ........................... <"window.default.locz">
  [ 74] extcall 740 ............................. <getIntVariable("window.default.locz")>
  [ 77] pushint16 2000 .......................... <2000>
  [ 80] add ..................................... <getIntVariable("window.default.locz") + 2000>
  [ 81] getprop 1104 ............................ <pMaxBalloons>
  [ 84] sub ..................................... <getIntVariable("window.default.locz") + 2000 - pMaxBalloons>
  [ 85] setprop 1106 ............................ pFirstLocz = getIntVariable("window.default.locz") + 2000 - pMaxBalloons
  [ 88] pushint8 21 ............................. <21>
  [ 90] setprop 1153 ............................ pMoveOffsetV = 21
  [ 93] pushint8 20 ............................. <20>
  [ 95] setprop 1149 ............................ pMarginH = 20
  [ 98] pushint8 11 ............................. <11>
  [100] setprop 1151 ............................ pMarginV = 11
  [103] getprop 1152 ............................ <pScrollStep>
  [106] setprop 1150 ............................ pScrollBy = pScrollStep
  [109] pushint16 254 ........................... <254>
  [112] pushint16 254 ........................... <254>
  [115] pushint16 254 ........................... <254>
  [118] pusharglist 3 ........................... <254, 254, 254>
  [120] extcall 282 ............................. <rgb(254, 254, 254)>
  [123] setprop 1160 ............................ pDefaultTextColor = rgb(254, 254, 254)
  [126] pushint16 255 ........................... <255>
  [129] pusharglist 1 ........................... <255>
  [131] extcall 844 ............................. <paletteIndex(255)>
  [134] setprop 1179 ............................ pBalloonColor = paletteIndex(255)
  [137] pushcons 2 .............................. <"struct.font.plain">
  [139] pusharglist 1 ........................... <"struct.font.plain">
  [141] extcall 481 ............................. <getStructVariable("struct.font.plain")>
  [144] setlocal 0 .............................. tFontStruct = getStructVariable("struct.font.plain")
  [146] pushcons 3 .............................. <"bb.balloon.text">
  [148] pushsymb 1136 ........................... <#text>
  [151] pusharglist 2 ........................... <"bb.balloon.text", #text>
  [153] extcall 214 ............................. <createMember("bb.balloon.text", #text)>
  [155] pusharglist 1 ........................... <createMember("bb.balloon.text", #text)>
  [157] extcall 171 ............................. <member(createMember("bb.balloon.text", #text))>
  [159] setprop 1133 ............................ pTextMember = member(createMember("bb.balloon.text", #text))
  [162] getprop 1133 ............................ <pTextMember>
  [165] pushzero ................................ <0>
  [166] setobjprop 484 .......................... pTextMember.wordWrap = 0
  [169] getprop 1133 ............................ <pTextMember>
  [172] pushsymb 1138 ........................... <#adjust>
  [175] setobjprop 1139 ......................... pTextMember.boxType = #adjust
  [178] getprop 1133 ............................ <pTextMember>
  [181] pushzero ................................ <0>
  [182] setobjprop 1140 ......................... pTextMember.antialias = 0
  [185] getprop 1133 ............................ <pTextMember>
  [188] getlocal 0 .............................. <tFontStruct>
  [190] pushsymb 839 ............................ <#font>
  [193] pusharglist 2 ........................... <tFontStruct, #font>
  [195] objcall 1141 ............................ <tFontStruct.getaProp(#font)>
  [198] setobjprop 839 .......................... pTextMember.font = tFontStruct.getaProp(#font)
  [201] getprop 1133 ............................ <pTextMember>
  [204] getlocal 0 .............................. <tFontStruct>
  [206] pushsymb 1142 ........................... <#fontSize>
  [209] pusharglist 2 ........................... <tFontStruct, #fontSize>
  [211] objcall 1141 ............................ <tFontStruct.getaProp(#fontSize)>
  [214] setobjprop 1142 ......................... pTextMember.fontSize = tFontStruct.getaProp(#fontSize)
  [217] getprop 1133 ............................ <pTextMember>
  [220] getlocal 0 .............................. <tFontStruct>
  [222] pushsymb 837 ............................ <#fontStyle>
  [225] pusharglist 2 ........................... <tFontStruct, #fontStyle>
  [227] objcall 1141 ............................ <tFontStruct.getaProp(#fontStyle)>
  [230] setobjprop 837 .......................... pTextMember.fontStyle = tFontStruct.getaProp(#fontStyle)
  [233] getprop 1153 ............................ <pMoveOffsetV>
  [236] getprop 1152 ............................ <pScrollStep>
  [239] mod ..................................... <pMoveOffsetV mod pScrollStep>
  [240] pushzero ................................ <0>
  [241] nteq .................................... <(pMoveOffsetV mod pScrollStep) <> 0>
  [242] jmpifz [259] ............................ if (pMoveOffsetV mod pScrollStep) <> 0 then
  [245] getprop 1153 ............................ <pMoveOffsetV>
  [248] getprop 1153 ............................ <pMoveOffsetV>
  [251] getprop 1152 ............................ <pScrollStep>
  [254] mod ..................................... <pMoveOffsetV mod pScrollStep>
  [255] sub ..................................... <pMoveOffsetV - (pMoveOffsetV mod pScrollStep)>
  [256] setprop 1153 ............................ pMoveOffsetV = pMoveOffsetV - (pMoveOffsetV mod pScrollStep)
  [259] getprop 1153 ............................ <pMoveOffsetV>
  [262] getprop 1152 ............................ <pScrollStep>
  [265] div ..................................... <pMoveOffsetV / pScrollStep>
  [266] setprop 1159 ............................ pFastScrollStep = pMoveOffsetV / pScrollStep
  [269] getprop 1104 ............................ <pMaxBalloons>
  [272] pushint8 1 .............................. <1>
  [274] sub ..................................... <pMaxBalloons - 1>
  [275] getprop 1153 ............................ <pMoveOffsetV>
  [278] mul ..................................... <(pMaxBalloons - 1) * pMoveOffsetV>
  [279] pushint8 1 .............................. <1>
  [281] sub ..................................... <((pMaxBalloons - 1) * pMoveOffsetV) - 1>
  [282] setprop 1158 ............................ pStartV = ((pMaxBalloons - 1) * pMoveOffsetV) - 1
  [285] pusharglist 0 ........................... <>
  [287] thebuiltin 1143 ......................... <the stageRight>
  [290] pusharglist 0 ........................... <>
  [292] thebuiltin 1144 ......................... <the stageLeft>
  [295] sub ..................................... <the stageRight - the stageLeft>
  [296] pushint8 10 ............................. <10>
  [298] sub ..................................... <the stageRight - the stageLeft - 10>
  [299] setprop 1148 ............................ pMaxWidth = the stageRight - the stageLeft - 10
  [302] pusharglist 0 ........................... <[]>
  [304] pushlist ................................ <[]>
  [305] setprop 1105 ............................ pReservedSprites = []
  [308] pusharglist 0 ........................... <[:]>
  [310] pushproplist ............................ <[:]>
  [311] setprop 1147 ............................ pBalloonImg = [:]
  [314] getprop 1147 ............................ <pBalloonImg>
  [317] pushsymb 1145 ........................... <#middle>
  [320] pushcons 4 .............................. <"bb2_pwrupbubble.middle">
  [322] pusharglist 1 ........................... <"bb2_pwrupbubble.middle">
  [324] extcall 175 ............................. <getmemnum("bb2_pwrupbubble.middle")>
  [326] pusharglist 1 ........................... <getmemnum("bb2_pwrupbubble.middle")>
  [328] extcall 171 ............................. <member(getmemnum("bb2_pwrupbubble.middle"))>
  [330] getchainedprop 172 ...................... <member(getmemnum("bb2_pwrupbubble.middle")).image>
  [332] pusharglist 1 ........................... <member(getmemnum("bb2_pwrupbubble.middle")).image>
  [334] objcall 15 .............................. <member(getmemnum("bb2_pwrupbubble.middle")).image.duplicate()>
  [336] pusharglistnoret 3 ...................... <pBalloonImg, #middle, member(getmemnum("bb2_pwrupbubble.middle")).image.duplicate()>
  [338] objcall 23 .............................. pBalloonImg.addProp(#middle, member(getmemnum("bb2_pwrupbubble.middle")).image.duplicate())
  [340] getprop 1147 ............................ <pBalloonImg>
  [343] pushsymb 489 ............................ <#right>
  [346] pushcons 5 .............................. <"bb2_pwrupbubble.right">
  [348] pusharglist 1 ........................... <"bb2_pwrupbubble.right">
  [350] extcall 175 ............................. <getmemnum("bb2_pwrupbubble.right")>
  [352] pusharglist 1 ........................... <getmemnum("bb2_pwrupbubble.right")>
  [354] extcall 171 ............................. <member(getmemnum("bb2_pwrupbubble.right"))>
  [356] getobjprop 172 .......................... <member(getmemnum("bb2_pwrupbubble.right")).image>
  [358] pusharglistnoret 3 ...................... <pBalloonImg, #right, member(getmemnum("bb2_pwrupbubble.right")).image>
  [360] objcall 23 .............................. pBalloonImg.addProp(#right, member(getmemnum("bb2_pwrupbubble.right")).image)
  [362] pushsymb 1118 ........................... <#leaveRoom>
  [365] getparam 0 .............................. <me>
  [367] pusharglist 1 ........................... <me>
  [369] objcall 25 .............................. <me.getID()>
  [371] pushsymb 1146 ........................... <#removeBalloons>
  [374] pusharglistnoret 3 ...................... <#leaveRoom, me.getID(), #removeBalloons>
  [376] extcall 140 ............................. registerMessage(#leaveRoom, me.getID(), #removeBalloons)
  [378] pushsymb 1119 ........................... <#changeRoom>
  [381] getparam 0 .............................. <me>
  [383] pusharglist 1 ........................... <me>
  [385] objcall 25 .............................. <me.getID()>
  [387] pushsymb 1146 ........................... <#removeBalloons>
  [390] pusharglistnoret 3 ...................... <#changeRoom, me.getID(), #removeBalloons>
  [392] extcall 140 ............................. registerMessage(#changeRoom, me.getID(), #removeBalloons)
  [394] getparam 0 .............................. <me>
  [396] pusharglistnoret 1 ...................... <me>
  [398] objcall 1103 ............................ me.resetBalloons()
  [401] pushint8 1 .............................. <1>
  [403] pusharglistnoret 1 ...................... <1>
  [405] extcall 13 .............................. return 1
  [407] ret
end

on deconstruct me
  [  0] pushsymb 1223 ........................... <#bbballoonautoscroll>
  [  3] pusharglist 1 ........................... <#bbballoonautoscroll>
  [  5] extcall 432 ............................. <timeoutExists(#bbballoonautoscroll)>
  [  8] jmpifz [ 19] ............................ if timeoutExists(#bbballoonautoscroll) then
  [ 11] pushsymb 1223 ........................... <#bbballoonautoscroll>
  [ 14] pusharglistnoret 1 ...................... <#bbballoonautoscroll>
  [ 16] extcall 433 ............................. removeTimeout(#bbballoonautoscroll)
  [ 19] getparam 0 .............................. <me>
  [ 21] pusharglist 1 ........................... <me>
  [ 23] objcall 25 .............................. <me.getID()>
  [ 25] pusharglistnoret 1 ...................... <me.getID()>
  [ 27] extcall 1117 ............................ removePrepare(me.getID())
  [ 30] pushsymb 1118 ........................... <#leaveRoom>
  [ 33] getparam 0 .............................. <me>
  [ 35] pusharglist 1 ........................... <me>
  [ 37] objcall 25 .............................. <me.getID()>
  [ 39] pusharglistnoret 2 ...................... <#leaveRoom, me.getID()>
  [ 41] extcall 142 ............................. unregisterMessage(#leaveRoom, me.getID())
  [ 43] pushsymb 1119 ........................... <#changeRoom>
  [ 46] getparam 0 .............................. <me>
  [ 48] pusharglist 1 ........................... <me>
  [ 50] objcall 25 .............................. <me.getID()>
  [ 52] pusharglistnoret 2 ...................... <#changeRoom, me.getID()>
  [ 54] extcall 142 ............................. unregisterMessage(#changeRoom, me.getID())
  [ 56] pusharglist 0 ........................... <[]>
  [ 58] pushlist ................................ <[]>
  [ 59] setprop 1135 ............................ pBalloonBuffer = []
  [ 62] getprop 1112 ............................ <pAvailableBalloons>
  [ 65] pusharglist 1 ........................... <pAvailableBalloons>
  [ 67] extcall 345 ............................. <voidp(pAvailableBalloons)>
  [ 70] not ..................................... <not voidp(pAvailableBalloons)>
  [ 71] jmpifz [ 84] ............................ if not voidp(pAvailableBalloons) then
  [ 74] pushsymb 1 .............................. <#deconstruct>
  [ 76] getprop 1112 ............................ <pAvailableBalloons>
  [ 79] pusharglistnoret 2 ...................... <#deconstruct, pAvailableBalloons>
  [ 81] extcall 267 ............................. call(#deconstruct, pAvailableBalloons)
  [ 84] getprop 1113 ............................ <pVisibleBalloons>
  [ 87] pusharglist 1 ........................... <pVisibleBalloons>
  [ 89] extcall 345 ............................. <voidp(pVisibleBalloons)>
  [ 92] not ..................................... <not voidp(pVisibleBalloons)>
  [ 93] jmpifz [106] ............................ if not voidp(pVisibleBalloons) then
  [ 96] pushsymb 1 .............................. <#deconstruct>
  [ 98] getprop 1113 ............................ <pVisibleBalloons>
  [101] pusharglistnoret 2 ...................... <#deconstruct, pVisibleBalloons>
  [103] extcall 267 ............................. call(#deconstruct, pVisibleBalloons)
  [106] getprop 1111 ............................ <pBalloonPulse>
  [109] pusharglist 1 ........................... <pBalloonPulse>
  [111] extcall 345 ............................. <voidp(pBalloonPulse)>
  [114] not ..................................... <not voidp(pBalloonPulse)>
  [115] jmpifz [128] ............................ if not voidp(pBalloonPulse) then
  [118] pushsymb 1 .............................. <#deconstruct>
  [120] getprop 1111 ............................ <pBalloonPulse>
  [123] pusharglistnoret 2 ...................... <#deconstruct, pBalloonPulse>
  [125] extcall 267 ............................. call(#deconstruct, pBalloonPulse)
  [128] getprop 1105 ............................ <pReservedSprites>
  [131] peek 0
  [133] pusharglist 1
  [135] extcall 20
  [137] pushint8 1
  [139] peek 0
  [141] peek 2
  [143] lteq
  [144] jmpifz [169] ............................ repeat with tSpr in pReservedSprites
  [147] peek 2
  [149] peek 1
  [151] pusharglist 2
  [153] extcall 18
  [155] setlocal 0
  [157] getlocal 0 .............................. <tSpr>
  [159] pusharglistnoret 1 ...................... <tSpr>
  [161] extcall 567 ............................. releaseSprite(tSpr)
  [164] pushint8 1
  [166] add
  [167] endrepeat [139]
  [169] pop 3
  [171] getprop 1133 ............................ <pTextMember>
  [174] getobjprop 224 .......................... <pTextMember.name>
  [176] pusharglistnoret 1 ...................... <pTextMember.name>
  [178] extcall 223 ............................. removeMember(pTextMember.name)
  [180] pusharglist 0 ........................... <[]>
  [182] pushlist ................................ <[]>
  [183] setprop 1105 ............................ pReservedSprites = []
  [186] pusharglist 0 ........................... <[:]>
  [188] pushproplist ............................ <[:]>
  [189] setlocal 1 .............................. pTextMembers = [:]
  [191] pusharglist 0 ........................... <>
  [193] extcall 43 .............................. <VOID>
  [195] setprop 1112 ............................ pAvailableBalloons = VOID
  [198] pusharglist 0 ........................... <>
  [200] extcall 43 .............................. <VOID>
  [202] setprop 1113 ............................ pVisibleBalloons = VOID
  [205] pusharglist 0 ........................... <>
  [207] extcall 43 .............................. <VOID>
  [209] setprop 1135 ............................ pBalloonBuffer = VOID
  [212] pushint8 1 .............................. <1>
  [214] pusharglistnoret 1 ...................... <1>
  [216] extcall 13 .............................. return 1
  [218] ret
end

on Refresh me, tTopic, tdata
  [  0] getparam 1 .............................. <tTopic>
  [  2] peek 0 .................................. case tTopic of
  [  4] pushsymb 1076 ........................... <#bb_event_5>
  [  7] eq
  [  8] jmpifz [ 45] ............................ (case) #bb_event_5:
  [ 11] getparam 0 .............................. <me>
  [ 13] getparam 2 .............................. <tdata>
  [ 15] pushsymb 125 ............................ <#playerId>
  [ 17] pusharglist 2 ........................... <tdata, #playerId>
  [ 19] objcall 18 .............................. <tdata[#playerId]>
  [ 21] getparam 2 .............................. <tdata>
  [ 23] pushsymb 17 ............................. <#powerupType>
  [ 25] pusharglist 2 ........................... <tdata, #powerupType>
  [ 27] objcall 18 .............................. <tdata[#powerupType]>
  [ 29] getparam 2 .............................. <tdata>
  [ 31] pushsymb 125 ............................ <#playerId>
  [ 33] pusharglist 2 ........................... <tdata, #playerId>
  [ 35] objcall 18 .............................. <tdata[#playerId]>
  [ 37] pusharglistnoret 4 ...................... <me, tdata[#playerId], tdata[#powerupType], tdata[#playerId]>
  [ 39] objcall 1162 ............................ me.createBalloon(tdata[#playerId], tdata[#powerupType], tdata[#playerId])
  [ 42] jmp [ 61]
  [ 45] peek 0
  [ 47] pushsymb 449 ............................ <#gameend>
  [ 50] eq
  [ 51] jmpifz [ 61] ............................ (case) #gameend:
  [ 54] getparam 0 .............................. <me>
  [ 56] pusharglistnoret 1 ...................... <me>
  [ 58] objcall 1146 ............................ me.removeBalloons()
  [ 61] pop 1 ................................... end case
  [ 63] pushint8 1 .............................. <1>
  [ 65] pusharglistnoret 1 ...................... <1>
  [ 67] extcall 13 .............................. return 1
  [ 69] ret
end

on createBalloon me, tLocRefObjId, tPowerupType, tOwnerId
  [  0] getprop 1154 ............................ <pState>
  [  3] pushsymb 738 ............................ <#normal>
  [  6] eq ...................................... <pState = #normal>
  [  7] jmpifz [495] ............................ if pState = #normal then / else
  [ 10] getprop 1112 ............................ <pAvailableBalloons>
  [ 13] getobjprop 20 ........................... <pAvailableBalloons.count>
  [ 15] pushzero ................................ <0>
  [ 16] gt ...................................... <pAvailableBalloons.count > 0>
  [ 17] jmpifz [450] ............................ if pAvailableBalloons.count > 0 then / else
  [ 20] getparam 0 .............................. <me>
  [ 22] pusharglist 1 ........................... <me>
  [ 24] objcall 24 .............................. <me.getGameSystem()>
  [ 26] setlocal 0 .............................. tGameSystem = me.getGameSystem()
  [ 28] getlocal 0 .............................. <tGameSystem>
  [ 30] pushzero ................................ <0>
  [ 31] eq ...................................... <tGameSystem = 0>
  [ 32] jmpifz [ 40] ............................ if tGameSystem = 0 then
  [ 35] pushzero ................................ <0>
  [ 36] pusharglistnoret 1 ...................... <0>
  [ 38] extcall 13 .............................. return 0
  [ 40] getlocal 0 .............................. <tGameSystem>
  [ 42] getparam 1 .............................. <tLocRefObjId>
  [ 44] pusharglist 2 ........................... <tGameSystem, tLocRefObjId>
  [ 46] objcall 130 ............................. <tGameSystem.getGameObject(tLocRefObjId)>
  [ 48] setlocal 1 .............................. tLocRefObj = tGameSystem.getGameObject(tLocRefObjId)
  [ 50] getlocal 1 .............................. <tLocRefObj>
  [ 52] pushzero ................................ <0>
  [ 53] eq ...................................... <tLocRefObj = 0>
  [ 54] jmpifz [ 75] ............................ if tLocRefObj = 0 then
  [ 57] getparam 0 .............................. <me>
  [ 59] pushcons 6 .............................. <"Cannot find game object by id:">
  [ 61] getparam 1 .............................. <tLocRefObjId>
  [ 63] joinpadstr .............................. <"Cannot find game object by id:" && tLocRefObjId>
  [ 64] pushsymb 1098 ........................... <#createNewBalloon>
  [ 67] pusharglist 3 ........................... <me, "Cannot find game object by id:" && tLocRefObjId, #createNewBalloon>
  [ 69] extcall 19 .............................. <error(me, "Cannot find game object by id:" && tLocRefObjId, #createNewBalloon)>
  [ 71] pusharglistnoret 1 ...................... <error(me, "Cannot find game object by id:" && tLocRefObjId, #createNewBalloon)>
  [ 73] extcall 13 .............................. return error(me, "Cannot find game object by id:" && tLocRefObjId, #createNewBalloon)
  [ 75] getlocal 1 .............................. <tLocRefObj>
  [ 77] pusharglist 1 ........................... <tLocRefObj>
  [ 79] objcall 1102 ............................ <tLocRefObj.getLocation()>
  [ 82] pusharglist 1 ........................... <tLocRefObj.getLocation()>
  [ 84] objcall 1102 ............................ <tLocRefObj.getLocation().getLocation()>
  [ 87] setlocal 2 .............................. tTileLocation = tLocRefObj.getLocation().getLocation()
  [ 89] getlocal 0 .............................. <tGameSystem>
  [ 91] getlocal 2 .............................. <tTileLocation>
  [ 93] pushsymb 10 ............................. <#x>
  [ 95] pusharglist 2 ........................... <tTileLocation, #x>
  [ 97] objcall 18 .............................. <tTileLocation[#x]>
  [ 99] getlocal 2 .............................. <tTileLocation>
  [101] pushsymb 11 ............................. <#y>
  [103] pusharglist 2 ........................... <tTileLocation, #y>
  [105] objcall 18 .............................. <tTileLocation[#y]>
  [107] getlocal 2 .............................. <tTileLocation>
  [109] pushsymb 12 ............................. <#z>
  [111] pusharglist 2 ........................... <tTileLocation, #z>
  [113] objcall 18 .............................. <tTileLocation[#z]>
  [115] pusharglist 4 ........................... <tGameSystem, tTileLocation[#x], tTileLocation[#y], tTileLocation[#z]>
  [117] objcall 1215 ............................ <tGameSystem.convertTileToWorldCoordinate(tTileLocation[#x], tTileLocation[#y], tTileLocation[#z])>
  [120] setlocal 3 .............................. tWorldLocation = tGameSystem.convertTileToWorldCoordinate(tTileLocation[#x], tTileLocation[#y], tTileLocation[#z])
  [122] getlocal 0 .............................. <tGameSystem>
  [124] getlocal 3 .............................. <tWorldLocation>
  [126] pushsymb 10 ............................. <#x>
  [128] pusharglist 2 ........................... <tWorldLocation, #x>
  [130] objcall 18 .............................. <tWorldLocation[#x]>
  [132] getlocal 3 .............................. <tWorldLocation>
  [134] pushsymb 11 ............................. <#y>
  [136] pusharglist 2 ........................... <tWorldLocation, #y>
  [138] objcall 18 .............................. <tWorldLocation[#y]>
  [140] getlocal 3 .............................. <tWorldLocation>
  [142] pushsymb 12 ............................. <#z>
  [144] pusharglist 2 ........................... <tWorldLocation, #z>
  [146] objcall 18 .............................. <tWorldLocation[#z]>
  [148] pusharglist 4 ........................... <tGameSystem, tWorldLocation[#x], tWorldLocation[#y], tWorldLocation[#z]>
  [150] objcall 49 .............................. <tGameSystem.convertWorldToScreenCoordinate(tWorldLocation[#x], tWorldLocation[#y], tWorldLocation[#z])>
  [152] setlocal 4 .............................. tlocation = tGameSystem.convertWorldToScreenCoordinate(tWorldLocation[#x], tWorldLocation[#y], tWorldLocation[#z])
  [154] getlocal 4 .............................. <tlocation>
  [156] pushint8 1 .............................. <1>
  [158] pusharglist 2 ........................... <tlocation, 1>
  [160] objcall 18 .............................. <tlocation[1]>
  [162] getlocal 4 .............................. <tlocation>
  [164] pushint8 2 .............................. <2>
  [166] pusharglist 2 ........................... <tlocation, 2>
  [168] objcall 18 .............................. <tlocation[2]>
  [170] pusharglist 2 ........................... <tlocation[1], tlocation[2]>
  [172] extcall 322 ............................. <point(tlocation[1], tlocation[2])>
  [175] setlocal 4 .............................. tlocation = point(tlocation[1], tlocation[2])
  [177] pushcons 7 .............................. <"bb_powerup_">
  [179] getparam 2 .............................. <tPowerupType>
  [181] joinstr ................................. <"bb_powerup_" & tPowerupType>
  [182] pusharglist 1 ........................... <"bb_powerup_" & tPowerupType>
  [184] extcall 392 ............................. <getText("bb_powerup_" & tPowerupType)>
  [187] setlocal 5 .............................. tText = getText("bb_powerup_" & tPowerupType)
  [189] pusharglist 0 ........................... <[:]>
  [191] pushproplist ............................ <[:]>
  [192] setlocal 6 .............................. tMsg = [:]
  [194] getlocal 6 .............................. <tMsg>
  [196] pushsymb 1136 ........................... <#text>
  [199] getlocal 5 .............................. <tText>
  [201] pusharglistnoret 3 ...................... <tMsg, #text, tText>
  [203] objcall 23 .............................. tMsg.addProp(#text, tText)
  [205] getlocal 6 .............................. <tMsg>
  [207] pushsymb 1183 ........................... <#location>
  [210] getlocal 4 .............................. <tlocation>
  [212] pusharglistnoret 3 ...................... <tMsg, #location, tlocation>
  [214] objcall 23 .............................. tMsg.addProp(#location, tlocation)
  [216] getlocal 6 .............................. <tMsg>
  [218] pushsymb 88 ............................. <#id>
  [220] getparam 1 .............................. <tLocRefObjId>
  [222] pusharglist 1 ........................... <tLocRefObjId>
  [224] extcall 87 .............................. <string(tLocRefObjId)>
  [226] pusharglistnoret 3 ...................... <tMsg, #id, string(tLocRefObjId)>
  [228] objcall 23 .............................. tMsg.addProp(#id, string(tLocRefObjId))
  [230] getparam 2 .............................. <tPowerupType>
  [232] pushint8 6 .............................. <6>
  [234] eq ...................................... <tPowerupType = 6>
  [235] jmpifz [271] ............................ if tPowerupType = 6 then / else
  [238] getlocal 6 .............................. <tMsg>
  [240] pushsymb 632 ............................ <#type>
  [243] pushcons 8 .............................. <"6_">
  [245] getparam 0 .............................. <me>
  [247] pusharglist 1 ........................... <me>
  [249] objcall 24 .............................. <me.getGameSystem()>
  [251] getparam 3 .............................. <tOwnerId>
  [253] pushsymb 195 ............................ <#teamId>
  [255] pusharglist 3 ........................... <me.getGameSystem(), tOwnerId, #teamId>
  [257] objcall 932 ............................. <me.getGameSystem().getGameObjectProperty(tOwnerId, #teamId)>
  [260] pushint8 1 .............................. <1>
  [262] add ..................................... <me.getGameSystem().getGameObjectProperty(tOwnerId, #teamId) + 1>
  [263] joinstr ................................. <"6_" & me.getGameSystem().getGameObjectProperty(tOwnerId, #teamId) + 1>
  [264] pusharglistnoret 3 ...................... <tMsg, #type, "6_" & me.getGameSystem().getGameObjectProperty(tOwnerId, #teamId) + 1>
  [266] objcall 23 .............................. tMsg.addProp(#type, "6_" & me.getGameSystem().getGameObjectProperty(tOwnerId, #teamId) + 1)
  [268] jmp [282]
  [271] getlocal 6 .............................. <tMsg>
  [273] pushsymb 632 ............................ <#type>
  [276] getparam 2 .............................. <tPowerupType>
  [278] pusharglistnoret 3 ...................... <tMsg, #type, tPowerupType>
  [280] objcall 23 .............................. tMsg.addProp(#type, tPowerupType)
  [282] getprop 1112 ............................ <pAvailableBalloons>
  [285] pushint8 1 .............................. <1>
  [287] pusharglist 2 ........................... <pAvailableBalloons, 1>
  [289] objcall 500 ............................. <pAvailableBalloons.getPropAt(1)>
  [292] setprop 1169 ............................ pLastBalloonId = pAvailableBalloons.getPropAt(1)
  [295] getlocal 6 .............................. <tMsg>
  [297] setprop 1177 ............................ pLastMsg = tMsg
  [300] getprop 1111 ............................ <pBalloonPulse>
  [303] pushsymb 1127 ........................... <#humanLoc>
  [306] getlocal 4 .............................. <tlocation>
  [308] pusharglistnoret 3 ...................... <pBalloonPulse, #humanLoc, tlocation>
  [310] objcall 230 ............................. pBalloonPulse.set(#humanLoc, tlocation)
  [312] getprop 1111 ............................ <pBalloonPulse>
  [315] pushsymb 1129 ........................... <#stoploc>
  [318] getlocal 4 .............................. <tlocation>
  [320] getobjprop 334 .......................... <tlocation.locH>
  [323] getprop 1158 ............................ <pStartV>
  [326] pusharglist 2 ........................... <tlocation.locH, pStartV>
  [328] extcall 322 ............................. <point(tlocation.locH, pStartV)>
  [331] pusharglistnoret 3 ...................... <pBalloonPulse, #stoploc, point(tlocation.locH, pStartV)>
  [333] objcall 230 ............................. pBalloonPulse.set(#stoploc, point(tlocation.locH, pStartV))
  [335] getprop 1111 ............................ <pBalloonPulse>
  [338] pushsymb 1130 ........................... <#balloonColor>
  [341] pushzero ................................ <0>
  [342] pushzero ................................ <0>
  [343] pushzero ................................ <0>
  [344] pusharglist 3 ........................... <0, 0, 0>
  [346] extcall 282 ............................. <rgb(0, 0, 0)>
  [349] pusharglistnoret 3 ...................... <pBalloonPulse, #balloonColor, rgb(0, 0, 0)>
  [351] objcall 230 ............................. pBalloonPulse.set(#balloonColor, rgb(0, 0, 0))
  [353] getprop 1111 ............................ <pBalloonPulse>
  [356] pushsymb 1174 ........................... <#BalloonId>
  [359] getprop 1169 ............................ <pLastBalloonId>
  [362] pusharglistnoret 3 ...................... <pBalloonPulse, #BalloonId, pLastBalloonId>
  [364] objcall 230 ............................. pBalloonPulse.set(#BalloonId, pLastBalloonId)
  [366] pushsymb 1120 ........................... <#definePulse>
  [369] getprop 1111 ............................ <pBalloonPulse>
  [372] pusharglistnoret 2 ...................... <#definePulse, pBalloonPulse>
  [374] extcall 267 ............................. call(#definePulse, pBalloonPulse)
  [377] pushzero ................................ <0>
  [378] setprop 1155 ............................ pScrollCounter = 0
  [381] pushsymb 1175 ........................... <#scroll>
  [384] setprop 1154 ............................ pState = #scroll
  [387] getprop 1135 ............................ <pBalloonBuffer>
  [390] pusharglist 1 ........................... <pBalloonBuffer>
  [392] objcall 20 .............................. <pBalloonBuffer.count()>
  [394] pushzero ................................ <0>
  [395] eq ...................................... <pBalloonBuffer.count() = 0>
  [396] jmpifz [408] ............................ if pBalloonBuffer.count() = 0 then / else
  [399] getprop 1152 ............................ <pScrollStep>
  [402] setprop 1150 ............................ pScrollBy = pScrollStep
  [405] jmp [436]
  [408] getprop 1135 ............................ <pBalloonBuffer>
  [411] pusharglist 1 ........................... <pBalloonBuffer>
  [413] objcall 20 .............................. <pBalloonBuffer.count()>
  [415] pushint8 2 .............................. <2>
  [417] lt ...................................... <pBalloonBuffer.count() < 2>
  [418] jmpifz [430] ............................ if pBalloonBuffer.count() < 2 then / else
  [421] getprop 1159 ............................ <pFastScrollStep>
  [424] setprop 1150 ............................ pScrollBy = pFastScrollStep
  [427] jmp [436]
  [430] getprop 1153 ............................ <pMoveOffsetV>
  [433] setprop 1150 ............................ pScrollBy = pMoveOffsetV
  [436] getparam 0 .............................. <me>
  [438] pusharglist 1 ........................... <me>
  [440] objcall 25 .............................. <me.getID()>
  [442] pusharglistnoret 1 ...................... <me.getID()>
  [444] extcall 1176 ............................ receivePrepare(me.getID())
  [447] jmp [492]
  [450] getprop 1113 ............................ <pVisibleBalloons>
  [453] pusharglist 1 ........................... <pVisibleBalloons>
  [455] objcall 20 .............................. <pVisibleBalloons.count()>
  [457] pushzero ................................ <0>
  [458] gt ...................................... <pVisibleBalloons.count() > 0>
  [459] jmpifz [479] ............................ if pVisibleBalloons.count() > 0 then
  [462] getparam 0 .............................. <me>
  [464] getprop 1113 ............................ <pVisibleBalloons>
  [467] pushint8 1 .............................. <1>
  [469] pusharglist 2 ........................... <pVisibleBalloons, 1>
  [471] objcall 500 ............................. <pVisibleBalloons.getPropAt(1)>
  [474] pusharglistnoret 2 ...................... <me, pVisibleBalloons.getPropAt(1)>
  [476] objcall 1161 ............................ me.removeVisibleBalloon(pVisibleBalloons.getPropAt(1))
  [479] getparam 0 .............................. <me>
  [481] getparam 1 .............................. <tLocRefObjId>
  [483] getparam 2 .............................. <tPowerupType>
  [485] getparam 3 .............................. <tOwnerId>
  [487] pusharglistnoret 4 ...................... <me, tLocRefObjId, tPowerupType, tOwnerId>
  [489] objcall 1162 ............................ me.createBalloon(tLocRefObjId, tPowerupType, tOwnerId)
  [492] jmp [538]
  [495] getprop 1154 ............................ <pState>
  [498] pushsymb 1175 ........................... <#scroll>
  [501] eq ...................................... <pState = #scroll>
  [502] jmpifz [538] ............................ if pState = #scroll then
  [505] getparam 1 .............................. <tLocRefObjId>
  [507] getparam 2 .............................. <tPowerupType>
  [509] getparam 3 .............................. <tOwnerId>
  [511] pusharglist 3 ........................... <[tLocRefObjId, tPowerupType, tOwnerId]>
  [513] pushlist ................................ <[tLocRefObjId, tPowerupType, tOwnerId]>
  [514] setlocal 6 .............................. tMsg = [tLocRefObjId, tPowerupType, tOwnerId]
  [516] getprop 1135 ............................ <pBalloonBuffer>
  [519] getlocal 6 .............................. <tMsg>
  [521] pusharglist 2 ........................... <pBalloonBuffer, tMsg>
  [523] objcall 135 ............................. <pBalloonBuffer.getPos(tMsg)>
  [525] not ..................................... <not pBalloonBuffer.getPos(tMsg)>
  [526] jmpifz [538] ............................ if not pBalloonBuffer.getPos(tMsg) then
  [529] getprop 1135 ............................ <pBalloonBuffer>
  [532] getlocal 6 .............................. <tMsg>
  [534] pusharglistnoret 2 ...................... <pBalloonBuffer, tMsg>
  [536] objcall 173 ............................. pBalloonBuffer.add(tMsg)
  [538] pushint8 1 .............................. <1>
  [540] pusharglistnoret 1 ...................... <1>
  [542] extcall 13 .............................. return 1
  [544] ret
end

on resetBalloons me
  [  0] pusharglist 0 ........................... <[:]>
  [  2] pushproplist ............................ <[:]>
  [  3] setprop 1113 ............................ pVisibleBalloons = [:]
  [  6] pusharglist 0 ........................... <[:]>
  [  8] pushproplist ............................ <[:]>
  [  9] setprop 1112 ............................ pAvailableBalloons = [:]
  [ 12] getparam 0 .............................. <me>
  [ 14] pusharglist 1 ........................... <me>
  [ 16] objcall 25 .............................. <me.getID()>
  [ 18] pusharglist 1 ........................... <me.getID()>
  [ 20] extcall 565 ............................. <reserveSprite(me.getID())>
  [ 23] setlocal 0 .............................. tSprNum = reserveSprite(me.getID())
  [ 25] getprop 1105 ............................ <pReservedSprites>
  [ 28] getlocal 0 .............................. <tSprNum>
  [ 30] pusharglistnoret 2 ...................... <pReservedSprites, tSprNum>
  [ 32] objcall 173 ............................. pReservedSprites.add(tSprNum)
  [ 34] pushsymb 39 ............................. <#temp>
  [ 36] pushcons 9 .............................. <"BB Balloon Pulse Class">
  [ 38] pusharglist 2 ........................... <#temp, "BB Balloon Pulse Class">
  [ 40] extcall 38 .............................. <createObject(#temp, "BB Balloon Pulse Class")>
  [ 42] setprop 1111 ............................ pBalloonPulse = createObject(#temp, "BB Balloon Pulse Class")
  [ 45] getprop 1111 ............................ <pBalloonPulse>
  [ 48] pushzero ................................ <0>
  [ 49] eq ...................................... <pBalloonPulse = 0>
  [ 50] jmpifz [ 68] ............................ if pBalloonPulse = 0 then
  [ 53] getparam 0 .............................. <me>
  [ 55] pushcons 10 ............................. <"Cannot create Balloon Pulse controller.">
  [ 57] pushsymb 1103 ........................... <#resetBalloons>
  [ 60] pusharglist 3 ........................... <me, "Cannot create Balloon Pulse controller.", #resetBalloons>
  [ 62] extcall 19 .............................. <error(me, "Cannot create Balloon Pulse controller.", #resetBalloons)>
  [ 64] pusharglistnoret 1 ...................... <error(me, "Cannot create Balloon Pulse controller.", #resetBalloons)>
  [ 66] extcall 13 .............................. return error(me, "Cannot create Balloon Pulse controller.", #resetBalloons)
  [ 68] getlocal 0 .............................. <tSprNum>
  [ 70] pusharglist 1 ........................... <tSprNum>
  [ 72] extcall 424 ............................. <sprite(tSprNum)>
  [ 75] getprop 1106 ............................ <pFirstLocz>
  [ 78] setobjprop 47 ........................... sprite(tSprNum).locZ = pFirstLocz
  [ 80] getlocal 0 .............................. <tSprNum>
  [ 82] pusharglist 1 ........................... <tSprNum>
  [ 84] extcall 424 ............................. <sprite(tSprNum)>
  [ 87] pushint8 8 .............................. <8>
  [ 89] setobjprop 197 .......................... sprite(tSprNum).ink = 8
  [ 91] getprop 1111 ............................ <pBalloonPulse>
  [ 94] pushsymb 424 ............................ <#sprite>
  [ 97] getlocal 0 .............................. <tSprNum>
  [ 99] pusharglistnoret 3 ...................... <pBalloonPulse, #sprite, tSprNum>
  [101] objcall 230 ............................. pBalloonPulse.set(#sprite, tSprNum)
  [103] getprop 1111 ............................ <pBalloonPulse>
  [106] pushsymb 1107 ........................... <#manager>
  [109] getparam 0 .............................. <me>
  [111] pusharglistnoret 3 ...................... <pBalloonPulse, #manager, me>
  [113] objcall 230 ............................. pBalloonPulse.set(#manager, me)
  [115] pushint8 1 .............................. <1>
  [117] setlocal 1
  [119] getlocal 1
  [121] getprop 1104 ............................ <pMaxBalloons>
  [124] lteq
  [125] jmpifz [360] ............................ repeat with f = 1 to pMaxBalloons
  [128] getparam 0 .............................. <me>
  [130] pusharglist 1 ........................... <me>
  [132] objcall 25 .............................. <me.getID()>
  [134] pusharglist 1 ........................... <me.getID()>
  [136] extcall 565 ............................. <reserveSprite(me.getID())>
  [139] setlocal 0 .............................. tSprNum = reserveSprite(me.getID())
  [141] getprop 1105 ............................ <pReservedSprites>
  [144] getlocal 0 .............................. <tSprNum>
  [146] pusharglistnoret 2 ...................... <pReservedSprites, tSprNum>
  [148] objcall 173 ............................. pReservedSprites.add(tSprNum)
  [150] getlocal 0 .............................. <tSprNum>
  [152] pushzero ................................ <0>
  [153] eq ...................................... <tSprNum = 0>
  [154] jmpifz [169] ............................ if tSprNum = 0 then
  [157] getlocal 1 .............................. <f>
  [159] pushint8 1 .............................. <1>
  [161] sub ..................................... <f - 1>
  [162] setprop 1104 ............................ pMaxBalloons = f - 1
  [165] pusharglistnoret 0 ...................... <>
  [167] extcall 13 .............................. return 
  [169] getlocal 0 .............................. <tSprNum>
  [171] pusharglist 1 ........................... <tSprNum>
  [173] extcall 424 ............................. <sprite(tSprNum)>
  [176] getprop 1106 ............................ <pFirstLocz>
  [179] getlocal 1 .............................. <f>
  [181] add ..................................... <pFirstLocz + f>
  [182] pushint8 1 .............................. <1>
  [184] sub ..................................... <pFirstLocz + f - 1>
  [185] setobjprop 47 ........................... sprite(tSprNum).locZ = pFirstLocz + f - 1
  [187] getlocal 0 .............................. <tSprNum>
  [189] pusharglist 1 ........................... <tSprNum>
  [191] extcall 424 ............................. <sprite(tSprNum)>
  [194] pushint8 8 .............................. <8>
  [196] setobjprop 197 .......................... sprite(tSprNum).ink = 8
  [198] pushcons 11 ............................. <"bb.balloon">
  [200] getlocal 1 .............................. <f>
  [202] joinstr ................................. <"bb.balloon" & f>
  [203] setlocal 2 .............................. tBalloonId = "bb.balloon" & f
  [205] pushcons 12 ............................. <"bb.balloon.">
  [207] getlocal 2 .............................. <tBalloonId>
  [209] joinstr ................................. <"bb.balloon." & tBalloonId>
  [210] setlocal 3 .............................. tmember = "bb.balloon." & tBalloonId
  [212] getlocal 3 .............................. <tmember>
  [214] pusharglist 1 ........................... <tmember>
  [216] extcall 1108 ............................ <memberExists(tmember)>
  [219] not ..................................... <not memberExists(tmember)>
  [220] jmpifz [231] ............................ if not memberExists(tmember) then
  [223] getlocal 3 .............................. <tmember>
  [225] pushsymb 215 ............................ <#bitmap>
  [227] pusharglistnoret 2 ...................... <tmember, #bitmap>
  [229] extcall 214 ............................. createMember(tmember, #bitmap)
  [231] getlocal 3 .............................. <tmember>
  [233] pusharglist 1 ........................... <tmember>
  [235] extcall 175 ............................. <getmemnum(tmember)>
  [237] setlocal 3 .............................. tmember = getmemnum(tmember)
  [239] getprop 1112 ............................ <pAvailableBalloons>
  [242] getlocal 2 .............................. <tBalloonId>
  [244] pushsymb 39 ............................. <#temp>
  [246] pushcons 13 ............................. <"BB Balloon Class">
  [248] pusharglist 2 ........................... <#temp, "BB Balloon Class">
  [250] extcall 38 .............................. <createObject(#temp, "BB Balloon Class")>
  [252] pusharglistnoret 3 ...................... <pAvailableBalloons, tBalloonId, createObject(#temp, "BB Balloon Class")>
  [254] objcall 23 .............................. pAvailableBalloons.addProp(tBalloonId, createObject(#temp, "BB Balloon Class"))
  [256] getprop 1112 ............................ <pAvailableBalloons>
  [259] getlocal 2 .............................. <tBalloonId>
  [261] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [263] objcall 18 .............................. <pAvailableBalloons[tBalloonId]>
  [265] getlocal 2 .............................. <tBalloonId>
  [267] pusharglistnoret 2 ...................... <pAvailableBalloons[tBalloonId], tBalloonId>
  [269] objcall 1109 ............................ pAvailableBalloons[tBalloonId].setID(tBalloonId)
  [272] getprop 1112 ............................ <pAvailableBalloons>
  [275] getlocal 2 .............................. <tBalloonId>
  [277] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [279] objcall 18 .............................. <pAvailableBalloons[tBalloonId]>
  [281] pushsymb 424 ............................ <#sprite>
  [284] getlocal 0 .............................. <tSprNum>
  [286] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #sprite, tSprNum>
  [288] objcall 230 ............................. pAvailableBalloons[tBalloonId].set(#sprite, tSprNum)
  [290] getprop 1112 ............................ <pAvailableBalloons>
  [293] getlocal 2 .............................. <tBalloonId>
  [295] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [297] objcall 18 .............................. <pAvailableBalloons[tBalloonId]>
  [299] pushsymb 171 ............................ <#member>
  [301] getlocal 3 .............................. <tmember>
  [303] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #member, tmember>
  [305] objcall 230 ............................. pAvailableBalloons[tBalloonId].set(#member, tmember)
  [307] getprop 1112 ............................ <pAvailableBalloons>
  [310] getlocal 2 .............................. <tBalloonId>
  [312] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [314] objcall 18 .............................. <pAvailableBalloons[tBalloonId]>
  [316] pushsymb 336 ............................ <#loc>
  [319] pushzero ................................ <0>
  [320] pushint16 1000 .......................... <1000>
  [323] inv ..................................... <-1000>
  [324] pusharglist 2 ........................... <0, -1000>
  [326] extcall 322 ............................. <point(0, -1000)>
  [329] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #loc, point(0, -1000)>
  [331] objcall 230 ............................. pAvailableBalloons[tBalloonId].set(#loc, point(0, -1000))
  [333] getprop 1112 ............................ <pAvailableBalloons>
  [336] getlocal 2 .............................. <tBalloonId>
  [338] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [340] objcall 18 .............................. <pAvailableBalloons[tBalloonId]>
  [342] pushsymb 1107 ........................... <#manager>
  [345] getparam 0 .............................. <me>
  [347] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #manager, me>
  [349] objcall 230 ............................. pAvailableBalloons[tBalloonId].set(#manager, me)
  [351] pushint8 1
  [353] getlocal 1
  [355] add
  [356] setlocal 1
  [358] endrepeat [119]
  [360] ret
end

on removeBalloons me
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 25 .............................. <me.getID()>
  [  6] pusharglistnoret 1 ...................... <me.getID()>
  [  8] extcall 1117 ............................ removePrepare(me.getID())
  [ 11] pushsymb 1223 ........................... <#bbballoonautoscroll>
  [ 14] pusharglist 1 ........................... <#bbballoonautoscroll>
  [ 16] extcall 432 ............................. <timeoutExists(#bbballoonautoscroll)>
  [ 19] jmpifz [ 30] ............................ if timeoutExists(#bbballoonautoscroll) then
  [ 22] pushsymb 1223 ........................... <#bbballoonautoscroll>
  [ 25] pusharglistnoret 1 ...................... <#bbballoonautoscroll>
  [ 27] extcall 433 ............................. removeTimeout(#bbballoonautoscroll)
  [ 30] pusharglist 0 ........................... <[]>
  [ 32] pushlist ................................ <[]>
  [ 33] setprop 1135 ............................ pBalloonBuffer = []
  [ 36] pusharglist 0 ........................... <>
  [ 38] extcall 43 .............................. <VOID>
  [ 40] setprop 1169 ............................ pLastBalloonId = VOID
  [ 43] pushsymb 738 ............................ <#normal>
  [ 46] setprop 1154 ............................ pState = #normal
  [ 49] pushsymb 1121 ........................... <#removePulse>
  [ 52] getprop 1111 ............................ <pBalloonPulse>
  [ 55] pusharglistnoret 2 ...................... <#removePulse, pBalloonPulse>
  [ 57] extcall 267 ............................. call(#removePulse, pBalloonPulse)
  [ 60] pushsymb 1166 ........................... <#removeBalloon>
  [ 63] getprop 1113 ............................ <pVisibleBalloons>
  [ 66] pusharglistnoret 2 ...................... <#removeBalloon, pVisibleBalloons>
  [ 68] extcall 267 ............................. call(#removeBalloon, pVisibleBalloons)
  [ 71] pushsymb 1166 ........................... <#removeBalloon>
  [ 74] getprop 1112 ............................ <pAvailableBalloons>
  [ 77] pusharglistnoret 2 ...................... <#removeBalloon, pAvailableBalloons>
  [ 79] extcall 267 ............................. call(#removeBalloon, pAvailableBalloons)
  [ 82] pushsymb 1167 ........................... <#showBalloon>
  [ 85] getprop 1113 ............................ <pVisibleBalloons>
  [ 88] pusharglistnoret 2 ...................... <#showBalloon, pVisibleBalloons>
  [ 90] extcall 267 ............................. call(#showBalloon, pVisibleBalloons)
  [ 93] pushsymb 1167 ........................... <#showBalloon>
  [ 96] getprop 1112 ............................ <pAvailableBalloons>
  [ 99] pusharglistnoret 2 ...................... <#showBalloon, pAvailableBalloons>
  [101] extcall 267 ............................. call(#showBalloon, pAvailableBalloons)
  [104] getprop 1113 ............................ <pVisibleBalloons>
  [107] pusharglist 1 ........................... <pVisibleBalloons>
  [109] objcall 15 .............................. <pVisibleBalloons.duplicate()>
  [111] setlocal 0 .............................. tTempRemoveVisible = pVisibleBalloons.duplicate()
  [113] pushint8 1 .............................. <1>
  [115] setlocal 1
  [117] getlocal 1
  [119] getlocal 0 .............................. <tTempRemoveVisible>
  [121] getobjprop 20 ........................... <tTempRemoveVisible.count>
  [123] lteq
  [124] jmpifz [152] ............................ repeat with f = 1 to tTempRemoveVisible.count
  [127] getparam 0 .............................. <me>
  [129] getlocal 0 .............................. <tTempRemoveVisible>
  [131] getlocal 1 .............................. <f>
  [133] pusharglist 2 ........................... <tTempRemoveVisible, f>
  [135] objcall 500 ............................. <tTempRemoveVisible.getPropAt(f)>
  [138] pusharglistnoret 2 ...................... <me, tTempRemoveVisible.getPropAt(f)>
  [140] objcall 1161 ............................ me.removeVisibleBalloon(tTempRemoveVisible.getPropAt(f))
  [143] pushint8 1
  [145] getlocal 1
  [147] add
  [148] setlocal 1
  [150] endrepeat [117]
  [152] ret
end

on removeVisibleBalloon me, tid
  [  0] getprop 1113 ............................ <pVisibleBalloons>
  [  3] getparam 1 .............................. <tid>
  [  5] pusharglist 2 ........................... <pVisibleBalloons, tid>
  [  7] objcall 18 .............................. <pVisibleBalloons[tid]>
  [  9] pusharglist 1 ........................... <pVisibleBalloons[tid]>
  [ 11] extcall 345 ............................. <voidp(pVisibleBalloons[tid])>
  [ 14] not ..................................... <not voidp(pVisibleBalloons[tid])>
  [ 15] jmpifz [ 78] ............................ if not voidp(pVisibleBalloons[tid]) then
  [ 18] getprop 1112 ............................ <pAvailableBalloons>
  [ 21] getparam 1 .............................. <tid>
  [ 23] getprop 1113 ............................ <pVisibleBalloons>
  [ 26] getparam 1 .............................. <tid>
  [ 28] pusharglist 2 ........................... <pVisibleBalloons, tid>
  [ 30] objcall 18 .............................. <pVisibleBalloons[tid]>
  [ 32] pusharglistnoret 3 ...................... <pAvailableBalloons, tid, pVisibleBalloons[tid]>
  [ 34] objcall 21 .............................. pAvailableBalloons[tid] = pVisibleBalloons[tid]
  [ 36] getprop 1112 ............................ <pAvailableBalloons>
  [ 39] getparam 1 .............................. <tid>
  [ 41] pusharglist 2 ........................... <pAvailableBalloons, tid>
  [ 43] objcall 18 .............................. <pAvailableBalloons[tid]>
  [ 45] pushsymb 336 ............................ <#loc>
  [ 48] pushzero ................................ <0>
  [ 49] pushint16 1000 .......................... <1000>
  [ 52] inv ..................................... <-1000>
  [ 53] pusharglist 2 ........................... <0, -1000>
  [ 55] extcall 322 ............................. <point(0, -1000)>
  [ 58] pusharglistnoret 3 ...................... <pAvailableBalloons[tid], #loc, point(0, -1000)>
  [ 60] objcall 230 ............................. pAvailableBalloons[tid].set(#loc, point(0, -1000))
  [ 62] getprop 1113 ............................ <pVisibleBalloons>
  [ 65] getparam 1 .............................. <tid>
  [ 67] pusharglistnoret 2 ...................... <pVisibleBalloons, tid>
  [ 69] objcall 1170 ............................ pVisibleBalloons.deleteProp(tid)
  [ 72] pushint8 1 .............................. <1>
  [ 74] pusharglistnoret 1 ...................... <1>
  [ 76] extcall 13 .............................. return 1
  [ 78] ret
end

on createballoonImg me, tText, ttype
  [  0] getprop 1133 ............................ <pTextMember>
  [  3] setlocal 0 .............................. tmember = pTextMember
  [  5] getlocal 0 .............................. <tmember>
  [  7] getobjprop 839 .......................... <tmember.font>
  [ 10] setlocal 1 .............................. tSavedFont = tmember.font
  [ 12] getlocal 0 .............................. <tmember>
  [ 14] getobjprop 837 .......................... <tmember.fontStyle>
  [ 17] setlocal 2 .............................. tSavedStyle = tmember.fontStyle
  [ 19] getlocal 0 .............................. <tmember>
  [ 21] pushzero ................................ <0>
  [ 22] pushzero ................................ <0>
  [ 23] getprop 1148 ............................ <pMaxWidth>
  [ 26] getlocal 0 .............................. <tmember>
  [ 28] getobjprop 205 .......................... <tmember.height>
  [ 30] pusharglist 4 ........................... <0, 0, pMaxWidth, tmember.height>
  [ 32] extcall 177 ............................. <rect(0, 0, pMaxWidth, tmember.height)>
  [ 34] setobjprop 177 .......................... tmember.rect = rect(0, 0, pMaxWidth, tmember.height)
  [ 36] pushcons 14 ............................. <"struct.font.bold">
  [ 38] pusharglist 1 ........................... <"struct.font.bold">
  [ 40] extcall 481 ............................. <getStructVariable("struct.font.bold")>
  [ 43] setlocal 3 .............................. tBoldStruct = getStructVariable("struct.font.bold")
  [ 45] getlocal 0 .............................. <tmember>
  [ 47] getparam 1 .............................. <tText>
  [ 49] setobjprop 1136 ......................... tmember.text = tText
  [ 52] getlocal 0 .............................. <tmember>
  [ 54] getobjprop 349 .......................... <tmember.color>
  [ 57] setlocal 4 .............................. tSavedColor = tmember.color
  [ 59] getlocal 0 .............................. <tmember>
  [ 61] getprop 1160 ............................ <pDefaultTextColor>
  [ 64] setobjprop 349 .......................... tmember.color = pDefaultTextColor
  [ 67] pushcons 15 ............................. <"bb2_pwrupbubble.left_">
  [ 69] getparam 2 .............................. <ttype>
  [ 71] joinstr ................................. <"bb2_pwrupbubble.left_" & ttype>
  [ 72] pusharglist 1 ........................... <"bb2_pwrupbubble.left_" & ttype>
  [ 74] extcall 175 ............................. <getmemnum("bb2_pwrupbubble.left_" & ttype)>
  [ 76] setlocal 5 .............................. tLeftImageMemNum = getmemnum("bb2_pwrupbubble.left_" & ttype)
  [ 78] getlocal 5 .............................. <tLeftImageMemNum>
  [ 80] pushzero ................................ <0>
  [ 81] lteq .................................... <tLeftImageMemNum <= 0>
  [ 82] jmpifz [103] ............................ if tLeftImageMemNum <= 0 then
  [ 85] getparam 0 .............................. <me>
  [ 87] pushcons 16 ............................. <"Cannot create bubble for powerup type">
  [ 89] getparam 2 .............................. <ttype>
  [ 91] joinpadstr .............................. <"Cannot create bubble for powerup type" && ttype>
  [ 92] pushsymb 1182 ........................... <#createballoonImg>
  [ 95] pusharglist 3 ........................... <me, "Cannot create bubble for powerup type" && ttype, #createballoonImg>
  [ 97] extcall 19 .............................. <error(me, "Cannot create bubble for powerup type" && ttype, #createballoonImg)>
  [ 99] pusharglistnoret 1 ...................... <error(me, "Cannot create bubble for powerup type" && ttype, #createballoonImg)>
  [101] extcall 13 .............................. return error(me, "Cannot create bubble for powerup type" && ttype, #createballoonImg)
  [103] getlocal 5 .............................. <tLeftImageMemNum>
  [105] pusharglist 1 ........................... <tLeftImageMemNum>
  [107] extcall 171 ............................. <member(tLeftImageMemNum)>
  [109] setlocal 6 .............................. tLeftMember = member(tLeftImageMemNum)
  [111] getlocal 6 .............................. <tLeftMember>
  [113] getobjprop 172 .......................... <tLeftMember.image>
  [115] setlocal 7 .............................. tLeftImage = tLeftMember.image
  [117] getlocal 0 .............................. <tmember>
  [119] getlocal 0 .............................. <tmember>
  [121] pushsymb 246 ............................ <#char>
  [123] pusharglist 2 ........................... <tmember, #char>
  [125] objcall 20 .............................. <tmember.char.count>
  [127] pusharglist 2 ........................... <tmember, tmember.char.count>
  [129] objcall 1200 ............................ <tmember.charPosToLoc(tmember.char.count)>
  [132] getobjprop 334 .......................... <tmember.charPosToLoc(tmember.char.count).locH>
  [135] pushint8 2 .............................. <2>
  [137] mul ..................................... <tmember.charPosToLoc(tmember.char.count).locH * 2>
  [138] pushint8 10 ............................. <10>
  [140] add ..................................... <(tmember.charPosToLoc(tmember.char.count).locH * 2) + 10>
  [141] setlocal 8 .............................. tTextWidth = (tmember.charPosToLoc(tmember.char.count).locH * 2) + 10
  [143] getlocal 0 .............................. <tmember>
  [145] pushzero ................................ <0>
  [146] pushzero ................................ <0>
  [147] getlocal 8 .............................. <tTextWidth>
  [149] getlocal 0 .............................. <tmember>
  [151] getobjprop 205 .......................... <tmember.height>
  [153] pusharglist 4 ........................... <0, 0, tTextWidth, tmember.height>
  [155] extcall 177 ............................. <rect(0, 0, tTextWidth, tmember.height)>
  [157] setobjprop 177 .......................... tmember.rect = rect(0, 0, tTextWidth, tmember.height)
  [159] getlocal 0 .............................. <tmember>
  [161] getobjprop 172 .......................... <tmember.image>
  [163] setlocal 9 .............................. tTextImg = tmember.image
  [165] getlocal 8 .............................. <tTextWidth>
  [167] getprop 1149 ............................ <pMarginH>
  [170] pushint8 2 .............................. <2>
  [172] mul ..................................... <pMarginH * 2>
  [173] add ..................................... <tTextWidth + (pMarginH * 2)>
  [174] getlocal 6 .............................. <tLeftMember>
  [176] getchainedprop 219 ...................... <tLeftMember.regPoint>
  [178] getobjprop 334 .......................... <tLeftMember.regPoint.locH>
  [181] add ..................................... <tTextWidth + (pMarginH * 2) + tLeftMember.regPoint.locH>
  [182] setlocal 10 ............................. tWidth = tTextWidth + (pMarginH * 2) + tLeftMember.regPoint.locH
  [184] getlocal 7 .............................. <tLeftImage>
  [186] getobjprop 205 .......................... <tLeftImage.height>
  [188] getlocal 6 .............................. <tLeftMember>
  [190] getchainedprop 219 ...................... <tLeftMember.regPoint>
  [192] getobjprop 335 .......................... <tLeftMember.regPoint.locV>
  [195] add ..................................... <tLeftImage.height + tLeftMember.regPoint.locV>
  [196] setlocal 11 ............................. tHeight = tLeftImage.height + tLeftMember.regPoint.locV
  [198] getlocal 10 ............................. <tWidth>
  [200] getlocal 11 ............................. <tHeight>
  [202] pushint8 8 .............................. <8>
  [204] pusharglist 3 ........................... <tWidth, tHeight, 8>
  [206] extcall 172 ............................. <image(tWidth, tHeight, 8)>
  [208] setlocal 12 ............................. tNewImg = image(tWidth, tHeight, 8)
  [210] pushzero ................................ <0>
  [211] setlocal 13 ............................. tStartPointY = 0
  [213] getlocal 12 ............................. <tNewImg>
  [215] getobjprop 205 .......................... <tNewImg.height>
  [217] setlocal 14 ............................. tEndPointY = tNewImg.height
  [219] pushzero ................................ <0>
  [220] setlocal 15 ............................. tStartPointX = 0
  [222] pushzero ................................ <0>
  [223] setlocal 16 ............................. tEndPointX = 0
  [225] pushsymb 203 ............................ <#left>
  [227] pushsymb 1145 ........................... <#middle>
  [230] pushsymb 489 ............................ <#right>
  [233] pusharglist 3 ........................... <[#left, #middle, #right]>
  [235] pushlist ................................ <[#left, #middle, #right]>
  [236] peek 0
  [238] pusharglist 1
  [240] extcall 20
  [242] pushint8 1
  [244] peek 0
  [246] peek 2
  [248] lteq
  [249] jmpifz [489] ............................ repeat with i in [#left, #middle, #right]
  [252] peek 2
  [254] peek 1
  [256] pusharglist 2
  [258] extcall 18
  [260] setlocal 17
  [262] getlocal 16 ............................. <tEndPointX>
  [264] setlocal 15 ............................. tStartPointX = tEndPointX
  [266] getlocal 17 ............................. <i>
  [268] peek 0 .................................. case i of
  [270] pushsymb 203 ............................ <#left>
  [272] eq
  [273] jmpifz [297] ............................ (case) #left:
  [276] pushzero ................................ <0>
  [277] setlocal 13 ............................. tStartPointY = 0
  [279] getlocal 16 ............................. <tEndPointX>
  [281] getlocal 7 .............................. <tLeftImage>
  [283] getobjprop 218 .......................... <tLeftImage.width>
  [285] add ..................................... <tEndPointX + tLeftImage.width>
  [286] setlocal 16 ............................. tEndPointX = tEndPointX + tLeftImage.width
  [288] getlocal 7 .............................. <tLeftImage>
  [290] getobjprop 205 .......................... <tLeftImage.height>
  [292] setlocal 14 ............................. tEndPointY = tLeftImage.height
  [294] jmp [415]
  [297] peek 0
  [299] pushsymb 1145 ........................... <#middle>
  [302] eq
  [303] jmpifz [362] ............................ (case) #middle:
  [306] pushint8 6 .............................. <6>
  [308] getlocal 6 .............................. <tLeftMember>
  [310] getchainedprop 219 ...................... <tLeftMember.regPoint>
  [312] getobjprop 335 .......................... <tLeftMember.regPoint.locV>
  [315] add ..................................... <6 + tLeftMember.regPoint.locV>
  [316] setlocal 13 ............................. tStartPointY = 6 + tLeftMember.regPoint.locV
  [318] getlocal 16 ............................. <tEndPointX>
  [320] getlocal 10 ............................. <tWidth>
  [322] add ..................................... <tEndPointX + tWidth>
  [323] getlocal 7 .............................. <tLeftImage>
  [325] getobjprop 218 .......................... <tLeftImage.width>
  [327] sub ..................................... <tEndPointX + tWidth - tLeftImage.width>
  [328] getprop 1147 ............................ <pBalloonImg>
  [331] pushsymb 489 ............................ <#right>
  [334] pusharglist 2 ........................... <pBalloonImg, #right>
  [336] objcall 73 .............................. <pBalloonImg.getProp(#right)>
  [338] getobjprop 218 .......................... <pBalloonImg.getProp(#right).width>
  [340] sub ..................................... <tEndPointX + tWidth - tLeftImage.width - pBalloonImg.getProp(#right).width>
  [341] setlocal 16 ............................. tEndPointX = tEndPointX + tWidth - tLeftImage.width - pBalloonImg.getProp(#right).width
  [343] getprop 1147 ............................ <pBalloonImg>
  [346] getlocal 17 ............................. <i>
  [348] pusharglist 2 ........................... <pBalloonImg, i>
  [350] objcall 73 .............................. <pBalloonImg.getProp(i)>
  [352] getobjprop 205 .......................... <pBalloonImg.getProp(i).height>
  [354] getlocal 13 ............................. <tStartPointY>
  [356] add ..................................... <pBalloonImg.getProp(i).height + tStartPointY>
  [357] setlocal 14 ............................. tEndPointY = pBalloonImg.getProp(i).height + tStartPointY
  [359] jmp [415]
  [362] peek 0
  [364] pushsymb 489 ............................ <#right>
  [367] eq
  [368] jmpifz [415] ............................ (case) #right:
  [371] pushint8 6 .............................. <6>
  [373] getlocal 6 .............................. <tLeftMember>
  [375] getchainedprop 219 ...................... <tLeftMember.regPoint>
  [377] getobjprop 335 .......................... <tLeftMember.regPoint.locV>
  [380] add ..................................... <6 + tLeftMember.regPoint.locV>
  [381] setlocal 13 ............................. tStartPointY = 6 + tLeftMember.regPoint.locV
  [383] getlocal 16 ............................. <tEndPointX>
  [385] getprop 1147 ............................ <pBalloonImg>
  [388] getlocal 17 ............................. <i>
  [390] pusharglist 2 ........................... <pBalloonImg, i>
  [392] objcall 73 .............................. <pBalloonImg.getProp(i)>
  [394] getobjprop 218 .......................... <pBalloonImg.getProp(i).width>
  [396] add ..................................... <tEndPointX + pBalloonImg.getProp(i).width>
  [397] setlocal 16 ............................. tEndPointX = tEndPointX + pBalloonImg.getProp(i).width
  [399] getprop 1147 ............................ <pBalloonImg>
  [402] getlocal 17 ............................. <i>
  [404] pusharglist 2 ........................... <pBalloonImg, i>
  [406] objcall 73 .............................. <pBalloonImg.getProp(i)>
  [408] getobjprop 205 .......................... <pBalloonImg.getProp(i).height>
  [410] getlocal 13 ............................. <tStartPointY>
  [412] add ..................................... <pBalloonImg.getProp(i).height + tStartPointY>
  [413] setlocal 14 ............................. tEndPointY = pBalloonImg.getProp(i).height + tStartPointY
  [415] pop 1 ................................... end case
  [417] getlocal 15 ............................. <tStartPointX>
  [419] getlocal 13 ............................. <tStartPointY>
  [421] getlocal 16 ............................. <tEndPointX>
  [423] getlocal 14 ............................. <tEndPointY>
  [425] pusharglist 4 ........................... <tStartPointX, tStartPointY, tEndPointX, tEndPointY>
  [427] extcall 177 ............................. <rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)>
  [429] setlocal 18 ............................. tdestrect = rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)
  [431] getlocal 17 ............................. <i>
  [433] pushsymb 203 ............................ <#left>
  [435] eq ...................................... <i = #left>
  [436] jmpifz [456] ............................ if i = #left then
  [439] getlocal 12 ............................. <tNewImg>
  [441] getlocal 7 .............................. <tLeftImage>
  [443] getlocal 18 ............................. <tdestrect>
  [445] getlocal 7 .............................. <tLeftImage>
  [447] getobjprop 177 .......................... <tLeftImage.rect>
  [449] pusharglistnoret 4 ...................... <tNewImg, tLeftImage, tdestrect, tLeftImage.rect>
  [451] objcall 198 ............................. tNewImg.copyPixels(tLeftImage, tdestrect, tLeftImage.rect)
  [453] jmp [484] ............................... next repeat
  [456] getlocal 12 ............................. <tNewImg>
  [458] getprop 1147 ............................ <pBalloonImg>
  [461] getlocal 17 ............................. <i>
  [463] pusharglist 2 ........................... <pBalloonImg, i>
  [465] objcall 73 .............................. <pBalloonImg.getProp(i)>
  [467] getlocal 18 ............................. <tdestrect>
  [469] getprop 1147 ............................ <pBalloonImg>
  [472] getlocal 17 ............................. <i>
  [474] pusharglist 2 ........................... <pBalloonImg, i>
  [476] objcall 73 .............................. <pBalloonImg.getProp(i)>
  [478] getobjprop 177 .......................... <pBalloonImg.getProp(i).rect>
  [480] pusharglistnoret 4 ...................... <tNewImg, pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect>
  [482] objcall 198 ............................. tNewImg.copyPixels(pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect)
  [484] pushint8 1
  [486] add
  [487] endrepeat [244]
  [489] pop 3
  [491] getlocal 9 .............................. <tTextImg>
  [493] getobjprop 177 .......................... <tTextImg.rect>
  [495] getprop 1149 ............................ <pMarginH>
  [498] getprop 1151 ............................ <pMarginV>
  [501] getlocal 6 .............................. <tLeftMember>
  [503] getchainedprop 219 ...................... <tLeftMember.regPoint>
  [505] getobjprop 335 .......................... <tLeftMember.regPoint.locV>
  [508] add ..................................... <pMarginV + tLeftMember.regPoint.locV>
  [509] getprop 1149 ............................ <pMarginH>
  [512] getprop 1151 ............................ <pMarginV>
  [515] getlocal 6 .............................. <tLeftMember>
  [517] getchainedprop 219 ...................... <tLeftMember.regPoint>
  [519] getobjprop 335 .......................... <tLeftMember.regPoint.locV>
  [522] add ..................................... <pMarginV + tLeftMember.regPoint.locV>
  [523] pusharglist 4 ........................... <pMarginH, pMarginV + tLeftMember.regPoint.locV, pMarginH, pMarginV + tLeftMember.regPoint.locV>
  [525] extcall 177 ............................. <rect(pMarginH, pMarginV + tLeftMember.regPoint.locV, pMarginH, pMarginV + tLeftMember.regPoint.locV)>
  [527] add ..................................... <tTextImg.rect + rect(pMarginH, pMarginV + tLeftMember.regPoint.locV, pMarginH, pMarginV + tLeftMember.regPoint.locV)>
  [528] setlocal 18 ............................. tdestrect = tTextImg.rect + rect(pMarginH, pMarginV + tLeftMember.regPoint.locV, pMarginH, pMarginV + tLeftMember.regPoint.locV)
  [530] getlocal 18 ............................. <tdestrect>
  [532] getlocal 12 ............................. <tNewImg>
  [534] getobjprop 218 .......................... <tNewImg.width>
  [536] pushint8 2 .............................. <2>
  [538] div ..................................... <tNewImg.width / 2>
  [539] pushzero ................................ <0>
  [540] getlocal 12 ............................. <tNewImg>
  [542] getobjprop 218 .......................... <tNewImg.width>
  [544] pushint8 2 .............................. <2>
  [546] div ..................................... <tNewImg.width / 2>
  [547] pushzero ................................ <0>
  [548] pusharglist 4 ........................... <tNewImg.width / 2, 0, tNewImg.width / 2, 0>
  [550] extcall 177 ............................. <rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0)>
  [552] add ..................................... <tdestrect + rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0)>
  [553] getlocal 8 .............................. <tTextWidth>
  [555] pushint8 2 .............................. <2>
  [557] div ..................................... <tTextWidth / 2>
  [558] pushzero ................................ <0>
  [559] getlocal 8 .............................. <tTextWidth>
  [561] pushint8 2 .............................. <2>
  [563] div ..................................... <tTextWidth / 2>
  [564] pushzero ................................ <0>
  [565] pusharglist 4 ........................... <tTextWidth / 2, 0, tTextWidth / 2, 0>
  [567] extcall 177 ............................. <rect(tTextWidth / 2, 0, tTextWidth / 2, 0)>
  [569] sub ..................................... <tdestrect + rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0) - rect(tTextWidth / 2, 0, tTextWidth / 2, 0)>
  [570] setlocal 18 ............................. tdestrect = tdestrect + rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0) - rect(tTextWidth / 2, 0, tTextWidth / 2, 0)
  [572] getlocal 12 ............................. <tNewImg>
  [574] getlocal 9 .............................. <tTextImg>
  [576] getlocal 18 ............................. <tdestrect>
  [578] getlocal 9 .............................. <tTextImg>
  [580] getobjprop 177 .......................... <tTextImg.rect>
  [582] pusharglistnoret 4 ...................... <tNewImg, tTextImg, tdestrect, tTextImg.rect>
  [584] objcall 198 ............................. tNewImg.copyPixels(tTextImg, tdestrect, tTextImg.rect)
  [586] getlocal 0 .............................. <tmember>
  [588] getlocal 1 .............................. <tSavedFont>
  [590] setobjprop 839 .......................... tmember.font = tSavedFont
  [593] getlocal 0 .............................. <tmember>
  [595] getlocal 2 .............................. <tSavedStyle>
  [597] setobjprop 837 .......................... tmember.fontStyle = tSavedStyle
  [600] getlocal 0 .............................. <tmember>
  [602] getlocal 4 .............................. <tSavedColor>
  [604] setobjprop 349 .......................... tmember.color = tSavedColor
  [607] getlocal 12 ............................. <tNewImg>
  [609] pusharglistnoret 1 ...................... <tNewImg>
  [611] extcall 13 .............................. return tNewImg
  [613] ret
end

on showNewBalloon me
  [  0] getprop 1177 ............................ <pLastMsg>
  [  3] setlocal 0 .............................. tMsg = pLastMsg
  [  5] getprop 1169 ............................ <pLastBalloonId>
  [  8] pusharglist 1 ........................... <pLastBalloonId>
  [ 10] extcall 345 ............................. <voidp(pLastBalloonId)>
  [ 13] jmpifz [ 20] ............................ if voidp(pLastBalloonId) then
  [ 16] pusharglistnoret 0 ...................... <>
  [ 18] extcall 13 .............................. return 
  [ 20] getprop 1112 ............................ <pAvailableBalloons>
  [ 23] pushint8 1 .............................. <1>
  [ 25] pusharglist 2 ........................... <pAvailableBalloons, 1>
  [ 27] objcall 18 .............................. <pAvailableBalloons[1]>
  [ 29] setlocal 1 .............................. tNewBalloon = pAvailableBalloons[1]
  [ 31] getprop 1113 ............................ <pVisibleBalloons>
  [ 34] getprop 1169 ............................ <pLastBalloonId>
  [ 37] getlocal 1 .............................. <tNewBalloon>
  [ 39] pusharglistnoret 3 ...................... <pVisibleBalloons, pLastBalloonId, tNewBalloon>
  [ 41] objcall 23 .............................. pVisibleBalloons.addProp(pLastBalloonId, tNewBalloon)
  [ 43] getprop 1112 ............................ <pAvailableBalloons>
  [ 46] getprop 1169 ............................ <pLastBalloonId>
  [ 49] pusharglistnoret 2 ...................... <pAvailableBalloons, pLastBalloonId>
  [ 51] objcall 1170 ............................ pAvailableBalloons.deleteProp(pLastBalloonId)
  [ 54] getprop 1113 ............................ <pVisibleBalloons>
  [ 57] getprop 1169 ............................ <pLastBalloonId>
  [ 60] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [ 62] objcall 18 .............................. <pVisibleBalloons[pLastBalloonId]>
  [ 64] pushsymb 171 ............................ <#member>
  [ 66] pusharglist 2 ........................... <pVisibleBalloons[pLastBalloonId], #member>
  [ 68] objcall 155 ............................. <pVisibleBalloons[pLastBalloonId].get(#member)>
  [ 70] pusharglist 1 ........................... <pVisibleBalloons[pLastBalloonId].get(#member)>
  [ 72] extcall 171 ............................. <member(pVisibleBalloons[pLastBalloonId].get(#member))>
  [ 74] setlocal 2 .............................. tmember = member(pVisibleBalloons[pLastBalloonId].get(#member))
  [ 76] getprop 1113 ............................ <pVisibleBalloons>
  [ 79] getprop 1169 ............................ <pLastBalloonId>
  [ 82] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [ 84] objcall 18 .............................. <pVisibleBalloons[pLastBalloonId]>
  [ 86] pushsymb 1130 ........................... <#balloonColor>
  [ 89] getprop 1179 ............................ <pBalloonColor>
  [ 92] pusharglistnoret 3 ...................... <pVisibleBalloons[pLastBalloonId], #balloonColor, pBalloonColor>
  [ 94] objcall 230 ............................. pVisibleBalloons[pLastBalloonId].set(#balloonColor, pBalloonColor)
  [ 96] getparam 0 .............................. <me>
  [ 98] getlocal 0 .............................. <tMsg>
  [100] pushsymb 1136 ........................... <#text>
  [103] pusharglist 2 ........................... <tMsg, #text>
  [105] objcall 18 .............................. <tMsg[#text]>
  [107] getlocal 0 .............................. <tMsg>
  [109] pushsymb 632 ............................ <#type>
  [112] pusharglist 2 ........................... <tMsg, #type>
  [114] objcall 18 .............................. <tMsg[#type]>
  [116] pusharglist 3 ........................... <me, tMsg[#text], tMsg[#type]>
  [118] objcall 1182 ............................ <me.createballoonImg(tMsg[#text], tMsg[#type])>
  [121] setlocal 3 .............................. tBalloonImage = me.createballoonImg(tMsg[#text], tMsg[#type])
  [123] getlocal 3 .............................. <tBalloonImage>
  [125] pushzero ................................ <0>
  [126] eq ...................................... <tBalloonImage = 0>
  [127] jmpifz [160] ............................ if tBalloonImage = 0 then
  [130] getparam 0 .............................. <me>
  [132] getlocal 0 .............................. <tMsg>
  [134] pushsymb 88 ............................. <#id>
  [136] pusharglist 2 ........................... <tMsg, #id>
  [138] objcall 18 .............................. <tMsg[#id]>
  [140] pusharglistnoret 2 ...................... <me, tMsg[#id]>
  [142] objcall 1161 ............................ me.removeVisibleBalloon(tMsg[#id])
  [145] getparam 0 .............................. <me>
  [147] pushcons 17 ............................. <"No image for balloon.">
  [149] pushsymb 1163 ........................... <#showNewBalloon>
  [152] pusharglist 3 ........................... <me, "No image for balloon.", #showNewBalloon>
  [154] extcall 19 .............................. <error(me, "No image for balloon.", #showNewBalloon)>
  [156] pusharglistnoret 1 ...................... <error(me, "No image for balloon.", #showNewBalloon)>
  [158] extcall 13 .............................. return error(me, "No image for balloon.", #showNewBalloon)
  [160] getlocal 2 .............................. <tmember>
  [162] getlocal 3 .............................. <tBalloonImage>
  [164] setobjprop 172 .......................... tmember.image = tBalloonImage
  [166] getlocal 2 .............................. <tmember>
  [168] getlocal 2 .............................. <tmember>
  [170] getobjprop 219 .......................... <tmember.regPoint>
  [172] pushzero ................................ <0>
  [173] getlocal 2 .............................. <tmember>
  [175] getchainedprop 172 ...................... <tmember.image>
  [177] getobjprop 205 .......................... <tmember.image.height>
  [179] pushint8 2 .............................. <2>
  [181] div ..................................... <tmember.image.height / 2>
  [182] pusharglist 2 ........................... <0, tmember.image.height / 2>
  [184] extcall 322 ............................. <point(0, tmember.image.height / 2)>
  [187] add ..................................... <tmember.regPoint + point(0, tmember.image.height / 2)>
  [188] setobjprop 219 .......................... tmember.regPoint = tmember.regPoint + point(0, tmember.image.height / 2)
  [190] pushcons 18 ............................. <"balloons.leftmargin">
  [192] pushzero ................................ <0>
  [193] pusharglist 2 ........................... <"balloons.leftmargin", 0>
  [195] extcall 740 ............................. <getIntVariable("balloons.leftmargin", 0)>
  [198] setlocal 4 .............................. pBalloonLeftMarg = getIntVariable("balloons.leftmargin", 0)
  [200] pushcons 19 ............................. <"balloons.rightmargin">
  [202] pushint16 720 ........................... <720>
  [205] pusharglist 2 ........................... <"balloons.rightmargin", 720>
  [207] extcall 740 ............................. <getIntVariable("balloons.rightmargin", 720)>
  [210] setlocal 5 .............................. pBalloonRightMarg = getIntVariable("balloons.rightmargin", 720)
  [212] getlocal 0 .............................. <tMsg>
  [214] pushsymb 1183 ........................... <#location>
  [217] pusharglist 2 ........................... <tMsg, #location>
  [219] objcall 18 .............................. <tMsg[#location]>
  [221] pushint8 1 .............................. <1>
  [223] pusharglist 2 ........................... <tMsg[#location], 1>
  [225] objcall 18 .............................. <tMsg[#location][1]>
  [227] getlocal 2 .............................. <tmember>
  [229] getchainedprop 172 ...................... <tmember.image>
  [231] getobjprop 218 .......................... <tmember.image.width>
  [233] pushint8 2 .............................. <2>
  [235] div ..................................... <tmember.image.width / 2>
  [236] add ..................................... <tMsg[#location][1] + (tmember.image.width / 2)>
  [237] getlocal 5 .............................. <pBalloonRightMarg>
  [239] gt ...................................... <(tMsg[#location][1] + (tmember.image.width / 2)) > pBalloonRightMarg>
  [240] jmpifz [260] ............................ if (tMsg[#location][1] + (tmember.image.width / 2)) > pBalloonRightMarg then / else
  [243] getlocal 5 .............................. <pBalloonRightMarg>
  [245] getlocal 2 .............................. <tmember>
  [247] getchainedprop 172 ...................... <tmember.image>
  [249] getobjprop 218 .......................... <tmember.image.width>
  [251] pushint8 2 .............................. <2>
  [253] div ..................................... <tmember.image.width / 2>
  [254] sub ..................................... <pBalloonRightMarg - (tmember.image.width / 2)>
  [255] setlocal 6 .............................. tStartH = pBalloonRightMarg - (tmember.image.width / 2)
  [257] jmp [325]
  [260] getlocal 0 .............................. <tMsg>
  [262] pushsymb 1183 ........................... <#location>
  [265] pusharglist 2 ........................... <tMsg, #location>
  [267] objcall 18 .............................. <tMsg[#location]>
  [269] pushint8 1 .............................. <1>
  [271] pusharglist 2 ........................... <tMsg[#location], 1>
  [273] objcall 18 .............................. <tMsg[#location][1]>
  [275] getlocal 2 .............................. <tmember>
  [277] getchainedprop 172 ...................... <tmember.image>
  [279] getobjprop 218 .......................... <tmember.image.width>
  [281] pushint8 2 .............................. <2>
  [283] div ..................................... <tmember.image.width / 2>
  [284] sub ..................................... <tMsg[#location][1] - (tmember.image.width / 2)>
  [285] getlocal 4 .............................. <pBalloonLeftMarg>
  [287] lt ...................................... <(tMsg[#location][1] - (tmember.image.width / 2)) < pBalloonLeftMarg>
  [288] jmpifz [308] ............................ if (tMsg[#location][1] - (tmember.image.width / 2)) < pBalloonLeftMarg then / else
  [291] getlocal 4 .............................. <pBalloonLeftMarg>
  [293] getlocal 2 .............................. <tmember>
  [295] getchainedprop 172 ...................... <tmember.image>
  [297] getobjprop 218 .......................... <tmember.image.width>
  [299] pushint8 2 .............................. <2>
  [301] div ..................................... <tmember.image.width / 2>
  [302] add ..................................... <pBalloonLeftMarg + (tmember.image.width / 2)>
  [303] setlocal 6 .............................. tStartH = pBalloonLeftMarg + (tmember.image.width / 2)
  [305] jmp [325]
  [308] getlocal 0 .............................. <tMsg>
  [310] pushsymb 1183 ........................... <#location>
  [313] pusharglist 2 ........................... <tMsg, #location>
  [315] objcall 18 .............................. <tMsg[#location]>
  [317] pushint8 1 .............................. <1>
  [319] pusharglist 2 ........................... <tMsg[#location], 1>
  [321] objcall 18 .............................. <tMsg[#location][1]>
  [323] setlocal 6 .............................. tStartH = tMsg[#location][1]
  [325] getprop 1113 ............................ <pVisibleBalloons>
  [328] getprop 1169 ............................ <pLastBalloonId>
  [331] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [333] objcall 18 .............................. <pVisibleBalloons[pLastBalloonId]>
  [335] pushsymb 336 ............................ <#loc>
  [338] getlocal 6 .............................. <tStartH>
  [340] getprop 1158 ............................ <pStartV>
  [343] pusharglist 2 ........................... <tStartH, pStartV>
  [345] extcall 322 ............................. <point(tStartH, pStartV)>
  [348] pusharglistnoret 3 ...................... <pVisibleBalloons[pLastBalloonId], #loc, point(tStartH, pStartV)>
  [350] objcall 230 ............................. pVisibleBalloons[pLastBalloonId].set(#loc, point(tStartH, pStartV))
  [352] getprop 1113 ............................ <pVisibleBalloons>
  [355] getprop 1169 ............................ <pLastBalloonId>
  [358] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [360] objcall 18 .............................. <pVisibleBalloons[pLastBalloonId]>
  [362] pushsymb 1184 ........................... <#ownerID>
  [365] getlocal 0 .............................. <tMsg>
  [367] pushsymb 88 ............................. <#id>
  [369] pusharglist 2 ........................... <tMsg, #id>
  [371] objcall 18 .............................. <tMsg[#id]>
  [373] pusharglistnoret 3 ...................... <pVisibleBalloons[pLastBalloonId], #ownerID, tMsg[#id]>
  [375] objcall 230 ............................. pVisibleBalloons[pLastBalloonId].set(#ownerID, tMsg[#id])
  [377] pushsymb 1185 ........................... <#defineBalloon>
  [380] getprop 1113 ............................ <pVisibleBalloons>
  [383] getprop 1169 ............................ <pLastBalloonId>
  [386] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [388] objcall 18 .............................. <pVisibleBalloons[pLastBalloonId]>
  [390] pusharglistnoret 2 ...................... <#defineBalloon, pVisibleBalloons[pLastBalloonId]>
  [392] extcall 267 ............................. call(#defineBalloon, pVisibleBalloons[pLastBalloonId])
  [395] ret
end

on prepare me
  [  0] getprop 1154 ............................ <pState>
  [  3] pushsymb 1175 ........................... <#scroll>
  [  6] eq ...................................... <pState = #scroll>
  [  7] jmpifz [237] ............................ if pState = #scroll then
  [ 10] getprop 1155 ............................ <pScrollCounter>
  [ 13] getprop 1150 ............................ <pScrollBy>
  [ 16] add ..................................... <pScrollCounter + pScrollBy>
  [ 17] getprop 1153 ............................ <pMoveOffsetV>
  [ 20] lteq .................................... <(pScrollCounter + pScrollBy) <= pMoveOffsetV>
  [ 21] jmpifz [ 86] ............................ if (pScrollCounter + pScrollBy) <= pMoveOffsetV then / else
  [ 24] getprop 1155 ............................ <pScrollCounter>
  [ 27] getprop 1150 ............................ <pScrollBy>
  [ 30] add ..................................... <pScrollCounter + pScrollBy>
  [ 31] setprop 1155 ............................ pScrollCounter = pScrollCounter + pScrollBy
  [ 34] pushsymb 1190 ........................... <#UpdateBalloonPos>
  [ 37] getprop 1113 ............................ <pVisibleBalloons>
  [ 40] getprop 1150 ............................ <pScrollBy>
  [ 43] inv ..................................... <-pScrollBy>
  [ 44] pusharglistnoret 3 ...................... <#UpdateBalloonPos, pVisibleBalloons, -pScrollBy>
  [ 46] extcall 267 ............................. call(#UpdateBalloonPos, pVisibleBalloons, -pScrollBy)
  [ 49] getprop 1169 ............................ <pLastBalloonId>
  [ 52] pusharglist 1 ........................... <pLastBalloonId>
  [ 54] extcall 345 ............................. <voidp(pLastBalloonId)>
  [ 57] not ..................................... <not voidp(pLastBalloonId)>
  [ 58] jmpifz [ 83] ............................ if not voidp(pLastBalloonId) then
  [ 61] pushsymb 1122 ........................... <#OpeningBalloon>
  [ 64] getprop 1111 ............................ <pBalloonPulse>
  [ 67] getprop 1155 ............................ <pScrollCounter>
  [ 70] inv ..................................... <-pScrollCounter>
  [ 71] getprop 1150 ............................ <pScrollBy>
  [ 74] pushint8 2 .............................. <2>
  [ 76] mul ..................................... <pScrollBy * 2>
  [ 77] mul ..................................... <-pScrollCounter * (pScrollBy * 2)>
  [ 78] pusharglistnoret 3 ...................... <#OpeningBalloon, pBalloonPulse, -pScrollCounter * (pScrollBy * 2)>
  [ 80] extcall 267 ............................. call(#OpeningBalloon, pBalloonPulse, -pScrollCounter * (pScrollBy * 2))
  [ 83] jmp [237]
  [ 86] getprop 1169 ............................ <pLastBalloonId>
  [ 89] pusharglist 1 ........................... <pLastBalloonId>
  [ 91] extcall 345 ............................. <voidp(pLastBalloonId)>
  [ 94] not ..................................... <not voidp(pLastBalloonId)>
  [ 95] jmpifz [105] ............................ if not voidp(pLastBalloonId) then
  [ 98] getparam 0 .............................. <me>
  [100] pusharglistnoret 1 ...................... <me>
  [102] objcall 1163 ............................ me.showNewBalloon()
  [105] getparam 0 .............................. <me>
  [107] pusharglist 1 ........................... <me>
  [109] objcall 25 .............................. <me.getID()>
  [111] pusharglistnoret 1 ...................... <me.getID()>
  [113] extcall 1117 ............................ removePrepare(me.getID())
  [116] pushzero ................................ <0>
  [117] setprop 1155 ............................ pScrollCounter = 0
  [120] pushsymb 738 ............................ <#normal>
  [123] setprop 1154 ............................ pState = #normal
  [126] getprop 1135 ............................ <pBalloonBuffer>
  [129] pusharglist 1 ........................... <pBalloonBuffer>
  [131] objcall 20 .............................. <pBalloonBuffer.count()>
  [133] pushzero ................................ <0>
  [134] gt ...................................... <pBalloonBuffer.count() > 0>
  [135] jmpifz [192] ............................ if pBalloonBuffer.count() > 0 then / else
  [138] getprop 1135 ............................ <pBalloonBuffer>
  [141] pushint8 1 .............................. <1>
  [143] pusharglist 2 ........................... <pBalloonBuffer, 1>
  [145] objcall 18 .............................. <pBalloonBuffer[1]>
  [147] setlocal 0 .............................. tMsg = pBalloonBuffer[1]
  [149] getprop 1135 ............................ <pBalloonBuffer>
  [152] pushint8 1 .............................. <1>
  [154] pusharglistnoret 2 ...................... <pBalloonBuffer, 1>
  [156] objcall 67 .............................. pBalloonBuffer.deleteAt(1)
  [158] getparam 0 .............................. <me>
  [160] getlocal 0 .............................. <tMsg>
  [162] pushint8 1 .............................. <1>
  [164] pusharglist 2 ........................... <tMsg, 1>
  [166] objcall 18 .............................. <tMsg[1]>
  [168] getlocal 0 .............................. <tMsg>
  [170] pushint8 2 .............................. <2>
  [172] pusharglist 2 ........................... <tMsg, 2>
  [174] objcall 18 .............................. <tMsg[2]>
  [176] getlocal 0 .............................. <tMsg>
  [178] pushint8 3 .............................. <3>
  [180] pusharglist 2 ........................... <tMsg, 3>
  [182] objcall 18 .............................. <tMsg[3]>
  [184] pusharglistnoret 4 ...................... <me, tMsg[1], tMsg[2], tMsg[3]>
  [186] objcall 1162 ............................ me.createBalloon(tMsg[1], tMsg[2], tMsg[3])
  [189] jmp [237]
  [192] pushsymb 1223 ........................... <#bbballoonautoscroll>
  [195] pusharglist 1 ........................... <#bbballoonautoscroll>
  [197] extcall 432 ............................. <timeoutExists(#bbballoonautoscroll)>
  [200] jmpifz [211] ............................ if timeoutExists(#bbballoonautoscroll) then
  [203] pushsymb 1223 ........................... <#bbballoonautoscroll>
  [206] pusharglistnoret 1 ...................... <#bbballoonautoscroll>
  [208] extcall 433 ............................. removeTimeout(#bbballoonautoscroll)
  [211] pushsymb 1223 ........................... <#bbballoonautoscroll>
  [214] getprop 1156 ............................ <pAutoScrollTime>
  [217] pushsymb 1164 ........................... <#timeToScrollLines>
  [220] getparam 0 .............................. <me>
  [222] pusharglist 1 ........................... <me>
  [224] objcall 25 .............................. <me.getID()>
  [226] pusharglist 0 ........................... <>
  [228] extcall 43 .............................. <VOID>
  [230] pushint8 1 .............................. <1>
  [232] pusharglistnoret 6 ...................... <#bbballoonautoscroll, pAutoScrollTime, #timeToScrollLines, me.getID(), VOID, 1>
  [234] extcall 415 ............................. createTimeout(#bbballoonautoscroll, pAutoScrollTime, #timeToScrollLines, me.getID(), VOID, 1)
  [237] ret
end

on timeToScrollLines me
  [  0] getprop 1154 ............................ <pState>
  [  3] pushsymb 738 ............................ <#normal>
  [  6] eq ...................................... <pState = #normal>
  [  7] getprop 1113 ............................ <pVisibleBalloons>
  [ 10] pusharglist 1 ........................... <pVisibleBalloons>
  [ 12] objcall 20 .............................. <pVisibleBalloons.count()>
  [ 14] pushzero ................................ <0>
  [ 15] gt ...................................... <pVisibleBalloons.count() > 0>
  [ 16] and ..................................... <(pState = #normal) and (pVisibleBalloons.count() > 0)>
  [ 17] jmpifz [ 48] ............................ if (pState = #normal) and (pVisibleBalloons.count() > 0) then
  [ 20] pusharglist 0 ........................... <>
  [ 22] extcall 43 .............................. <VOID>
  [ 24] setprop 1169 ............................ pLastBalloonId = VOID
  [ 27] pushzero ................................ <0>
  [ 28] setprop 1155 ............................ pScrollCounter = 0
  [ 31] pushsymb 1175 ........................... <#scroll>
  [ 34] setprop 1154 ............................ pState = #scroll
  [ 37] getparam 0 .............................. <me>
  [ 39] pusharglist 1 ........................... <me>
  [ 41] objcall 25 .............................. <me.getID()>
  [ 43] pusharglistnoret 1 ...................... <me.getID()>
  [ 45] extcall 1176 ............................ receivePrepare(me.getID())
  [ 48] ret
end
