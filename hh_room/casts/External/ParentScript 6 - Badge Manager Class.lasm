property pChosenBadge, pChosenVisibility, pImageLibraryURL, pActiveDownloads

on construct me
  [  0] pushint8 1 .............................. <1>
  [  2] setprop 916 ............................. pChosenBadge = 1
  [  5] pushint8 1 .............................. <1>
  [  7] setprop 917 ............................. pChosenVisibility = 1
  [ 10] pushcons 0 .............................. <"image.library.url">
  [ 12] pushcons 1 .............................. <"http://images.habbohotel.com/c_images/">
  [ 14] pusharglist 2 ........................... <"image.library.url", "http://images.habbohotel.com/c_images/">
  [ 16] extcall 80 .............................. <getVariable("image.library.url", "http://images.habbohotel.com/c_images/")>
  [ 18] setprop 918 ............................. pImageLibraryURL = getVariable("image.library.url", "http://images.habbohotel.com/c_images/")
  [ 21] pusharglist 0 ........................... <[]>
  [ 23] pushlist ................................ <[]>
  [ 24] setprop 919 ............................. pActiveDownloads = []
  [ 27] pushint8 1 .............................. <1>
  [ 29] pusharglistnoret 1 ...................... <1>
  [ 31] extcall 116 ............................. return 1
  [ 33] ret
end

on deconstruct me
  [  0] pushcons 2 .............................. <"badge_choice_window">
  [  2] pusharglist 1 ........................... <"badge_choice_window">
  [  4] extcall 124 ............................. <windowExists("badge_choice_window")>
  [  6] jmpifz [ 15] ............................ if windowExists("badge_choice_window") then
  [  9] pushcons 2 .............................. <"badge_choice_window">
  [ 11] pusharglistnoret 1 ...................... <"badge_choice_window">
  [ 13] extcall 199 ............................. removeWindow("badge_choice_window")
  [ 15] pushint8 1 .............................. <1>
  [ 17] setlocal 0
  [ 19] getlocal 0
  [ 21] getprop 919 ............................. <pActiveDownloads>
  [ 24] getobjprop 149 .......................... <pActiveDownloads.count>
  [ 26] lteq
  [ 27] jmpifz [ 53] ............................ repeat with i = 1 to pActiveDownloads.count
  [ 30] getprop 919 ............................. <pActiveDownloads>
  [ 33] getlocal 0 .............................. <i>
  [ 35] pusharglist 2 ........................... <pActiveDownloads, i>
  [ 37] objcall 138 ............................. <pActiveDownloads[i]>
  [ 39] pusharglistnoret 1 ...................... <pActiveDownloads[i]>
  [ 41] extcall 920 ............................. abortDownLoad(pActiveDownloads[i])
  [ 44] pushint8 1
  [ 46] getlocal 0
  [ 48] add
  [ 49] setlocal 0
  [ 51] endrepeat [ 19]
  [ 53] pushint8 1 .............................. <1>
  [ 55] pusharglistnoret 1 ...................... <1>
  [ 57] extcall 116 ............................. return 1
  [ 59] ret
end

on openBadgeWindow me
  [  0] pushcons 3 .............................. <"session">
  [  2] pusharglist 1 ........................... <"session">
  [  4] extcall 112 ............................. <getObject("session")>
  [  6] pushcons 4 .............................. <"available_badges">
  [  8] pusharglist 0 ........................... <[]>
  [ 10] pushlist ................................ <[]>
  [ 11] pusharglist 3 ........................... <getObject("session"), "available_badges", []>
  [ 13] objcall 201 ............................. <getObject("session").get("available_badges", [])>
  [ 15] setlocal 0 .............................. tBadgeList = getObject("session").get("available_badges", [])
  [ 17] getlocal 0 .............................. <tBadgeList>
  [ 19] getobjprop 149 .......................... <tBadgeList.count>
  [ 21] pushint8 1 .............................. <1>
  [ 23] lt ...................................... <tBadgeList.count < 1>
  [ 24] jmpifz [ 32] ............................ if tBadgeList.count < 1 then
  [ 27] pushzero ................................ <0>
  [ 28] pusharglistnoret 1 ...................... <0>
  [ 30] extcall 116 ............................. return 0
  [ 32] pushcons 2 .............................. <"badge_choice_window">
  [ 34] pusharglist 0 ........................... <>
  [ 36] extcall 120 ............................. <VOID>
  [ 38] pushint16 360 ........................... <360>
  [ 41] pushint16 195 ........................... <195>
  [ 44] pusharglist 4 ........................... <"badge_choice_window", VOID, 360, 195>
  [ 46] extcall 169 ............................. <createWindow("badge_choice_window", VOID, 360, 195)>
  [ 48] not ..................................... <not createWindow("badge_choice_window", VOID, 360, 195)>
  [ 49] jmpifz [ 57] ............................ if not createWindow("badge_choice_window", VOID, 360, 195) then
  [ 52] pushzero ................................ <0>
  [ 53] pusharglistnoret 1 ...................... <0>
  [ 55] extcall 116 ............................. return 0
  [ 57] pushcons 2 .............................. <"badge_choice_window">
  [ 59] pusharglist 1 ........................... <"badge_choice_window">
  [ 61] extcall 170 ............................. <getWindow("badge_choice_window")>
  [ 63] setlocal 1 .............................. tWndObj = getWindow("badge_choice_window")
  [ 65] getlocal 1 .............................. <tWndObj>
  [ 67] pushsymb 865 ............................ <#title>
  [ 70] pushcons 5 .............................. <"room_badge_window_title">
  [ 72] pusharglist 1 ........................... <"room_badge_window_title">
  [ 74] extcall 95 .............................. <getText("room_badge_window_title")>
  [ 76] pusharglistnoret 3 ...................... <tWndObj, #title, getText("room_badge_window_title")>
  [ 78] objcall 38 .............................. tWndObj.setProperty(#title, getText("room_badge_window_title"))
  [ 80] getlocal 1 .............................. <tWndObj>
  [ 82] pushcons 6 .............................. <"habbo_basic.window">
  [ 84] pusharglist 2 ........................... <tWndObj, "habbo_basic.window">
  [ 86] objcall 175 ............................. <tWndObj.merge("habbo_basic.window")>
  [ 88] not ..................................... <not tWndObj.merge("habbo_basic.window")>
  [ 89] jmpifz [103] ............................ if not tWndObj.merge("habbo_basic.window") then
  [ 92] getlocal 1 .............................. <tWndObj>
  [ 94] pusharglist 1 ........................... <tWndObj>
  [ 96] objcall 340 ............................. <tWndObj.close()>
  [ 99] pusharglistnoret 1 ...................... <tWndObj.close()>
  [101] extcall 116 ............................. return tWndObj.close()
  [103] getlocal 1 .............................. <tWndObj>
  [105] pushcons 7 .............................. <"habbo_badge_select.window">
  [107] pusharglist 2 ........................... <tWndObj, "habbo_badge_select.window">
  [109] objcall 175 ............................. <tWndObj.merge("habbo_badge_select.window")>
  [111] setlocal 2 .............................. tMerged = tWndObj.merge("habbo_badge_select.window")
  [113] getlocal 2 .............................. <tMerged>
  [115] not ..................................... <not tMerged>
  [116] jmpifz [140] ............................ if not tMerged then
  [119] pushcons 2 .............................. <"badge_choice_window">
  [121] pusharglistnoret 1 ...................... <"badge_choice_window">
  [123] extcall 199 ............................. removeWindow("badge_choice_window")
  [125] getparam 0 .............................. <me>
  [127] pushcons 8 .............................. <"Badge selection window not found!">
  [129] pushsymb 430 ............................ <#openBadgeWindow>
  [132] pusharglist 3 ........................... <me, "Badge selection window not found!", #openBadgeWindow>
  [134] extcall 123 ............................. <error(me, "Badge selection window not found!", #openBadgeWindow)>
  [136] pusharglistnoret 1 ...................... <error(me, "Badge selection window not found!", #openBadgeWindow)>
  [138] extcall 116 ............................. return error(me, "Badge selection window not found!", #openBadgeWindow)
  [140] pushsymb 462 ............................ <#leaveRoom>
  [143] getlocal 1 .............................. <tWndObj>
  [145] pusharglist 1 ........................... <tWndObj>
  [147] objcall 115 ............................. <tWndObj.getID()>
  [149] pushsymb 340 ............................ <#close>
  [152] pusharglistnoret 3 ...................... <#leaveRoom, tWndObj.getID(), #close>
  [154] extcall 114 ............................. registerMessage(#leaveRoom, tWndObj.getID(), #close)
  [156] pushsymb 550 ............................ <#changeRoom>
  [159] getlocal 1 .............................. <tWndObj>
  [161] pusharglist 1 ........................... <tWndObj>
  [163] objcall 115 ............................. <tWndObj.getID()>
  [165] pushsymb 340 ............................ <#close>
  [168] pusharglistnoret 3 ...................... <#changeRoom, tWndObj.getID(), #close>
  [170] extcall 114 ............................. registerMessage(#changeRoom, tWndObj.getID(), #close)
  [172] getlocal 1 .............................. <tWndObj>
  [174] pushsymb 910 ............................ <#eventProcBadgeChooser>
  [177] getparam 0 .............................. <me>
  [179] pusharglist 1 ........................... <me>
  [181] objcall 115 ............................. <me.getID()>
  [183] pushsymb 0 .............................. <#mouseUp>
  [185] pusharglistnoret 4 ...................... <tWndObj, #eventProcBadgeChooser, me.getID(), #mouseUp>
  [187] objcall 143 ............................. tWndObj.registerProcedure(#eventProcBadgeChooser, me.getID(), #mouseUp)
  [189] pushcons 3 .............................. <"session">
  [191] pusharglist 1 ........................... <"session">
  [193] extcall 112 ............................. <getObject("session")>
  [195] pushcons 9 .............................. <"badge_visible">
  [197] pusharglist 2 ........................... <getObject("session"), "badge_visible">
  [199] objcall 201 ............................. <getObject("session").get("badge_visible")>
  [201] setprop 917 ............................. pChosenVisibility = getObject("session").get("badge_visible")
  [204] pushcons 3 .............................. <"session">
  [206] pusharglist 1 ........................... <"session">
  [208] extcall 112 ............................. <getObject("session")>
  [210] pushcons 10 ............................. <"chosen_badge_index">
  [212] pusharglist 2 ........................... <getObject("session"), "chosen_badge_index">
  [214] objcall 201 ............................. <getObject("session").get("chosen_badge_index")>
  [216] setprop 916 ............................. pChosenBadge = getObject("session").get("chosen_badge_index")
  [219] getprop 916 ............................. <pChosenBadge>
  [222] pushint8 1 .............................. <1>
  [224] lt ...................................... <pChosenBadge < 1>
  [225] jmpifz [233] ............................ if pChosenBadge < 1 then
  [228] pushint8 1 .............................. <1>
  [230] setprop 916 ............................. pChosenBadge = 1
  [233] getparam 0 .............................. <me>
  [235] pusharglistnoret 1 ...................... <me>
  [237] objcall 906 ............................. me.updateBadgeVisibleButtons()
  [240] getparam 0 .............................. <me>
  [242] pusharglistnoret 1 ...................... <me>
  [244] objcall 908 ............................. me.updateBadgeImage()
  [247] getlocal 0 .............................. <tBadgeList>
  [249] getobjprop 149 .......................... <tBadgeList.count>
  [251] pushint8 1 .............................. <1>
  [253] eq ...................................... <tBadgeList.count = 1>
  [254] jmpifz [266] ............................ if tBadgeList.count = 1 then
  [257] getparam 0 .............................. <me>
  [259] getlocal 1 .............................. <tWndObj>
  [261] pusharglistnoret 2 ...................... <me, tWndObj>
  [263] objcall 907 ............................. me.hideBadgeBrowseButtons(tWndObj)
  [266] ret
end

on closeBadgeWindow me
  [  0] pushcons 2 .............................. <"badge_choice_window">
  [  2] pusharglist 1 ........................... <"badge_choice_window">
  [  4] extcall 170 ............................. <getWindow("badge_choice_window")>
  [  6] setlocal 0 .............................. tWndObj = getWindow("badge_choice_window")
  [  8] getlocal 0 .............................. <tWndObj>
  [ 10] pushzero ................................ <0>
  [ 11] eq ...................................... <tWndObj = 0>
  [ 12] jmpifz [ 20] ............................ if tWndObj = 0 then
  [ 15] pushzero ................................ <0>
  [ 16] pusharglistnoret 1 ...................... <0>
  [ 18] extcall 116 ............................. return 0
  [ 20] pushsymb 462 ............................ <#leaveRoom>
  [ 23] getlocal 0 .............................. <tWndObj>
  [ 25] pusharglist 1 ........................... <tWndObj>
  [ 27] objcall 115 ............................. <tWndObj.getID()>
  [ 29] pusharglistnoret 2 ...................... <#leaveRoom, tWndObj.getID()>
  [ 31] extcall 119 ............................. unregisterMessage(#leaveRoom, tWndObj.getID())
  [ 33] pushsymb 550 ............................ <#changeRoom>
  [ 36] getlocal 0 .............................. <tWndObj>
  [ 38] pusharglist 1 ........................... <tWndObj>
  [ 40] objcall 115 ............................. <tWndObj.getID()>
  [ 42] pusharglistnoret 2 ...................... <#changeRoom, tWndObj.getID()>
  [ 44] extcall 119 ............................. unregisterMessage(#changeRoom, tWndObj.getID())
  [ 46] getlocal 0 .............................. <tWndObj>
  [ 48] pusharglistnoret 1 ...................... <tWndObj>
  [ 50] objcall 340 ............................. tWndObj.close()
  [ 53] ret
end

on updateBadgeVisibleButtons me
  [  0] pushcons 2 .............................. <"badge_choice_window">
  [  2] pusharglist 1 ........................... <"badge_choice_window">
  [  4] extcall 170 ............................. <getWindow("badge_choice_window")>
  [  6] setlocal 0 .............................. tWndObj = getWindow("badge_choice_window")
  [  8] getlocal 0 .............................. <tWndObj>
  [ 10] pushzero ................................ <0>
  [ 11] eq ...................................... <tWndObj = 0>
  [ 12] jmpifz [ 20] ............................ if tWndObj = 0 then
  [ 15] pushzero ................................ <0>
  [ 16] pusharglistnoret 1 ...................... <0>
  [ 18] extcall 116 ............................. return 0
  [ 20] pushcons 11 ............................. <"button.radio.on">
  [ 22] pusharglist 1 ........................... <"button.radio.on">
  [ 24] extcall 330 ............................. <getmemnum("button.radio.on")>
  [ 27] pushint8 1 .............................. <1>
  [ 29] lt ...................................... <getmemnum("button.radio.on") < 1>
  [ 30] pushcons 12 ............................. <"button.radio.off">
  [ 32] pusharglist 1 ........................... <"button.radio.off">
  [ 34] extcall 330 ............................. <getmemnum("button.radio.off")>
  [ 37] pushint8 1 .............................. <1>
  [ 39] lt ...................................... <getmemnum("button.radio.off") < 1>
  [ 40] or ...................................... <(getmemnum("button.radio.on") < 1) or (getmemnum("button.radio.off") < 1)>
  [ 41] jmpifz [ 49] ............................ if (getmemnum("button.radio.on") < 1) or (getmemnum("button.radio.off") < 1) then
  [ 44] pushzero ................................ <0>
  [ 45] pusharglistnoret 1 ...................... <0>
  [ 47] extcall 116 ............................. return 0
  [ 49] pushcons 11 ............................. <"button.radio.on">
  [ 51] pusharglist 1 ........................... <"button.radio.on">
  [ 53] extcall 330 ............................. <getmemnum("button.radio.on")>
  [ 56] pusharglist 1 ........................... <getmemnum("button.radio.on")>
  [ 58] extcall 263 ............................. <member(getmemnum("button.radio.on"))>
  [ 61] getobjprop 260 .......................... <member(getmemnum("button.radio.on")).image>
  [ 64] setlocal 1 .............................. tRadioButtonOnImg = member(getmemnum("button.radio.on")).image
  [ 66] pushcons 12 ............................. <"button.radio.off">
  [ 68] pusharglist 1 ........................... <"button.radio.off">
  [ 70] extcall 330 ............................. <getmemnum("button.radio.off")>
  [ 73] pusharglist 1 ........................... <getmemnum("button.radio.off")>
  [ 75] extcall 263 ............................. <member(getmemnum("button.radio.off"))>
  [ 78] getobjprop 260 .......................... <member(getmemnum("button.radio.off")).image>
  [ 81] setlocal 2 .............................. tRadioButtonOffImg = member(getmemnum("button.radio.off")).image
  [ 83] getprop 917 ............................. <pChosenVisibility>
  [ 86] pushint8 1 .............................. <1>
  [ 88] eq ...................................... <pChosenVisibility = 1>
  [ 89] jmpifz [149] ............................ if pChosenVisibility = 1 then / else
  [ 92] getlocal 0 .............................. <tWndObj>
  [ 94] pushcons 13 ............................. <"badge.visible.radio">
  [ 96] pusharglist 2 ........................... <tWndObj, "badge.visible.radio">
  [ 98] objcall 295 ............................. <tWndObj.elementExists("badge.visible.radio")>
  [101] jmpifz [119] ............................ if tWndObj.elementExists("badge.visible.radio") then
  [104] getlocal 0 .............................. <tWndObj>
  [106] pushcons 13 ............................. <"badge.visible.radio">
  [108] pusharglist 2 ........................... <tWndObj, "badge.visible.radio">
  [110] objcall 189 ............................. <tWndObj.getElement("badge.visible.radio")>
  [112] getlocal 1 .............................. <tRadioButtonOnImg>
  [114] pusharglistnoret 2 ...................... <tWndObj.getElement("badge.visible.radio"), tRadioButtonOnImg>
  [116] objcall 266 ............................. tWndObj.getElement("badge.visible.radio").feedImage(tRadioButtonOnImg)
  [119] getlocal 0 .............................. <tWndObj>
  [121] pushcons 14 ............................. <"badge.hidden.radio">
  [123] pusharglist 2 ........................... <tWndObj, "badge.hidden.radio">
  [125] objcall 295 ............................. <tWndObj.elementExists("badge.hidden.radio")>
  [128] jmpifz [146] ............................ if tWndObj.elementExists("badge.hidden.radio") then
  [131] getlocal 0 .............................. <tWndObj>
  [133] pushcons 14 ............................. <"badge.hidden.radio">
  [135] pusharglist 2 ........................... <tWndObj, "badge.hidden.radio">
  [137] objcall 189 ............................. <tWndObj.getElement("badge.hidden.radio")>
  [139] getlocal 2 .............................. <tRadioButtonOffImg>
  [141] pusharglistnoret 2 ...................... <tWndObj.getElement("badge.hidden.radio"), tRadioButtonOffImg>
  [143] objcall 266 ............................. tWndObj.getElement("badge.hidden.radio").feedImage(tRadioButtonOffImg)
  [146] jmp [203]
  [149] getlocal 0 .............................. <tWndObj>
  [151] pushcons 14 ............................. <"badge.hidden.radio">
  [153] pusharglist 2 ........................... <tWndObj, "badge.hidden.radio">
  [155] objcall 295 ............................. <tWndObj.elementExists("badge.hidden.radio")>
  [158] jmpifz [176] ............................ if tWndObj.elementExists("badge.hidden.radio") then
  [161] getlocal 0 .............................. <tWndObj>
  [163] pushcons 14 ............................. <"badge.hidden.radio">
  [165] pusharglist 2 ........................... <tWndObj, "badge.hidden.radio">
  [167] objcall 189 ............................. <tWndObj.getElement("badge.hidden.radio")>
  [169] getlocal 1 .............................. <tRadioButtonOnImg>
  [171] pusharglistnoret 2 ...................... <tWndObj.getElement("badge.hidden.radio"), tRadioButtonOnImg>
  [173] objcall 266 ............................. tWndObj.getElement("badge.hidden.radio").feedImage(tRadioButtonOnImg)
  [176] getlocal 0 .............................. <tWndObj>
  [178] pushcons 13 ............................. <"badge.visible.radio">
  [180] pusharglist 2 ........................... <tWndObj, "badge.visible.radio">
  [182] objcall 295 ............................. <tWndObj.elementExists("badge.visible.radio")>
  [185] jmpifz [203] ............................ if tWndObj.elementExists("badge.visible.radio") then
  [188] getlocal 0 .............................. <tWndObj>
  [190] pushcons 13 ............................. <"badge.visible.radio">
  [192] pusharglist 2 ........................... <tWndObj, "badge.visible.radio">
  [194] objcall 189 ............................. <tWndObj.getElement("badge.visible.radio")>
  [196] getlocal 2 .............................. <tRadioButtonOffImg>
  [198] pusharglistnoret 2 ...................... <tWndObj.getElement("badge.visible.radio"), tRadioButtonOffImg>
  [200] objcall 266 ............................. tWndObj.getElement("badge.visible.radio").feedImage(tRadioButtonOffImg)
  [203] ret
end

on hideBadgeBrowseButtons me, tWndObj
  [  0] getparam 1 .............................. <tWndObj>
  [  2] pushcons 15 ............................. <"badge.next.button">
  [  4] pusharglist 2 ........................... <tWndObj, "badge.next.button">
  [  6] objcall 295 ............................. <tWndObj.elementExists("badge.next.button")>
  [  9] jmpifz [ 24] ............................ if tWndObj.elementExists("badge.next.button") then
  [ 12] getparam 1 .............................. <tWndObj>
  [ 14] pushcons 15 ............................. <"badge.next.button">
  [ 16] pusharglist 2 ........................... <tWndObj, "badge.next.button">
  [ 18] objcall 189 ............................. <tWndObj.getElement("badge.next.button")>
  [ 20] pusharglistnoret 1 ...................... <tWndObj.getElement("badge.next.button")>
  [ 22] objcall 191 ............................. tWndObj.getElement("badge.next.button").hide()
  [ 24] getparam 1 .............................. <tWndObj>
  [ 26] pushcons 16 ............................. <"badge.prev.button">
  [ 28] pusharglist 2 ........................... <tWndObj, "badge.prev.button">
  [ 30] objcall 295 ............................. <tWndObj.elementExists("badge.prev.button")>
  [ 33] jmpifz [ 48] ............................ if tWndObj.elementExists("badge.prev.button") then
  [ 36] getparam 1 .............................. <tWndObj>
  [ 38] pushcons 16 ............................. <"badge.prev.button">
  [ 40] pusharglist 2 ........................... <tWndObj, "badge.prev.button">
  [ 42] objcall 189 ............................. <tWndObj.getElement("badge.prev.button")>
  [ 44] pusharglistnoret 1 ...................... <tWndObj.getElement("badge.prev.button")>
  [ 46] objcall 191 ............................. tWndObj.getElement("badge.prev.button").hide()
  [ 48] ret
end

on updateBadgeImage me
  [  0] pushcons 2 .............................. <"badge_choice_window">
  [  2] pusharglist 1 ........................... <"badge_choice_window">
  [  4] extcall 124 ............................. <windowExists("badge_choice_window")>
  [  6] not ..................................... <not windowExists("badge_choice_window")>
  [  7] jmpifz [ 15] ............................ if not windowExists("badge_choice_window") then
  [ 10] pushzero ................................ <0>
  [ 11] pusharglistnoret 1 ...................... <0>
  [ 13] extcall 116 ............................. return 0
  [ 15] pushcons 2 .............................. <"badge_choice_window">
  [ 17] pusharglist 1 ........................... <"badge_choice_window">
  [ 19] extcall 170 ............................. <getWindow("badge_choice_window")>
  [ 21] setlocal 0 .............................. tWndObj = getWindow("badge_choice_window")
  [ 23] pushcons 3 .............................. <"session">
  [ 25] pusharglist 1 ........................... <"session">
  [ 27] extcall 112 ............................. <getObject("session")>
  [ 29] pushcons 4 .............................. <"available_badges">
  [ 31] pusharglist 0 ........................... <[]>
  [ 33] pushlist ................................ <[]>
  [ 34] pusharglist 3 ........................... <getObject("session"), "available_badges", []>
  [ 36] objcall 201 ............................. <getObject("session").get("available_badges", [])>
  [ 38] setlocal 1 .............................. tBadgeList = getObject("session").get("available_badges", [])
  [ 40] getprop 916 ............................. <pChosenBadge>
  [ 43] getlocal 1 .............................. <tBadgeList>
  [ 45] getobjprop 149 .......................... <tBadgeList.count>
  [ 47] gt ...................................... <pChosenBadge > tBadgeList.count>
  [ 48] getprop 916 ............................. <pChosenBadge>
  [ 51] pushint8 1 .............................. <1>
  [ 53] lt ...................................... <pChosenBadge < 1>
  [ 54] or ...................................... <(pChosenBadge > tBadgeList.count) or (pChosenBadge < 1)>
  [ 55] jmpifz [ 63] ............................ if (pChosenBadge > tBadgeList.count) or (pChosenBadge < 1) then
  [ 58] pushzero ................................ <0>
  [ 59] pusharglistnoret 1 ...................... <0>
  [ 61] extcall 116 ............................. return 0
  [ 63] getlocal 1 .............................. <tBadgeList>
  [ 65] getprop 916 ............................. <pChosenBadge>
  [ 68] pusharglist 2 ........................... <tBadgeList, pChosenBadge>
  [ 70] objcall 138 ............................. <tBadgeList[pChosenBadge]>
  [ 72] setlocal 2 .............................. tBadgeName = tBadgeList[pChosenBadge]
  [ 74] pushcons 17 ............................. <"badge">
  [ 76] getlocal 2 .............................. <tBadgeName>
  [ 78] joinpadstr .............................. <"badge" && tBadgeName>
  [ 79] pusharglist 1 ........................... <"badge" && tBadgeName>
  [ 81] extcall 330 ............................. <getmemnum("badge" && tBadgeName)>
  [ 84] setlocal 3 .............................. tMemNum = getmemnum("badge" && tBadgeName)
  [ 86] getlocal 3 .............................. <tMemNum>
  [ 88] pushint8 1 .............................. <1>
  [ 90] lt ...................................... <tMemNum < 1>
  [ 91] jmpifz [121] ............................ if tMemNum < 1 then
  [ 94] getlocal 0 .............................. <tWndObj>
  [ 96] pushcons 18 ............................. <"badge_preview">
  [ 98] pusharglist 2 ........................... <tWndObj, "badge_preview">
  [100] objcall 189 ............................. <tWndObj.getElement("badge_preview")>
  [102] pusharglistnoret 1 ...................... <tWndObj.getElement("badge_preview")>
  [104] objcall 269 ............................. tWndObj.getElement("badge_preview").clearImage()
  [107] getparam 0 .............................. <me>
  [109] getlocal 2 .............................. <tBadgeName>
  [111] pusharglistnoret 2 ...................... <me, tBadgeName>
  [113] objcall 911 ............................. me.startBadgeDownload(tBadgeName)
  [116] pushzero ................................ <0>
  [117] pusharglistnoret 1 ...................... <0>
  [119] extcall 116 ............................. return 0
  [121] getlocal 0 .............................. <tWndObj>
  [123] pushcons 18 ............................. <"badge_preview">
  [125] pusharglist 2 ........................... <tWndObj, "badge_preview">
  [127] objcall 189 ............................. <tWndObj.getElement("badge_preview")>
  [129] pushsymb 219 ............................ <#width>
  [131] pusharglist 2 ........................... <tWndObj.getElement("badge_preview"), #width>
  [133] objcall 37 .............................. <tWndObj.getElement("badge_preview").getProperty(#width)>
  [135] setlocal 4 .............................. tWidth = tWndObj.getElement("badge_preview").getProperty(#width)
  [137] getlocal 0 .............................. <tWndObj>
  [139] pushcons 18 ............................. <"badge_preview">
  [141] pusharglist 2 ........................... <tWndObj, "badge_preview">
  [143] objcall 189 ............................. <tWndObj.getElement("badge_preview")>
  [145] pushsymb 261 ............................ <#height>
  [148] pusharglist 2 ........................... <tWndObj.getElement("badge_preview"), #height>
  [150] objcall 37 .............................. <tWndObj.getElement("badge_preview").getProperty(#height)>
  [152] setlocal 5 .............................. tHeight = tWndObj.getElement("badge_preview").getProperty(#height)
  [154] getlocal 3 .............................. <tMemNum>
  [156] pusharglist 1 ........................... <tMemNum>
  [158] extcall 263 ............................. <member(tMemNum)>
  [161] getobjprop 260 .......................... <member(tMemNum).image>
  [164] setlocal 6 .............................. tBadgeImage = member(tMemNum).image
  [166] getlocal 4 .............................. <tWidth>
  [168] getlocal 5 .............................. <tHeight>
  [170] pushint8 32 ............................. <32>
  [172] pusharglist 3 ........................... <tWidth, tHeight, 32>
  [174] extcall 260 ............................. <image(tWidth, tHeight, 32)>
  [177] setlocal 7 .............................. tCenteredImage = image(tWidth, tHeight, 32)
  [179] getlocal 7 .............................. <tCenteredImage>
  [181] getobjprop 219 .......................... <tCenteredImage.width>
  [183] getlocal 6 .............................. <tBadgeImage>
  [185] getobjprop 219 .......................... <tBadgeImage.width>
  [187] sub ..................................... <tCenteredImage.width - tBadgeImage.width>
  [188] pushint8 2 .............................. <2>
  [190] div ..................................... <(tCenteredImage.width - tBadgeImage.width) / 2>
  [191] setlocal 8 .............................. tXchange = (tCenteredImage.width - tBadgeImage.width) / 2
  [193] getlocal 7 .............................. <tCenteredImage>
  [195] getobjprop 261 .......................... <tCenteredImage.height>
  [198] getlocal 6 .............................. <tBadgeImage>
  [200] getobjprop 261 .......................... <tBadgeImage.height>
  [203] sub ..................................... <tCenteredImage.height - tBadgeImage.height>
  [204] pushint8 2 .............................. <2>
  [206] div ..................................... <(tCenteredImage.height - tBadgeImage.height) / 2>
  [207] setlocal 9 .............................. tYchange = (tCenteredImage.height - tBadgeImage.height) / 2
  [209] getlocal 6 .............................. <tBadgeImage>
  [211] getobjprop 221 .......................... <tBadgeImage.rect>
  [213] getlocal 8 .............................. <tXchange>
  [215] getlocal 9 .............................. <tYchange>
  [217] getlocal 8 .............................. <tXchange>
  [219] getlocal 9 .............................. <tYchange>
  [221] pusharglist 4 ........................... <tXchange, tYchange, tXchange, tYchange>
  [223] extcall 221 ............................. <rect(tXchange, tYchange, tXchange, tYchange)>
  [225] add ..................................... <tBadgeImage.rect + rect(tXchange, tYchange, tXchange, tYchange)>
  [226] setlocal 10 ............................. tRect1 = tBadgeImage.rect + rect(tXchange, tYchange, tXchange, tYchange)
  [228] getlocal 7 .............................. <tCenteredImage>
  [230] getlocal 6 .............................. <tBadgeImage>
  [232] getlocal 10 ............................. <tRect1>
  [234] getlocal 6 .............................. <tBadgeImage>
  [236] getobjprop 221 .......................... <tBadgeImage.rect>
  [238] pusharglistnoret 4 ...................... <tCenteredImage, tBadgeImage, tRect1, tBadgeImage.rect>
  [240] objcall 293 ............................. tCenteredImage.copyPixels(tBadgeImage, tRect1, tBadgeImage.rect)
  [243] getlocal 0 .............................. <tWndObj>
  [245] pushcons 18 ............................. <"badge_preview">
  [247] pusharglist 2 ........................... <tWndObj, "badge_preview">
  [249] objcall 189 ............................. <tWndObj.getElement("badge_preview")>
  [251] getlocal 7 .............................. <tCenteredImage>
  [253] pusharglistnoret 2 ...................... <tWndObj.getElement("badge_preview"), tCenteredImage>
  [255] objcall 266 ............................. tWndObj.getElement("badge_preview").feedImage(tCenteredImage)
  [258] pushint8 1 .............................. <1>
  [260] pusharglistnoret 1 ...................... <1>
  [262] extcall 116 ............................. return 1
  [264] ret
end

on badgeNextPrev me, tdir
  [  0] pushcons 3 .............................. <"session">
  [  2] pusharglist 1 ........................... <"session">
  [  4] extcall 112 ............................. <getObject("session")>
  [  6] pushcons 4 .............................. <"available_badges">
  [  8] pusharglist 0 ........................... <[]>
  [ 10] pushlist ................................ <[]>
  [ 11] pusharglist 3 ........................... <getObject("session"), "available_badges", []>
  [ 13] objcall 201 ............................. <getObject("session").get("available_badges", [])>
  [ 15] setlocal 0 .............................. tBadgeList = getObject("session").get("available_badges", [])
  [ 17] getlocal 0 .............................. <tBadgeList>
  [ 19] getobjprop 149 .......................... <tBadgeList.count>
  [ 21] pushzero ................................ <0>
  [ 22] eq ...................................... <tBadgeList.count = 0>
  [ 23] jmpifz [ 38] ............................ if tBadgeList.count = 0 then
  [ 26] getparam 0 .............................. <me>
  [ 28] pusharglistnoret 1 ...................... <me>
  [ 30] objcall 905 ............................. me.closeBadgeWindow()
  [ 33] pushzero ................................ <0>
  [ 34] pusharglistnoret 1 ...................... <0>
  [ 36] extcall 116 ............................. return 0
  [ 38] getparam 1 .............................. <tdir>
  [ 40] pushcons 19 ............................. <"next">
  [ 42] eq ...................................... <tdir = "next">
  [ 43] jmpifz [ 74] ............................ if tdir = "next" then / else
  [ 46] getprop 916 ............................. <pChosenBadge>
  [ 49] pushint8 1 .............................. <1>
  [ 51] add ..................................... <pChosenBadge + 1>
  [ 52] setprop 916 ............................. pChosenBadge = pChosenBadge + 1
  [ 55] getprop 916 ............................. <pChosenBadge>
  [ 58] getlocal 0 .............................. <tBadgeList>
  [ 60] getobjprop 149 .......................... <tBadgeList.count>
  [ 62] gt ...................................... <pChosenBadge > tBadgeList.count>
  [ 63] jmpifz [ 71] ............................ if pChosenBadge > tBadgeList.count then
  [ 66] pushint8 1 .............................. <1>
  [ 68] setprop 916 ............................. pChosenBadge = 1
  [ 71] jmp [ 99]
  [ 74] getprop 916 ............................. <pChosenBadge>
  [ 77] pushint8 1 .............................. <1>
  [ 79] sub ..................................... <pChosenBadge - 1>
  [ 80] setprop 916 ............................. pChosenBadge = pChosenBadge - 1
  [ 83] getprop 916 ............................. <pChosenBadge>
  [ 86] pushint8 1 .............................. <1>
  [ 88] lt ...................................... <pChosenBadge < 1>
  [ 89] jmpifz [ 99] ............................ if pChosenBadge < 1 then
  [ 92] getlocal 0 .............................. <tBadgeList>
  [ 94] getobjprop 149 .......................... <tBadgeList.count>
  [ 96] setprop 916 ............................. pChosenBadge = tBadgeList.count
  [ 99] getparam 0 .............................. <me>
  [101] pusharglistnoret 1 ...................... <me>
  [103] objcall 908 ............................. me.updateBadgeImage()
  [106] ret
end

on eventProcBadgeChooser me, tEvent, tSprID, tParam
  [  0] getparam 2 .............................. <tSprID>
  [  2] peek 0 .................................. case tSprID of
  [  4] pushcons 14 ............................. <"badge.hidden.radio">
  [  6] eq
  [  7] jmpifz [ 24] ............................ (case) "badge.hidden.radio":
  [ 10] pushzero ................................ <0>
  [ 11] setprop 917 ............................. pChosenVisibility = 0
  [ 14] getparam 0 .............................. <me>
  [ 16] pusharglistnoret 1 ...................... <me>
  [ 18] objcall 906 ............................. me.updateBadgeVisibleButtons()
  [ 21] jmp [264]
  [ 24] peek 0
  [ 26] pushcons 13 ............................. <"badge.visible.radio">
  [ 28] eq
  [ 29] jmpifz [ 47] ............................ (case) "badge.visible.radio":
  [ 32] pushint8 1 .............................. <1>
  [ 34] setprop 917 ............................. pChosenVisibility = 1
  [ 37] getparam 0 .............................. <me>
  [ 39] pusharglistnoret 1 ...................... <me>
  [ 41] objcall 906 ............................. me.updateBadgeVisibleButtons()
  [ 44] jmp [264]
  [ 47] peek 0
  [ 49] pushcons 20 ............................. <"badge.ok">
  [ 51] eq
  [ 52] jmpifz [209] ............................ (case) "badge.ok":
  [ 55] pushcons 3 .............................. <"session">
  [ 57] pusharglist 1 ........................... <"session">
  [ 59] extcall 112 ............................. <getObject("session")>
  [ 61] pushcons 4 .............................. <"available_badges">
  [ 63] pusharglist 2 ........................... <getObject("session"), "available_badges">
  [ 65] objcall 201 ............................. <getObject("session").get("available_badges")>
  [ 67] setlocal 0 .............................. tBadgeList = getObject("session").get("available_badges")
  [ 69] getprop 916 ............................. <pChosenBadge>
  [ 72] getlocal 0 .............................. <tBadgeList>
  [ 74] getobjprop 149 .......................... <tBadgeList.count>
  [ 76] gt ...................................... <pChosenBadge > tBadgeList.count>
  [ 77] jmpifz [ 94] ............................ if pChosenBadge > tBadgeList.count then
  [ 80] getparam 0 .............................. <me>
  [ 82] pusharglistnoret 1 ...................... <me>
  [ 84] objcall 905 ............................. me.closeBadgeWindow()
  [ 87] pop 1
  [ 89] pushzero ................................ <0>
  [ 90] pusharglistnoret 1 ...................... <0>
  [ 92] extcall 116 ............................. return 0
  [ 94] getprop 917 ............................. <pChosenVisibility>
  [ 97] pusharglist 1 ........................... <pChosenVisibility>
  [ 99] extcall 426 ............................. <integer(pChosenVisibility)>
  [102] setlocal 1 .............................. tVisible = integer(pChosenVisibility)
  [104] pushsymb 596 ............................ <#string>
  [107] getlocal 0 .............................. <tBadgeList>
  [109] getprop 916 ............................. <pChosenBadge>
  [112] pusharglist 2 ........................... <tBadgeList, pChosenBadge>
  [114] objcall 138 ............................. <tBadgeList[pChosenBadge]>
  [116] pushsymb 426 ............................ <#integer>
  [119] getlocal 1 .............................. <tVisible>
  [121] pusharglist 4 ........................... <[#string: tBadgeList[pChosenBadge], #integer: tVisible]>
  [123] pushproplist ............................ <[#string: tBadgeList[pChosenBadge], #integer: tVisible]>
  [124] setlocal 2 .............................. tMsg = [#string: tBadgeList[pChosenBadge], #integer: tVisible]
  [126] pushsymb 931 ............................ <#room>
  [129] pusharglist 1 ........................... <#room>
  [131] extcall 227 ............................. <getThread(#room)>
  [133] pusharglist 1 ........................... <getThread(#room)>
  [135] objcall 173 ............................. <getThread(#room).getComponent()>
  [137] pusharglist 1 ........................... <getThread(#room).getComponent()>
  [139] objcall 368 ............................. <getThread(#room).getComponent().getRoomConnection()>
  [142] pushcons 21 ............................. <"SETBADGE">
  [144] getlocal 2 .............................. <tMsg>
  [146] pusharglistnoret 3 ...................... <getThread(#room).getComponent().getRoomConnection(), "SETBADGE", tMsg>
  [148] objcall 369 ............................. getThread(#room).getComponent().getRoomConnection().send("SETBADGE", tMsg)
  [151] pushcons 3 .............................. <"session">
  [153] pusharglist 1 ........................... <"session">
  [155] extcall 112 ............................. <getObject("session")>
  [157] pushcons 10 ............................. <"chosen_badge_index">
  [159] getprop 916 ............................. <pChosenBadge>
  [162] pusharglistnoret 3 ...................... <getObject("session"), "chosen_badge_index", pChosenBadge>
  [164] objcall 556 ............................. getObject("session").set("chosen_badge_index", pChosenBadge)
  [167] pushcons 3 .............................. <"session">
  [169] pusharglist 1 ........................... <"session">
  [171] extcall 112 ............................. <getObject("session")>
  [173] pushcons 9 .............................. <"badge_visible">
  [175] getprop 917 ............................. <pChosenVisibility>
  [178] pusharglistnoret 3 ...................... <getObject("session"), "badge_visible", pChosenVisibility>
  [180] objcall 556 ............................. getObject("session").set("badge_visible", pChosenVisibility)
  [183] pushsymb 931 ............................ <#room>
  [186] pusharglist 1 ........................... <#room>
  [188] extcall 227 ............................. <getThread(#room)>
  [190] pusharglist 1 ........................... <getThread(#room)>
  [192] objcall 570 ............................. <getThread(#room).getInterface()>
  [195] pusharglistnoret 1 ...................... <getThread(#room).getInterface()>
  [197] objcall 13 .............................. getThread(#room).getInterface().updateInfoStandBadge()
  [199] getparam 0 .............................. <me>
  [201] pusharglistnoret 1 ...................... <me>
  [203] objcall 905 ............................. me.closeBadgeWindow()
  [206] jmp [264]
  [209] peek 0
  [211] pushcons 22 ............................. <"badge.cancel">
  [213] eq
  [214] jmpifz [227] ............................ (case) "badge.cancel":
  [217] getparam 0 .............................. <me>
  [219] pusharglistnoret 1 ...................... <me>
  [221] objcall 905 ............................. me.closeBadgeWindow()
  [224] jmp [264]
  [227] peek 0
  [229] pushcons 15 ............................. <"badge.next.button">
  [231] eq
  [232] jmpifz [247] ............................ (case) "badge.next.button":
  [235] getparam 0 .............................. <me>
  [237] pushcons 19 ............................. <"next">
  [239] pusharglistnoret 2 ...................... <me, "next">
  [241] objcall 909 ............................. me.badgeNextPrev("next")
  [244] jmp [264]
  [247] peek 0
  [249] pushcons 16 ............................. <"badge.prev.button">
  [251] eq
  [252] jmpifz [264] ............................ (case) "badge.prev.button":
  [255] getparam 0 .............................. <me>
  [257] pushcons 23 ............................. <"prev">
  [259] pusharglistnoret 2 ...................... <me, "prev">
  [261] objcall 909 ............................. me.badgeNextPrev("prev")
  [264] pop 1 ................................... end case
  [266] ret
end

on startBadgeDownload me, tBadgeName
  [  0] getparam 1 .............................. <tBadgeName>
  [  2] pushcons 24 ............................. <EMPTY>
  [  4] eq ...................................... <tBadgeName = EMPTY>
  [  5] getparam 1 .............................. <tBadgeName>
  [  7] pushcons 25 ............................. <" ">
  [  9] eq ...................................... <tBadgeName = " ">
  [ 10] or ...................................... <(tBadgeName = EMPTY) or (tBadgeName = " ")>
  [ 11] getparam 1 .............................. <tBadgeName>
  [ 13] pusharglist 1 ........................... <tBadgeName>
  [ 15] extcall 253 ............................. <voidp(tBadgeName)>
  [ 17] or ...................................... <(tBadgeName = EMPTY) or (tBadgeName = " ") or voidp(tBadgeName)>
  [ 18] jmpifz [ 26] ............................ if (tBadgeName = EMPTY) or (tBadgeName = " ") or voidp(tBadgeName) then
  [ 21] pushzero ................................ <0>
  [ 22] pusharglistnoret 1 ...................... <0>
  [ 24] extcall 116 ............................. return 0
  [ 26] pushcons 17 ............................. <"badge">
  [ 28] getparam 1 .............................. <tBadgeName>
  [ 30] joinpadstr .............................. <"badge" && tBadgeName>
  [ 31] pusharglist 1 ........................... <"badge" && tBadgeName>
  [ 33] extcall 933 ............................. <downloadExists("badge" && tBadgeName)>
  [ 36] jmpifz [ 44] ............................ if downloadExists("badge" && tBadgeName) then
  [ 39] pushzero ................................ <0>
  [ 40] pusharglistnoret 1 ...................... <0>
  [ 42] extcall 116 ............................. return 0
  [ 44] getprop 918 ............................. <pImageLibraryURL>
  [ 47] pushcons 26 ............................. <"Badges/">
  [ 49] joinstr ................................. <pImageLibraryURL & "Badges/">
  [ 50] getparam 1 .............................. <tBadgeName>
  [ 52] joinstr ................................. <pImageLibraryURL & "Badges/" & tBadgeName>
  [ 53] pushcons 27 ............................. <".gif">
  [ 55] joinstr ................................. <pImageLibraryURL & "Badges/" & tBadgeName & ".gif">
  [ 56] setlocal 0 .............................. tSourceURL = pImageLibraryURL & "Badges/" & tBadgeName & ".gif"
  [ 58] getlocal 0 .............................. <tSourceURL>
  [ 60] pushcons 17 ............................. <"badge">
  [ 62] getparam 1 .............................. <tBadgeName>
  [ 64] joinpadstr .............................. <"badge" && tBadgeName>
  [ 65] pushsymb 292 ............................ <#bitmap>
  [ 68] pushint8 1 .............................. <1>
  [ 70] pusharglist 4 ........................... <tSourceURL, "badge" && tBadgeName, #bitmap, 1>
  [ 72] extcall 934 ............................. <queueDownload(tSourceURL, "badge" && tBadgeName, #bitmap, 1)>
  [ 75] setlocal 1 .............................. tBadgeMemNum = queueDownload(tSourceURL, "badge" && tBadgeName, #bitmap, 1)
  [ 77] getlocal 1 .............................. <tBadgeMemNum>
  [ 79] pusharglist 1 ........................... <tBadgeMemNum>
  [ 81] extcall 263 ............................. <member(tBadgeMemNum)>
  [ 84] pushint8 1 .............................. <1>
  [ 86] pushint8 1 .............................. <1>
  [ 88] pushint8 32 ............................. <32>
  [ 90] pusharglist 3 ........................... <1, 1, 32>
  [ 92] extcall 260 ............................. <image(1, 1, 32)>
  [ 95] setobjprop 260 .......................... member(tBadgeMemNum).image = image(1, 1, 32)
  [ 98] getlocal 1 .............................. <tBadgeMemNum>
  [100] pusharglist 1 ........................... <tBadgeMemNum>
  [102] extcall 263 ............................. <member(tBadgeMemNum)>
  [105] pushzero ................................ <0>
  [106] setobjprop 935 .......................... member(tBadgeMemNum).trimWhiteSpace = 0
  [109] getlocal 1 .............................. <tBadgeMemNum>
  [111] pushsymb 912 ............................ <#badgeLoaded>
  [114] getparam 0 .............................. <me>
  [116] pusharglist 1 ........................... <me>
  [118] objcall 115 ............................. <me.getID()>
  [120] getparam 1 .............................. <tBadgeName>
  [122] pusharglistnoret 4 ...................... <tBadgeMemNum, #badgeLoaded, me.getID(), tBadgeName>
  [124] extcall 936 ............................. registerDownloadCallback(tBadgeMemNum, #badgeLoaded, me.getID(), tBadgeName)
  [127] getprop 919 ............................. <pActiveDownloads>
  [130] pushcons 17 ............................. <"badge">
  [132] getparam 1 .............................. <tBadgeName>
  [134] joinpadstr .............................. <"badge" && tBadgeName>
  [135] pusharglistnoret 2 ...................... <pActiveDownloads, "badge" && tBadgeName>
  [137] objcall 151 ............................. pActiveDownloads.add("badge" && tBadgeName)
  [139] pushint8 1 .............................. <1>
  [141] pusharglistnoret 1 ...................... <1>
  [143] extcall 116 ............................. return 1
  [145] ret
end

on badgeLoaded me, tBadgeName
  [  0] getparam 0 .............................. <me>
  [  2] pusharglistnoret 1 ...................... <me>
  [  4] objcall 908 ............................. me.updateBadgeImage()
  [  7] pushsymb 931 ............................ <#room>
  [ 10] pusharglist 1 ........................... <#room>
  [ 12] extcall 227 ............................. <getThread(#room)>
  [ 14] pusharglist 1 ........................... <getThread(#room)>
  [ 16] objcall 570 ............................. <getThread(#room).getInterface()>
  [ 19] getparam 1 .............................. <tBadgeName>
  [ 21] pusharglistnoret 2 ...................... <getThread(#room).getInterface(), tBadgeName>
  [ 23] objcall 13 .............................. getThread(#room).getInterface().updateInfoStandBadge(tBadgeName)
  [ 25] getprop 919 ............................. <pActiveDownloads>
  [ 28] pushcons 17 ............................. <"badge">
  [ 30] getparam 1 .............................. <tBadgeName>
  [ 32] joinpadstr .............................. <"badge" && tBadgeName>
  [ 33] pusharglistnoret 2 ...................... <pActiveDownloads, "badge" && tBadgeName>
  [ 35] objcall 208 ............................. pActiveDownloads.deleteOne("badge" && tBadgeName)
  [ 37] ret
end

on getMyBadgeInfo me
  [  0] pushcons 25 ............................. <" ">
  [  2] setlocal 0 .............................. tBadge = " "
  [  4] pushcons 3 .............................. <"session">
  [  6] pusharglist 1 ........................... <"session">
  [  8] extcall 112 ............................. <getObject("session")>
  [ 10] setlocal 1 .............................. tSession = getObject("session")
  [ 12] getlocal 1 .............................. <tSession>
  [ 14] pushcons 10 ............................. <"chosen_badge_index">
  [ 16] pusharglist 2 ........................... <tSession, "chosen_badge_index">
  [ 18] objcall 201 ............................. <tSession.get("chosen_badge_index")>
  [ 20] setlocal 2 .............................. tChosenBadgeNum = tSession.get("chosen_badge_index")
  [ 22] getlocal 1 .............................. <tSession>
  [ 24] pushcons 4 .............................. <"available_badges">
  [ 26] pusharglist 2 ........................... <tSession, "available_badges">
  [ 28] objcall 201 ............................. <tSession.get("available_badges")>
  [ 30] setlocal 3 .............................. tAvailableBadges = tSession.get("available_badges")
  [ 32] getlocal 1 .............................. <tSession>
  [ 34] pushcons 9 .............................. <"badge_visible">
  [ 36] pusharglist 2 ........................... <tSession, "badge_visible">
  [ 38] objcall 458 ............................. <tSession.exists("badge_visible")>
  [ 41] jmpifz [ 57] ............................ if tSession.exists("badge_visible") then / else
  [ 44] getlocal 1 .............................. <tSession>
  [ 46] pushcons 9 .............................. <"badge_visible">
  [ 48] pusharglist 2 ........................... <tSession, "badge_visible">
  [ 50] objcall 201 ............................. <tSession.get("badge_visible")>
  [ 52] setlocal 4 .............................. tVisibility = tSession.get("badge_visible")
  [ 54] jmp [ 61]
  [ 57] pushint8 1 .............................. <1>
  [ 59] setlocal 4 .............................. tVisibility = 1
  [ 61] getlocal 3 .............................. <tAvailableBadges>
  [ 63] getobjprop 215 .......................... <tAvailableBadges.ilk>
  [ 65] pushsymb 216 ............................ <#list>
  [ 67] eq ...................................... <tAvailableBadges.ilk = #list>
  [ 68] jmpifz [ 96] ............................ if tAvailableBadges.ilk = #list then
  [ 71] getlocal 2 .............................. <tChosenBadgeNum>
  [ 73] pushzero ................................ <0>
  [ 74] gt ...................................... <tChosenBadgeNum > 0>
  [ 75] getlocal 3 .............................. <tAvailableBadges>
  [ 77] getobjprop 149 .......................... <tAvailableBadges.count>
  [ 79] getlocal 2 .............................. <tChosenBadgeNum>
  [ 81] gteq .................................... <tAvailableBadges.count >= tChosenBadgeNum>
  [ 82] and ..................................... <(tChosenBadgeNum > 0) and (tAvailableBadges.count >= tChosenBadgeNum)>
  [ 83] jmpifz [ 96] ............................ if (tChosenBadgeNum > 0) and (tAvailableBadges.count >= tChosenBadgeNum) then
  [ 86] getlocal 3 .............................. <tAvailableBadges>
  [ 88] getlocal 2 .............................. <tChosenBadgeNum>
  [ 90] pusharglist 2 ........................... <tAvailableBadges, tChosenBadgeNum>
  [ 92] objcall 138 ............................. <tAvailableBadges[tChosenBadgeNum]>
  [ 94] setlocal 0 .............................. tBadge = tAvailableBadges[tChosenBadgeNum]
  [ 96] getlocal 0 .............................. <tBadge>
  [ 98] getlocal 4 .............................. <tVisibility>
  [100] pusharglist 2 ........................... <[tBadge, tVisibility]>
  [102] pushlist ................................ <[tBadge, tVisibility]>
  [103] pusharglistnoret 1 ...................... <[tBadge, tVisibility]>
  [105] extcall 116 ............................. return [tBadge, tVisibility]
  [107] ret
end

on toggleOwnBadgeVisibility me
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 913 ............................. <me.getMyBadgeInfo()>
  [  7] setlocal 0 .............................. tMyBadgeInfo = me.getMyBadgeInfo()
  [  9] getlocal 0 .............................. <tMyBadgeInfo>
  [ 11] pushint8 2 .............................. <2>
  [ 13] pusharglist 2 ........................... <tMyBadgeInfo, 2>
  [ 15] objcall 138 ............................. <tMyBadgeInfo[2]>
  [ 17] setlocal 1 .............................. tVisibilityNow = tMyBadgeInfo[2]
  [ 19] getlocal 1 .............................. <tVisibilityNow>
  [ 21] jmpifz [ 30] ............................ if tVisibilityNow then / else
  [ 24] pushzero ................................ <0>
  [ 25] setlocal 2 .............................. tUpdatedVisibility = 0
  [ 27] jmp [ 34]
  [ 30] pushint8 1 .............................. <1>
  [ 32] setlocal 2 .............................. tUpdatedVisibility = 1
  [ 34] pushsymb 596 ............................ <#string>
  [ 37] getlocal 0 .............................. <tMyBadgeInfo>
  [ 39] pushint8 1 .............................. <1>
  [ 41] pusharglist 2 ........................... <tMyBadgeInfo, 1>
  [ 43] objcall 138 ............................. <tMyBadgeInfo[1]>
  [ 45] pushsymb 426 ............................ <#integer>
  [ 48] getlocal 2 .............................. <tUpdatedVisibility>
  [ 50] pusharglist 4 ........................... <[#string: tMyBadgeInfo[1], #integer: tUpdatedVisibility]>
  [ 52] pushproplist ............................ <[#string: tMyBadgeInfo[1], #integer: tUpdatedVisibility]>
  [ 53] setlocal 3 .............................. tMsg = [#string: tMyBadgeInfo[1], #integer: tUpdatedVisibility]
  [ 55] pushcons 3 .............................. <"session">
  [ 57] pusharglist 1 ........................... <"session">
  [ 59] extcall 112 ............................. <getObject("session")>
  [ 61] pushcons 9 .............................. <"badge_visible">
  [ 63] getlocal 2 .............................. <tUpdatedVisibility>
  [ 65] pusharglistnoret 3 ...................... <getObject("session"), "badge_visible", tUpdatedVisibility>
  [ 67] objcall 556 ............................. getObject("session").set("badge_visible", tUpdatedVisibility)
  [ 70] pushsymb 931 ............................ <#room>
  [ 73] pusharglist 1 ........................... <#room>
  [ 75] extcall 227 ............................. <getThread(#room)>
  [ 77] pusharglist 1 ........................... <getThread(#room)>
  [ 79] objcall 570 ............................. <getThread(#room).getInterface()>
  [ 82] pusharglistnoret 1 ...................... <getThread(#room).getInterface()>
  [ 84] objcall 13 .............................. getThread(#room).getInterface().updateInfoStandBadge()
  [ 86] pushsymb 931 ............................ <#room>
  [ 89] pusharglist 1 ........................... <#room>
  [ 91] extcall 227 ............................. <getThread(#room)>
  [ 93] pusharglist 1 ........................... <getThread(#room)>
  [ 95] objcall 173 ............................. <getThread(#room).getComponent()>
  [ 97] pusharglist 1 ........................... <getThread(#room).getComponent()>
  [ 99] objcall 368 ............................. <getThread(#room).getComponent().getRoomConnection()>
  [102] pushcons 21 ............................. <"SETBADGE">
  [104] getlocal 3 .............................. <tMsg>
  [106] pusharglistnoret 3 ...................... <getThread(#room).getComponent().getRoomConnection(), "SETBADGE", tMsg>
  [108] objcall 369 ............................. getThread(#room).getComponent().getRoomConnection().send("SETBADGE", tMsg)
  [111] pushint8 1 .............................. <1>
  [113] pusharglistnoret 1 ...................... <1>
  [115] extcall 116 ............................. return 1
  [117] ret
end

on updateInfoStandBadge me, tInfoStandID, tSelectedObj, tBadgeID, tUserID
  [  0] getparam 1 .............................. <tInfoStandID>
  [  2] pusharglist 1 ........................... <tInfoStandID>
  [  4] extcall 170 ............................. <getWindow(tInfoStandID)>
  [  6] setlocal 0 .............................. tWndObj = getWindow(tInfoStandID)
  [  8] getlocal 0 .............................. <tWndObj>
  [ 10] not ..................................... <not tWndObj>
  [ 11] jmpifz [ 19] ............................ if not tWndObj then
  [ 14] pushzero ................................ <0>
  [ 15] pusharglistnoret 1 ...................... <0>
  [ 17] extcall 116 ............................. return 0
  [ 19] getlocal 0 .............................. <tWndObj>
  [ 21] pushcons 28 ............................. <"info_badge">
  [ 23] pusharglist 2 ........................... <tWndObj, "info_badge">
  [ 25] objcall 189 ............................. <tWndObj.getElement("info_badge")>
  [ 27] setlocal 1 .............................. tElem = tWndObj.getElement("info_badge")
  [ 29] getlocal 1 .............................. <tElem>
  [ 31] pusharglistnoret 1 ...................... <tElem>
  [ 33] objcall 269 ............................. tElem.clearImage()
  [ 36] getparam 0 .............................. <me>
  [ 38] pusharglistnoret 1 ...................... <me>
  [ 40] objcall 915 ............................. me.removeBadgeEffect()
  [ 43] getparam 2 .............................. <tSelectedObj>
  [ 45] pushcons 3 .............................. <"session">
  [ 47] pusharglist 1 ........................... <"session">
  [ 49] extcall 112 ............................. <getObject("session")>
  [ 51] pushcons 29 ............................. <"user_index">
  [ 53] pusharglist 2 ........................... <getObject("session"), "user_index">
  [ 55] objcall 201 ............................. <getObject("session").get("user_index")>
  [ 57] eq ...................................... <tSelectedObj = getObject("session").get("user_index")>
  [ 58] setlocal 2 .............................. tOwnCharacter = tSelectedObj = getObject("session").get("user_index")
  [ 60] getlocal 2 .............................. <tOwnCharacter>
  [ 62] pushzero ................................ <0>
  [ 63] eq ...................................... <tOwnCharacter = 0>
  [ 64] jmpifz [159] ............................ if tOwnCharacter = 0 then
  [ 67] getparam 4 .............................. <tUserID>
  [ 69] pusharglist 0 ........................... <>
  [ 71] extcall 120 ............................. <VOID>
  [ 73] nteq .................................... <tUserID <> VOID>
  [ 74] jmpifz [ 90] ............................ if tUserID <> VOID then
  [ 77] getparam 4 .............................. <tUserID>
  [ 79] getparam 2 .............................. <tSelectedObj>
  [ 81] nteq .................................... <tUserID <> tSelectedObj>
  [ 82] jmpifz [ 90] ............................ if tUserID <> tSelectedObj then
  [ 85] pushzero ................................ <0>
  [ 86] pusharglistnoret 1 ...................... <0>
  [ 88] extcall 116 ............................. return 0
  [ 90] pushsymb 931 ............................ <#room>
  [ 93] pusharglist 1 ........................... <#room>
  [ 95] extcall 227 ............................. <getThread(#room)>
  [ 97] pusharglist 1 ........................... <getThread(#room)>
  [ 99] objcall 173 ............................. <getThread(#room).getComponent()>
  [101] getparam 2 .............................. <tSelectedObj>
  [103] pusharglist 2 ........................... <getThread(#room).getComponent(), tSelectedObj>
  [105] objcall 212 ............................. <getThread(#room).getComponent().getUserObject(tSelectedObj)>
  [107] setlocal 3 .............................. tUserObj = getThread(#room).getComponent().getUserObject(tSelectedObj)
  [109] getlocal 3 .............................. <tUserObj>
  [111] pusharglist 1 ........................... <tUserObj>
  [113] extcall 363 ............................. <objectp(tUserObj)>
  [116] not ..................................... <not objectp(tUserObj)>
  [117] jmpifz [125] ............................ if not objectp(tUserObj) then
  [120] pushzero ................................ <0>
  [121] pusharglistnoret 1 ...................... <0>
  [123] extcall 116 ............................. return 0
  [125] getlocal 3 .............................. <tUserObj>
  [127] pusharglist 1 ........................... <tUserObj>
  [129] objcall 448 ............................. <tUserObj.getClass()>
  [132] pushcons 30 ............................. <"user">
  [134] nteq .................................... <tUserObj.getClass() <> "user">
  [135] jmpifz [143] ............................ if tUserObj.getClass() <> "user" then
  [138] pushzero ................................ <0>
  [139] pusharglistnoret 1 ...................... <0>
  [141] extcall 116 ............................. return 0
  [143] getlocal 3 .............................. <tUserObj>
  [145] getobjprop 874 .......................... <tUserObj.pBadge>
  [148] getparam 3 .............................. <tBadgeID>
  [150] nteq .................................... <tUserObj.pBadge <> tBadgeID>
  [151] jmpifz [159] ............................ if tUserObj.pBadge <> tBadgeID then
  [154] pushzero ................................ <0>
  [155] pusharglistnoret 1 ...................... <0>
  [157] extcall 116 ............................. return 0
  [159] getparam 3 .............................. <tBadgeID>
  [161] pushcons 25 ............................. <" ">
  [163] eq ...................................... <tBadgeID = " ">
  [164] getparam 3 .............................. <tBadgeID>
  [166] pushcons 24 ............................. <EMPTY>
  [168] eq ...................................... <tBadgeID = EMPTY>
  [169] or ...................................... <(tBadgeID = " ") or (tBadgeID = EMPTY)>
  [170] getparam 3 .............................. <tBadgeID>
  [172] pusharglist 1 ........................... <tBadgeID>
  [174] extcall 253 ............................. <voidp(tBadgeID)>
  [176] or ...................................... <(tBadgeID = " ") or (tBadgeID = EMPTY) or voidp(tBadgeID)>
  [177] jmpifz [192] ............................ if (tBadgeID = " ") or (tBadgeID = EMPTY) or voidp(tBadgeID) then
  [180] getlocal 2 .............................. <tOwnCharacter>
  [182] not ..................................... <not tOwnCharacter>
  [183] jmpifz [192] ............................ if not tOwnCharacter then
  [186] pushint8 1 .............................. <1>
  [188] pusharglistnoret 1 ...................... <1>
  [190] extcall 116 ............................. return 1
  [192] getlocal 2 .............................. <tOwnCharacter>
  [194] jmpifz [277] ............................ if tOwnCharacter then / else
  [197] getparam 0 .............................. <me>
  [199] pusharglist 1 ........................... <me>
  [201] objcall 913 ............................. <me.getMyBadgeInfo()>
  [204] setlocal 4 .............................. tMyBadgeInfo = me.getMyBadgeInfo()
  [206] getlocal 4 .............................. <tMyBadgeInfo>
  [208] pushint8 1 .............................. <1>
  [210] pusharglist 2 ........................... <tMyBadgeInfo, 1>
  [212] objcall 138 ............................. <tMyBadgeInfo[1]>
  [214] setparam 3 .............................. tBadgeID = tMyBadgeInfo[1]
  [216] getlocal 4 .............................. <tMyBadgeInfo>
  [218] pushint8 2 .............................. <2>
  [220] pusharglist 2 ........................... <tMyBadgeInfo, 2>
  [222] objcall 138 ............................. <tMyBadgeInfo[2]>
  [224] setlocal 5 .............................. tBadgeVisible = tMyBadgeInfo[2]
  [226] getparam 3 .............................. <tBadgeID>
  [228] pushcons 25 ............................. <" ">
  [230] nteq .................................... <tBadgeID <> " ">
  [231] jmpifz [244] ............................ if tBadgeID <> " " then
  [234] getlocal 1 .............................. <tElem>
  [236] pushsymb 231 ............................ <#cursor>
  [238] pushcons 31 ............................. <"cursor.finger">
  [240] pusharglistnoret 3 ...................... <tElem, #cursor, "cursor.finger">
  [242] objcall 38 .............................. tElem.setProperty(#cursor, "cursor.finger")
  [244] getlocal 5 .............................. <tBadgeVisible>
  [246] jmpifz [263] ............................ if tBadgeVisible then / else
  [249] getlocal 1 .............................. <tElem>
  [251] pushsymb 333 ............................ <#blend>
  [254] pushint8 100 ............................ <100>
  [256] pusharglistnoret 3 ...................... <tElem, #blend, 100>
  [258] objcall 38 .............................. tElem.setProperty(#blend, 100)
  [260] jmp [274]
  [263] getlocal 1 .............................. <tElem>
  [265] pushsymb 333 ............................ <#blend>
  [268] pushint8 40 ............................. <40>
  [270] pusharglistnoret 3 ...................... <tElem, #blend, 40>
  [272] objcall 38 .............................. tElem.setProperty(#blend, 40)
  [274] jmp [297]
  [277] getlocal 1 .............................. <tElem>
  [279] pushsymb 333 ............................ <#blend>
  [282] pushint8 100 ............................ <100>
  [284] pusharglistnoret 3 ...................... <tElem, #blend, 100>
  [286] objcall 38 .............................. tElem.setProperty(#blend, 100)
  [288] getlocal 1 .............................. <tElem>
  [290] pushsymb 231 ............................ <#cursor>
  [292] pushzero ................................ <0>
  [293] pusharglistnoret 3 ...................... <tElem, #cursor, 0>
  [295] objcall 38 .............................. tElem.setProperty(#cursor, 0)
  [297] pushcons 17 ............................. <"badge">
  [299] getparam 3 .............................. <tBadgeID>
  [301] joinpadstr .............................. <"badge" && tBadgeID>
  [302] pusharglist 1 ........................... <"badge" && tBadgeID>
  [304] extcall 330 ............................. <getmemnum("badge" && tBadgeID)>
  [307] pusharglist 1 ........................... <getmemnum("badge" && tBadgeID)>
  [309] extcall 263 ............................. <member(getmemnum("badge" && tBadgeID))>
  [312] setlocal 6 .............................. tBadgeMember = member(getmemnum("badge" && tBadgeID))
  [314] getparam 3 .............................. <tBadgeID>
  [316] pushcons 32 ............................. <"HC2">
  [318] eq ...................................... <tBadgeID = "HC2">
  [319] jmpifz [334] ............................ if tBadgeID = "HC2" then / else
  [322] getparam 0 .............................. <me>
  [324] getlocal 1 .............................. <tElem>
  [326] pusharglistnoret 2 ...................... <me, tElem>
  [328] objcall 914 ............................. me.createBadgeEffect(tElem)
  [331] jmp [341]
  [334] getparam 0 .............................. <me>
  [336] pusharglistnoret 1 ...................... <me>
  [338] objcall 915 ............................. me.removeBadgeEffect()
  [341] getlocal 6 .............................. <tBadgeMember>
  [343] getobjprop 184 .......................... <tBadgeMember.type>
  [345] pushsymb 292 ............................ <#bitmap>
  [348] eq ...................................... <tBadgeMember.type = #bitmap>
  [349] jmpifz [371] ............................ if tBadgeMember.type = #bitmap then / else
  [352] getlocal 1 .............................. <tElem>
  [354] getlocal 6 .............................. <tBadgeMember>
  [356] getobjprop 260 .......................... <tBadgeMember.image>
  [359] pusharglist 2 ........................... <tElem, tBadgeMember.image>
  [361] objcall 266 ............................. <tElem.feedImage(tBadgeMember.image)>
  [364] pusharglistnoret 1 ...................... <tElem.feedImage(tBadgeMember.image)>
  [366] extcall 116 ............................. return tElem.feedImage(tBadgeMember.image)
  [368] jmp [385]
  [371] getparam 0 .............................. <me>
  [373] getparam 3 .............................. <tBadgeID>
  [375] pusharglistnoret 2 ...................... <me, tBadgeID>
  [377] objcall 911 ............................. me.startBadgeDownload(tBadgeID)
  [380] pushzero ................................ <0>
  [381] pusharglistnoret 1 ...................... <0>
  [383] extcall 116 ............................. return 0
  [385] ret
end

on createBadgeEffect me, tElem
  [  0] pushcons 33 ............................. <"BadgeEffect">
  [  2] pusharglist 1 ........................... <"BadgeEffect">
  [  4] extcall 268 ............................. <objectExists("BadgeEffect")>
  [  7] jmpifz [ 15] ............................ if objectExists("BadgeEffect") then
  [ 10] pushzero ................................ <0>
  [ 11] pusharglistnoret 1 ...................... <0>
  [ 13] extcall 116 ............................. return 0
  [ 15] pushcons 33 ............................. <"BadgeEffect">
  [ 17] pushcons 34 ............................. <"Badge Effect Class">
  [ 19] pusharglist 2 ........................... <"BadgeEffect", "Badge Effect Class">
  [ 21] extcall 109 ............................. <createObject("BadgeEffect", "Badge Effect Class")>
  [ 23] pushzero ................................ <0>
  [ 24] nteq .................................... <createObject("BadgeEffect", "Badge Effect Class") <> 0>
  [ 25] jmpifz [ 50] ............................ if createObject("BadgeEffect", "Badge Effect Class") <> 0 then
  [ 28] pushcons 33 ............................. <"BadgeEffect">
  [ 30] pusharglist 1 ........................... <"BadgeEffect">
  [ 32] extcall 112 ............................. <getObject("BadgeEffect")>
  [ 34] getparam 1 .............................. <tElem>
  [ 36] pushsymb 221 ............................ <#rect>
  [ 38] pusharglist 2 ........................... <tElem, #rect>
  [ 40] objcall 37 .............................. <tElem.getProperty(#rect)>
  [ 42] pusharglist 2 ........................... <getObject("BadgeEffect"), tElem.getProperty(#rect)>
  [ 44] objcall 152 ............................. <getObject("BadgeEffect").Init(tElem.getProperty(#rect))>
  [ 46] pusharglistnoret 1 ...................... <getObject("BadgeEffect").Init(tElem.getProperty(#rect))>
  [ 48] extcall 116 ............................. return getObject("BadgeEffect").Init(tElem.getProperty(#rect))
  [ 50] ret
end

on removeBadgeEffect me
  [  0] pushcons 33 ............................. <"BadgeEffect">
  [  2] pusharglist 1 ........................... <"BadgeEffect">
  [  4] extcall 268 ............................. <objectExists("BadgeEffect")>
  [  7] jmpifz [ 20] ............................ if objectExists("BadgeEffect") then
  [ 10] pushcons 33 ............................. <"BadgeEffect">
  [ 12] pusharglist 1 ........................... <"BadgeEffect">
  [ 14] extcall 121 ............................. <removeObject("BadgeEffect")>
  [ 16] pusharglistnoret 1 ...................... <removeObject("BadgeEffect")>
  [ 18] extcall 116 ............................. return removeObject("BadgeEffect")
  [ 20] ret
end
