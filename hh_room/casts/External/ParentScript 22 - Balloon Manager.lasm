property pState, pTextMembers, pScrollCounter, pAvailableBalloons, pVisibleBalloons, pMaxBalloons, pBalloonPulse, pBalloonBuffer, pBalloonImg, pMarginH, pMarginV, pMaxWidth, pMaxCharNum, pAutoScrollTime, pScrollStep, pFastScrollStep, pStartV, pFirstLocz, pMoveOffsetV, pLastBalloonId, pScrollBy, pBalloonColor, pHumanLoc, pLastMsg, pBalloonLeftMarg, pBalloonRightMarg, pReservedSprites, pDefaultTextColor

on construct me
  [  0] pushcons 0 .............................. <"chat.balloon.scrolltime">
  [  2] pusharglist 1 ........................... <"chat.balloon.scrolltime">
  [  4] extcall 206 ............................. <variableExists("chat.balloon.scrolltime")>
  [  6] jmpifz [ 22] ............................ if variableExists("chat.balloon.scrolltime") then / else
  [  9] pushcons 0 .............................. <"chat.balloon.scrolltime">
  [ 11] pusharglist 1 ........................... <"chat.balloon.scrolltime">
  [ 13] extcall 1468 ............................ <getIntVariable("chat.balloon.scrolltime")>
  [ 16] setprop 1498 ............................ pAutoScrollTime = getIntVariable("chat.balloon.scrolltime")
  [ 19] jmp [ 28]
  [ 22] pushint16 4000 .......................... <4000>
  [ 25] setprop 1498 ............................ pAutoScrollTime = 4000
  [ 28] pushcons 1 .............................. <"chat.balloon.scrollstep">
  [ 30] pusharglist 1 ........................... <"chat.balloon.scrollstep">
  [ 32] extcall 206 ............................. <variableExists("chat.balloon.scrollstep")>
  [ 34] jmpifz [ 50] ............................ if variableExists("chat.balloon.scrollstep") then / else
  [ 37] pushcons 1 .............................. <"chat.balloon.scrollstep">
  [ 39] pusharglist 1 ........................... <"chat.balloon.scrollstep">
  [ 41] extcall 1468 ............................ <getIntVariable("chat.balloon.scrollstep")>
  [ 44] setprop 1499 ............................ pScrollStep = getIntVariable("chat.balloon.scrollstep")
  [ 47] jmp [ 55]
  [ 50] pushint8 3 .............................. <3>
  [ 52] setprop 1499 ............................ pScrollStep = 3
  [ 55] pushsymb 1500 ........................... <#normal>
  [ 58] setprop 1131 ............................ pState = #normal
  [ 61] pushzero ................................ <0>
  [ 62] setprop 1501 ............................ pScrollCounter = 0
  [ 65] pusharglist 0 ........................... <[:]>
  [ 67] pushproplist ............................ <[:]>
  [ 68] setprop 1502 ............................ pVisibleBalloons = [:]
  [ 71] pusharglist 0 ........................... <[:]>
  [ 73] pushproplist ............................ <[:]>
  [ 74] setprop 1503 ............................ pAvailableBalloons = [:]
  [ 77] pusharglist 0 ........................... <[]>
  [ 79] pushlist ................................ <[]>
  [ 80] setprop 1504 ............................ pBalloonBuffer = []
  [ 83] pushint8 6 .............................. <6>
  [ 85] pushint8 1 .............................. <1>
  [ 87] add ..................................... <6 + 1>
  [ 88] setprop 1505 ............................ pMaxBalloons = 6 + 1
  [ 91] pushcons 2 .............................. <"window.default.locz">
  [ 93] pusharglist 1 ........................... <"window.default.locz">
  [ 95] extcall 1468 ............................ <getIntVariable("window.default.locz")>
  [ 98] pushint16 2000 .......................... <2000>
  [101] sub ..................................... <getIntVariable("window.default.locz") - 2000>
  [102] getprop 1505 ............................ <pMaxBalloons>
  [105] sub ..................................... <getIntVariable("window.default.locz") - 2000 - pMaxBalloons>
  [106] setprop 1506 ............................ pFirstLocz = getIntVariable("window.default.locz") - 2000 - pMaxBalloons
  [109] pushint8 21 ............................. <21>
  [111] setprop 1507 ............................ pMoveOffsetV = 21
  [114] pushint8 8 .............................. <8>
  [116] setprop 1508 ............................ pMarginH = 8
  [119] pushint8 5 .............................. <5>
  [121] setprop 1509 ............................ pMarginV = 5
  [124] getprop 1499 ............................ <pScrollStep>
  [127] setprop 1510 ............................ pScrollBy = pScrollStep
  [130] pusharglist 0 ........................... <[:]>
  [132] pushproplist ............................ <[:]>
  [133] setprop 1511 ............................ pTextMembers = [:]
  [136] pushzero ................................ <0>
  [137] pushzero ................................ <0>
  [138] pushzero ................................ <0>
  [139] pusharglist 3 ........................... <0, 0, 0>
  [141] extcall 283 ............................. <rgb(0, 0, 0)>
  [144] setprop 1512 ............................ pDefaultTextColor = rgb(0, 0, 0)
  [147] pushcons 3 .............................. <"balloon.margin.offset.v">
  [149] pusharglist 1 ........................... <"balloon.margin.offset.v">
  [151] extcall 206 ............................. <variableExists("balloon.margin.offset.v")>
  [153] jmpifz [169] ............................ if variableExists("balloon.margin.offset.v") then
  [156] getprop 1509 ............................ <pMarginV>
  [159] pushcons 3 .............................. <"balloon.margin.offset.v">
  [161] pusharglist 1 ........................... <"balloon.margin.offset.v">
  [163] extcall 80 .............................. <getVariable("balloon.margin.offset.v")>
  [165] add ..................................... <pMarginV + getVariable("balloon.margin.offset.v")>
  [166] setprop 1509 ............................ pMarginV = pMarginV + getVariable("balloon.margin.offset.v")
  [169] pushcons 4 .............................. <"CHAT">
  [171] pushcons 5 .............................. <"plain">
  [173] pushcons 6 .............................. <"SHOUT">
  [175] pushcons 7 .............................. <"bold">
  [177] pushcons 8 .............................. <"WHISPER">
  [179] pushcons 9 .............................. <"italic">
  [181] pusharglist 6 ........................... <["CHAT": "plain", "SHOUT": "bold", "WHISPER": "italic"]>
  [183] pushproplist ............................ <["CHAT": "plain", "SHOUT": "bold", "WHISPER": "italic"]>
  [184] setlocal 0 .............................. tVariations = ["CHAT": "plain", "SHOUT": "bold", "WHISPER": "italic"]
  [186] pushint8 1 .............................. <1>
  [188] setlocal 1
  [190] getlocal 1
  [192] getlocal 0 .............................. <tVariations>
  [194] getobjprop 149 .......................... <tVariations.count>
  [196] lteq
  [197] jmpifz [334] ............................ repeat with i = 1 to tVariations.count
  [200] pushcons 10 ............................. <"struct.font.">
  [202] getlocal 0 .............................. <tVariations>
  [204] getlocal 1 .............................. <i>
  [206] pusharglist 2 ........................... <tVariations, i>
  [208] objcall 138 ............................. <tVariations[i]>
  [210] joinstr ................................. <"struct.font." & tVariations[i]>
  [211] pusharglist 1 ........................... <"struct.font." & tVariations[i]>
  [213] extcall 1513 ............................ <getStructVariable("struct.font." & tVariations[i])>
  [216] setlocal 2 .............................. tFontStruct = getStructVariable("struct.font." & tVariations[i])
  [218] pushcons 11 ............................. <"balloon.text.">
  [220] getlocal 0 .............................. <tVariations>
  [222] getlocal 1 .............................. <i>
  [224] pusharglist 2 ........................... <tVariations, i>
  [226] objcall 317 ............................. <tVariations.getPropAt(i)>
  [229] joinstr ................................. <"balloon.text." & tVariations.getPropAt(i)>
  [230] pushsymb 851 ............................ <#text>
  [233] pusharglist 2 ........................... <"balloon.text." & tVariations.getPropAt(i), #text>
  [235] extcall 329 ............................. <createMember("balloon.text." & tVariations.getPropAt(i), #text)>
  [238] pusharglist 1 ........................... <createMember("balloon.text." & tVariations.getPropAt(i), #text)>
  [240] extcall 263 ............................. <member(createMember("balloon.text." & tVariations.getPropAt(i), #text))>
  [243] setlocal 3 .............................. tmember = member(createMember("balloon.text." & tVariations.getPropAt(i), #text))
  [245] getlocal 3 .............................. <tmember>
  [247] pushzero ................................ <0>
  [248] setobjprop 1514 ......................... tmember.wordWrap = 0
  [251] getlocal 3 .............................. <tmember>
  [253] pushsymb 1515 ........................... <#adjust>
  [256] setobjprop 1516 ......................... tmember.boxType = #adjust
  [259] getlocal 3 .............................. <tmember>
  [261] pushzero ................................ <0>
  [262] setobjprop 1517 ......................... tmember.antialias = 0
  [265] getlocal 3 .............................. <tmember>
  [267] getlocal 2 .............................. <tFontStruct>
  [269] pushsymb 1518 ........................... <#font>
  [272] pusharglist 2 ........................... <tFontStruct, #font>
  [274] objcall 214 ............................. <tFontStruct.getaProp(#font)>
  [276] setobjprop 1518 ......................... tmember.font = tFontStruct.getaProp(#font)
  [279] getlocal 3 .............................. <tmember>
  [281] getlocal 2 .............................. <tFontStruct>
  [283] pushsymb 1519 ........................... <#fontSize>
  [286] pusharglist 2 ........................... <tFontStruct, #fontSize>
  [288] objcall 214 ............................. <tFontStruct.getaProp(#fontSize)>
  [290] setobjprop 1519 ......................... tmember.fontSize = tFontStruct.getaProp(#fontSize)
  [293] getlocal 3 .............................. <tmember>
  [295] getlocal 2 .............................. <tFontStruct>
  [297] pushsymb 1520 ........................... <#fontStyle>
  [300] pusharglist 2 ........................... <tFontStruct, #fontStyle>
  [302] objcall 214 ............................. <tFontStruct.getaProp(#fontStyle)>
  [304] setobjprop 1520 ......................... tmember.fontStyle = tFontStruct.getaProp(#fontStyle)
  [307] getprop 1511 ............................ <pTextMembers>
  [310] getlocal 0 .............................. <tVariations>
  [312] getlocal 1 .............................. <i>
  [314] pusharglist 2 ........................... <tVariations, i>
  [316] objcall 317 ............................. <tVariations.getPropAt(i)>
  [319] getlocal 3 .............................. <tmember>
  [321] pusharglistnoret 3 ...................... <pTextMembers, tVariations.getPropAt(i), tmember>
  [323] objcall 136 ............................. pTextMembers[tVariations.getPropAt(i)] = tmember
  [325] pushint8 1
  [327] getlocal 1
  [329] add
  [330] setlocal 1
  [332] endrepeat [190]
  [334] getprop 1507 ............................ <pMoveOffsetV>
  [337] getprop 1499 ............................ <pScrollStep>
  [340] mod ..................................... <pMoveOffsetV mod pScrollStep>
  [341] pushzero ................................ <0>
  [342] nteq .................................... <(pMoveOffsetV mod pScrollStep) <> 0>
  [343] jmpifz [360] ............................ if (pMoveOffsetV mod pScrollStep) <> 0 then
  [346] getprop 1507 ............................ <pMoveOffsetV>
  [349] getprop 1507 ............................ <pMoveOffsetV>
  [352] getprop 1499 ............................ <pScrollStep>
  [355] mod ..................................... <pMoveOffsetV mod pScrollStep>
  [356] sub ..................................... <pMoveOffsetV - (pMoveOffsetV mod pScrollStep)>
  [357] setprop 1507 ............................ pMoveOffsetV = pMoveOffsetV - (pMoveOffsetV mod pScrollStep)
  [360] getprop 1507 ............................ <pMoveOffsetV>
  [363] getprop 1499 ............................ <pScrollStep>
  [366] div ..................................... <pMoveOffsetV / pScrollStep>
  [367] setprop 1521 ............................ pFastScrollStep = pMoveOffsetV / pScrollStep
  [370] getprop 1505 ............................ <pMaxBalloons>
  [373] pushint8 1 .............................. <1>
  [375] sub ..................................... <pMaxBalloons - 1>
  [376] getprop 1507 ............................ <pMoveOffsetV>
  [379] mul ..................................... <(pMaxBalloons - 1) * pMoveOffsetV>
  [380] pushint8 1 .............................. <1>
  [382] sub ..................................... <((pMaxBalloons - 1) * pMoveOffsetV) - 1>
  [383] setprop 1522 ............................ pStartV = ((pMaxBalloons - 1) * pMoveOffsetV) - 1
  [386] pusharglist 0 ........................... <>
  [388] thebuiltin 1119 ......................... <the stageRight>
  [391] pusharglist 0 ........................... <>
  [393] thebuiltin 1120 ......................... <the stageLeft>
  [396] sub ..................................... <the stageRight - the stageLeft>
  [397] pushint8 10 ............................. <10>
  [399] sub ..................................... <the stageRight - the stageLeft - 10>
  [400] setprop 1523 ............................ pMaxWidth = the stageRight - the stageLeft - 10
  [403] pushint16 400 ........................... <400>
  [406] setprop 1524 ............................ pMaxCharNum = 400
  [409] pusharglist 0 ........................... <[]>
  [411] pushlist ................................ <[]>
  [412] setprop 1525 ............................ pReservedSprites = []
  [415] pusharglist 0 ........................... <[:]>
  [417] pushproplist ............................ <[:]>
  [418] setprop 1526 ............................ pBalloonImg = [:]
  [421] getprop 1526 ............................ <pBalloonImg>
  [424] pushsymb 394 ............................ <#left>
  [427] pushcons 12 ............................. <"balloon.left">
  [429] pusharglist 1 ........................... <"balloon.left">
  [431] extcall 330 ............................. <getmemnum("balloon.left")>
  [434] pusharglist 1 ........................... <getmemnum("balloon.left")>
  [436] extcall 263 ............................. <member(getmemnum("balloon.left"))>
  [439] getchainedprop 260 ...................... <member(getmemnum("balloon.left")).image>
  [442] pusharglist 1 ........................... <member(getmemnum("balloon.left")).image>
  [444] objcall 555 ............................. <member(getmemnum("balloon.left")).image.duplicate()>
  [447] pusharglistnoret 3 ...................... <pBalloonImg, #left, member(getmemnum("balloon.left")).image.duplicate()>
  [449] objcall 667 ............................. pBalloonImg.addProp(#left, member(getmemnum("balloon.left")).image.duplicate())
  [452] getprop 1526 ............................ <pBalloonImg>
  [455] pushsymb 1527 ........................... <#middle>
  [458] pushcons 13 ............................. <"balloon.middle">
  [460] pusharglist 1 ........................... <"balloon.middle">
  [462] extcall 330 ............................. <getmemnum("balloon.middle")>
  [465] pusharglist 1 ........................... <getmemnum("balloon.middle")>
  [467] extcall 263 ............................. <member(getmemnum("balloon.middle"))>
  [470] getchainedprop 260 ...................... <member(getmemnum("balloon.middle")).image>
  [473] pusharglist 1 ........................... <member(getmemnum("balloon.middle")).image>
  [475] objcall 555 ............................. <member(getmemnum("balloon.middle")).image.duplicate()>
  [478] pusharglistnoret 3 ...................... <pBalloonImg, #middle, member(getmemnum("balloon.middle")).image.duplicate()>
  [480] objcall 667 ............................. pBalloonImg.addProp(#middle, member(getmemnum("balloon.middle")).image.duplicate())
  [483] getprop 1526 ............................ <pBalloonImg>
  [486] pushsymb 1050 ........................... <#right>
  [489] getparam 0 .............................. <me>
  [491] pushcons 12 ............................. <"balloon.left">
  [493] pusharglist 1 ........................... <"balloon.left">
  [495] extcall 330 ............................. <getmemnum("balloon.left")>
  [498] pusharglist 1 ........................... <getmemnum("balloon.left")>
  [500] extcall 263 ............................. <member(getmemnum("balloon.left"))>
  [503] getobjprop 260 .......................... <member(getmemnum("balloon.left")).image>
  [506] pusharglist 2 ........................... <me, member(getmemnum("balloon.left")).image>
  [508] objcall 1006 ............................ <me.flipH(member(getmemnum("balloon.left")).image)>
  [511] pusharglistnoret 3 ...................... <pBalloonImg, #right, me.flipH(member(getmemnum("balloon.left")).image)>
  [513] objcall 667 ............................. pBalloonImg.addProp(#right, me.flipH(member(getmemnum("balloon.left")).image))
  [516] pushsymb 462 ............................ <#leaveRoom>
  [519] getparam 0 .............................. <me>
  [521] pusharglist 1 ........................... <me>
  [523] objcall 115 ............................. <me.getID()>
  [525] pushsymb 574 ............................ <#removeBalloons>
  [528] pusharglistnoret 3 ...................... <#leaveRoom, me.getID(), #removeBalloons>
  [530] extcall 114 ............................. registerMessage(#leaveRoom, me.getID(), #removeBalloons)
  [532] pushsymb 550 ............................ <#changeRoom>
  [535] getparam 0 .............................. <me>
  [537] pusharglist 1 ........................... <me>
  [539] objcall 115 ............................. <me.getID()>
  [541] pushsymb 574 ............................ <#removeBalloons>
  [544] pusharglistnoret 3 ...................... <#changeRoom, me.getID(), #removeBalloons>
  [546] extcall 114 ............................. registerMessage(#changeRoom, me.getID(), #removeBalloons)
  [548] pushsymb 1528 ........................... <#BalloonManagerCreated>
  [551] pushsymb 1529 ........................... <#objectPointer>
  [554] getparam 0 .............................. <me>
  [556] pusharglist 2 ........................... <[#objectPointer: me]>
  [558] pushproplist ............................ <[#objectPointer: me]>
  [559] pusharglistnoret 2 ...................... <#BalloonManagerCreated, [#objectPointer: me]>
  [561] extcall 180 ............................. executeMessage(#BalloonManagerCreated, [#objectPointer: me])
  [563] getparam 0 .............................. <me>
  [565] pusharglistnoret 1 ...................... <me>
  [567] objcall 1492 ............................ me.resetBalloons()
  [570] pushint8 1 .............................. <1>
  [572] pusharglistnoret 1 ...................... <1>
  [574] extcall 116 ............................. return 1
  [576] ret
end

on deconstruct me
  [  0] pushsymb 1532 ........................... <#balloonautoscroll>
  [  3] pusharglist 1 ........................... <#balloonautoscroll>
  [  5] extcall 196 ............................. <timeoutExists(#balloonautoscroll)>
  [  7] jmpifz [ 17] ............................ if timeoutExists(#balloonautoscroll) then
  [ 10] pushsymb 1532 ........................... <#balloonautoscroll>
  [ 13] pusharglistnoret 1 ...................... <#balloonautoscroll>
  [ 15] extcall 198 ............................. removeTimeout(#balloonautoscroll)
  [ 17] getparam 0 .............................. <me>
  [ 19] pusharglist 1 ........................... <me>
  [ 21] objcall 115 ............................. <me.getID()>
  [ 23] pusharglistnoret 1 ...................... <me.getID()>
  [ 25] extcall 568 ............................. removePrepare(me.getID())
  [ 28] pushsymb 462 ............................ <#leaveRoom>
  [ 31] getparam 0 .............................. <me>
  [ 33] pusharglist 1 ........................... <me>
  [ 35] objcall 115 ............................. <me.getID()>
  [ 37] pusharglistnoret 2 ...................... <#leaveRoom, me.getID()>
  [ 39] extcall 119 ............................. unregisterMessage(#leaveRoom, me.getID())
  [ 41] pushsymb 550 ............................ <#changeRoom>
  [ 44] getparam 0 .............................. <me>
  [ 46] pusharglist 1 ........................... <me>
  [ 48] objcall 115 ............................. <me.getID()>
  [ 50] pusharglistnoret 2 ...................... <#changeRoom, me.getID()>
  [ 52] extcall 119 ............................. unregisterMessage(#changeRoom, me.getID())
  [ 54] pusharglist 0 ........................... <[]>
  [ 56] pushlist ................................ <[]>
  [ 57] setprop 1504 ............................ pBalloonBuffer = []
  [ 60] getprop 1503 ............................ <pAvailableBalloons>
  [ 63] pusharglist 1 ........................... <pAvailableBalloons>
  [ 65] extcall 253 ............................. <voidp(pAvailableBalloons)>
  [ 67] not ..................................... <not voidp(pAvailableBalloons)>
  [ 68] jmpifz [ 80] ............................ if not voidp(pAvailableBalloons) then
  [ 71] pushsymb 2 .............................. <#deconstruct>
  [ 73] getprop 1503 ............................ <pAvailableBalloons>
  [ 76] pusharglistnoret 2 ...................... <#deconstruct, pAvailableBalloons>
  [ 78] extcall 142 ............................. call(#deconstruct, pAvailableBalloons)
  [ 80] getprop 1502 ............................ <pVisibleBalloons>
  [ 83] pusharglist 1 ........................... <pVisibleBalloons>
  [ 85] extcall 253 ............................. <voidp(pVisibleBalloons)>
  [ 87] not ..................................... <not voidp(pVisibleBalloons)>
  [ 88] jmpifz [100] ............................ if not voidp(pVisibleBalloons) then
  [ 91] pushsymb 2 .............................. <#deconstruct>
  [ 93] getprop 1502 ............................ <pVisibleBalloons>
  [ 96] pusharglistnoret 2 ...................... <#deconstruct, pVisibleBalloons>
  [ 98] extcall 142 ............................. call(#deconstruct, pVisibleBalloons)
  [100] getprop 1533 ............................ <pBalloonPulse>
  [103] pusharglist 1 ........................... <pBalloonPulse>
  [105] extcall 253 ............................. <voidp(pBalloonPulse)>
  [107] not ..................................... <not voidp(pBalloonPulse)>
  [108] jmpifz [120] ............................ if not voidp(pBalloonPulse) then
  [111] pushsymb 2 .............................. <#deconstruct>
  [113] getprop 1533 ............................ <pBalloonPulse>
  [116] pusharglistnoret 2 ...................... <#deconstruct, pBalloonPulse>
  [118] extcall 142 ............................. call(#deconstruct, pBalloonPulse)
  [120] getprop 1525 ............................ <pReservedSprites>
  [123] peek 0
  [125] pusharglist 1
  [127] extcall 149
  [129] pushint8 1
  [131] peek 0
  [133] peek 2
  [135] lteq
  [136] jmpifz [161] ............................ repeat with tSpr in pReservedSprites
  [139] peek 2
  [141] peek 1
  [143] pusharglist 2
  [145] extcall 138
  [147] setlocal 0
  [149] getlocal 0 .............................. <tSpr>
  [151] pusharglistnoret 1 ...................... <tSpr>
  [153] extcall 339 ............................. releaseSprite(tSpr)
  [156] pushint8 1
  [158] add
  [159] endrepeat [131]
  [161] pop 3
  [163] getprop 1511 ............................ <pTextMembers>
  [166] peek 0
  [168] pusharglist 1
  [170] extcall 149
  [172] pushint8 1
  [174] peek 0
  [176] peek 2
  [178] lteq
  [179] jmpifz [206] ............................ repeat with tMem in pTextMembers
  [182] peek 2
  [184] peek 1
  [186] pusharglist 2
  [188] extcall 138
  [190] setlocal 1
  [192] getlocal 1 .............................. <tMem>
  [194] getobjprop 187 .......................... <tMem.name>
  [196] pusharglistnoret 1 ...................... <tMem.name>
  [198] extcall 1100 ............................ removeMember(tMem.name)
  [201] pushint8 1
  [203] add
  [204] endrepeat [174]
  [206] pop 3
  [208] pusharglist 0 ........................... <[]>
  [210] pushlist ................................ <[]>
  [211] setprop 1525 ............................ pReservedSprites = []
  [214] pusharglist 0 ........................... <[:]>
  [216] pushproplist ............................ <[:]>
  [217] setprop 1511 ............................ pTextMembers = [:]
  [220] pusharglist 0 ........................... <>
  [222] extcall 120 ............................. <VOID>
  [224] setprop 1503 ............................ pAvailableBalloons = VOID
  [227] pusharglist 0 ........................... <>
  [229] extcall 120 ............................. <VOID>
  [231] setprop 1502 ............................ pVisibleBalloons = VOID
  [234] pusharglist 0 ........................... <>
  [236] extcall 120 ............................. <VOID>
  [238] setprop 1504 ............................ pBalloonBuffer = VOID
  [241] pushint8 1 .............................. <1>
  [243] pusharglistnoret 1 ...................... <1>
  [245] extcall 116 ............................. return 1
  [247] ret
end

on createballoonImg me, tName, tText, tBalloonColor, tChatMode
  [  0] getparam 3 .............................. <tBalloonColor>
  [  2] getobjprop 1295 ......................... <tBalloonColor.red>
  [  5] getparam 3 .............................. <tBalloonColor>
  [  7] getobjprop 1296 ......................... <tBalloonColor.green>
  [ 10] add ..................................... <tBalloonColor.red + tBalloonColor.green>
  [ 11] getparam 3 .............................. <tBalloonColor>
  [ 13] getobjprop 1297 ......................... <tBalloonColor.blue>
  [ 16] add ..................................... <tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue>
  [ 17] pushint16 600 ........................... <600>
  [ 20] gteq .................................... <(tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) >= 600>
  [ 21] jmpifz [ 77] ............................ if (tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) >= 600 then
  [ 24] pushzero ................................ <0>
  [ 25] pushzero ................................ <0>
  [ 26] pushzero ................................ <0>
  [ 27] pusharglist 3 ........................... <0, 0, 0>
  [ 29] extcall 283 ............................. <rgb(0, 0, 0)>
  [ 32] setlocal 0 .............................. tBalloonColorDarken = rgb(0, 0, 0)
  [ 34] getlocal 0 .............................. <tBalloonColorDarken>
  [ 36] getparam 3 .............................. <tBalloonColor>
  [ 38] getobjprop 1295 ......................... <tBalloonColor.red>
  [ 41] pushcons 14 ............................. <0.90000000000000002>
  [ 43] mul ..................................... <tBalloonColor.red * 0.90000000000000002>
  [ 44] setobjprop 1295 ......................... tBalloonColorDarken.red = tBalloonColor.red * 0.90000000000000002
  [ 47] getlocal 0 .............................. <tBalloonColorDarken>
  [ 49] getparam 3 .............................. <tBalloonColor>
  [ 51] getobjprop 1296 ......................... <tBalloonColor.green>
  [ 54] pushcons 14 ............................. <0.90000000000000002>
  [ 56] mul ..................................... <tBalloonColor.green * 0.90000000000000002>
  [ 57] setobjprop 1296 ......................... tBalloonColorDarken.green = tBalloonColor.green * 0.90000000000000002
  [ 60] getlocal 0 .............................. <tBalloonColorDarken>
  [ 62] getparam 3 .............................. <tBalloonColor>
  [ 64] getobjprop 1297 ......................... <tBalloonColor.blue>
  [ 67] pushcons 14 ............................. <0.90000000000000002>
  [ 69] mul ..................................... <tBalloonColor.blue * 0.90000000000000002>
  [ 70] setobjprop 1297 ......................... tBalloonColorDarken.blue = tBalloonColor.blue * 0.90000000000000002
  [ 73] getlocal 0 .............................. <tBalloonColorDarken>
  [ 75] setparam 3 .............................. tBalloonColor = tBalloonColorDarken
  [ 77] getparam 2 .............................. <tText>
  [ 79] pusharglist 1 ........................... <tText>
  [ 81] extcall 595 ............................. <length(tText)>
  [ 84] getprop 1524 ............................ <pMaxCharNum>
  [ 87] gt ...................................... <length(tText) > pMaxCharNum>
  [ 88] jmpifz [107] ............................ if length(tText) > pMaxCharNum then
  [ 91] getparam 2 .............................. <tText>
  [ 93] pushsymb 425 ............................ <#char>
  [ 96] pushint8 1 .............................. <1>
  [ 98] getprop 1524 ............................ <pMaxCharNum>
  [101] pusharglist 4 ........................... <tText, #char, 1, pMaxCharNum>
  [103] objcall 134 ............................. <tText.char[1..pMaxCharNum]>
  [105] setparam 2 .............................. tText = tText.char[1..pMaxCharNum]
  [107] getprop 1511 ............................ <pTextMembers>
  [110] getparam 4 .............................. <tChatMode>
  [112] pusharglist 2 ........................... <pTextMembers, tChatMode>
  [114] objcall 138 ............................. <pTextMembers[tChatMode]>
  [116] setlocal 1 .............................. tmember = pTextMembers[tChatMode]
  [118] getlocal 1 .............................. <tmember>
  [120] getobjprop 1518 ......................... <tmember.font>
  [123] setlocal 2 .............................. tSavedFont = tmember.font
  [125] getlocal 1 .............................. <tmember>
  [127] getobjprop 1520 ......................... <tmember.fontStyle>
  [130] setlocal 3 .............................. tSavedStyle = tmember.fontStyle
  [132] getlocal 1 .............................. <tmember>
  [134] pushzero ................................ <0>
  [135] pushzero ................................ <0>
  [136] getprop 1523 ............................ <pMaxWidth>
  [139] getlocal 1 .............................. <tmember>
  [141] getobjprop 261 .......................... <tmember.height>
  [144] pusharglist 4 ........................... <0, 0, pMaxWidth, tmember.height>
  [146] extcall 221 ............................. <rect(0, 0, pMaxWidth, tmember.height)>
  [148] setobjprop 221 .......................... tmember.rect = rect(0, 0, pMaxWidth, tmember.height)
  [150] pushcons 15 ............................. <"struct.font.bold">
  [152] pusharglist 1 ........................... <"struct.font.bold">
  [154] extcall 1513 ............................ <getStructVariable("struct.font.bold")>
  [157] setlocal 4 .............................. tBoldStruct = getStructVariable("struct.font.bold")
  [159] getlocal 1 .............................. <tmember>
  [161] getparam 1 .............................. <tName>
  [163] pushcons 16 ............................. <":">
  [165] joinstr ................................. <tName & ":">
  [166] getparam 2 .............................. <tText>
  [168] joinpadstr .............................. <tName & ":" && tText>
  [169] setobjprop 851 .......................... tmember.text = tName & ":" && tText
  [172] getlocal 1 .............................. <tmember>
  [174] pushsymb 425 ............................ <#char>
  [177] pushint8 1 .............................. <1>
  [179] getparam 1 .............................. <tName>
  [181] getobjprop 595 .......................... <tName.length>
  [184] pushint8 1 .............................. <1>
  [186] add ..................................... <tName.length + 1>
  [187] pusharglist 4 ........................... <tmember, #char, 1, tName.length + 1>
  [189] objcall 641 ............................. <tmember.char[1..tName.length + 1]>
  [192] getlocal 4 .............................. <tBoldStruct>
  [194] pushsymb 1518 ........................... <#font>
  [197] pusharglist 2 ........................... <tBoldStruct, #font>
  [199] objcall 214 ............................. <tBoldStruct.getaProp(#font)>
  [201] setobjprop 1518 ......................... tmember.char[1..tName.length + 1].font = tBoldStruct.getaProp(#font)
  [204] getlocal 1 .............................. <tmember>
  [206] pushsymb 425 ............................ <#char>
  [209] pushint8 1 .............................. <1>
  [211] getparam 1 .............................. <tName>
  [213] getobjprop 595 .......................... <tName.length>
  [216] pushint8 1 .............................. <1>
  [218] add ..................................... <tName.length + 1>
  [219] pusharglist 4 ........................... <tmember, #char, 1, tName.length + 1>
  [221] objcall 641 ............................. <tmember.char[1..tName.length + 1]>
  [224] getlocal 4 .............................. <tBoldStruct>
  [226] pushsymb 1520 ........................... <#fontStyle>
  [229] pusharglist 2 ........................... <tBoldStruct, #fontStyle>
  [231] objcall 214 ............................. <tBoldStruct.getaProp(#fontStyle)>
  [233] setobjprop 1520 ......................... tmember.char[1..tName.length + 1].fontStyle = tBoldStruct.getaProp(#fontStyle)
  [236] getlocal 1 .............................. <tmember>
  [238] getobjprop 327 .......................... <tmember.color>
  [241] setlocal 5 .............................. tSavedColor = tmember.color
  [243] getlocal 1 .............................. <tmember>
  [245] pushsymb 425 ............................ <#char>
  [248] pushint8 1 .............................. <1>
  [250] getparam 1 .............................. <tName>
  [252] getobjprop 595 .......................... <tName.length>
  [255] pushint8 1 .............................. <1>
  [257] add ..................................... <tName.length + 1>
  [258] pusharglist 4 ........................... <tmember, #char, 1, tName.length + 1>
  [260] objcall 641 ............................. <tmember.char[1..tName.length + 1]>
  [263] getprop 1512 ............................ <pDefaultTextColor>
  [266] setobjprop 327 .......................... tmember.char[1..tName.length + 1].color = pDefaultTextColor
  [269] getlocal 1 .............................. <tmember>
  [271] getlocal 1 .............................. <tmember>
  [273] pushsymb 425 ............................ <#char>
  [276] pusharglist 2 ........................... <tmember, #char>
  [278] objcall 149 ............................. <tmember.char.count>
  [280] pusharglist 2 ........................... <tmember, tmember.char.count>
  [282] objcall 1534 ............................ <tmember.charPosToLoc(tmember.char.count)>
  [285] getobjprop 222 .......................... <tmember.charPosToLoc(tmember.char.count).locH>
  [287] getprop 1526 ............................ <pBalloonImg>
  [290] pushsymb 394 ............................ <#left>
  [293] pusharglist 2 ........................... <pBalloonImg, #left>
  [295] objcall 138 ............................. <pBalloonImg[#left]>
  [297] getobjprop 219 .......................... <pBalloonImg[#left].width>
  [299] pushint8 4 .............................. <4>
  [301] mul ..................................... <pBalloonImg[#left].width * 4>
  [302] add ..................................... <tmember.charPosToLoc(tmember.char.count).locH + (pBalloonImg[#left].width * 4)>
  [303] setlocal 6 .............................. tTextWidth = tmember.charPosToLoc(tmember.char.count).locH + (pBalloonImg[#left].width * 4)
  [305] getlocal 6 .............................. <tTextWidth>
  [307] getprop 1508 ............................ <pMarginH>
  [310] pushint8 2 .............................. <2>
  [312] mul ..................................... <pMarginH * 2>
  [313] add ..................................... <tTextWidth + (pMarginH * 2)>
  [314] getprop 1523 ............................ <pMaxWidth>
  [317] gt ...................................... <(tTextWidth + (pMarginH * 2)) > pMaxWidth>
  [318] jmpifz [346] ............................ if (tTextWidth + (pMarginH * 2)) > pMaxWidth then
  [321] getprop 1523 ............................ <pMaxWidth>
  [324] getprop 1508 ............................ <pMarginH>
  [327] pushint8 2 .............................. <2>
  [329] mul ..................................... <pMarginH * 2>
  [330] sub ..................................... <pMaxWidth - (pMarginH * 2)>
  [331] getprop 1526 ............................ <pBalloonImg>
  [334] pushsymb 394 ............................ <#left>
  [337] pusharglist 2 ........................... <pBalloonImg, #left>
  [339] objcall 138 ............................. <pBalloonImg[#left]>
  [341] getobjprop 219 .......................... <pBalloonImg[#left].width>
  [343] sub ..................................... <pMaxWidth - (pMarginH * 2) - pBalloonImg[#left].width>
  [344] setlocal 6 .............................. tTextWidth = pMaxWidth - (pMarginH * 2) - pBalloonImg[#left].width
  [346] getlocal 1 .............................. <tmember>
  [348] pushzero ................................ <0>
  [349] pushzero ................................ <0>
  [350] getlocal 6 .............................. <tTextWidth>
  [352] getlocal 1 .............................. <tmember>
  [354] getobjprop 261 .......................... <tmember.height>
  [357] pusharglist 4 ........................... <0, 0, tTextWidth, tmember.height>
  [359] extcall 221 ............................. <rect(0, 0, tTextWidth, tmember.height)>
  [361] setobjprop 221 .......................... tmember.rect = rect(0, 0, tTextWidth, tmember.height)
  [363] getlocal 1 .............................. <tmember>
  [365] getobjprop 260 .......................... <tmember.image>
  [368] setlocal 7 .............................. tTextImg = tmember.image
  [370] getlocal 7 .............................. <tTextImg>
  [372] getobjprop 219 .......................... <tTextImg.width>
  [374] setlocal 6 .............................. tTextWidth = tTextImg.width
  [376] getlocal 6 .............................. <tTextWidth>
  [378] getprop 1508 ............................ <pMarginH>
  [381] pushint8 2 .............................. <2>
  [383] mul ..................................... <pMarginH * 2>
  [384] add ..................................... <tTextWidth + (pMarginH * 2)>
  [385] setlocal 8 .............................. tWidth = tTextWidth + (pMarginH * 2)
  [387] getlocal 8 .............................. <tWidth>
  [389] getprop 1526 ............................ <pBalloonImg>
  [392] pushsymb 394 ............................ <#left>
  [395] pusharglist 2 ........................... <pBalloonImg, #left>
  [397] objcall 138 ............................. <pBalloonImg[#left]>
  [399] getobjprop 261 .......................... <pBalloonImg[#left].height>
  [402] pushint8 8 .............................. <8>
  [404] pusharglist 3 ........................... <tWidth, pBalloonImg[#left].height, 8>
  [406] extcall 260 ............................. <image(tWidth, pBalloonImg[#left].height, 8)>
  [409] setlocal 9 .............................. tNewImg = image(tWidth, pBalloonImg[#left].height, 8)
  [411] pushzero ................................ <0>
  [412] setlocal 10 ............................. tStartPointY = 0
  [414] getlocal 9 .............................. <tNewImg>
  [416] getobjprop 261 .......................... <tNewImg.height>
  [419] setlocal 11 ............................. tEndPointY = tNewImg.height
  [421] pushzero ................................ <0>
  [422] setlocal 12 ............................. tStartPointX = 0
  [424] pushzero ................................ <0>
  [425] setlocal 13 ............................. tEndPointX = 0
  [427] pushsymb 394 ............................ <#left>
  [430] pushsymb 1527 ........................... <#middle>
  [433] pushsymb 1050 ........................... <#right>
  [436] pusharglist 3 ........................... <[#left, #middle, #right]>
  [438] pushlist ................................ <[#left, #middle, #right]>
  [439] peek 0
  [441] pusharglist 1
  [443] extcall 149
  [445] pushint8 1
  [447] peek 0
  [449] peek 2
  [451] lteq
  [452] jmpifz [627] ............................ repeat with i in [#left, #middle, #right]
  [455] peek 2
  [457] peek 1
  [459] pusharglist 2
  [461] extcall 138
  [463] setlocal 14
  [465] getlocal 13 ............................. <tEndPointX>
  [467] setlocal 12 ............................. tStartPointX = tEndPointX
  [469] getlocal 14 ............................. <i>
  [471] peek 0 .................................. case i of
  [473] pushsymb 394 ............................ <#left>
  [476] eq
  [477] jmpifz [499] ............................ (case) #left:
  [480] getlocal 13 ............................. <tEndPointX>
  [482] getprop 1526 ............................ <pBalloonImg>
  [485] getlocal 14 ............................. <i>
  [487] pusharglist 2 ........................... <pBalloonImg, i>
  [489] objcall 134 ............................. <pBalloonImg.getProp(i)>
  [491] getobjprop 219 .......................... <pBalloonImg.getProp(i).width>
  [493] add ..................................... <tEndPointX + pBalloonImg.getProp(i).width>
  [494] setlocal 13 ............................. tEndPointX = tEndPointX + pBalloonImg.getProp(i).width
  [496] jmp [569]
  [499] peek 0
  [501] pushsymb 1527 ........................... <#middle>
  [504] eq
  [505] jmpifz [544] ............................ (case) #middle:
  [508] getlocal 13 ............................. <tEndPointX>
  [510] getlocal 8 .............................. <tWidth>
  [512] add ..................................... <tEndPointX + tWidth>
  [513] getprop 1526 ............................ <pBalloonImg>
  [516] pushsymb 394 ............................ <#left>
  [519] pusharglist 2 ........................... <pBalloonImg, #left>
  [521] objcall 134 ............................. <pBalloonImg.getProp(#left)>
  [523] getobjprop 219 .......................... <pBalloonImg.getProp(#left).width>
  [525] sub ..................................... <tEndPointX + tWidth - pBalloonImg.getProp(#left).width>
  [526] getprop 1526 ............................ <pBalloonImg>
  [529] pushsymb 1050 ........................... <#right>
  [532] pusharglist 2 ........................... <pBalloonImg, #right>
  [534] objcall 134 ............................. <pBalloonImg.getProp(#right)>
  [536] getobjprop 219 .......................... <pBalloonImg.getProp(#right).width>
  [538] sub ..................................... <tEndPointX + tWidth - pBalloonImg.getProp(#left).width - pBalloonImg.getProp(#right).width>
  [539] setlocal 13 ............................. tEndPointX = tEndPointX + tWidth - pBalloonImg.getProp(#left).width - pBalloonImg.getProp(#right).width
  [541] jmp [569]
  [544] peek 0
  [546] pushsymb 1050 ........................... <#right>
  [549] eq
  [550] jmpifz [569] ............................ (case) #right:
  [553] getlocal 13 ............................. <tEndPointX>
  [555] getprop 1526 ............................ <pBalloonImg>
  [558] getlocal 14 ............................. <i>
  [560] pusharglist 2 ........................... <pBalloonImg, i>
  [562] objcall 134 ............................. <pBalloonImg.getProp(i)>
  [564] getobjprop 219 .......................... <pBalloonImg.getProp(i).width>
  [566] add ..................................... <tEndPointX + pBalloonImg.getProp(i).width>
  [567] setlocal 13 ............................. tEndPointX = tEndPointX + pBalloonImg.getProp(i).width
  [569] pop 1 ................................... end case
  [571] getlocal 12 ............................. <tStartPointX>
  [573] getlocal 10 ............................. <tStartPointY>
  [575] getlocal 13 ............................. <tEndPointX>
  [577] getlocal 11 ............................. <tEndPointY>
  [579] pusharglist 4 ........................... <tStartPointX, tStartPointY, tEndPointX, tEndPointY>
  [581] extcall 221 ............................. <rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)>
  [583] setlocal 15 ............................. tdestrect = rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)
  [585] getlocal 9 .............................. <tNewImg>
  [587] getprop 1526 ............................ <pBalloonImg>
  [590] getlocal 14 ............................. <i>
  [592] pusharglist 2 ........................... <pBalloonImg, i>
  [594] objcall 134 ............................. <pBalloonImg.getProp(i)>
  [596] getlocal 15 ............................. <tdestrect>
  [598] getprop 1526 ............................ <pBalloonImg>
  [601] getlocal 14 ............................. <i>
  [603] pusharglist 2 ........................... <pBalloonImg, i>
  [605] objcall 134 ............................. <pBalloonImg.getProp(i)>
  [607] getobjprop 221 .......................... <pBalloonImg.getProp(i).rect>
  [609] pushsymb 327 ............................ <#color>
  [612] getparam 3 .............................. <tBalloonColor>
  [614] pusharglist 2 ........................... <[#color: tBalloonColor]>
  [616] pushproplist ............................ <[#color: tBalloonColor]>
  [617] pusharglistnoret 5 ...................... <tNewImg, pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect, [#color: tBalloonColor]>
  [619] objcall 293 ............................. tNewImg.copyPixels(pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect, [#color: tBalloonColor])
  [622] pushint8 1
  [624] add
  [625] endrepeat [447]
  [627] pop 3
  [629] getlocal 7 .............................. <tTextImg>
  [631] getobjprop 221 .......................... <tTextImg.rect>
  [633] getprop 1508 ............................ <pMarginH>
  [636] getprop 1509 ............................ <pMarginV>
  [639] getprop 1508 ............................ <pMarginH>
  [642] getprop 1509 ............................ <pMarginV>
  [645] pusharglist 4 ........................... <pMarginH, pMarginV, pMarginH, pMarginV>
  [647] extcall 221 ............................. <rect(pMarginH, pMarginV, pMarginH, pMarginV)>
  [649] add ..................................... <tTextImg.rect + rect(pMarginH, pMarginV, pMarginH, pMarginV)>
  [650] setlocal 15 ............................. tdestrect = tTextImg.rect + rect(pMarginH, pMarginV, pMarginH, pMarginV)
  [652] getlocal 15 ............................. <tdestrect>
  [654] getlocal 9 .............................. <tNewImg>
  [656] getobjprop 219 .......................... <tNewImg.width>
  [658] pushint8 2 .............................. <2>
  [660] div ..................................... <tNewImg.width / 2>
  [661] pushzero ................................ <0>
  [662] getlocal 9 .............................. <tNewImg>
  [664] getobjprop 219 .......................... <tNewImg.width>
  [666] pushint8 2 .............................. <2>
  [668] div ..................................... <tNewImg.width / 2>
  [669] pushzero ................................ <0>
  [670] pusharglist 4 ........................... <tNewImg.width / 2, 0, tNewImg.width / 2, 0>
  [672] extcall 221 ............................. <rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0)>
  [674] add ..................................... <tdestrect + rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0)>
  [675] getlocal 6 .............................. <tTextWidth>
  [677] pushint8 2 .............................. <2>
  [679] div ..................................... <tTextWidth / 2>
  [680] pushzero ................................ <0>
  [681] getlocal 6 .............................. <tTextWidth>
  [683] pushint8 2 .............................. <2>
  [685] div ..................................... <tTextWidth / 2>
  [686] pushzero ................................ <0>
  [687] pusharglist 4 ........................... <tTextWidth / 2, 0, tTextWidth / 2, 0>
  [689] extcall 221 ............................. <rect(tTextWidth / 2, 0, tTextWidth / 2, 0)>
  [691] sub ..................................... <tdestrect + rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0) - rect(tTextWidth / 2, 0, tTextWidth / 2, 0)>
  [692] setlocal 15 ............................. tdestrect = tdestrect + rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0) - rect(tTextWidth / 2, 0, tTextWidth / 2, 0)
  [694] getlocal 9 .............................. <tNewImg>
  [696] getlocal 7 .............................. <tTextImg>
  [698] getlocal 15 ............................. <tdestrect>
  [700] getlocal 7 .............................. <tTextImg>
  [702] getobjprop 221 .......................... <tTextImg.rect>
  [704] pusharglistnoret 4 ...................... <tNewImg, tTextImg, tdestrect, tTextImg.rect>
  [706] objcall 293 ............................. tNewImg.copyPixels(tTextImg, tdestrect, tTextImg.rect)
  [709] getlocal 1 .............................. <tmember>
  [711] getlocal 2 .............................. <tSavedFont>
  [713] setobjprop 1518 ......................... tmember.font = tSavedFont
  [716] getlocal 1 .............................. <tmember>
  [718] getlocal 3 .............................. <tSavedStyle>
  [720] setobjprop 1520 ......................... tmember.fontStyle = tSavedStyle
  [723] getlocal 1 .............................. <tmember>
  [725] getlocal 5 .............................. <tSavedColor>
  [727] setobjprop 327 .......................... tmember.color = tSavedColor
  [730] getlocal 9 .............................. <tNewImg>
  [732] pusharglistnoret 1 ...................... <tNewImg>
  [734] extcall 116 ............................. return tNewImg
  [736] ret
end

on resetBalloons me
  [  0] pusharglist 0 ........................... <[:]>
  [  2] pushproplist ............................ <[:]>
  [  3] setprop 1502 ............................ pVisibleBalloons = [:]
  [  6] pusharglist 0 ........................... <[:]>
  [  8] pushproplist ............................ <[:]>
  [  9] setprop 1503 ............................ pAvailableBalloons = [:]
  [ 12] getparam 0 .............................. <me>
  [ 14] pusharglist 1 ........................... <me>
  [ 16] objcall 115 ............................. <me.getID()>
  [ 18] pusharglist 1 ........................... <me.getID()>
  [ 20] extcall 328 ............................. <reserveSprite(me.getID())>
  [ 23] setlocal 0 .............................. tSprNum = reserveSprite(me.getID())
  [ 25] getprop 1525 ............................ <pReservedSprites>
  [ 28] getlocal 0 .............................. <tSprNum>
  [ 30] pusharglistnoret 2 ...................... <pReservedSprites, tSprNum>
  [ 32] objcall 151 ............................. pReservedSprites.add(tSprNum)
  [ 34] pushsymb 111 ............................ <#temp>
  [ 36] pushcons 17 ............................. <"Balloon pulse Class">
  [ 38] pusharglist 2 ........................... <#temp, "Balloon pulse Class">
  [ 40] extcall 109 ............................. <createObject(#temp, "Balloon pulse Class")>
  [ 42] setprop 1533 ............................ pBalloonPulse = createObject(#temp, "Balloon pulse Class")
  [ 45] getlocal 0 .............................. <tSprNum>
  [ 47] pusharglist 1 ........................... <tSprNum>
  [ 49] extcall 146 ............................. <sprite(tSprNum)>
  [ 51] getprop 1506 ............................ <pFirstLocz>
  [ 54] setobjprop 130 .......................... sprite(tSprNum).locZ = pFirstLocz
  [ 56] getlocal 0 .............................. <tSprNum>
  [ 58] pusharglist 1 ........................... <tSprNum>
  [ 60] extcall 146 ............................. <sprite(tSprNum)>
  [ 62] pushint8 8 .............................. <8>
  [ 64] setobjprop 393 .......................... sprite(tSprNum).ink = 8
  [ 67] getprop 1533 ............................ <pBalloonPulse>
  [ 70] pushsymb 146 ............................ <#sprite>
  [ 72] getlocal 0 .............................. <tSprNum>
  [ 74] pusharglistnoret 3 ...................... <pBalloonPulse, #sprite, tSprNum>
  [ 76] objcall 556 ............................. pBalloonPulse.set(#sprite, tSprNum)
  [ 79] getprop 1533 ............................ <pBalloonPulse>
  [ 82] pushsymb 1549 ........................... <#manager>
  [ 85] getparam 0 .............................. <me>
  [ 87] pusharglistnoret 3 ...................... <pBalloonPulse, #manager, me>
  [ 89] objcall 556 ............................. pBalloonPulse.set(#manager, me)
  [ 92] pushint8 1 .............................. <1>
  [ 94] setlocal 1
  [ 96] getlocal 1
  [ 98] getprop 1505 ............................ <pMaxBalloons>
  [101] lteq
  [102] jmpifz [343] ............................ repeat with f = 1 to pMaxBalloons
  [105] getparam 0 .............................. <me>
  [107] pusharglist 1 ........................... <me>
  [109] objcall 115 ............................. <me.getID()>
  [111] pusharglist 1 ........................... <me.getID()>
  [113] extcall 328 ............................. <reserveSprite(me.getID())>
  [116] setlocal 0 .............................. tSprNum = reserveSprite(me.getID())
  [118] getprop 1525 ............................ <pReservedSprites>
  [121] getlocal 0 .............................. <tSprNum>
  [123] pusharglistnoret 2 ...................... <pReservedSprites, tSprNum>
  [125] objcall 151 ............................. pReservedSprites.add(tSprNum)
  [127] getlocal 0 .............................. <tSprNum>
  [129] pushzero ................................ <0>
  [130] eq ...................................... <tSprNum = 0>
  [131] jmpifz [146] ............................ if tSprNum = 0 then
  [134] getlocal 1 .............................. <f>
  [136] pushint8 1 .............................. <1>
  [138] sub ..................................... <f - 1>
  [139] setprop 1505 ............................ pMaxBalloons = f - 1
  [142] pusharglistnoret 0 ...................... <>
  [144] extcall 116 ............................. return 
  [146] getlocal 0 .............................. <tSprNum>
  [148] pusharglist 1 ........................... <tSprNum>
  [150] extcall 146 ............................. <sprite(tSprNum)>
  [152] getprop 1506 ............................ <pFirstLocz>
  [155] getlocal 1 .............................. <f>
  [157] add ..................................... <pFirstLocz + f>
  [158] pushint8 1 .............................. <1>
  [160] sub ..................................... <pFirstLocz + f - 1>
  [161] setobjprop 130 .......................... sprite(tSprNum).locZ = pFirstLocz + f - 1
  [163] getlocal 0 .............................. <tSprNum>
  [165] pusharglist 1 ........................... <tSprNum>
  [167] extcall 146 ............................. <sprite(tSprNum)>
  [169] pushint8 8 .............................. <8>
  [171] setobjprop 393 .......................... sprite(tSprNum).ink = 8
  [174] pushcons 18 ............................. <"balloon">
  [176] getlocal 1 .............................. <f>
  [178] joinstr ................................. <"balloon" & f>
  [179] setlocal 2 .............................. tBalloonId = "balloon" & f
  [181] pushcons 19 ............................. <"balloon.">
  [183] getlocal 2 .............................. <tBalloonId>
  [185] joinstr ................................. <"balloon." & tBalloonId>
  [186] setlocal 3 .............................. tmember = "balloon." & tBalloonId
  [188] getlocal 3 .............................. <tmember>
  [190] pusharglist 1 ........................... <tmember>
  [192] extcall 122 ............................. <memberExists(tmember)>
  [194] not ..................................... <not memberExists(tmember)>
  [195] jmpifz [208] ............................ if not memberExists(tmember) then
  [198] getlocal 3 .............................. <tmember>
  [200] pushsymb 292 ............................ <#bitmap>
  [203] pusharglistnoret 2 ...................... <tmember, #bitmap>
  [205] extcall 329 ............................. createMember(tmember, #bitmap)
  [208] getlocal 3 .............................. <tmember>
  [210] pusharglist 1 ........................... <tmember>
  [212] extcall 330 ............................. <getmemnum(tmember)>
  [215] setlocal 3 .............................. tmember = getmemnum(tmember)
  [217] getprop 1503 ............................ <pAvailableBalloons>
  [220] getlocal 2 .............................. <tBalloonId>
  [222] pushsymb 111 ............................ <#temp>
  [224] pushcons 20 ............................. <"Balloon Class">
  [226] pusharglist 2 ........................... <#temp, "Balloon Class">
  [228] extcall 109 ............................. <createObject(#temp, "Balloon Class")>
  [230] pusharglistnoret 3 ...................... <pAvailableBalloons, tBalloonId, createObject(#temp, "Balloon Class")>
  [232] objcall 667 ............................. pAvailableBalloons.addProp(tBalloonId, createObject(#temp, "Balloon Class"))
  [235] getprop 1503 ............................ <pAvailableBalloons>
  [238] getlocal 2 .............................. <tBalloonId>
  [240] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [242] objcall 138 ............................. <pAvailableBalloons[tBalloonId]>
  [244] getlocal 2 .............................. <tBalloonId>
  [246] pusharglistnoret 2 ...................... <pAvailableBalloons[tBalloonId], tBalloonId>
  [248] objcall 656 ............................. pAvailableBalloons[tBalloonId].setID(tBalloonId)
  [251] getprop 1503 ............................ <pAvailableBalloons>
  [254] getlocal 2 .............................. <tBalloonId>
  [256] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [258] objcall 138 ............................. <pAvailableBalloons[tBalloonId]>
  [260] pushsymb 146 ............................ <#sprite>
  [262] getlocal 0 .............................. <tSprNum>
  [264] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #sprite, tSprNum>
  [266] objcall 556 ............................. pAvailableBalloons[tBalloonId].set(#sprite, tSprNum)
  [269] getprop 1503 ............................ <pAvailableBalloons>
  [272] getlocal 2 .............................. <tBalloonId>
  [274] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [276] objcall 138 ............................. <pAvailableBalloons[tBalloonId]>
  [278] pushsymb 263 ............................ <#member>
  [281] getlocal 3 .............................. <tmember>
  [283] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #member, tmember>
  [285] objcall 556 ............................. pAvailableBalloons[tBalloonId].set(#member, tmember)
  [288] getprop 1503 ............................ <pAvailableBalloons>
  [291] getlocal 2 .............................. <tBalloonId>
  [293] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [295] objcall 138 ............................. <pAvailableBalloons[tBalloonId]>
  [297] pushsymb 332 ............................ <#loc>
  [300] pushzero ................................ <0>
  [301] pushint16 1000 .......................... <1000>
  [304] inv ..................................... <-1000>
  [305] pusharglist 2 ........................... <0, -1000>
  [307] extcall 264 ............................. <point(0, -1000)>
  [310] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #loc, point(0, -1000)>
  [312] objcall 556 ............................. pAvailableBalloons[tBalloonId].set(#loc, point(0, -1000))
  [315] getprop 1503 ............................ <pAvailableBalloons>
  [318] getlocal 2 .............................. <tBalloonId>
  [320] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [322] objcall 138 ............................. <pAvailableBalloons[tBalloonId]>
  [324] pushsymb 1549 ........................... <#manager>
  [327] getparam 0 .............................. <me>
  [329] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #manager, me>
  [331] objcall 556 ............................. pAvailableBalloons[tBalloonId].set(#manager, me)
  [334] pushint8 1
  [336] getlocal 1
  [338] add
  [339] setlocal 1
  [341] endrepeat [ 96]
  [343] ret
end

on hideBalloons me
  [  0] pushsymb 1551 ........................... <#hideBalloon>
  [  3] getprop 1502 ............................ <pVisibleBalloons>
  [  6] pusharglistnoret 2 ...................... <#hideBalloon, pVisibleBalloons>
  [  8] extcall 142 ............................. call(#hideBalloon, pVisibleBalloons)
  [ 10] pushsymb 1551 ........................... <#hideBalloon>
  [ 13] getprop 1503 ............................ <pAvailableBalloons>
  [ 16] pusharglistnoret 2 ...................... <#hideBalloon, pAvailableBalloons>
  [ 18] extcall 142 ............................. call(#hideBalloon, pAvailableBalloons)
  [ 20] ret
end

on showBalloons me
  [  0] pushsymb 1552 ........................... <#showBalloon>
  [  3] getprop 1502 ............................ <pVisibleBalloons>
  [  6] pusharglistnoret 2 ...................... <#showBalloon, pVisibleBalloons>
  [  8] extcall 142 ............................. call(#showBalloon, pVisibleBalloons)
  [ 10] pushsymb 1552 ........................... <#showBalloon>
  [ 13] getprop 1503 ............................ <pAvailableBalloons>
  [ 16] pusharglistnoret 2 ...................... <#showBalloon, pAvailableBalloons>
  [ 18] extcall 142 ............................. call(#showBalloon, pAvailableBalloons)
  [ 20] ret
end

on removeBalloons me
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 115 ............................. <me.getID()>
  [  6] pusharglistnoret 1 ...................... <me.getID()>
  [  8] extcall 568 ............................. removePrepare(me.getID())
  [ 11] pushsymb 1532 ........................... <#balloonautoscroll>
  [ 14] pusharglist 1 ........................... <#balloonautoscroll>
  [ 16] extcall 196 ............................. <timeoutExists(#balloonautoscroll)>
  [ 18] jmpifz [ 28] ............................ if timeoutExists(#balloonautoscroll) then
  [ 21] pushsymb 1532 ........................... <#balloonautoscroll>
  [ 24] pusharglistnoret 1 ...................... <#balloonautoscroll>
  [ 26] extcall 198 ............................. removeTimeout(#balloonautoscroll)
  [ 28] pusharglist 0 ........................... <[]>
  [ 30] pushlist ................................ <[]>
  [ 31] setprop 1504 ............................ pBalloonBuffer = []
  [ 34] pusharglist 0 ........................... <>
  [ 36] extcall 120 ............................. <VOID>
  [ 38] setprop 1553 ............................ pLastBalloonId = VOID
  [ 41] pushsymb 1500 ........................... <#normal>
  [ 44] setprop 1131 ............................ pState = #normal
  [ 47] pushsymb 1554 ........................... <#removePulse>
  [ 50] getprop 1533 ............................ <pBalloonPulse>
  [ 53] pusharglistnoret 2 ...................... <#removePulse, pBalloonPulse>
  [ 55] extcall 142 ............................. call(#removePulse, pBalloonPulse)
  [ 57] pushsymb 1555 ........................... <#removeBalloon>
  [ 60] getprop 1502 ............................ <pVisibleBalloons>
  [ 63] pusharglistnoret 2 ...................... <#removeBalloon, pVisibleBalloons>
  [ 65] extcall 142 ............................. call(#removeBalloon, pVisibleBalloons)
  [ 67] pushsymb 1555 ........................... <#removeBalloon>
  [ 70] getprop 1503 ............................ <pAvailableBalloons>
  [ 73] pusharglistnoret 2 ...................... <#removeBalloon, pAvailableBalloons>
  [ 75] extcall 142 ............................. call(#removeBalloon, pAvailableBalloons)
  [ 77] pushsymb 1552 ........................... <#showBalloon>
  [ 80] getprop 1502 ............................ <pVisibleBalloons>
  [ 83] pusharglistnoret 2 ...................... <#showBalloon, pVisibleBalloons>
  [ 85] extcall 142 ............................. call(#showBalloon, pVisibleBalloons)
  [ 87] pushsymb 1552 ........................... <#showBalloon>
  [ 90] getprop 1503 ............................ <pAvailableBalloons>
  [ 93] pusharglistnoret 2 ...................... <#showBalloon, pAvailableBalloons>
  [ 95] extcall 142 ............................. call(#showBalloon, pAvailableBalloons)
  [ 97] getprop 1502 ............................ <pVisibleBalloons>
  [100] pusharglist 1 ........................... <pVisibleBalloons>
  [102] objcall 555 ............................. <pVisibleBalloons.duplicate()>
  [105] setlocal 0 .............................. tTempRemoveVisible = pVisibleBalloons.duplicate()
  [107] pushint8 1 .............................. <1>
  [109] setlocal 1
  [111] getlocal 1
  [113] getlocal 0 .............................. <tTempRemoveVisible>
  [115] getobjprop 149 .......................... <tTempRemoveVisible.count>
  [117] lteq
  [118] jmpifz [146] ............................ repeat with f = 1 to tTempRemoveVisible.count
  [121] getparam 0 .............................. <me>
  [123] getlocal 0 .............................. <tTempRemoveVisible>
  [125] getlocal 1 .............................. <f>
  [127] pusharglist 2 ........................... <tTempRemoveVisible, f>
  [129] objcall 317 ............................. <tTempRemoveVisible.getPropAt(f)>
  [132] pusharglistnoret 2 ...................... <me, tTempRemoveVisible.getPropAt(f)>
  [134] objcall 1495 ............................ me.removeVisibleBalloon(tTempRemoveVisible.getPropAt(f))
  [137] pushint8 1
  [139] getlocal 1
  [141] add
  [142] setlocal 1
  [144] endrepeat [111]
  [146] ret
end

on removeVisibleBalloon me, tid
  [  0] getprop 1502 ............................ <pVisibleBalloons>
  [  3] getparam 1 .............................. <tid>
  [  5] pusharglist 2 ........................... <pVisibleBalloons, tid>
  [  7] objcall 138 ............................. <pVisibleBalloons[tid]>
  [  9] pusharglist 1 ........................... <pVisibleBalloons[tid]>
  [ 11] extcall 253 ............................. <voidp(pVisibleBalloons[tid])>
  [ 13] not ..................................... <not voidp(pVisibleBalloons[tid])>
  [ 14] jmpifz [ 78] ............................ if not voidp(pVisibleBalloons[tid]) then
  [ 17] getprop 1503 ............................ <pAvailableBalloons>
  [ 20] getparam 1 .............................. <tid>
  [ 22] getprop 1502 ............................ <pVisibleBalloons>
  [ 25] getparam 1 .............................. <tid>
  [ 27] pusharglist 2 ........................... <pVisibleBalloons, tid>
  [ 29] objcall 138 ............................. <pVisibleBalloons[tid]>
  [ 31] pusharglistnoret 3 ...................... <pAvailableBalloons, tid, pVisibleBalloons[tid]>
  [ 33] objcall 136 ............................. pAvailableBalloons[tid] = pVisibleBalloons[tid]
  [ 35] getprop 1503 ............................ <pAvailableBalloons>
  [ 38] getparam 1 .............................. <tid>
  [ 40] pusharglist 2 ........................... <pAvailableBalloons, tid>
  [ 42] objcall 138 ............................. <pAvailableBalloons[tid]>
  [ 44] pushsymb 332 ............................ <#loc>
  [ 47] pushzero ................................ <0>
  [ 48] pushint16 1000 .......................... <1000>
  [ 51] inv ..................................... <-1000>
  [ 52] pusharglist 2 ........................... <0, -1000>
  [ 54] extcall 264 ............................. <point(0, -1000)>
  [ 57] pusharglistnoret 3 ...................... <pAvailableBalloons[tid], #loc, point(0, -1000)>
  [ 59] objcall 556 ............................. pAvailableBalloons[tid].set(#loc, point(0, -1000))
  [ 62] getprop 1502 ............................ <pVisibleBalloons>
  [ 65] getparam 1 .............................. <tid>
  [ 67] pusharglistnoret 2 ...................... <pVisibleBalloons, tid>
  [ 69] objcall 609 ............................. pVisibleBalloons.deleteProp(tid)
  [ 72] pushint8 1 .............................. <1>
  [ 74] pusharglistnoret 1 ...................... <1>
  [ 76] extcall 116 ............................. return 1
  [ 78] ret
end

on createBalloon me, tMsg
  [  0] getprop 1131 ............................ <pState>
  [  3] pushsymb 1500 ........................... <#normal>
  [  6] eq ...................................... <pState = #normal>
  [  7] jmpifz [364] ............................ if pState = #normal then / else
  [ 10] getprop 1503 ............................ <pAvailableBalloons>
  [ 13] getobjprop 149 .......................... <pAvailableBalloons.count>
  [ 15] pushzero ................................ <0>
  [ 16] gt ...................................... <pAvailableBalloons.count > 0>
  [ 17] jmpifz [323] ............................ if pAvailableBalloons.count > 0 then / else
  [ 20] pushsymb 931 ............................ <#room>
  [ 23] pusharglist 1 ........................... <#room>
  [ 25] extcall 227 ............................. <getThread(#room)>
  [ 27] pusharglist 1 ........................... <getThread(#room)>
  [ 29] objcall 173 ............................. <getThread(#room).getComponent()>
  [ 31] getparam 1 .............................. <tMsg>
  [ 33] pushsymb 359 ............................ <#id>
  [ 36] pusharglist 2 ........................... <tMsg, #id>
  [ 38] objcall 138 ............................. <tMsg[#id]>
  [ 40] pusharglist 2 ........................... <getThread(#room).getComponent(), tMsg[#id]>
  [ 42] objcall 212 ............................. <getThread(#room).getComponent().getUserObject(tMsg[#id])>
  [ 44] setlocal 0 .............................. tUserObj = getThread(#room).getComponent().getUserObject(tMsg[#id])
  [ 46] getlocal 0 .............................. <tUserObj>
  [ 48] not ..................................... <not tUserObj>
  [ 49] jmpifz [ 77] ............................ if not tUserObj then
  [ 52] getparam 0 .............................. <me>
  [ 54] pushcons 21 ............................. <"User object not found:">
  [ 56] getparam 1 .............................. <tMsg>
  [ 58] pushsymb 359 ............................ <#id>
  [ 61] pusharglist 2 ........................... <tMsg, #id>
  [ 63] objcall 138 ............................. <tMsg[#id]>
  [ 65] joinpadstr .............................. <"User object not found:" && tMsg[#id]>
  [ 66] pushsymb 759 ............................ <#createBalloon>
  [ 69] pusharglist 3 ........................... <me, "User object not found:" && tMsg[#id], #createBalloon>
  [ 71] extcall 123 ............................. <error(me, "User object not found:" && tMsg[#id], #createBalloon)>
  [ 73] pusharglistnoret 1 ...................... <error(me, "User object not found:" && tMsg[#id], #createBalloon)>
  [ 75] extcall 116 ............................. return error(me, "User object not found:" && tMsg[#id], #createBalloon)
  [ 77] getlocal 0 .............................. <tUserObj>
  [ 79] pushcons 22 ............................. <"ch">
  [ 81] pusharglist 2 ........................... <tUserObj, "ch">
  [ 83] objcall 1176 ............................ <tUserObj.getPartColor("ch")>
  [ 86] setprop 1557 ............................ pBalloonColor = tUserObj.getPartColor("ch")
  [ 89] getprop 1557 ............................ <pBalloonColor>
  [ 92] pusharglist 1 ........................... <pBalloonColor>
  [ 94] extcall 215 ............................. <ilk(pBalloonColor)>
  [ 96] pushsymb 327 ............................ <#color>
  [ 99] nteq .................................... <ilk(pBalloonColor) <> #color>
  [100] jmpifz [119] ............................ if ilk(pBalloonColor) <> #color then
  [103] pushint16 232 ........................... <232>
  [106] pushint16 177 ........................... <177>
  [109] pushint8 55 ............................. <55>
  [111] pusharglist 3 ........................... <232, 177, 55>
  [113] extcall 283 ............................. <rgb(232, 177, 55)>
  [116] setprop 1557 ............................ pBalloonColor = rgb(232, 177, 55)
  [119] getlocal 0 .............................. <tUserObj>
  [121] pushcons 23 ............................. <"hd">
  [123] pusharglist 2 ........................... <tUserObj, "hd">
  [125] objcall 1174 ............................ <tUserObj.getPartLocation("hd")>
  [128] setprop 1558 ............................ pHumanLoc = tUserObj.getPartLocation("hd")
  [131] getparam 1 .............................. <tMsg>
  [133] pushsymb 187 ............................ <#name>
  [135] getlocal 0 .............................. <tUserObj>
  [137] pusharglist 1 ........................... <tUserObj>
  [139] objcall 203 ............................. <tUserObj.getInfo()>
  [141] pushsymb 187 ............................ <#name>
  [143] pusharglist 2 ........................... <tUserObj.getInfo(), #name>
  [145] objcall 214 ............................. <tUserObj.getInfo().getaProp(#name)>
  [147] pusharglistnoret 3 ...................... <tMsg, #name, tUserObj.getInfo().getaProp(#name)>
  [149] objcall 639 ............................. tMsg.setaProp(#name, tUserObj.getInfo().getaProp(#name))
  [152] getprop 1503 ............................ <pAvailableBalloons>
  [155] pushint8 1 .............................. <1>
  [157] pusharglist 2 ........................... <pAvailableBalloons, 1>
  [159] objcall 317 ............................. <pAvailableBalloons.getPropAt(1)>
  [162] setprop 1553 ............................ pLastBalloonId = pAvailableBalloons.getPropAt(1)
  [165] getparam 1 .............................. <tMsg>
  [167] setprop 1559 ............................ pLastMsg = tMsg
  [170] getprop 1533 ............................ <pBalloonPulse>
  [173] pushsymb 1560 ........................... <#humanLoc>
  [176] getprop 1558 ............................ <pHumanLoc>
  [179] pusharglistnoret 3 ...................... <pBalloonPulse, #humanLoc, pHumanLoc>
  [181] objcall 556 ............................. pBalloonPulse.set(#humanLoc, pHumanLoc)
  [184] getprop 1533 ............................ <pBalloonPulse>
  [187] pushsymb 1561 ........................... <#stoploc>
  [190] getprop 1558 ............................ <pHumanLoc>
  [193] pushint8 1 .............................. <1>
  [195] pusharglist 2 ........................... <pHumanLoc, 1>
  [197] objcall 138 ............................. <pHumanLoc[1]>
  [199] getprop 1522 ............................ <pStartV>
  [202] pusharglist 2 ........................... <pHumanLoc[1], pStartV>
  [204] extcall 264 ............................. <point(pHumanLoc[1], pStartV)>
  [207] pusharglistnoret 3 ...................... <pBalloonPulse, #stoploc, point(pHumanLoc[1], pStartV)>
  [209] objcall 556 ............................. pBalloonPulse.set(#stoploc, point(pHumanLoc[1], pStartV))
  [212] getprop 1533 ............................ <pBalloonPulse>
  [215] pushsymb 1562 ........................... <#balloonColor>
  [218] getprop 1557 ............................ <pBalloonColor>
  [221] pusharglistnoret 3 ...................... <pBalloonPulse, #balloonColor, pBalloonColor>
  [223] objcall 556 ............................. pBalloonPulse.set(#balloonColor, pBalloonColor)
  [226] getprop 1533 ............................ <pBalloonPulse>
  [229] pushsymb 1563 ........................... <#BalloonId>
  [232] getprop 1553 ............................ <pLastBalloonId>
  [235] pusharglistnoret 3 ...................... <pBalloonPulse, #BalloonId, pLastBalloonId>
  [237] objcall 556 ............................. pBalloonPulse.set(#BalloonId, pLastBalloonId)
  [240] pushsymb 1564 ........................... <#definePulse>
  [243] getprop 1533 ............................ <pBalloonPulse>
  [246] pusharglistnoret 2 ...................... <#definePulse, pBalloonPulse>
  [248] extcall 142 ............................. call(#definePulse, pBalloonPulse)
  [250] pushzero ................................ <0>
  [251] setprop 1501 ............................ pScrollCounter = 0
  [254] pushsymb 1565 ........................... <#scroll>
  [257] setprop 1131 ............................ pState = #scroll
  [260] getprop 1504 ............................ <pBalloonBuffer>
  [263] pusharglist 1 ........................... <pBalloonBuffer>
  [265] objcall 149 ............................. <pBalloonBuffer.count()>
  [267] pushzero ................................ <0>
  [268] eq ...................................... <pBalloonBuffer.count() = 0>
  [269] jmpifz [281] ............................ if pBalloonBuffer.count() = 0 then / else
  [272] getprop 1499 ............................ <pScrollStep>
  [275] setprop 1510 ............................ pScrollBy = pScrollStep
  [278] jmp [309]
  [281] getprop 1504 ............................ <pBalloonBuffer>
  [284] pusharglist 1 ........................... <pBalloonBuffer>
  [286] objcall 149 ............................. <pBalloonBuffer.count()>
  [288] pushint8 2 .............................. <2>
  [290] lt ...................................... <pBalloonBuffer.count() < 2>
  [291] jmpifz [303] ............................ if pBalloonBuffer.count() < 2 then / else
  [294] getprop 1521 ............................ <pFastScrollStep>
  [297] setprop 1510 ............................ pScrollBy = pFastScrollStep
  [300] jmp [309]
  [303] getprop 1507 ............................ <pMoveOffsetV>
  [306] setprop 1510 ............................ pScrollBy = pMoveOffsetV
  [309] getparam 0 .............................. <me>
  [311] pusharglist 1 ........................... <me>
  [313] objcall 115 ............................. <me.getID()>
  [315] pusharglistnoret 1 ...................... <me.getID()>
  [317] extcall 651 ............................. receivePrepare(me.getID())
  [320] jmp [361]
  [323] getprop 1502 ............................ <pVisibleBalloons>
  [326] pusharglist 1 ........................... <pVisibleBalloons>
  [328] objcall 149 ............................. <pVisibleBalloons.count()>
  [330] pushzero ................................ <0>
  [331] gt ...................................... <pVisibleBalloons.count() > 0>
  [332] jmpifz [352] ............................ if pVisibleBalloons.count() > 0 then
  [335] getparam 0 .............................. <me>
  [337] getprop 1502 ............................ <pVisibleBalloons>
  [340] pushint8 1 .............................. <1>
  [342] pusharglist 2 ........................... <pVisibleBalloons, 1>
  [344] objcall 317 ............................. <pVisibleBalloons.getPropAt(1)>
  [347] pusharglistnoret 2 ...................... <me, pVisibleBalloons.getPropAt(1)>
  [349] objcall 1495 ............................ me.removeVisibleBalloon(pVisibleBalloons.getPropAt(1))
  [352] getparam 0 .............................. <me>
  [354] getparam 1 .............................. <tMsg>
  [356] pusharglistnoret 2 ...................... <me, tMsg>
  [358] objcall 759 ............................. me.createBalloon(tMsg)
  [361] jmp [396]
  [364] getprop 1131 ............................ <pState>
  [367] pushsymb 1565 ........................... <#scroll>
  [370] eq ...................................... <pState = #scroll>
  [371] jmpifz [396] ............................ if pState = #scroll then
  [374] getprop 1504 ............................ <pBalloonBuffer>
  [377] getparam 1 .............................. <tMsg>
  [379] pusharglist 2 ........................... <pBalloonBuffer, tMsg>
  [381] objcall 207 ............................. <pBalloonBuffer.getPos(tMsg)>
  [383] not ..................................... <not pBalloonBuffer.getPos(tMsg)>
  [384] jmpifz [396] ............................ if not pBalloonBuffer.getPos(tMsg) then
  [387] getprop 1504 ............................ <pBalloonBuffer>
  [390] getparam 1 .............................. <tMsg>
  [392] pusharglistnoret 2 ...................... <pBalloonBuffer, tMsg>
  [394] objcall 151 ............................. pBalloonBuffer.add(tMsg)
  [396] ret
end

on showNewBalloon me
  [  0] getprop 1559 ............................ <pLastMsg>
  [  3] setlocal 0 .............................. tMsg = pLastMsg
  [  5] getprop 1553 ............................ <pLastBalloonId>
  [  8] pusharglist 1 ........................... <pLastBalloonId>
  [ 10] extcall 253 ............................. <voidp(pLastBalloonId)>
  [ 12] jmpifz [ 19] ............................ if voidp(pLastBalloonId) then
  [ 15] pusharglistnoret 0 ...................... <>
  [ 17] extcall 116 ............................. return 
  [ 19] getprop 1503 ............................ <pAvailableBalloons>
  [ 22] pushint8 1 .............................. <1>
  [ 24] pusharglist 2 ........................... <pAvailableBalloons, 1>
  [ 26] objcall 138 ............................. <pAvailableBalloons[1]>
  [ 28] setlocal 1 .............................. tNewBalloon = pAvailableBalloons[1]
  [ 30] getprop 1502 ............................ <pVisibleBalloons>
  [ 33] getprop 1553 ............................ <pLastBalloonId>
  [ 36] getlocal 1 .............................. <tNewBalloon>
  [ 38] pusharglistnoret 3 ...................... <pVisibleBalloons, pLastBalloonId, tNewBalloon>
  [ 40] objcall 667 ............................. pVisibleBalloons.addProp(pLastBalloonId, tNewBalloon)
  [ 43] getprop 1503 ............................ <pAvailableBalloons>
  [ 46] getprop 1553 ............................ <pLastBalloonId>
  [ 49] pusharglistnoret 2 ...................... <pAvailableBalloons, pLastBalloonId>
  [ 51] objcall 609 ............................. pAvailableBalloons.deleteProp(pLastBalloonId)
  [ 54] getprop 1502 ............................ <pVisibleBalloons>
  [ 57] getprop 1553 ............................ <pLastBalloonId>
  [ 60] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [ 62] objcall 138 ............................. <pVisibleBalloons[pLastBalloonId]>
  [ 64] pushsymb 263 ............................ <#member>
  [ 67] pusharglist 2 ........................... <pVisibleBalloons[pLastBalloonId], #member>
  [ 69] objcall 201 ............................. <pVisibleBalloons[pLastBalloonId].get(#member)>
  [ 71] pusharglist 1 ........................... <pVisibleBalloons[pLastBalloonId].get(#member)>
  [ 73] extcall 263 ............................. <member(pVisibleBalloons[pLastBalloonId].get(#member))>
  [ 76] setlocal 2 .............................. tmember = member(pVisibleBalloons[pLastBalloonId].get(#member))
  [ 78] getprop 1502 ............................ <pVisibleBalloons>
  [ 81] getprop 1553 ............................ <pLastBalloonId>
  [ 84] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [ 86] objcall 138 ............................. <pVisibleBalloons[pLastBalloonId]>
  [ 88] pushsymb 1562 ........................... <#balloonColor>
  [ 91] getprop 1557 ............................ <pBalloonColor>
  [ 94] pusharglistnoret 3 ...................... <pVisibleBalloons[pLastBalloonId], #balloonColor, pBalloonColor>
  [ 96] objcall 556 ............................. pVisibleBalloons[pLastBalloonId].set(#balloonColor, pBalloonColor)
  [ 99] getlocal 2 .............................. <tmember>
  [101] getparam 0 .............................. <me>
  [103] getlocal 0 .............................. <tMsg>
  [105] pushsymb 187 ............................ <#name>
  [107] pusharglist 2 ........................... <tMsg, #name>
  [109] objcall 138 ............................. <tMsg[#name]>
  [111] getlocal 0 .............................. <tMsg>
  [113] pushsymb 758 ............................ <#message>
  [116] pusharglist 2 ........................... <tMsg, #message>
  [118] objcall 138 ............................. <tMsg[#message]>
  [120] getprop 1557 ............................ <pBalloonColor>
  [123] getlocal 0 .............................. <tMsg>
  [125] pushsymb 757 ............................ <#command>
  [128] pusharglist 2 ........................... <tMsg, #command>
  [130] objcall 138 ............................. <tMsg[#command]>
  [132] pusharglist 5 ........................... <me, tMsg[#name], tMsg[#message], pBalloonColor, tMsg[#command]>
  [134] objcall 1491 ............................ <me.createballoonImg(tMsg[#name], tMsg[#message], pBalloonColor, tMsg[#command])>
  [137] setobjprop 260 .......................... tmember.image = me.createballoonImg(tMsg[#name], tMsg[#message], pBalloonColor, tMsg[#command])
  [140] getlocal 2 .............................. <tmember>
  [142] getlocal 2 .............................. <tmember>
  [144] getobjprop 265 .......................... <tmember.regPoint>
  [147] pushzero ................................ <0>
  [148] getlocal 2 .............................. <tmember>
  [150] getchainedprop 260 ...................... <tmember.image>
  [153] getobjprop 261 .......................... <tmember.image.height>
  [156] pushint8 2 .............................. <2>
  [158] div ..................................... <tmember.image.height / 2>
  [159] pusharglist 2 ........................... <0, tmember.image.height / 2>
  [161] extcall 264 ............................. <point(0, tmember.image.height / 2)>
  [164] add ..................................... <tmember.regPoint + point(0, tmember.image.height / 2)>
  [165] setobjprop 265 .......................... tmember.regPoint = tmember.regPoint + point(0, tmember.image.height / 2)
  [168] pushcons 24 ............................. <"balloons.leftmargin">
  [170] pushzero ................................ <0>
  [171] pusharglist 2 ........................... <"balloons.leftmargin", 0>
  [173] extcall 1468 ............................ <getIntVariable("balloons.leftmargin", 0)>
  [176] setprop 1566 ............................ pBalloonLeftMarg = getIntVariable("balloons.leftmargin", 0)
  [179] pushcons 25 ............................. <"balloons.rightmargin">
  [181] pushint16 720 ........................... <720>
  [184] pusharglist 2 ........................... <"balloons.rightmargin", 720>
  [186] extcall 1468 ............................ <getIntVariable("balloons.rightmargin", 720)>
  [189] setprop 1567 ............................ pBalloonRightMarg = getIntVariable("balloons.rightmargin", 720)
  [192] getprop 1558 ............................ <pHumanLoc>
  [195] getobjprop 222 .......................... <pHumanLoc.locH>
  [197] getlocal 2 .............................. <tmember>
  [199] getchainedprop 260 ...................... <tmember.image>
  [202] getobjprop 219 .......................... <tmember.image.width>
  [204] pushint8 2 .............................. <2>
  [206] div ..................................... <tmember.image.width / 2>
  [207] add ..................................... <pHumanLoc.locH + (tmember.image.width / 2)>
  [208] getprop 1567 ............................ <pBalloonRightMarg>
  [211] gt ...................................... <(pHumanLoc.locH + (tmember.image.width / 2)) > pBalloonRightMarg>
  [212] jmpifz [234] ............................ if (pHumanLoc.locH + (tmember.image.width / 2)) > pBalloonRightMarg then / else
  [215] getprop 1567 ............................ <pBalloonRightMarg>
  [218] getlocal 2 .............................. <tmember>
  [220] getchainedprop 260 ...................... <tmember.image>
  [223] getobjprop 219 .......................... <tmember.image.width>
  [225] pushint8 2 .............................. <2>
  [227] div ..................................... <tmember.image.width / 2>
  [228] sub ..................................... <pBalloonRightMarg - (tmember.image.width / 2)>
  [229] setlocal 3 .............................. tStartH = pBalloonRightMarg - (tmember.image.width / 2)
  [231] jmp [283]
  [234] getprop 1558 ............................ <pHumanLoc>
  [237] getobjprop 222 .......................... <pHumanLoc.locH>
  [239] getlocal 2 .............................. <tmember>
  [241] getchainedprop 260 ...................... <tmember.image>
  [244] getobjprop 219 .......................... <tmember.image.width>
  [246] pushint8 2 .............................. <2>
  [248] div ..................................... <tmember.image.width / 2>
  [249] sub ..................................... <pHumanLoc.locH - (tmember.image.width / 2)>
  [250] getprop 1566 ............................ <pBalloonLeftMarg>
  [253] lt ...................................... <(pHumanLoc.locH - (tmember.image.width / 2)) < pBalloonLeftMarg>
  [254] jmpifz [276] ............................ if (pHumanLoc.locH - (tmember.image.width / 2)) < pBalloonLeftMarg then / else
  [257] getprop 1566 ............................ <pBalloonLeftMarg>
  [260] getlocal 2 .............................. <tmember>
  [262] getchainedprop 260 ...................... <tmember.image>
  [265] getobjprop 219 .......................... <tmember.image.width>
  [267] pushint8 2 .............................. <2>
  [269] div ..................................... <tmember.image.width / 2>
  [270] add ..................................... <pBalloonLeftMarg + (tmember.image.width / 2)>
  [271] setlocal 3 .............................. tStartH = pBalloonLeftMarg + (tmember.image.width / 2)
  [273] jmp [283]
  [276] getprop 1558 ............................ <pHumanLoc>
  [279] getobjprop 222 .......................... <pHumanLoc.locH>
  [281] setlocal 3 .............................. tStartH = pHumanLoc.locH
  [283] getprop 1502 ............................ <pVisibleBalloons>
  [286] getprop 1553 ............................ <pLastBalloonId>
  [289] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [291] objcall 138 ............................. <pVisibleBalloons[pLastBalloonId]>
  [293] pushsymb 332 ............................ <#loc>
  [296] getlocal 3 .............................. <tStartH>
  [298] getprop 1522 ............................ <pStartV>
  [301] pusharglist 2 ........................... <tStartH, pStartV>
  [303] extcall 264 ............................. <point(tStartH, pStartV)>
  [306] pusharglistnoret 3 ...................... <pVisibleBalloons[pLastBalloonId], #loc, point(tStartH, pStartV)>
  [308] objcall 556 ............................. pVisibleBalloons[pLastBalloonId].set(#loc, point(tStartH, pStartV))
  [311] getprop 1502 ............................ <pVisibleBalloons>
  [314] getprop 1553 ............................ <pLastBalloonId>
  [317] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [319] objcall 138 ............................. <pVisibleBalloons[pLastBalloonId]>
  [321] pushsymb 1568 ........................... <#ownerID>
  [324] getlocal 0 .............................. <tMsg>
  [326] pushsymb 359 ............................ <#id>
  [329] pusharglist 2 ........................... <tMsg, #id>
  [331] objcall 138 ............................. <tMsg[#id]>
  [333] pusharglistnoret 3 ...................... <pVisibleBalloons[pLastBalloonId], #ownerID, tMsg[#id]>
  [335] objcall 556 ............................. pVisibleBalloons[pLastBalloonId].set(#ownerID, tMsg[#id])
  [338] pushsymb 1569 ........................... <#defineBalloon>
  [341] getprop 1502 ............................ <pVisibleBalloons>
  [344] getprop 1553 ............................ <pLastBalloonId>
  [347] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [349] objcall 138 ............................. <pVisibleBalloons[pLastBalloonId]>
  [351] pusharglistnoret 2 ...................... <#defineBalloon, pVisibleBalloons[pLastBalloonId]>
  [353] extcall 142 ............................. call(#defineBalloon, pVisibleBalloons[pLastBalloonId])
  [355] ret
end

on prepare me
  [  0] getprop 1131 ............................ <pState>
  [  3] pushsymb 1565 ........................... <#scroll>
  [  6] eq ...................................... <pState = #scroll>
  [  7] jmpifz [210] ............................ if pState = #scroll then
  [ 10] getprop 1501 ............................ <pScrollCounter>
  [ 13] getprop 1510 ............................ <pScrollBy>
  [ 16] add ..................................... <pScrollCounter + pScrollBy>
  [ 17] getprop 1507 ............................ <pMoveOffsetV>
  [ 20] lteq .................................... <(pScrollCounter + pScrollBy) <= pMoveOffsetV>
  [ 21] jmpifz [ 83] ............................ if (pScrollCounter + pScrollBy) <= pMoveOffsetV then / else
  [ 24] getprop 1501 ............................ <pScrollCounter>
  [ 27] getprop 1510 ............................ <pScrollBy>
  [ 30] add ..................................... <pScrollCounter + pScrollBy>
  [ 31] setprop 1501 ............................ pScrollCounter = pScrollCounter + pScrollBy
  [ 34] pushsymb 1572 ........................... <#UpdateBalloonPos>
  [ 37] getprop 1502 ............................ <pVisibleBalloons>
  [ 40] getprop 1510 ............................ <pScrollBy>
  [ 43] inv ..................................... <-pScrollBy>
  [ 44] pusharglistnoret 3 ...................... <#UpdateBalloonPos, pVisibleBalloons, -pScrollBy>
  [ 46] extcall 142 ............................. call(#UpdateBalloonPos, pVisibleBalloons, -pScrollBy)
  [ 48] getprop 1553 ............................ <pLastBalloonId>
  [ 51] pusharglist 1 ........................... <pLastBalloonId>
  [ 53] extcall 253 ............................. <voidp(pLastBalloonId)>
  [ 55] not ..................................... <not voidp(pLastBalloonId)>
  [ 56] jmpifz [ 80] ............................ if not voidp(pLastBalloonId) then
  [ 59] pushsymb 1573 ........................... <#OpeningBalloon>
  [ 62] getprop 1533 ............................ <pBalloonPulse>
  [ 65] getprop 1501 ............................ <pScrollCounter>
  [ 68] inv ..................................... <-pScrollCounter>
  [ 69] getprop 1510 ............................ <pScrollBy>
  [ 72] pushint8 2 .............................. <2>
  [ 74] mul ..................................... <pScrollBy * 2>
  [ 75] mul ..................................... <-pScrollCounter * (pScrollBy * 2)>
  [ 76] pusharglistnoret 3 ...................... <#OpeningBalloon, pBalloonPulse, -pScrollCounter * (pScrollBy * 2)>
  [ 78] extcall 142 ............................. call(#OpeningBalloon, pBalloonPulse, -pScrollCounter * (pScrollBy * 2))
  [ 80] jmp [210]
  [ 83] getprop 1553 ............................ <pLastBalloonId>
  [ 86] pusharglist 1 ........................... <pLastBalloonId>
  [ 88] extcall 253 ............................. <voidp(pLastBalloonId)>
  [ 90] not ..................................... <not voidp(pLastBalloonId)>
  [ 91] jmpifz [101] ............................ if not voidp(pLastBalloonId) then
  [ 94] getparam 0 .............................. <me>
  [ 96] pusharglistnoret 1 ...................... <me>
  [ 98] objcall 1496 ............................ me.showNewBalloon()
  [101] getparam 0 .............................. <me>
  [103] pusharglist 1 ........................... <me>
  [105] objcall 115 ............................. <me.getID()>
  [107] pusharglistnoret 1 ...................... <me.getID()>
  [109] extcall 568 ............................. removePrepare(me.getID())
  [112] pushzero ................................ <0>
  [113] setprop 1501 ............................ pScrollCounter = 0
  [116] pushsymb 1500 ........................... <#normal>
  [119] setprop 1131 ............................ pState = #normal
  [122] getprop 1504 ............................ <pBalloonBuffer>
  [125] pusharglist 1 ........................... <pBalloonBuffer>
  [127] objcall 149 ............................. <pBalloonBuffer.count()>
  [129] pushzero ................................ <0>
  [130] gt ...................................... <pBalloonBuffer.count() > 0>
  [131] jmpifz [167] ............................ if pBalloonBuffer.count() > 0 then / else
  [134] getprop 1504 ............................ <pBalloonBuffer>
  [137] pushint8 1 .............................. <1>
  [139] pusharglist 2 ........................... <pBalloonBuffer, 1>
  [141] objcall 138 ............................. <pBalloonBuffer[1]>
  [143] setlocal 0 .............................. tMsg = pBalloonBuffer[1]
  [145] getprop 1504 ............................ <pBalloonBuffer>
  [148] pushint8 1 .............................. <1>
  [150] pusharglistnoret 2 ...................... <pBalloonBuffer, 1>
  [152] objcall 764 ............................. pBalloonBuffer.deleteAt(1)
  [155] getparam 0 .............................. <me>
  [157] getlocal 0 .............................. <tMsg>
  [159] pusharglistnoret 2 ...................... <me, tMsg>
  [161] objcall 759 ............................. me.createBalloon(tMsg)
  [164] jmp [210]
  [167] pushsymb 1532 ........................... <#balloonautoscroll>
  [170] pusharglist 1 ........................... <#balloonautoscroll>
  [172] extcall 196 ............................. <timeoutExists(#balloonautoscroll)>
  [174] jmpifz [184] ............................ if timeoutExists(#balloonautoscroll) then
  [177] pushsymb 1532 ........................... <#balloonautoscroll>
  [180] pusharglistnoret 1 ...................... <#balloonautoscroll>
  [182] extcall 198 ............................. removeTimeout(#balloonautoscroll)
  [184] pushsymb 1532 ........................... <#balloonautoscroll>
  [187] getprop 1498 ............................ <pAutoScrollTime>
  [190] pushsymb 1497 ........................... <#timeToScrollLines>
  [193] getparam 0 .............................. <me>
  [195] pusharglist 1 ........................... <me>
  [197] objcall 115 ............................. <me.getID()>
  [199] pusharglist 0 ........................... <>
  [201] extcall 120 ............................. <VOID>
  [203] pushint8 1 .............................. <1>
  [205] pusharglistnoret 6 ...................... <#balloonautoscroll, pAutoScrollTime, #timeToScrollLines, me.getID(), VOID, 1>
  [207] extcall 382 ............................. createTimeout(#balloonautoscroll, pAutoScrollTime, #timeToScrollLines, me.getID(), VOID, 1)
  [210] ret
end

on timeToScrollLines me
  [  0] getprop 1131 ............................ <pState>
  [  3] pushsymb 1500 ........................... <#normal>
  [  6] eq ...................................... <pState = #normal>
  [  7] getprop 1502 ............................ <pVisibleBalloons>
  [ 10] pusharglist 1 ........................... <pVisibleBalloons>
  [ 12] objcall 149 ............................. <pVisibleBalloons.count()>
  [ 14] pushzero ................................ <0>
  [ 15] gt ...................................... <pVisibleBalloons.count() > 0>
  [ 16] and ..................................... <(pState = #normal) and (pVisibleBalloons.count() > 0)>
  [ 17] jmpifz [ 48] ............................ if (pState = #normal) and (pVisibleBalloons.count() > 0) then
  [ 20] pusharglist 0 ........................... <>
  [ 22] extcall 120 ............................. <VOID>
  [ 24] setprop 1553 ............................ pLastBalloonId = VOID
  [ 27] pushzero ................................ <0>
  [ 28] setprop 1501 ............................ pScrollCounter = 0
  [ 31] pushsymb 1565 ........................... <#scroll>
  [ 34] setprop 1131 ............................ pState = #scroll
  [ 37] getparam 0 .............................. <me>
  [ 39] pusharglist 1 ........................... <me>
  [ 41] objcall 115 ............................. <me.getID()>
  [ 43] pusharglistnoret 1 ...................... <me.getID()>
  [ 45] extcall 651 ............................. receivePrepare(me.getID())
  [ 48] ret
end

on setProperty me, tMode, tProp, tValue
  [  0] getprop 1511 ............................ <pTextMembers>
  [  3] getparam 1 .............................. <tMode>
  [  5] pusharglist 2 ........................... <pTextMembers, tMode>
  [  7] objcall 138 ............................. <pTextMembers[tMode]>
  [  9] pushint8 1 .............................. <1>
  [ 11] lt ...................................... <pTextMembers[tMode] < 1>
  [ 12] jmpifz [ 20] ............................ if pTextMembers[tMode] < 1 then
  [ 15] pushzero ................................ <0>
  [ 16] pusharglistnoret 1 ...................... <0>
  [ 18] extcall 116 ............................. return 0
  [ 20] getprop 1511 ............................ <pTextMembers>
  [ 23] getparam 1 .............................. <tMode>
  [ 25] pusharglist 2 ........................... <pTextMembers, tMode>
  [ 27] objcall 138 ............................. <pTextMembers[tMode]>
  [ 29] setlocal 0 .............................. tmember = pTextMembers[tMode]
  [ 31] getparam 2 .............................. <tProp>
  [ 33] peek 0 .................................. case tProp of
  [ 35] pushsymb 1514 ........................... <#wordWrap>
  [ 38] eq
  [ 39] jmpifz [ 52] ............................ (case) #wordWrap:
  [ 42] getlocal 0 .............................. <tmember>
  [ 44] getparam 3 .............................. <tValue>
  [ 46] setobjprop 1514 ......................... tmember.wordWrap = tValue
  [ 49] jmp [173]
  [ 52] peek 0
  [ 54] pushsymb 1516 ........................... <#boxType>
  [ 57] eq
  [ 58] jmpifz [ 71] ............................ (case) #boxType:
  [ 61] getlocal 0 .............................. <tmember>
  [ 63] getparam 3 .............................. <tValue>
  [ 65] setobjprop 1516 ......................... tmember.boxType = tValue
  [ 68] jmp [173]
  [ 71] peek 0
  [ 73] pushsymb 1517 ........................... <#antialias>
  [ 76] eq
  [ 77] jmpifz [ 90] ............................ (case) #antialias:
  [ 80] getlocal 0 .............................. <tmember>
  [ 82] getparam 3 .............................. <tValue>
  [ 84] setobjprop 1517 ......................... tmember.antialias = tValue
  [ 87] jmp [173]
  [ 90] peek 0
  [ 92] pushsymb 1518 ........................... <#font>
  [ 95] eq
  [ 96] jmpifz [109] ............................ (case) #font:
  [ 99] getlocal 0 .............................. <tmember>
  [101] getparam 3 .............................. <tValue>
  [103] setobjprop 1518 ......................... tmember.font = tValue
  [106] jmp [173]
  [109] peek 0
  [111] pushsymb 1519 ........................... <#fontSize>
  [114] eq
  [115] jmpifz [128] ............................ (case) #fontSize:
  [118] getlocal 0 .............................. <tmember>
  [120] getparam 3 .............................. <tValue>
  [122] setobjprop 1519 ......................... tmember.fontSize = tValue
  [125] jmp [173]
  [128] peek 0
  [130] pushsymb 1520 ........................... <#fontStyle>
  [133] eq
  [134] jmpifz [147] ............................ (case) #fontStyle:
  [137] getlocal 0 .............................. <tmember>
  [139] getparam 3 .............................. <tValue>
  [141] setobjprop 1520 ......................... tmember.fontStyle = tValue
  [144] jmp [173]
  [147] peek 0
  [149] pushsymb 327 ............................ <#color>
  [152] eq
  [153] jmpifz [166] ............................ (case) #color:
  [156] getlocal 0 .............................. <tmember>
  [158] getparam 3 .............................. <tValue>
  [160] setobjprop 327 .......................... tmember.color = tValue
  [163] jmp [173] ............................... (case) otherwise:
  [166] pop 1
  [168] pushzero ................................ <0>
  [169] pusharglistnoret 1 ...................... <0>
  [171] extcall 116 ............................. return 0
  [173] pop 1 ................................... end case
  [175] ret
end

on flipH me, tImg
  [  0] getparam 1 .............................. <tImg>
  [  2] getobjprop 219 .......................... <tImg.width>
  [  4] getparam 1 .............................. <tImg>
  [  6] getobjprop 261 .......................... <tImg.height>
  [  9] getparam 1 .............................. <tImg>
  [ 11] getobjprop 1147 ......................... <tImg.depth>
  [ 14] pusharglist 3 ........................... <tImg.width, tImg.height, tImg.depth>
  [ 16] extcall 260 ............................. <image(tImg.width, tImg.height, tImg.depth)>
  [ 19] setlocal 0 .............................. tImage = image(tImg.width, tImg.height, tImg.depth)
  [ 21] getparam 1 .............................. <tImg>
  [ 23] getobjprop 219 .......................... <tImg.width>
  [ 25] pushzero ................................ <0>
  [ 26] pusharglist 2 ........................... <tImg.width, 0>
  [ 28] extcall 264 ............................. <point(tImg.width, 0)>
  [ 31] pushzero ................................ <0>
  [ 32] pushzero ................................ <0>
  [ 33] pusharglist 2 ........................... <0, 0>
  [ 35] extcall 264 ............................. <point(0, 0)>
  [ 38] pushzero ................................ <0>
  [ 39] getparam 1 .............................. <tImg>
  [ 41] getobjprop 261 .......................... <tImg.height>
  [ 44] pusharglist 2 ........................... <0, tImg.height>
  [ 46] extcall 264 ............................. <point(0, tImg.height)>
  [ 49] getparam 1 .............................. <tImg>
  [ 51] getobjprop 219 .......................... <tImg.width>
  [ 53] getparam 1 .............................. <tImg>
  [ 55] getobjprop 261 .......................... <tImg.height>
  [ 58] pusharglist 2 ........................... <tImg.width, tImg.height>
  [ 60] extcall 264 ............................. <point(tImg.width, tImg.height)>
  [ 63] pusharglist 4 ........................... <[point(tImg.width, 0), point(0, 0), point(0, tImg.height), point(tImg.width, tImg.height)]>
  [ 65] pushlist ................................ <[point(tImg.width, 0), point(0, 0), point(0, tImg.height), point(tImg.width, tImg.height)]>
  [ 66] setlocal 1 .............................. tQuad = [point(tImg.width, 0), point(0, 0), point(0, tImg.height), point(tImg.width, tImg.height)]
  [ 68] getlocal 0 .............................. <tImage>
  [ 70] getparam 1 .............................. <tImg>
  [ 72] getlocal 1 .............................. <tQuad>
  [ 74] getparam 1 .............................. <tImg>
  [ 76] getobjprop 221 .......................... <tImg.rect>
  [ 78] pusharglistnoret 4 ...................... <tImage, tImg, tQuad, tImg.rect>
  [ 80] objcall 293 ............................. tImage.copyPixels(tImg, tQuad, tImg.rect)
  [ 83] getlocal 0 .............................. <tImage>
  [ 85] pusharglistnoret 1 ...................... <tImage>
  [ 87] extcall 116 ............................. return tImage
  [ 89] ret
end

on flipV me, tImg
  [  0] getparam 1 .............................. <tImg>
  [  2] getobjprop 219 .......................... <tImg.width>
  [  4] getparam 1 .............................. <tImg>
  [  6] getobjprop 261 .......................... <tImg.height>
  [  9] getparam 1 .............................. <tImg>
  [ 11] getobjprop 1147 ......................... <tImg.depth>
  [ 14] pusharglist 3 ........................... <tImg.width, tImg.height, tImg.depth>
  [ 16] extcall 260 ............................. <image(tImg.width, tImg.height, tImg.depth)>
  [ 19] setlocal 0 .............................. tImage = image(tImg.width, tImg.height, tImg.depth)
  [ 21] pushzero ................................ <0>
  [ 22] getparam 1 .............................. <tImg>
  [ 24] getobjprop 261 .......................... <tImg.height>
  [ 27] pusharglist 2 ........................... <0, tImg.height>
  [ 29] extcall 264 ............................. <point(0, tImg.height)>
  [ 32] getparam 1 .............................. <tImg>
  [ 34] getobjprop 219 .......................... <tImg.width>
  [ 36] getparam 1 .............................. <tImg>
  [ 38] getobjprop 261 .......................... <tImg.height>
  [ 41] pusharglist 2 ........................... <tImg.width, tImg.height>
  [ 43] extcall 264 ............................. <point(tImg.width, tImg.height)>
  [ 46] getparam 1 .............................. <tImg>
  [ 48] getobjprop 219 .......................... <tImg.width>
  [ 50] pushzero ................................ <0>
  [ 51] pusharglist 2 ........................... <tImg.width, 0>
  [ 53] extcall 264 ............................. <point(tImg.width, 0)>
  [ 56] pushzero ................................ <0>
  [ 57] pushzero ................................ <0>
  [ 58] pusharglist 2 ........................... <0, 0>
  [ 60] extcall 264 ............................. <point(0, 0)>
  [ 63] pusharglist 4 ........................... <[point(0, tImg.height), point(tImg.width, tImg.height), point(tImg.width, 0), point(0, 0)]>
  [ 65] pushlist ................................ <[point(0, tImg.height), point(tImg.width, tImg.height), point(tImg.width, 0), point(0, 0)]>
  [ 66] setlocal 1 .............................. tQuad = [point(0, tImg.height), point(tImg.width, tImg.height), point(tImg.width, 0), point(0, 0)]
  [ 68] getlocal 0 .............................. <tImage>
  [ 70] getparam 1 .............................. <tImg>
  [ 72] getlocal 1 .............................. <tQuad>
  [ 74] getparam 1 .............................. <tImg>
  [ 76] getobjprop 221 .......................... <tImg.rect>
  [ 78] pusharglistnoret 4 ...................... <tImage, tImg, tQuad, tImg.rect>
  [ 80] objcall 293 ............................. tImage.copyPixels(tImg, tQuad, tImg.rect)
  [ 83] getlocal 0 .............................. <tImage>
  [ 85] pusharglistnoret 1 ...................... <tImage>
  [ 87] extcall 116 ............................. return tImage
  [ 89] ret
end
