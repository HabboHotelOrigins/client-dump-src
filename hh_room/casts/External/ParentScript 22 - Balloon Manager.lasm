property pState, pTextMembers, pScrollCounter, pAvailableBalloons, pVisibleBalloons, pMaxBalloons, pBalloonPulse, pBalloonBuffer, pBalloonImg, pMarginH, pMarginV, pMaxWidth, pMaxCharNum, pAutoScrollTime, pScrollStep, pFastScrollStep, pStartV, pFirstLocz, pMoveOffsetV, pLastBalloonId, pScrollBy, pBalloonColor, pHumanLoc, pLastMsg, pBalloonLeftMarg, pBalloonRightMarg, pReservedSprites, pDefaultTextColor

on construct me
  [  0] pushcons 0 .............................. <"chat.balloon.scrolltime">
  [  2] pusharglist 1 ........................... <"chat.balloon.scrolltime">
  [  4] extcall 331 ............................. <variableExists("chat.balloon.scrolltime")>
  [  7] jmpifz [ 22] ............................ if variableExists("chat.balloon.scrolltime") then / else
  [ 10] pushcons 0 .............................. <"chat.balloon.scrolltime">
  [ 12] pusharglist 1 ........................... <"chat.balloon.scrolltime">
  [ 14] extcall 140 ............................. <getIntVariable("chat.balloon.scrolltime")>
  [ 16] setprop 1506 ............................ pAutoScrollTime = getIntVariable("chat.balloon.scrolltime")
  [ 19] jmp [ 28]
  [ 22] pushint16 4000 .......................... <4000>
  [ 25] setprop 1506 ............................ pAutoScrollTime = 4000
  [ 28] pushcons 1 .............................. <"chat.balloon.scrollstep">
  [ 30] pusharglist 1 ........................... <"chat.balloon.scrollstep">
  [ 32] extcall 331 ............................. <variableExists("chat.balloon.scrollstep")>
  [ 35] jmpifz [ 50] ............................ if variableExists("chat.balloon.scrollstep") then / else
  [ 38] pushcons 1 .............................. <"chat.balloon.scrollstep">
  [ 40] pusharglist 1 ........................... <"chat.balloon.scrollstep">
  [ 42] extcall 140 ............................. <getIntVariable("chat.balloon.scrollstep")>
  [ 44] setprop 1507 ............................ pScrollStep = getIntVariable("chat.balloon.scrollstep")
  [ 47] jmp [ 55]
  [ 50] pushint8 3 .............................. <3>
  [ 52] setprop 1507 ............................ pScrollStep = 3
  [ 55] pushsymb 1508 ........................... <#normal>
  [ 58] setprop 1175 ............................ pState = #normal
  [ 61] pushzero ................................ <0>
  [ 62] setprop 1509 ............................ pScrollCounter = 0
  [ 65] pusharglist 0 ........................... <[:]>
  [ 67] pushproplist ............................ <[:]>
  [ 68] setprop 1510 ............................ pVisibleBalloons = [:]
  [ 71] pusharglist 0 ........................... <[:]>
  [ 73] pushproplist ............................ <[:]>
  [ 74] setprop 1511 ............................ pAvailableBalloons = [:]
  [ 77] pusharglist 0 ........................... <[]>
  [ 79] pushlist ................................ <[]>
  [ 80] setprop 1512 ............................ pBalloonBuffer = []
  [ 83] pushint8 6 .............................. <6>
  [ 85] pushint8 1 .............................. <1>
  [ 87] add ..................................... <6 + 1>
  [ 88] setprop 1513 ............................ pMaxBalloons = 6 + 1
  [ 91] pushcons 2 .............................. <"window.default.locz">
  [ 93] pusharglist 1 ........................... <"window.default.locz">
  [ 95] extcall 140 ............................. <getIntVariable("window.default.locz")>
  [ 97] pushint16 2000 .......................... <2000>
  [100] sub ..................................... <getIntVariable("window.default.locz") - 2000>
  [101] getprop 1513 ............................ <pMaxBalloons>
  [104] sub ..................................... <getIntVariable("window.default.locz") - 2000 - pMaxBalloons>
  [105] setprop 1514 ............................ pFirstLocz = getIntVariable("window.default.locz") - 2000 - pMaxBalloons
  [108] pushint8 21 ............................. <21>
  [110] setprop 1515 ............................ pMoveOffsetV = 21
  [113] pushint8 8 .............................. <8>
  [115] setprop 1516 ............................ pMarginH = 8
  [118] pushint8 5 .............................. <5>
  [120] setprop 1517 ............................ pMarginV = 5
  [123] getprop 1507 ............................ <pScrollStep>
  [126] setprop 1518 ............................ pScrollBy = pScrollStep
  [129] pusharglist 0 ........................... <[:]>
  [131] pushproplist ............................ <[:]>
  [132] setprop 1519 ............................ pTextMembers = [:]
  [135] pushzero ................................ <0>
  [136] pushzero ................................ <0>
  [137] pushzero ................................ <0>
  [138] pusharglist 3 ........................... <0, 0, 0>
  [140] extcall 94 .............................. <rgb(0, 0, 0)>
  [142] setprop 1520 ............................ pDefaultTextColor = rgb(0, 0, 0)
  [145] pushcons 3 .............................. <"balloon.margin.offset.v">
  [147] pusharglist 1 ........................... <"balloon.margin.offset.v">
  [149] extcall 331 ............................. <variableExists("balloon.margin.offset.v")>
  [152] jmpifz [168] ............................ if variableExists("balloon.margin.offset.v") then
  [155] getprop 1517 ............................ <pMarginV>
  [158] pushcons 3 .............................. <"balloon.margin.offset.v">
  [160] pusharglist 1 ........................... <"balloon.margin.offset.v">
  [162] extcall 232 ............................. <getVariable("balloon.margin.offset.v")>
  [164] add ..................................... <pMarginV + getVariable("balloon.margin.offset.v")>
  [165] setprop 1517 ............................ pMarginV = pMarginV + getVariable("balloon.margin.offset.v")
  [168] pushcons 4 .............................. <"CHAT">
  [170] pushcons 5 .............................. <"plain">
  [172] pushcons 6 .............................. <"SHOUT">
  [174] pushcons 7 .............................. <"bold">
  [176] pushcons 8 .............................. <"WHISPER">
  [178] pushcons 9 .............................. <"italic">
  [180] pusharglist 6 ........................... <["CHAT": "plain", "SHOUT": "bold", "WHISPER": "italic"]>
  [182] pushproplist ............................ <["CHAT": "plain", "SHOUT": "bold", "WHISPER": "italic"]>
  [183] setlocal 0 .............................. tVariations = ["CHAT": "plain", "SHOUT": "bold", "WHISPER": "italic"]
  [185] pushint8 1 .............................. <1>
  [187] setlocal 1
  [189] getlocal 1
  [191] getlocal 0 .............................. <tVariations>
  [193] getobjprop 33 ........................... <tVariations.count>
  [195] lteq
  [196] jmpifz [335] ............................ repeat with i = 1 to tVariations.count
  [199] pushcons 10 ............................. <"struct.font.">
  [201] getlocal 0 .............................. <tVariations>
  [203] getlocal 1 .............................. <i>
  [205] pusharglist 2 ........................... <tVariations, i>
  [207] objcall 34 .............................. <tVariations[i]>
  [209] joinstr ................................. <"struct.font." & tVariations[i]>
  [210] pusharglist 1 ........................... <"struct.font." & tVariations[i]>
  [212] extcall 1521 ............................ <getStructVariable("struct.font." & tVariations[i])>
  [215] setlocal 2 .............................. tFontStruct = getStructVariable("struct.font." & tVariations[i])
  [217] pushcons 11 ............................. <"balloon.text.">
  [219] getlocal 0 .............................. <tVariations>
  [221] getlocal 1 .............................. <i>
  [223] pusharglist 2 ........................... <tVariations, i>
  [225] objcall 423 ............................. <tVariations.getPropAt(i)>
  [228] joinstr ................................. <"balloon.text." & tVariations.getPropAt(i)>
  [229] pushsymb 914 ............................ <#text>
  [232] pusharglist 2 ........................... <"balloon.text." & tVariations.getPropAt(i), #text>
  [234] extcall 433 ............................. <createMember("balloon.text." & tVariations.getPropAt(i), #text)>
  [237] pusharglist 1 ........................... <createMember("balloon.text." & tVariations.getPropAt(i), #text)>
  [239] extcall 64 .............................. <member(createMember("balloon.text." & tVariations.getPropAt(i), #text))>
  [241] setlocal 3 .............................. tmember = member(createMember("balloon.text." & tVariations.getPropAt(i), #text))
  [243] getlocal 3 .............................. <tmember>
  [245] pushzero ................................ <0>
  [246] setobjprop 1522 ......................... tmember.wordWrap = 0
  [249] getlocal 3 .............................. <tmember>
  [251] pushsymb 1523 ........................... <#adjust>
  [254] setobjprop 1524 ......................... tmember.boxType = #adjust
  [257] getlocal 3 .............................. <tmember>
  [259] pushzero ................................ <0>
  [260] setobjprop 1525 ......................... tmember.antialias = 0
  [263] getlocal 3 .............................. <tmember>
  [265] getlocal 2 .............................. <tFontStruct>
  [267] pushsymb 1526 ........................... <#font>
  [270] pusharglist 2 ........................... <tFontStruct, #font>
  [272] objcall 339 ............................. <tFontStruct.getaProp(#font)>
  [275] setobjprop 1526 ......................... tmember.font = tFontStruct.getaProp(#font)
  [278] getlocal 3 .............................. <tmember>
  [280] getlocal 2 .............................. <tFontStruct>
  [282] pushsymb 1527 ........................... <#fontSize>
  [285] pusharglist 2 ........................... <tFontStruct, #fontSize>
  [287] objcall 339 ............................. <tFontStruct.getaProp(#fontSize)>
  [290] setobjprop 1527 ......................... tmember.fontSize = tFontStruct.getaProp(#fontSize)
  [293] getlocal 3 .............................. <tmember>
  [295] getlocal 2 .............................. <tFontStruct>
  [297] pushsymb 1528 ........................... <#fontStyle>
  [300] pusharglist 2 ........................... <tFontStruct, #fontStyle>
  [302] objcall 339 ............................. <tFontStruct.getaProp(#fontStyle)>
  [305] setobjprop 1528 ......................... tmember.fontStyle = tFontStruct.getaProp(#fontStyle)
  [308] getprop 1519 ............................ <pTextMembers>
  [311] getlocal 0 .............................. <tVariations>
  [313] getlocal 1 .............................. <i>
  [315] pusharglist 2 ........................... <tVariations, i>
  [317] objcall 423 ............................. <tVariations.getPropAt(i)>
  [320] getlocal 3 .............................. <tmember>
  [322] pusharglistnoret 3 ...................... <pTextMembers, tVariations.getPropAt(i), tmember>
  [324] objcall 59 .............................. pTextMembers[tVariations.getPropAt(i)] = tmember
  [326] pushint8 1
  [328] getlocal 1
  [330] add
  [331] setlocal 1
  [333] endrepeat [189]
  [335] getprop 1515 ............................ <pMoveOffsetV>
  [338] getprop 1507 ............................ <pScrollStep>
  [341] mod ..................................... <pMoveOffsetV mod pScrollStep>
  [342] pushzero ................................ <0>
  [343] nteq .................................... <(pMoveOffsetV mod pScrollStep) <> 0>
  [344] jmpifz [361] ............................ if (pMoveOffsetV mod pScrollStep) <> 0 then
  [347] getprop 1515 ............................ <pMoveOffsetV>
  [350] getprop 1515 ............................ <pMoveOffsetV>
  [353] getprop 1507 ............................ <pScrollStep>
  [356] mod ..................................... <pMoveOffsetV mod pScrollStep>
  [357] sub ..................................... <pMoveOffsetV - (pMoveOffsetV mod pScrollStep)>
  [358] setprop 1515 ............................ pMoveOffsetV = pMoveOffsetV - (pMoveOffsetV mod pScrollStep)
  [361] getprop 1515 ............................ <pMoveOffsetV>
  [364] getprop 1507 ............................ <pScrollStep>
  [367] div ..................................... <pMoveOffsetV / pScrollStep>
  [368] setprop 1529 ............................ pFastScrollStep = pMoveOffsetV / pScrollStep
  [371] getprop 1513 ............................ <pMaxBalloons>
  [374] pushint8 1 .............................. <1>
  [376] sub ..................................... <pMaxBalloons - 1>
  [377] getprop 1515 ............................ <pMoveOffsetV>
  [380] mul ..................................... <(pMaxBalloons - 1) * pMoveOffsetV>
  [381] pushint8 1 .............................. <1>
  [383] sub ..................................... <((pMaxBalloons - 1) * pMoveOffsetV) - 1>
  [384] setprop 1530 ............................ pStartV = ((pMaxBalloons - 1) * pMoveOffsetV) - 1
  [387] pusharglist 0 ........................... <>
  [389] thebuiltin 1163 ......................... <the stageRight>
  [392] pusharglist 0 ........................... <>
  [394] thebuiltin 1164 ......................... <the stageLeft>
  [397] sub ..................................... <the stageRight - the stageLeft>
  [398] pushint8 10 ............................. <10>
  [400] sub ..................................... <the stageRight - the stageLeft - 10>
  [401] setprop 1531 ............................ pMaxWidth = the stageRight - the stageLeft - 10
  [404] pushint16 400 ........................... <400>
  [407] setprop 1532 ............................ pMaxCharNum = 400
  [410] pusharglist 0 ........................... <[]>
  [412] pushlist ................................ <[]>
  [413] setprop 1533 ............................ pReservedSprites = []
  [416] pusharglist 0 ........................... <[:]>
  [418] pushproplist ............................ <[:]>
  [419] setprop 1534 ............................ pBalloonImg = [:]
  [422] getprop 1534 ............................ <pBalloonImg>
  [425] pushsymb 488 ............................ <#left>
  [428] pushcons 12 ............................. <"balloon.left">
  [430] pusharglist 1 ........................... <"balloon.left">
  [432] extcall 65 .............................. <getmemnum("balloon.left")>
  [434] pusharglist 1 ........................... <getmemnum("balloon.left")>
  [436] extcall 64 .............................. <member(getmemnum("balloon.left"))>
  [438] getchainedprop 63 ....................... <member(getmemnum("balloon.left")).image>
  [440] pusharglist 1 ........................... <member(getmemnum("balloon.left")).image>
  [442] objcall 636 ............................. <member(getmemnum("balloon.left")).image.duplicate()>
  [445] pusharglistnoret 3 ...................... <pBalloonImg, #left, member(getmemnum("balloon.left")).image.duplicate()>
  [447] objcall 744 ............................. pBalloonImg.addProp(#left, member(getmemnum("balloon.left")).image.duplicate())
  [450] getprop 1534 ............................ <pBalloonImg>
  [453] pushsymb 1535 ........................... <#middle>
  [456] pushcons 13 ............................. <"balloon.middle">
  [458] pusharglist 1 ........................... <"balloon.middle">
  [460] extcall 65 .............................. <getmemnum("balloon.middle")>
  [462] pusharglist 1 ........................... <getmemnum("balloon.middle")>
  [464] extcall 64 .............................. <member(getmemnum("balloon.middle"))>
  [466] getchainedprop 63 ....................... <member(getmemnum("balloon.middle")).image>
  [468] pusharglist 1 ........................... <member(getmemnum("balloon.middle")).image>
  [470] objcall 636 ............................. <member(getmemnum("balloon.middle")).image.duplicate()>
  [473] pusharglistnoret 3 ...................... <pBalloonImg, #middle, member(getmemnum("balloon.middle")).image.duplicate()>
  [475] objcall 744 ............................. pBalloonImg.addProp(#middle, member(getmemnum("balloon.middle")).image.duplicate())
  [478] getprop 1534 ............................ <pBalloonImg>
  [481] pushsymb 125 ............................ <#right>
  [483] getparam 0 .............................. <me>
  [485] pushcons 12 ............................. <"balloon.left">
  [487] pusharglist 1 ........................... <"balloon.left">
  [489] extcall 65 .............................. <getmemnum("balloon.left")>
  [491] pusharglist 1 ........................... <getmemnum("balloon.left")>
  [493] extcall 64 .............................. <member(getmemnum("balloon.left"))>
  [495] getobjprop 63 ........................... <member(getmemnum("balloon.left")).image>
  [497] pusharglist 2 ........................... <me, member(getmemnum("balloon.left")).image>
  [499] objcall 78 .............................. <me.flipH(member(getmemnum("balloon.left")).image)>
  [501] pusharglistnoret 3 ...................... <pBalloonImg, #right, me.flipH(member(getmemnum("balloon.left")).image)>
  [503] objcall 744 ............................. pBalloonImg.addProp(#right, me.flipH(member(getmemnum("balloon.left")).image))
  [506] pushsymb 552 ............................ <#leaveRoom>
  [509] getparam 0 .............................. <me>
  [511] pusharglist 1 ........................... <me>
  [513] objcall 75 .............................. <me.getID()>
  [515] pushsymb 654 ............................ <#removeBalloons>
  [518] pusharglistnoret 3 ...................... <#leaveRoom, me.getID(), #removeBalloons>
  [520] extcall 264 ............................. registerMessage(#leaveRoom, me.getID(), #removeBalloons)
  [523] pushsymb 631 ............................ <#changeRoom>
  [526] getparam 0 .............................. <me>
  [528] pusharglist 1 ........................... <me>
  [530] objcall 75 .............................. <me.getID()>
  [532] pushsymb 654 ............................ <#removeBalloons>
  [535] pusharglistnoret 3 ...................... <#changeRoom, me.getID(), #removeBalloons>
  [537] extcall 264 ............................. registerMessage(#changeRoom, me.getID(), #removeBalloons)
  [540] pushsymb 1536 ........................... <#BalloonManagerCreated>
  [543] pushsymb 1537 ........................... <#objectPointer>
  [546] getparam 0 .............................. <me>
  [548] pusharglist 2 ........................... <[#objectPointer: me]>
  [550] pushproplist ............................ <[#objectPointer: me]>
  [551] pusharglistnoret 2 ...................... <#BalloonManagerCreated, [#objectPointer: me]>
  [553] extcall 310 ............................. executeMessage(#BalloonManagerCreated, [#objectPointer: me])
  [556] getparam 0 .............................. <me>
  [558] pusharglistnoret 1 ...................... <me>
  [560] objcall 1500 ............................ me.resetBalloons()
  [563] pushint8 1 .............................. <1>
  [565] pusharglistnoret 1 ...................... <1>
  [567] extcall 31 .............................. return 1
  [569] ret
end

on deconstruct me
  [  0] pushsymb 1540 ........................... <#balloonautoscroll>
  [  3] pusharglist 1 ........................... <#balloonautoscroll>
  [  5] extcall 324 ............................. <timeoutExists(#balloonautoscroll)>
  [  8] jmpifz [ 19] ............................ if timeoutExists(#balloonautoscroll) then
  [ 11] pushsymb 1540 ........................... <#balloonautoscroll>
  [ 14] pusharglistnoret 1 ...................... <#balloonautoscroll>
  [ 16] extcall 326 ............................. removeTimeout(#balloonautoscroll)
  [ 19] getparam 0 .............................. <me>
  [ 21] pusharglist 1 ........................... <me>
  [ 23] objcall 75 .............................. <me.getID()>
  [ 25] pusharglistnoret 1 ...................... <me.getID()>
  [ 27] extcall 649 ............................. removePrepare(me.getID())
  [ 30] pushsymb 552 ............................ <#leaveRoom>
  [ 33] getparam 0 .............................. <me>
  [ 35] pusharglist 1 ........................... <me>
  [ 37] objcall 75 .............................. <me.getID()>
  [ 39] pusharglistnoret 2 ...................... <#leaveRoom, me.getID()>
  [ 41] extcall 266 ............................. unregisterMessage(#leaveRoom, me.getID())
  [ 44] pushsymb 631 ............................ <#changeRoom>
  [ 47] getparam 0 .............................. <me>
  [ 49] pusharglist 1 ........................... <me>
  [ 51] objcall 75 .............................. <me.getID()>
  [ 53] pusharglistnoret 2 ...................... <#changeRoom, me.getID()>
  [ 55] extcall 266 ............................. unregisterMessage(#changeRoom, me.getID())
  [ 58] pusharglist 0 ........................... <[]>
  [ 60] pushlist ................................ <[]>
  [ 61] setprop 1512 ............................ pBalloonBuffer = []
  [ 64] getprop 1511 ............................ <pAvailableBalloons>
  [ 67] pusharglist 1 ........................... <pAvailableBalloons>
  [ 69] extcall 120 ............................. <voidp(pAvailableBalloons)>
  [ 71] not ..................................... <not voidp(pAvailableBalloons)>
  [ 72] jmpifz [ 85] ............................ if not voidp(pAvailableBalloons) then
  [ 75] pushsymb 1 .............................. <#deconstruct>
  [ 77] getprop 1511 ............................ <pAvailableBalloons>
  [ 80] pusharglistnoret 2 ...................... <#deconstruct, pAvailableBalloons>
  [ 82] extcall 281 ............................. call(#deconstruct, pAvailableBalloons)
  [ 85] getprop 1510 ............................ <pVisibleBalloons>
  [ 88] pusharglist 1 ........................... <pVisibleBalloons>
  [ 90] extcall 120 ............................. <voidp(pVisibleBalloons)>
  [ 92] not ..................................... <not voidp(pVisibleBalloons)>
  [ 93] jmpifz [106] ............................ if not voidp(pVisibleBalloons) then
  [ 96] pushsymb 1 .............................. <#deconstruct>
  [ 98] getprop 1510 ............................ <pVisibleBalloons>
  [101] pusharglistnoret 2 ...................... <#deconstruct, pVisibleBalloons>
  [103] extcall 281 ............................. call(#deconstruct, pVisibleBalloons)
  [106] getprop 1541 ............................ <pBalloonPulse>
  [109] pusharglist 1 ........................... <pBalloonPulse>
  [111] extcall 120 ............................. <voidp(pBalloonPulse)>
  [113] not ..................................... <not voidp(pBalloonPulse)>
  [114] jmpifz [127] ............................ if not voidp(pBalloonPulse) then
  [117] pushsymb 1 .............................. <#deconstruct>
  [119] getprop 1541 ............................ <pBalloonPulse>
  [122] pusharglistnoret 2 ...................... <#deconstruct, pBalloonPulse>
  [124] extcall 281 ............................. call(#deconstruct, pBalloonPulse)
  [127] getprop 1533 ............................ <pReservedSprites>
  [130] peek 0
  [132] pusharglist 1
  [134] extcall 33
  [136] pushint8 1
  [138] peek 0
  [140] peek 2
  [142] lteq
  [143] jmpifz [167] ............................ repeat with tSpr in pReservedSprites
  [146] peek 2
  [148] peek 1
  [150] pusharglist 2
  [152] extcall 34
  [154] setlocal 0
  [156] getlocal 0 .............................. <tSpr>
  [158] pusharglistnoret 1 ...................... <tSpr>
  [160] extcall 35 .............................. releaseSprite(tSpr)
  [162] pushint8 1
  [164] add
  [165] endrepeat [138]
  [167] pop 3
  [169] getprop 1519 ............................ <pTextMembers>
  [172] peek 0
  [174] pusharglist 1
  [176] extcall 33
  [178] pushint8 1
  [180] peek 0
  [182] peek 2
  [184] lteq
  [185] jmpifz [212] ............................ repeat with tMem in pTextMembers
  [188] peek 2
  [190] peek 1
  [192] pusharglist 2
  [194] extcall 34
  [196] setlocal 1
  [198] getlocal 1 .............................. <tMem>
  [200] getobjprop 58 ........................... <tMem.name>
  [202] pusharglistnoret 1 ...................... <tMem.name>
  [204] extcall 1145 ............................ removeMember(tMem.name)
  [207] pushint8 1
  [209] add
  [210] endrepeat [180]
  [212] pop 3
  [214] pusharglist 0 ........................... <[]>
  [216] pushlist ................................ <[]>
  [217] setprop 1533 ............................ pReservedSprites = []
  [220] pusharglist 0 ........................... <[:]>
  [222] pushproplist ............................ <[:]>
  [223] setprop 1519 ............................ pTextMembers = [:]
  [226] pusharglist 0 ........................... <>
  [228] extcall 30 .............................. <VOID>
  [230] setprop 1511 ............................ pAvailableBalloons = VOID
  [233] pusharglist 0 ........................... <>
  [235] extcall 30 .............................. <VOID>
  [237] setprop 1510 ............................ pVisibleBalloons = VOID
  [240] pusharglist 0 ........................... <>
  [242] extcall 30 .............................. <VOID>
  [244] setprop 1512 ............................ pBalloonBuffer = VOID
  [247] pushint8 1 .............................. <1>
  [249] pusharglistnoret 1 ...................... <1>
  [251] extcall 31 .............................. return 1
  [253] ret
end

on createballoonImg me, tName, tText, tBalloonColor, tChatMode
  [  0] getparam 3 .............................. <tBalloonColor>
  [  2] getobjprop 1331 ......................... <tBalloonColor.red>
  [  5] getparam 3 .............................. <tBalloonColor>
  [  7] getobjprop 1332 ......................... <tBalloonColor.green>
  [ 10] add ..................................... <tBalloonColor.red + tBalloonColor.green>
  [ 11] getparam 3 .............................. <tBalloonColor>
  [ 13] getobjprop 1333 ......................... <tBalloonColor.blue>
  [ 16] add ..................................... <tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue>
  [ 17] pushint16 600 ........................... <600>
  [ 20] gteq .................................... <(tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) >= 600>
  [ 21] jmpifz [ 76] ............................ if (tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) >= 600 then
  [ 24] pushzero ................................ <0>
  [ 25] pushzero ................................ <0>
  [ 26] pushzero ................................ <0>
  [ 27] pusharglist 3 ........................... <0, 0, 0>
  [ 29] extcall 94 .............................. <rgb(0, 0, 0)>
  [ 31] setlocal 0 .............................. tBalloonColorDarken = rgb(0, 0, 0)
  [ 33] getlocal 0 .............................. <tBalloonColorDarken>
  [ 35] getparam 3 .............................. <tBalloonColor>
  [ 37] getobjprop 1331 ......................... <tBalloonColor.red>
  [ 40] pushcons 14 ............................. <0.90000000000000002>
  [ 42] mul ..................................... <tBalloonColor.red * 0.90000000000000002>
  [ 43] setobjprop 1331 ......................... tBalloonColorDarken.red = tBalloonColor.red * 0.90000000000000002
  [ 46] getlocal 0 .............................. <tBalloonColorDarken>
  [ 48] getparam 3 .............................. <tBalloonColor>
  [ 50] getobjprop 1332 ......................... <tBalloonColor.green>
  [ 53] pushcons 14 ............................. <0.90000000000000002>
  [ 55] mul ..................................... <tBalloonColor.green * 0.90000000000000002>
  [ 56] setobjprop 1332 ......................... tBalloonColorDarken.green = tBalloonColor.green * 0.90000000000000002
  [ 59] getlocal 0 .............................. <tBalloonColorDarken>
  [ 61] getparam 3 .............................. <tBalloonColor>
  [ 63] getobjprop 1333 ......................... <tBalloonColor.blue>
  [ 66] pushcons 14 ............................. <0.90000000000000002>
  [ 68] mul ..................................... <tBalloonColor.blue * 0.90000000000000002>
  [ 69] setobjprop 1333 ......................... tBalloonColorDarken.blue = tBalloonColor.blue * 0.90000000000000002
  [ 72] getlocal 0 .............................. <tBalloonColorDarken>
  [ 74] setparam 3 .............................. tBalloonColor = tBalloonColorDarken
  [ 76] getparam 2 .............................. <tText>
  [ 78] pusharglist 1 ........................... <tText>
  [ 80] extcall 67 .............................. <length(tText)>
  [ 82] getprop 1532 ............................ <pMaxCharNum>
  [ 85] gt ...................................... <length(tText) > pMaxCharNum>
  [ 86] jmpifz [104] ............................ if length(tText) > pMaxCharNum then
  [ 89] getparam 2 .............................. <tText>
  [ 91] pushsymb 66 ............................. <#char>
  [ 93] pushint8 1 .............................. <1>
  [ 95] getprop 1532 ............................ <pMaxCharNum>
  [ 98] pusharglist 4 ........................... <tText, #char, 1, pMaxCharNum>
  [100] objcall 68 .............................. <tText.char[1..pMaxCharNum]>
  [102] setparam 2 .............................. tText = tText.char[1..pMaxCharNum]
  [104] getprop 1519 ............................ <pTextMembers>
  [107] getparam 4 .............................. <tChatMode>
  [109] pusharglist 2 ........................... <pTextMembers, tChatMode>
  [111] objcall 34 .............................. <pTextMembers[tChatMode]>
  [113] setlocal 1 .............................. tmember = pTextMembers[tChatMode]
  [115] getlocal 1 .............................. <tmember>
  [117] getobjprop 1526 ......................... <tmember.font>
  [120] setlocal 2 .............................. tSavedFont = tmember.font
  [122] getlocal 1 .............................. <tmember>
  [124] getobjprop 1528 ......................... <tmember.fontStyle>
  [127] setlocal 3 .............................. tSavedStyle = tmember.fontStyle
  [129] getlocal 1 .............................. <tmember>
  [131] pushzero ................................ <0>
  [132] pushzero ................................ <0>
  [133] getprop 1531 ............................ <pMaxWidth>
  [136] getlocal 1 .............................. <tmember>
  [138] getobjprop 81 ........................... <tmember.height>
  [140] pusharglist 4 ........................... <0, 0, pMaxWidth, tmember.height>
  [142] extcall 137 ............................. <rect(0, 0, pMaxWidth, tmember.height)>
  [144] setobjprop 137 .......................... tmember.rect = rect(0, 0, pMaxWidth, tmember.height)
  [146] pushcons 15 ............................. <"struct.font.bold">
  [148] pusharglist 1 ........................... <"struct.font.bold">
  [150] extcall 1521 ............................ <getStructVariable("struct.font.bold")>
  [153] setlocal 4 .............................. tBoldStruct = getStructVariable("struct.font.bold")
  [155] getlocal 1 .............................. <tmember>
  [157] getparam 1 .............................. <tName>
  [159] pushcons 16 ............................. <":">
  [161] joinstr ................................. <tName & ":">
  [162] getparam 2 .............................. <tText>
  [164] joinpadstr .............................. <tName & ":" && tText>
  [165] setobjprop 914 .......................... tmember.text = tName & ":" && tText
  [168] getlocal 1 .............................. <tmember>
  [170] pushsymb 66 ............................. <#char>
  [172] pushint8 1 .............................. <1>
  [174] getparam 1 .............................. <tName>
  [176] getobjprop 67 ........................... <tName.length>
  [178] pushint8 1 .............................. <1>
  [180] add ..................................... <tName.length + 1>
  [181] pusharglist 4 ........................... <tmember, #char, 1, tName.length + 1>
  [183] objcall 101 ............................. <tmember.char[1..tName.length + 1]>
  [185] getlocal 4 .............................. <tBoldStruct>
  [187] pushsymb 1526 ........................... <#font>
  [190] pusharglist 2 ........................... <tBoldStruct, #font>
  [192] objcall 339 ............................. <tBoldStruct.getaProp(#font)>
  [195] setobjprop 1526 ......................... tmember.char[1..tName.length + 1].font = tBoldStruct.getaProp(#font)
  [198] getlocal 1 .............................. <tmember>
  [200] pushsymb 66 ............................. <#char>
  [202] pushint8 1 .............................. <1>
  [204] getparam 1 .............................. <tName>
  [206] getobjprop 67 ........................... <tName.length>
  [208] pushint8 1 .............................. <1>
  [210] add ..................................... <tName.length + 1>
  [211] pusharglist 4 ........................... <tmember, #char, 1, tName.length + 1>
  [213] objcall 101 ............................. <tmember.char[1..tName.length + 1]>
  [215] getlocal 4 .............................. <tBoldStruct>
  [217] pushsymb 1528 ........................... <#fontStyle>
  [220] pusharglist 2 ........................... <tBoldStruct, #fontStyle>
  [222] objcall 339 ............................. <tBoldStruct.getaProp(#fontStyle)>
  [225] setobjprop 1528 ......................... tmember.char[1..tName.length + 1].fontStyle = tBoldStruct.getaProp(#fontStyle)
  [228] getlocal 1 .............................. <tmember>
  [230] getobjprop 97 ........................... <tmember.color>
  [232] setlocal 5 .............................. tSavedColor = tmember.color
  [234] getlocal 1 .............................. <tmember>
  [236] pushsymb 66 ............................. <#char>
  [238] pushint8 1 .............................. <1>
  [240] getparam 1 .............................. <tName>
  [242] getobjprop 67 ........................... <tName.length>
  [244] pushint8 1 .............................. <1>
  [246] add ..................................... <tName.length + 1>
  [247] pusharglist 4 ........................... <tmember, #char, 1, tName.length + 1>
  [249] objcall 101 ............................. <tmember.char[1..tName.length + 1]>
  [251] getprop 1520 ............................ <pDefaultTextColor>
  [254] setobjprop 97 ........................... tmember.char[1..tName.length + 1].color = pDefaultTextColor
  [256] getlocal 1 .............................. <tmember>
  [258] getlocal 1 .............................. <tmember>
  [260] pushsymb 66 ............................. <#char>
  [262] pusharglist 2 ........................... <tmember, #char>
  [264] objcall 33 .............................. <tmember.char.count>
  [266] pusharglist 2 ........................... <tmember, tmember.char.count>
  [268] objcall 1542 ............................ <tmember.charPosToLoc(tmember.char.count)>
  [271] getobjprop 112 .......................... <tmember.charPosToLoc(tmember.char.count).locH>
  [273] getprop 1534 ............................ <pBalloonImg>
  [276] pushsymb 488 ............................ <#left>
  [279] pusharglist 2 ........................... <pBalloonImg, #left>
  [281] objcall 34 .............................. <pBalloonImg[#left]>
  [283] getobjprop 80 ........................... <pBalloonImg[#left].width>
  [285] pushint8 4 .............................. <4>
  [287] mul ..................................... <pBalloonImg[#left].width * 4>
  [288] add ..................................... <tmember.charPosToLoc(tmember.char.count).locH + (pBalloonImg[#left].width * 4)>
  [289] setlocal 6 .............................. tTextWidth = tmember.charPosToLoc(tmember.char.count).locH + (pBalloonImg[#left].width * 4)
  [291] getlocal 6 .............................. <tTextWidth>
  [293] getprop 1516 ............................ <pMarginH>
  [296] pushint8 2 .............................. <2>
  [298] mul ..................................... <pMarginH * 2>
  [299] add ..................................... <tTextWidth + (pMarginH * 2)>
  [300] getprop 1531 ............................ <pMaxWidth>
  [303] gt ...................................... <(tTextWidth + (pMarginH * 2)) > pMaxWidth>
  [304] jmpifz [332] ............................ if (tTextWidth + (pMarginH * 2)) > pMaxWidth then
  [307] getprop 1531 ............................ <pMaxWidth>
  [310] getprop 1516 ............................ <pMarginH>
  [313] pushint8 2 .............................. <2>
  [315] mul ..................................... <pMarginH * 2>
  [316] sub ..................................... <pMaxWidth - (pMarginH * 2)>
  [317] getprop 1534 ............................ <pBalloonImg>
  [320] pushsymb 488 ............................ <#left>
  [323] pusharglist 2 ........................... <pBalloonImg, #left>
  [325] objcall 34 .............................. <pBalloonImg[#left]>
  [327] getobjprop 80 ........................... <pBalloonImg[#left].width>
  [329] sub ..................................... <pMaxWidth - (pMarginH * 2) - pBalloonImg[#left].width>
  [330] setlocal 6 .............................. tTextWidth = pMaxWidth - (pMarginH * 2) - pBalloonImg[#left].width
  [332] getlocal 1 .............................. <tmember>
  [334] pushzero ................................ <0>
  [335] pushzero ................................ <0>
  [336] getlocal 6 .............................. <tTextWidth>
  [338] getlocal 1 .............................. <tmember>
  [340] getobjprop 81 ........................... <tmember.height>
  [342] pusharglist 4 ........................... <0, 0, tTextWidth, tmember.height>
  [344] extcall 137 ............................. <rect(0, 0, tTextWidth, tmember.height)>
  [346] setobjprop 137 .......................... tmember.rect = rect(0, 0, tTextWidth, tmember.height)
  [348] getlocal 1 .............................. <tmember>
  [350] getobjprop 63 ........................... <tmember.image>
  [352] setlocal 7 .............................. tTextImg = tmember.image
  [354] getlocal 7 .............................. <tTextImg>
  [356] getobjprop 80 ........................... <tTextImg.width>
  [358] setlocal 6 .............................. tTextWidth = tTextImg.width
  [360] getlocal 6 .............................. <tTextWidth>
  [362] getprop 1516 ............................ <pMarginH>
  [365] pushint8 2 .............................. <2>
  [367] mul ..................................... <pMarginH * 2>
  [368] add ..................................... <tTextWidth + (pMarginH * 2)>
  [369] setlocal 8 .............................. tWidth = tTextWidth + (pMarginH * 2)
  [371] getlocal 8 .............................. <tWidth>
  [373] getprop 1534 ............................ <pBalloonImg>
  [376] pushsymb 488 ............................ <#left>
  [379] pusharglist 2 ........................... <pBalloonImg, #left>
  [381] objcall 34 .............................. <pBalloonImg[#left]>
  [383] getobjprop 81 ........................... <pBalloonImg[#left].height>
  [385] pushint8 8 .............................. <8>
  [387] pusharglist 3 ........................... <tWidth, pBalloonImg[#left].height, 8>
  [389] extcall 63 .............................. <image(tWidth, pBalloonImg[#left].height, 8)>
  [391] setlocal 9 .............................. tNewImg = image(tWidth, pBalloonImg[#left].height, 8)
  [393] pushzero ................................ <0>
  [394] setlocal 10 ............................. tStartPointY = 0
  [396] getlocal 9 .............................. <tNewImg>
  [398] getobjprop 81 ........................... <tNewImg.height>
  [400] setlocal 11 ............................. tEndPointY = tNewImg.height
  [402] pushzero ................................ <0>
  [403] setlocal 12 ............................. tStartPointX = 0
  [405] pushzero ................................ <0>
  [406] setlocal 13 ............................. tEndPointX = 0
  [408] pushsymb 488 ............................ <#left>
  [411] pushsymb 1535 ........................... <#middle>
  [414] pushsymb 125 ............................ <#right>
  [416] pusharglist 3 ........................... <[#left, #middle, #right]>
  [418] pushlist ................................ <[#left, #middle, #right]>
  [419] peek 0
  [421] pusharglist 1
  [423] extcall 33
  [425] pushint8 1
  [427] peek 0
  [429] peek 2
  [431] lteq
  [432] jmpifz [604] ............................ repeat with i in [#left, #middle, #right]
  [435] peek 2
  [437] peek 1
  [439] pusharglist 2
  [441] extcall 34
  [443] setlocal 14
  [445] getlocal 13 ............................. <tEndPointX>
  [447] setlocal 12 ............................. tStartPointX = tEndPointX
  [449] getlocal 14 ............................. <i>
  [451] peek 0 .................................. case i of
  [453] pushsymb 488 ............................ <#left>
  [456] eq
  [457] jmpifz [479] ............................ (case) #left:
  [460] getlocal 13 ............................. <tEndPointX>
  [462] getprop 1534 ............................ <pBalloonImg>
  [465] getlocal 14 ............................. <i>
  [467] pusharglist 2 ........................... <pBalloonImg, i>
  [469] objcall 68 .............................. <pBalloonImg.getProp(i)>
  [471] getobjprop 80 ........................... <pBalloonImg.getProp(i).width>
  [473] add ..................................... <tEndPointX + pBalloonImg.getProp(i).width>
  [474] setlocal 13 ............................. tEndPointX = tEndPointX + pBalloonImg.getProp(i).width
  [476] jmp [547]
  [479] peek 0
  [481] pushsymb 1535 ........................... <#middle>
  [484] eq
  [485] jmpifz [523] ............................ (case) #middle:
  [488] getlocal 13 ............................. <tEndPointX>
  [490] getlocal 8 .............................. <tWidth>
  [492] add ..................................... <tEndPointX + tWidth>
  [493] getprop 1534 ............................ <pBalloonImg>
  [496] pushsymb 488 ............................ <#left>
  [499] pusharglist 2 ........................... <pBalloonImg, #left>
  [501] objcall 68 .............................. <pBalloonImg.getProp(#left)>
  [503] getobjprop 80 ........................... <pBalloonImg.getProp(#left).width>
  [505] sub ..................................... <tEndPointX + tWidth - pBalloonImg.getProp(#left).width>
  [506] getprop 1534 ............................ <pBalloonImg>
  [509] pushsymb 125 ............................ <#right>
  [511] pusharglist 2 ........................... <pBalloonImg, #right>
  [513] objcall 68 .............................. <pBalloonImg.getProp(#right)>
  [515] getobjprop 80 ........................... <pBalloonImg.getProp(#right).width>
  [517] sub ..................................... <tEndPointX + tWidth - pBalloonImg.getProp(#left).width - pBalloonImg.getProp(#right).width>
  [518] setlocal 13 ............................. tEndPointX = tEndPointX + tWidth - pBalloonImg.getProp(#left).width - pBalloonImg.getProp(#right).width
  [520] jmp [547]
  [523] peek 0
  [525] pushsymb 125 ............................ <#right>
  [527] eq
  [528] jmpifz [547] ............................ (case) #right:
  [531] getlocal 13 ............................. <tEndPointX>
  [533] getprop 1534 ............................ <pBalloonImg>
  [536] getlocal 14 ............................. <i>
  [538] pusharglist 2 ........................... <pBalloonImg, i>
  [540] objcall 68 .............................. <pBalloonImg.getProp(i)>
  [542] getobjprop 80 ........................... <pBalloonImg.getProp(i).width>
  [544] add ..................................... <tEndPointX + pBalloonImg.getProp(i).width>
  [545] setlocal 13 ............................. tEndPointX = tEndPointX + pBalloonImg.getProp(i).width
  [547] pop 1 ................................... end case
  [549] getlocal 12 ............................. <tStartPointX>
  [551] getlocal 10 ............................. <tStartPointY>
  [553] getlocal 13 ............................. <tEndPointX>
  [555] getlocal 11 ............................. <tEndPointY>
  [557] pusharglist 4 ........................... <tStartPointX, tStartPointY, tEndPointX, tEndPointY>
  [559] extcall 137 ............................. <rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)>
  [561] setlocal 15 ............................. tdestrect = rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)
  [563] getlocal 9 .............................. <tNewImg>
  [565] getprop 1534 ............................ <pBalloonImg>
  [568] getlocal 14 ............................. <i>
  [570] pusharglist 2 ........................... <pBalloonImg, i>
  [572] objcall 68 .............................. <pBalloonImg.getProp(i)>
  [574] getlocal 15 ............................. <tdestrect>
  [576] getprop 1534 ............................ <pBalloonImg>
  [579] getlocal 14 ............................. <i>
  [581] pusharglist 2 ........................... <pBalloonImg, i>
  [583] objcall 68 .............................. <pBalloonImg.getProp(i)>
  [585] getobjprop 137 .......................... <pBalloonImg.getProp(i).rect>
  [587] pushsymb 97 ............................. <#color>
  [589] getparam 3 .............................. <tBalloonColor>
  [591] pusharglist 2 ........................... <[#color: tBalloonColor]>
  [593] pushproplist ............................ <[#color: tBalloonColor]>
  [594] pusharglistnoret 5 ...................... <tNewImg, pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect, [#color: tBalloonColor]>
  [596] objcall 400 ............................. tNewImg.copyPixels(pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect, [#color: tBalloonColor])
  [599] pushint8 1
  [601] add
  [602] endrepeat [427]
  [604] pop 3
  [606] getlocal 7 .............................. <tTextImg>
  [608] getobjprop 137 .......................... <tTextImg.rect>
  [610] getprop 1516 ............................ <pMarginH>
  [613] getprop 1517 ............................ <pMarginV>
  [616] getprop 1516 ............................ <pMarginH>
  [619] getprop 1517 ............................ <pMarginV>
  [622] pusharglist 4 ........................... <pMarginH, pMarginV, pMarginH, pMarginV>
  [624] extcall 137 ............................. <rect(pMarginH, pMarginV, pMarginH, pMarginV)>
  [626] add ..................................... <tTextImg.rect + rect(pMarginH, pMarginV, pMarginH, pMarginV)>
  [627] setlocal 15 ............................. tdestrect = tTextImg.rect + rect(pMarginH, pMarginV, pMarginH, pMarginV)
  [629] getlocal 15 ............................. <tdestrect>
  [631] getlocal 9 .............................. <tNewImg>
  [633] getobjprop 80 ........................... <tNewImg.width>
  [635] pushint8 2 .............................. <2>
  [637] div ..................................... <tNewImg.width / 2>
  [638] pushzero ................................ <0>
  [639] getlocal 9 .............................. <tNewImg>
  [641] getobjprop 80 ........................... <tNewImg.width>
  [643] pushint8 2 .............................. <2>
  [645] div ..................................... <tNewImg.width / 2>
  [646] pushzero ................................ <0>
  [647] pusharglist 4 ........................... <tNewImg.width / 2, 0, tNewImg.width / 2, 0>
  [649] extcall 137 ............................. <rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0)>
  [651] add ..................................... <tdestrect + rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0)>
  [652] getlocal 6 .............................. <tTextWidth>
  [654] pushint8 2 .............................. <2>
  [656] div ..................................... <tTextWidth / 2>
  [657] pushzero ................................ <0>
  [658] getlocal 6 .............................. <tTextWidth>
  [660] pushint8 2 .............................. <2>
  [662] div ..................................... <tTextWidth / 2>
  [663] pushzero ................................ <0>
  [664] pusharglist 4 ........................... <tTextWidth / 2, 0, tTextWidth / 2, 0>
  [666] extcall 137 ............................. <rect(tTextWidth / 2, 0, tTextWidth / 2, 0)>
  [668] sub ..................................... <tdestrect + rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0) - rect(tTextWidth / 2, 0, tTextWidth / 2, 0)>
  [669] setlocal 15 ............................. tdestrect = tdestrect + rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0) - rect(tTextWidth / 2, 0, tTextWidth / 2, 0)
  [671] getlocal 9 .............................. <tNewImg>
  [673] getlocal 7 .............................. <tTextImg>
  [675] getlocal 15 ............................. <tdestrect>
  [677] getlocal 7 .............................. <tTextImg>
  [679] getobjprop 137 .......................... <tTextImg.rect>
  [681] pusharglistnoret 4 ...................... <tNewImg, tTextImg, tdestrect, tTextImg.rect>
  [683] objcall 400 ............................. tNewImg.copyPixels(tTextImg, tdestrect, tTextImg.rect)
  [686] getlocal 1 .............................. <tmember>
  [688] getlocal 2 .............................. <tSavedFont>
  [690] setobjprop 1526 ......................... tmember.font = tSavedFont
  [693] getlocal 1 .............................. <tmember>
  [695] getlocal 3 .............................. <tSavedStyle>
  [697] setobjprop 1528 ......................... tmember.fontStyle = tSavedStyle
  [700] getlocal 1 .............................. <tmember>
  [702] getlocal 5 .............................. <tSavedColor>
  [704] setobjprop 97 ........................... tmember.color = tSavedColor
  [706] getlocal 9 .............................. <tNewImg>
  [708] pusharglistnoret 1 ...................... <tNewImg>
  [710] extcall 31 .............................. return tNewImg
  [712] ret
end

on resetBalloons me
  [  0] pusharglist 0 ........................... <[:]>
  [  2] pushproplist ............................ <[:]>
  [  3] setprop 1510 ............................ pVisibleBalloons = [:]
  [  6] pusharglist 0 ........................... <[:]>
  [  8] pushproplist ............................ <[:]>
  [  9] setprop 1511 ............................ pAvailableBalloons = [:]
  [ 12] getparam 0 .............................. <me>
  [ 14] pusharglist 1 ........................... <me>
  [ 16] objcall 75 .............................. <me.getID()>
  [ 18] pusharglist 1 ........................... <me.getID()>
  [ 20] extcall 74 .............................. <reserveSprite(me.getID())>
  [ 22] setlocal 0 .............................. tSprNum = reserveSprite(me.getID())
  [ 24] getprop 1533 ............................ <pReservedSprites>
  [ 27] getlocal 0 .............................. <tSprNum>
  [ 29] pusharglistnoret 2 ...................... <pReservedSprites, tSprNum>
  [ 31] objcall 88 .............................. pReservedSprites.add(tSprNum)
  [ 33] pushsymb 262 ............................ <#temp>
  [ 36] pushcons 17 ............................. <"Balloon pulse Class">
  [ 38] pusharglist 2 ........................... <#temp, "Balloon pulse Class">
  [ 40] extcall 260 ............................. <createObject(#temp, "Balloon pulse Class")>
  [ 43] setprop 1541 ............................ pBalloonPulse = createObject(#temp, "Balloon pulse Class")
  [ 46] getlocal 0 .............................. <tSprNum>
  [ 48] pusharglist 1 ........................... <tSprNum>
  [ 50] extcall 73 .............................. <sprite(tSprNum)>
  [ 52] getprop 1514 ............................ <pFirstLocz>
  [ 55] setobjprop 129 .......................... sprite(tSprNum).locZ = pFirstLocz
  [ 57] getlocal 0 .............................. <tSprNum>
  [ 59] pusharglist 1 ........................... <tSprNum>
  [ 61] extcall 73 .............................. <sprite(tSprNum)>
  [ 63] pushint8 8 .............................. <8>
  [ 65] setobjprop 93 ........................... sprite(tSprNum).ink = 8
  [ 67] getprop 1541 ............................ <pBalloonPulse>
  [ 70] pushsymb 73 ............................. <#sprite>
  [ 72] getlocal 0 .............................. <tSprNum>
  [ 74] pusharglistnoret 3 ...................... <pBalloonPulse, #sprite, tSprNum>
  [ 76] objcall 637 ............................. pBalloonPulse.set(#sprite, tSprNum)
  [ 79] getprop 1541 ............................ <pBalloonPulse>
  [ 82] pushsymb 1557 ........................... <#manager>
  [ 85] getparam 0 .............................. <me>
  [ 87] pusharglistnoret 3 ...................... <pBalloonPulse, #manager, me>
  [ 89] objcall 637 ............................. pBalloonPulse.set(#manager, me)
  [ 92] pushint8 1 .............................. <1>
  [ 94] setlocal 1
  [ 96] getlocal 1
  [ 98] getprop 1513 ............................ <pMaxBalloons>
  [101] lteq
  [102] jmpifz [341] ............................ repeat with f = 1 to pMaxBalloons
  [105] getparam 0 .............................. <me>
  [107] pusharglist 1 ........................... <me>
  [109] objcall 75 .............................. <me.getID()>
  [111] pusharglist 1 ........................... <me.getID()>
  [113] extcall 74 .............................. <reserveSprite(me.getID())>
  [115] setlocal 0 .............................. tSprNum = reserveSprite(me.getID())
  [117] getprop 1533 ............................ <pReservedSprites>
  [120] getlocal 0 .............................. <tSprNum>
  [122] pusharglistnoret 2 ...................... <pReservedSprites, tSprNum>
  [124] objcall 88 .............................. pReservedSprites.add(tSprNum)
  [126] getlocal 0 .............................. <tSprNum>
  [128] pushzero ................................ <0>
  [129] eq ...................................... <tSprNum = 0>
  [130] jmpifz [145] ............................ if tSprNum = 0 then
  [133] getlocal 1 .............................. <f>
  [135] pushint8 1 .............................. <1>
  [137] sub ..................................... <f - 1>
  [138] setprop 1513 ............................ pMaxBalloons = f - 1
  [141] pusharglistnoret 0 ...................... <>
  [143] extcall 31 .............................. return 
  [145] getlocal 0 .............................. <tSprNum>
  [147] pusharglist 1 ........................... <tSprNum>
  [149] extcall 73 .............................. <sprite(tSprNum)>
  [151] getprop 1514 ............................ <pFirstLocz>
  [154] getlocal 1 .............................. <f>
  [156] add ..................................... <pFirstLocz + f>
  [157] pushint8 1 .............................. <1>
  [159] sub ..................................... <pFirstLocz + f - 1>
  [160] setobjprop 129 .......................... sprite(tSprNum).locZ = pFirstLocz + f - 1
  [162] getlocal 0 .............................. <tSprNum>
  [164] pusharglist 1 ........................... <tSprNum>
  [166] extcall 73 .............................. <sprite(tSprNum)>
  [168] pushint8 8 .............................. <8>
  [170] setobjprop 93 ........................... sprite(tSprNum).ink = 8
  [172] pushcons 18 ............................. <"balloon">
  [174] getlocal 1 .............................. <f>
  [176] joinstr ................................. <"balloon" & f>
  [177] setlocal 2 .............................. tBalloonId = "balloon" & f
  [179] pushcons 19 ............................. <"balloon.">
  [181] getlocal 2 .............................. <tBalloonId>
  [183] joinstr ................................. <"balloon." & tBalloonId>
  [184] setlocal 3 .............................. tmember = "balloon." & tBalloonId
  [186] getlocal 3 .............................. <tmember>
  [188] pusharglist 1 ........................... <tmember>
  [190] extcall 62 .............................. <memberExists(tmember)>
  [192] not ..................................... <not memberExists(tmember)>
  [193] jmpifz [206] ............................ if not memberExists(tmember) then
  [196] getlocal 3 .............................. <tmember>
  [198] pushsymb 399 ............................ <#bitmap>
  [201] pusharglistnoret 2 ...................... <tmember, #bitmap>
  [203] extcall 433 ............................. createMember(tmember, #bitmap)
  [206] getlocal 3 .............................. <tmember>
  [208] pusharglist 1 ........................... <tmember>
  [210] extcall 65 .............................. <getmemnum(tmember)>
  [212] setlocal 3 .............................. tmember = getmemnum(tmember)
  [214] getprop 1511 ............................ <pAvailableBalloons>
  [217] getlocal 2 .............................. <tBalloonId>
  [219] pushsymb 262 ............................ <#temp>
  [222] pushcons 20 ............................. <"Balloon Class">
  [224] pusharglist 2 ........................... <#temp, "Balloon Class">
  [226] extcall 260 ............................. <createObject(#temp, "Balloon Class")>
  [229] pusharglistnoret 3 ...................... <pAvailableBalloons, tBalloonId, createObject(#temp, "Balloon Class")>
  [231] objcall 744 ............................. pAvailableBalloons.addProp(tBalloonId, createObject(#temp, "Balloon Class"))
  [234] getprop 1511 ............................ <pAvailableBalloons>
  [237] getlocal 2 .............................. <tBalloonId>
  [239] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [241] objcall 34 .............................. <pAvailableBalloons[tBalloonId]>
  [243] getlocal 2 .............................. <tBalloonId>
  [245] pusharglistnoret 2 ...................... <pAvailableBalloons[tBalloonId], tBalloonId>
  [247] objcall 731 ............................. pAvailableBalloons[tBalloonId].setID(tBalloonId)
  [250] getprop 1511 ............................ <pAvailableBalloons>
  [253] getlocal 2 .............................. <tBalloonId>
  [255] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [257] objcall 34 .............................. <pAvailableBalloons[tBalloonId]>
  [259] pushsymb 73 ............................. <#sprite>
  [261] getlocal 0 .............................. <tSprNum>
  [263] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #sprite, tSprNum>
  [265] objcall 637 ............................. pAvailableBalloons[tBalloonId].set(#sprite, tSprNum)
  [268] getprop 1511 ............................ <pAvailableBalloons>
  [271] getlocal 2 .............................. <tBalloonId>
  [273] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [275] objcall 34 .............................. <pAvailableBalloons[tBalloonId]>
  [277] pushsymb 64 ............................. <#member>
  [279] getlocal 3 .............................. <tmember>
  [281] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #member, tmember>
  [283] objcall 637 ............................. pAvailableBalloons[tBalloonId].set(#member, tmember)
  [286] getprop 1511 ............................ <pAvailableBalloons>
  [289] getlocal 2 .............................. <tBalloonId>
  [291] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [293] objcall 34 .............................. <pAvailableBalloons[tBalloonId]>
  [295] pushsymb 435 ............................ <#loc>
  [298] pushzero ................................ <0>
  [299] pushint16 1000 .......................... <1000>
  [302] inv ..................................... <-1000>
  [303] pusharglist 2 ........................... <0, -1000>
  [305] extcall 375 ............................. <point(0, -1000)>
  [308] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #loc, point(0, -1000)>
  [310] objcall 637 ............................. pAvailableBalloons[tBalloonId].set(#loc, point(0, -1000))
  [313] getprop 1511 ............................ <pAvailableBalloons>
  [316] getlocal 2 .............................. <tBalloonId>
  [318] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [320] objcall 34 .............................. <pAvailableBalloons[tBalloonId]>
  [322] pushsymb 1557 ........................... <#manager>
  [325] getparam 0 .............................. <me>
  [327] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #manager, me>
  [329] objcall 637 ............................. pAvailableBalloons[tBalloonId].set(#manager, me)
  [332] pushint8 1
  [334] getlocal 1
  [336] add
  [337] setlocal 1
  [339] endrepeat [ 96]
  [341] ret
end

on hideBalloons me
  [  0] pushsymb 1559 ........................... <#hideBalloon>
  [  3] getprop 1510 ............................ <pVisibleBalloons>
  [  6] pusharglistnoret 2 ...................... <#hideBalloon, pVisibleBalloons>
  [  8] extcall 281 ............................. call(#hideBalloon, pVisibleBalloons)
  [ 11] pushsymb 1559 ........................... <#hideBalloon>
  [ 14] getprop 1511 ............................ <pAvailableBalloons>
  [ 17] pusharglistnoret 2 ...................... <#hideBalloon, pAvailableBalloons>
  [ 19] extcall 281 ............................. call(#hideBalloon, pAvailableBalloons)
  [ 22] ret
end

on showBalloons me
  [  0] pushsymb 1560 ........................... <#showBalloon>
  [  3] getprop 1510 ............................ <pVisibleBalloons>
  [  6] pusharglistnoret 2 ...................... <#showBalloon, pVisibleBalloons>
  [  8] extcall 281 ............................. call(#showBalloon, pVisibleBalloons)
  [ 11] pushsymb 1560 ........................... <#showBalloon>
  [ 14] getprop 1511 ............................ <pAvailableBalloons>
  [ 17] pusharglistnoret 2 ...................... <#showBalloon, pAvailableBalloons>
  [ 19] extcall 281 ............................. call(#showBalloon, pAvailableBalloons)
  [ 22] ret
end

on removeBalloons me
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 75 .............................. <me.getID()>
  [  6] pusharglistnoret 1 ...................... <me.getID()>
  [  8] extcall 649 ............................. removePrepare(me.getID())
  [ 11] pushsymb 1540 ........................... <#balloonautoscroll>
  [ 14] pusharglist 1 ........................... <#balloonautoscroll>
  [ 16] extcall 324 ............................. <timeoutExists(#balloonautoscroll)>
  [ 19] jmpifz [ 30] ............................ if timeoutExists(#balloonautoscroll) then
  [ 22] pushsymb 1540 ........................... <#balloonautoscroll>
  [ 25] pusharglistnoret 1 ...................... <#balloonautoscroll>
  [ 27] extcall 326 ............................. removeTimeout(#balloonautoscroll)
  [ 30] pusharglist 0 ........................... <[]>
  [ 32] pushlist ................................ <[]>
  [ 33] setprop 1512 ............................ pBalloonBuffer = []
  [ 36] pusharglist 0 ........................... <>
  [ 38] extcall 30 .............................. <VOID>
  [ 40] setprop 1561 ............................ pLastBalloonId = VOID
  [ 43] pushsymb 1508 ........................... <#normal>
  [ 46] setprop 1175 ............................ pState = #normal
  [ 49] pushsymb 1562 ........................... <#removePulse>
  [ 52] getprop 1541 ............................ <pBalloonPulse>
  [ 55] pusharglistnoret 2 ...................... <#removePulse, pBalloonPulse>
  [ 57] extcall 281 ............................. call(#removePulse, pBalloonPulse)
  [ 60] pushsymb 1563 ........................... <#removeBalloon>
  [ 63] getprop 1510 ............................ <pVisibleBalloons>
  [ 66] pusharglistnoret 2 ...................... <#removeBalloon, pVisibleBalloons>
  [ 68] extcall 281 ............................. call(#removeBalloon, pVisibleBalloons)
  [ 71] pushsymb 1563 ........................... <#removeBalloon>
  [ 74] getprop 1511 ............................ <pAvailableBalloons>
  [ 77] pusharglistnoret 2 ...................... <#removeBalloon, pAvailableBalloons>
  [ 79] extcall 281 ............................. call(#removeBalloon, pAvailableBalloons)
  [ 82] pushsymb 1560 ........................... <#showBalloon>
  [ 85] getprop 1510 ............................ <pVisibleBalloons>
  [ 88] pusharglistnoret 2 ...................... <#showBalloon, pVisibleBalloons>
  [ 90] extcall 281 ............................. call(#showBalloon, pVisibleBalloons)
  [ 93] pushsymb 1560 ........................... <#showBalloon>
  [ 96] getprop 1511 ............................ <pAvailableBalloons>
  [ 99] pusharglistnoret 2 ...................... <#showBalloon, pAvailableBalloons>
  [101] extcall 281 ............................. call(#showBalloon, pAvailableBalloons)
  [104] getprop 1510 ............................ <pVisibleBalloons>
  [107] pusharglist 1 ........................... <pVisibleBalloons>
  [109] objcall 636 ............................. <pVisibleBalloons.duplicate()>
  [112] setlocal 0 .............................. tTempRemoveVisible = pVisibleBalloons.duplicate()
  [114] pushint8 1 .............................. <1>
  [116] setlocal 1
  [118] getlocal 1
  [120] getlocal 0 .............................. <tTempRemoveVisible>
  [122] getobjprop 33 ........................... <tTempRemoveVisible.count>
  [124] lteq
  [125] jmpifz [153] ............................ repeat with f = 1 to tTempRemoveVisible.count
  [128] getparam 0 .............................. <me>
  [130] getlocal 0 .............................. <tTempRemoveVisible>
  [132] getlocal 1 .............................. <f>
  [134] pusharglist 2 ........................... <tTempRemoveVisible, f>
  [136] objcall 423 ............................. <tTempRemoveVisible.getPropAt(f)>
  [139] pusharglistnoret 2 ...................... <me, tTempRemoveVisible.getPropAt(f)>
  [141] objcall 1503 ............................ me.removeVisibleBalloon(tTempRemoveVisible.getPropAt(f))
  [144] pushint8 1
  [146] getlocal 1
  [148] add
  [149] setlocal 1
  [151] endrepeat [118]
  [153] ret
end

on removeVisibleBalloon me, tid
  [  0] getprop 1510 ............................ <pVisibleBalloons>
  [  3] getparam 1 .............................. <tid>
  [  5] pusharglist 2 ........................... <pVisibleBalloons, tid>
  [  7] objcall 34 .............................. <pVisibleBalloons[tid]>
  [  9] pusharglist 1 ........................... <pVisibleBalloons[tid]>
  [ 11] extcall 120 ............................. <voidp(pVisibleBalloons[tid])>
  [ 13] not ..................................... <not voidp(pVisibleBalloons[tid])>
  [ 14] jmpifz [ 78] ............................ if not voidp(pVisibleBalloons[tid]) then
  [ 17] getprop 1511 ............................ <pAvailableBalloons>
  [ 20] getparam 1 .............................. <tid>
  [ 22] getprop 1510 ............................ <pVisibleBalloons>
  [ 25] getparam 1 .............................. <tid>
  [ 27] pusharglist 2 ........................... <pVisibleBalloons, tid>
  [ 29] objcall 34 .............................. <pVisibleBalloons[tid]>
  [ 31] pusharglistnoret 3 ...................... <pAvailableBalloons, tid, pVisibleBalloons[tid]>
  [ 33] objcall 59 .............................. pAvailableBalloons[tid] = pVisibleBalloons[tid]
  [ 35] getprop 1511 ............................ <pAvailableBalloons>
  [ 38] getparam 1 .............................. <tid>
  [ 40] pusharglist 2 ........................... <pAvailableBalloons, tid>
  [ 42] objcall 34 .............................. <pAvailableBalloons[tid]>
  [ 44] pushsymb 435 ............................ <#loc>
  [ 47] pushzero ................................ <0>
  [ 48] pushint16 1000 .......................... <1000>
  [ 51] inv ..................................... <-1000>
  [ 52] pusharglist 2 ........................... <0, -1000>
  [ 54] extcall 375 ............................. <point(0, -1000)>
  [ 57] pusharglistnoret 3 ...................... <pAvailableBalloons[tid], #loc, point(0, -1000)>
  [ 59] objcall 637 ............................. pAvailableBalloons[tid].set(#loc, point(0, -1000))
  [ 62] getprop 1510 ............................ <pVisibleBalloons>
  [ 65] getparam 1 .............................. <tid>
  [ 67] pusharglistnoret 2 ...................... <pVisibleBalloons, tid>
  [ 69] objcall 687 ............................. pVisibleBalloons.deleteProp(tid)
  [ 72] pushint8 1 .............................. <1>
  [ 74] pusharglistnoret 1 ...................... <1>
  [ 76] extcall 31 .............................. return 1
  [ 78] ret
end

on createBalloon me, tMsg
  [  0] getprop 1175 ............................ <pState>
  [  3] pushsymb 1508 ........................... <#normal>
  [  6] eq ...................................... <pState = #normal>
  [  7] jmpifz [364] ............................ if pState = #normal then / else
  [ 10] getprop 1511 ............................ <pAvailableBalloons>
  [ 13] getobjprop 33 ........................... <pAvailableBalloons.count>
  [ 15] pushzero ................................ <0>
  [ 16] gt ...................................... <pAvailableBalloons.count > 0>
  [ 17] jmpifz [323] ............................ if pAvailableBalloons.count > 0 then / else
  [ 20] pushsymb 52 ............................. <#room>
  [ 22] pusharglist 1 ........................... <#room>
  [ 24] extcall 51 .............................. <getThread(#room)>
  [ 26] pusharglist 1 ........................... <getThread(#room)>
  [ 28] objcall 115 ............................. <getThread(#room).getComponent()>
  [ 30] getparam 1 .............................. <tMsg>
  [ 32] pushsymb 459 ............................ <#id>
  [ 35] pusharglist 2 ........................... <tMsg, #id>
  [ 37] objcall 34 .............................. <tMsg[#id]>
  [ 39] pusharglist 2 ........................... <getThread(#room).getComponent(), tMsg[#id]>
  [ 41] objcall 337 ............................. <getThread(#room).getComponent().getUserObject(tMsg[#id])>
  [ 44] setlocal 0 .............................. tUserObj = getThread(#room).getComponent().getUserObject(tMsg[#id])
  [ 46] getlocal 0 .............................. <tUserObj>
  [ 48] not ..................................... <not tUserObj>
  [ 49] jmpifz [ 77] ............................ if not tUserObj then
  [ 52] getparam 0 .............................. <me>
  [ 54] pushcons 21 ............................. <"User object not found:">
  [ 56] getparam 1 .............................. <tMsg>
  [ 58] pushsymb 459 ............................ <#id>
  [ 61] pusharglist 2 ........................... <tMsg, #id>
  [ 63] objcall 34 .............................. <tMsg[#id]>
  [ 65] joinpadstr .............................. <"User object not found:" && tMsg[#id]>
  [ 66] pushsymb 836 ............................ <#createBalloon>
  [ 69] pusharglist 3 ........................... <me, "User object not found:" && tMsg[#id], #createBalloon>
  [ 71] extcall 72 .............................. <error(me, "User object not found:" && tMsg[#id], #createBalloon)>
  [ 73] pusharglistnoret 1 ...................... <error(me, "User object not found:" && tMsg[#id], #createBalloon)>
  [ 75] extcall 31 .............................. return error(me, "User object not found:" && tMsg[#id], #createBalloon)
  [ 77] getlocal 0 .............................. <tUserObj>
  [ 79] pushcons 22 ............................. <"ch">
  [ 81] pusharglist 2 ........................... <tUserObj, "ch">
  [ 83] objcall 1219 ............................ <tUserObj.getPartColor("ch")>
  [ 86] setprop 1565 ............................ pBalloonColor = tUserObj.getPartColor("ch")
  [ 89] getprop 1565 ............................ <pBalloonColor>
  [ 92] pusharglist 1 ........................... <pBalloonColor>
  [ 94] extcall 127 ............................. <ilk(pBalloonColor)>
  [ 96] pushsymb 97 ............................. <#color>
  [ 98] nteq .................................... <ilk(pBalloonColor) <> #color>
  [ 99] jmpifz [117] ............................ if ilk(pBalloonColor) <> #color then
  [102] pushint16 232 ........................... <232>
  [105] pushint16 177 ........................... <177>
  [108] pushint8 55 ............................. <55>
  [110] pusharglist 3 ........................... <232, 177, 55>
  [112] extcall 94 .............................. <rgb(232, 177, 55)>
  [114] setprop 1565 ............................ pBalloonColor = rgb(232, 177, 55)
  [117] getlocal 0 .............................. <tUserObj>
  [119] pushcons 23 ............................. <"hd">
  [121] pusharglist 2 ........................... <tUserObj, "hd">
  [123] objcall 1217 ............................ <tUserObj.getPartLocation("hd")>
  [126] setprop 1566 ............................ pHumanLoc = tUserObj.getPartLocation("hd")
  [129] getparam 1 .............................. <tMsg>
  [131] pushsymb 58 ............................. <#name>
  [133] getlocal 0 .............................. <tUserObj>
  [135] pusharglist 1 ........................... <tUserObj>
  [137] objcall 5 ............................... <tUserObj.getInfo()>
  [139] pushsymb 58 ............................. <#name>
  [141] pusharglist 2 ........................... <tUserObj.getInfo(), #name>
  [143] objcall 339 ............................. <tUserObj.getInfo().getaProp(#name)>
  [146] pusharglistnoret 3 ...................... <tMsg, #name, tUserObj.getInfo().getaProp(#name)>
  [148] objcall 717 ............................. tMsg.setaProp(#name, tUserObj.getInfo().getaProp(#name))
  [151] getprop 1511 ............................ <pAvailableBalloons>
  [154] pushint8 1 .............................. <1>
  [156] pusharglist 2 ........................... <pAvailableBalloons, 1>
  [158] objcall 423 ............................. <pAvailableBalloons.getPropAt(1)>
  [161] setprop 1561 ............................ pLastBalloonId = pAvailableBalloons.getPropAt(1)
  [164] getparam 1 .............................. <tMsg>
  [166] setprop 1567 ............................ pLastMsg = tMsg
  [169] getprop 1541 ............................ <pBalloonPulse>
  [172] pushsymb 1568 ........................... <#humanLoc>
  [175] getprop 1566 ............................ <pHumanLoc>
  [178] pusharglistnoret 3 ...................... <pBalloonPulse, #humanLoc, pHumanLoc>
  [180] objcall 637 ............................. pBalloonPulse.set(#humanLoc, pHumanLoc)
  [183] getprop 1541 ............................ <pBalloonPulse>
  [186] pushsymb 1569 ........................... <#stoploc>
  [189] getprop 1566 ............................ <pHumanLoc>
  [192] pushint8 1 .............................. <1>
  [194] pusharglist 2 ........................... <pHumanLoc, 1>
  [196] objcall 34 .............................. <pHumanLoc[1]>
  [198] getprop 1530 ............................ <pStartV>
  [201] pusharglist 2 ........................... <pHumanLoc[1], pStartV>
  [203] extcall 375 ............................. <point(pHumanLoc[1], pStartV)>
  [206] pusharglistnoret 3 ...................... <pBalloonPulse, #stoploc, point(pHumanLoc[1], pStartV)>
  [208] objcall 637 ............................. pBalloonPulse.set(#stoploc, point(pHumanLoc[1], pStartV))
  [211] getprop 1541 ............................ <pBalloonPulse>
  [214] pushsymb 1570 ........................... <#balloonColor>
  [217] getprop 1565 ............................ <pBalloonColor>
  [220] pusharglistnoret 3 ...................... <pBalloonPulse, #balloonColor, pBalloonColor>
  [222] objcall 637 ............................. pBalloonPulse.set(#balloonColor, pBalloonColor)
  [225] getprop 1541 ............................ <pBalloonPulse>
  [228] pushsymb 1571 ........................... <#BalloonId>
  [231] getprop 1561 ............................ <pLastBalloonId>
  [234] pusharglistnoret 3 ...................... <pBalloonPulse, #BalloonId, pLastBalloonId>
  [236] objcall 637 ............................. pBalloonPulse.set(#BalloonId, pLastBalloonId)
  [239] pushsymb 1572 ........................... <#definePulse>
  [242] getprop 1541 ............................ <pBalloonPulse>
  [245] pusharglistnoret 2 ...................... <#definePulse, pBalloonPulse>
  [247] extcall 281 ............................. call(#definePulse, pBalloonPulse)
  [250] pushzero ................................ <0>
  [251] setprop 1509 ............................ pScrollCounter = 0
  [254] pushsymb 1573 ........................... <#scroll>
  [257] setprop 1175 ............................ pState = #scroll
  [260] getprop 1512 ............................ <pBalloonBuffer>
  [263] pusharglist 1 ........................... <pBalloonBuffer>
  [265] objcall 33 .............................. <pBalloonBuffer.count()>
  [267] pushzero ................................ <0>
  [268] eq ...................................... <pBalloonBuffer.count() = 0>
  [269] jmpifz [281] ............................ if pBalloonBuffer.count() = 0 then / else
  [272] getprop 1507 ............................ <pScrollStep>
  [275] setprop 1518 ............................ pScrollBy = pScrollStep
  [278] jmp [309]
  [281] getprop 1512 ............................ <pBalloonBuffer>
  [284] pusharglist 1 ........................... <pBalloonBuffer>
  [286] objcall 33 .............................. <pBalloonBuffer.count()>
  [288] pushint8 2 .............................. <2>
  [290] lt ...................................... <pBalloonBuffer.count() < 2>
  [291] jmpifz [303] ............................ if pBalloonBuffer.count() < 2 then / else
  [294] getprop 1529 ............................ <pFastScrollStep>
  [297] setprop 1518 ............................ pScrollBy = pFastScrollStep
  [300] jmp [309]
  [303] getprop 1515 ............................ <pMoveOffsetV>
  [306] setprop 1518 ............................ pScrollBy = pMoveOffsetV
  [309] getparam 0 .............................. <me>
  [311] pusharglist 1 ........................... <me>
  [313] objcall 75 .............................. <me.getID()>
  [315] pusharglistnoret 1 ...................... <me.getID()>
  [317] extcall 728 ............................. receivePrepare(me.getID())
  [320] jmp [361]
  [323] getprop 1510 ............................ <pVisibleBalloons>
  [326] pusharglist 1 ........................... <pVisibleBalloons>
  [328] objcall 33 .............................. <pVisibleBalloons.count()>
  [330] pushzero ................................ <0>
  [331] gt ...................................... <pVisibleBalloons.count() > 0>
  [332] jmpifz [352] ............................ if pVisibleBalloons.count() > 0 then
  [335] getparam 0 .............................. <me>
  [337] getprop 1510 ............................ <pVisibleBalloons>
  [340] pushint8 1 .............................. <1>
  [342] pusharglist 2 ........................... <pVisibleBalloons, 1>
  [344] objcall 423 ............................. <pVisibleBalloons.getPropAt(1)>
  [347] pusharglistnoret 2 ...................... <me, pVisibleBalloons.getPropAt(1)>
  [349] objcall 1503 ............................ me.removeVisibleBalloon(pVisibleBalloons.getPropAt(1))
  [352] getparam 0 .............................. <me>
  [354] getparam 1 .............................. <tMsg>
  [356] pusharglistnoret 2 ...................... <me, tMsg>
  [358] objcall 836 ............................. me.createBalloon(tMsg)
  [361] jmp [397]
  [364] getprop 1175 ............................ <pState>
  [367] pushsymb 1573 ........................... <#scroll>
  [370] eq ...................................... <pState = #scroll>
  [371] jmpifz [397] ............................ if pState = #scroll then
  [374] getprop 1512 ............................ <pBalloonBuffer>
  [377] getparam 1 .............................. <tMsg>
  [379] pusharglist 2 ........................... <pBalloonBuffer, tMsg>
  [381] objcall 332 ............................. <pBalloonBuffer.getPos(tMsg)>
  [384] not ..................................... <not pBalloonBuffer.getPos(tMsg)>
  [385] jmpifz [397] ............................ if not pBalloonBuffer.getPos(tMsg) then
  [388] getprop 1512 ............................ <pBalloonBuffer>
  [391] getparam 1 .............................. <tMsg>
  [393] pusharglistnoret 2 ...................... <pBalloonBuffer, tMsg>
  [395] objcall 88 .............................. pBalloonBuffer.add(tMsg)
  [397] ret
end

on showNewBalloon me
  [  0] getprop 1567 ............................ <pLastMsg>
  [  3] setlocal 0 .............................. tMsg = pLastMsg
  [  5] getprop 1561 ............................ <pLastBalloonId>
  [  8] pusharglist 1 ........................... <pLastBalloonId>
  [ 10] extcall 120 ............................. <voidp(pLastBalloonId)>
  [ 12] jmpifz [ 19] ............................ if voidp(pLastBalloonId) then
  [ 15] pusharglistnoret 0 ...................... <>
  [ 17] extcall 31 .............................. return 
  [ 19] getprop 1511 ............................ <pAvailableBalloons>
  [ 22] pushint8 1 .............................. <1>
  [ 24] pusharglist 2 ........................... <pAvailableBalloons, 1>
  [ 26] objcall 34 .............................. <pAvailableBalloons[1]>
  [ 28] setlocal 1 .............................. tNewBalloon = pAvailableBalloons[1]
  [ 30] getprop 1510 ............................ <pVisibleBalloons>
  [ 33] getprop 1561 ............................ <pLastBalloonId>
  [ 36] getlocal 1 .............................. <tNewBalloon>
  [ 38] pusharglistnoret 3 ...................... <pVisibleBalloons, pLastBalloonId, tNewBalloon>
  [ 40] objcall 744 ............................. pVisibleBalloons.addProp(pLastBalloonId, tNewBalloon)
  [ 43] getprop 1511 ............................ <pAvailableBalloons>
  [ 46] getprop 1561 ............................ <pLastBalloonId>
  [ 49] pusharglistnoret 2 ...................... <pAvailableBalloons, pLastBalloonId>
  [ 51] objcall 687 ............................. pAvailableBalloons.deleteProp(pLastBalloonId)
  [ 54] getprop 1510 ............................ <pVisibleBalloons>
  [ 57] getprop 1561 ............................ <pLastBalloonId>
  [ 60] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [ 62] objcall 34 .............................. <pVisibleBalloons[pLastBalloonId]>
  [ 64] pushsymb 64 ............................. <#member>
  [ 66] pusharglist 2 ........................... <pVisibleBalloons[pLastBalloonId], #member>
  [ 68] objcall 133 ............................. <pVisibleBalloons[pLastBalloonId].get(#member)>
  [ 70] pusharglist 1 ........................... <pVisibleBalloons[pLastBalloonId].get(#member)>
  [ 72] extcall 64 .............................. <member(pVisibleBalloons[pLastBalloonId].get(#member))>
  [ 74] setlocal 2 .............................. tmember = member(pVisibleBalloons[pLastBalloonId].get(#member))
  [ 76] getprop 1510 ............................ <pVisibleBalloons>
  [ 79] getprop 1561 ............................ <pLastBalloonId>
  [ 82] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [ 84] objcall 34 .............................. <pVisibleBalloons[pLastBalloonId]>
  [ 86] pushsymb 1570 ........................... <#balloonColor>
  [ 89] getprop 1565 ............................ <pBalloonColor>
  [ 92] pusharglistnoret 3 ...................... <pVisibleBalloons[pLastBalloonId], #balloonColor, pBalloonColor>
  [ 94] objcall 637 ............................. pVisibleBalloons[pLastBalloonId].set(#balloonColor, pBalloonColor)
  [ 97] getlocal 2 .............................. <tmember>
  [ 99] getparam 0 .............................. <me>
  [101] getlocal 0 .............................. <tMsg>
  [103] pushsymb 58 ............................. <#name>
  [105] pusharglist 2 ........................... <tMsg, #name>
  [107] objcall 34 .............................. <tMsg[#name]>
  [109] getlocal 0 .............................. <tMsg>
  [111] pushsymb 835 ............................ <#message>
  [114] pusharglist 2 ........................... <tMsg, #message>
  [116] objcall 34 .............................. <tMsg[#message]>
  [118] getprop 1565 ............................ <pBalloonColor>
  [121] getlocal 0 .............................. <tMsg>
  [123] pushsymb 834 ............................ <#command>
  [126] pusharglist 2 ........................... <tMsg, #command>
  [128] objcall 34 .............................. <tMsg[#command]>
  [130] pusharglist 5 ........................... <me, tMsg[#name], tMsg[#message], pBalloonColor, tMsg[#command]>
  [132] objcall 1499 ............................ <me.createballoonImg(tMsg[#name], tMsg[#message], pBalloonColor, tMsg[#command])>
  [135] setobjprop 63 ........................... tmember.image = me.createballoonImg(tMsg[#name], tMsg[#message], pBalloonColor, tMsg[#command])
  [137] getlocal 2 .............................. <tmember>
  [139] getlocal 2 .............................. <tmember>
  [141] getobjprop 118 .......................... <tmember.regPoint>
  [143] pushzero ................................ <0>
  [144] getlocal 2 .............................. <tmember>
  [146] getchainedprop 63 ....................... <tmember.image>
  [148] getobjprop 81 ........................... <tmember.image.height>
  [150] pushint8 2 .............................. <2>
  [152] div ..................................... <tmember.image.height / 2>
  [153] pusharglist 2 ........................... <0, tmember.image.height / 2>
  [155] extcall 375 ............................. <point(0, tmember.image.height / 2)>
  [158] add ..................................... <tmember.regPoint + point(0, tmember.image.height / 2)>
  [159] setobjprop 118 .......................... tmember.regPoint = tmember.regPoint + point(0, tmember.image.height / 2)
  [161] pushcons 24 ............................. <"balloons.leftmargin">
  [163] pushzero ................................ <0>
  [164] pusharglist 2 ........................... <"balloons.leftmargin", 0>
  [166] extcall 140 ............................. <getIntVariable("balloons.leftmargin", 0)>
  [168] setprop 1574 ............................ pBalloonLeftMarg = getIntVariable("balloons.leftmargin", 0)
  [171] pushcons 25 ............................. <"balloons.rightmargin">
  [173] pushint16 720 ........................... <720>
  [176] pusharglist 2 ........................... <"balloons.rightmargin", 720>
  [178] extcall 140 ............................. <getIntVariable("balloons.rightmargin", 720)>
  [180] setprop 1575 ............................ pBalloonRightMarg = getIntVariable("balloons.rightmargin", 720)
  [183] getprop 1566 ............................ <pHumanLoc>
  [186] getobjprop 112 .......................... <pHumanLoc.locH>
  [188] getlocal 2 .............................. <tmember>
  [190] getchainedprop 63 ....................... <tmember.image>
  [192] getobjprop 80 ........................... <tmember.image.width>
  [194] pushint8 2 .............................. <2>
  [196] div ..................................... <tmember.image.width / 2>
  [197] add ..................................... <pHumanLoc.locH + (tmember.image.width / 2)>
  [198] getprop 1575 ............................ <pBalloonRightMarg>
  [201] gt ...................................... <(pHumanLoc.locH + (tmember.image.width / 2)) > pBalloonRightMarg>
  [202] jmpifz [223] ............................ if (pHumanLoc.locH + (tmember.image.width / 2)) > pBalloonRightMarg then / else
  [205] getprop 1575 ............................ <pBalloonRightMarg>
  [208] getlocal 2 .............................. <tmember>
  [210] getchainedprop 63 ....................... <tmember.image>
  [212] getobjprop 80 ........................... <tmember.image.width>
  [214] pushint8 2 .............................. <2>
  [216] div ..................................... <tmember.image.width / 2>
  [217] sub ..................................... <pBalloonRightMarg - (tmember.image.width / 2)>
  [218] setlocal 3 .............................. tStartH = pBalloonRightMarg - (tmember.image.width / 2)
  [220] jmp [270]
  [223] getprop 1566 ............................ <pHumanLoc>
  [226] getobjprop 112 .......................... <pHumanLoc.locH>
  [228] getlocal 2 .............................. <tmember>
  [230] getchainedprop 63 ....................... <tmember.image>
  [232] getobjprop 80 ........................... <tmember.image.width>
  [234] pushint8 2 .............................. <2>
  [236] div ..................................... <tmember.image.width / 2>
  [237] sub ..................................... <pHumanLoc.locH - (tmember.image.width / 2)>
  [238] getprop 1574 ............................ <pBalloonLeftMarg>
  [241] lt ...................................... <(pHumanLoc.locH - (tmember.image.width / 2)) < pBalloonLeftMarg>
  [242] jmpifz [263] ............................ if (pHumanLoc.locH - (tmember.image.width / 2)) < pBalloonLeftMarg then / else
  [245] getprop 1574 ............................ <pBalloonLeftMarg>
  [248] getlocal 2 .............................. <tmember>
  [250] getchainedprop 63 ....................... <tmember.image>
  [252] getobjprop 80 ........................... <tmember.image.width>
  [254] pushint8 2 .............................. <2>
  [256] div ..................................... <tmember.image.width / 2>
  [257] add ..................................... <pBalloonLeftMarg + (tmember.image.width / 2)>
  [258] setlocal 3 .............................. tStartH = pBalloonLeftMarg + (tmember.image.width / 2)
  [260] jmp [270]
  [263] getprop 1566 ............................ <pHumanLoc>
  [266] getobjprop 112 .......................... <pHumanLoc.locH>
  [268] setlocal 3 .............................. tStartH = pHumanLoc.locH
  [270] getprop 1510 ............................ <pVisibleBalloons>
  [273] getprop 1561 ............................ <pLastBalloonId>
  [276] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [278] objcall 34 .............................. <pVisibleBalloons[pLastBalloonId]>
  [280] pushsymb 435 ............................ <#loc>
  [283] getlocal 3 .............................. <tStartH>
  [285] getprop 1530 ............................ <pStartV>
  [288] pusharglist 2 ........................... <tStartH, pStartV>
  [290] extcall 375 ............................. <point(tStartH, pStartV)>
  [293] pusharglistnoret 3 ...................... <pVisibleBalloons[pLastBalloonId], #loc, point(tStartH, pStartV)>
  [295] objcall 637 ............................. pVisibleBalloons[pLastBalloonId].set(#loc, point(tStartH, pStartV))
  [298] getprop 1510 ............................ <pVisibleBalloons>
  [301] getprop 1561 ............................ <pLastBalloonId>
  [304] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [306] objcall 34 .............................. <pVisibleBalloons[pLastBalloonId]>
  [308] pushsymb 1576 ........................... <#ownerID>
  [311] getlocal 0 .............................. <tMsg>
  [313] pushsymb 459 ............................ <#id>
  [316] pusharglist 2 ........................... <tMsg, #id>
  [318] objcall 34 .............................. <tMsg[#id]>
  [320] pusharglistnoret 3 ...................... <pVisibleBalloons[pLastBalloonId], #ownerID, tMsg[#id]>
  [322] objcall 637 ............................. pVisibleBalloons[pLastBalloonId].set(#ownerID, tMsg[#id])
  [325] pushsymb 1577 ........................... <#defineBalloon>
  [328] getprop 1510 ............................ <pVisibleBalloons>
  [331] getprop 1561 ............................ <pLastBalloonId>
  [334] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [336] objcall 34 .............................. <pVisibleBalloons[pLastBalloonId]>
  [338] pusharglistnoret 2 ...................... <#defineBalloon, pVisibleBalloons[pLastBalloonId]>
  [340] extcall 281 ............................. call(#defineBalloon, pVisibleBalloons[pLastBalloonId])
  [343] ret
end

on prepare me
  [  0] getprop 1175 ............................ <pState>
  [  3] pushsymb 1573 ........................... <#scroll>
  [  6] eq ...................................... <pState = #scroll>
  [  7] jmpifz [214] ............................ if pState = #scroll then
  [ 10] getprop 1509 ............................ <pScrollCounter>
  [ 13] getprop 1518 ............................ <pScrollBy>
  [ 16] add ..................................... <pScrollCounter + pScrollBy>
  [ 17] getprop 1515 ............................ <pMoveOffsetV>
  [ 20] lteq .................................... <(pScrollCounter + pScrollBy) <= pMoveOffsetV>
  [ 21] jmpifz [ 85] ............................ if (pScrollCounter + pScrollBy) <= pMoveOffsetV then / else
  [ 24] getprop 1509 ............................ <pScrollCounter>
  [ 27] getprop 1518 ............................ <pScrollBy>
  [ 30] add ..................................... <pScrollCounter + pScrollBy>
  [ 31] setprop 1509 ............................ pScrollCounter = pScrollCounter + pScrollBy
  [ 34] pushsymb 1580 ........................... <#UpdateBalloonPos>
  [ 37] getprop 1510 ............................ <pVisibleBalloons>
  [ 40] getprop 1518 ............................ <pScrollBy>
  [ 43] inv ..................................... <-pScrollBy>
  [ 44] pusharglistnoret 3 ...................... <#UpdateBalloonPos, pVisibleBalloons, -pScrollBy>
  [ 46] extcall 281 ............................. call(#UpdateBalloonPos, pVisibleBalloons, -pScrollBy)
  [ 49] getprop 1561 ............................ <pLastBalloonId>
  [ 52] pusharglist 1 ........................... <pLastBalloonId>
  [ 54] extcall 120 ............................. <voidp(pLastBalloonId)>
  [ 56] not ..................................... <not voidp(pLastBalloonId)>
  [ 57] jmpifz [ 82] ............................ if not voidp(pLastBalloonId) then
  [ 60] pushsymb 1581 ........................... <#OpeningBalloon>
  [ 63] getprop 1541 ............................ <pBalloonPulse>
  [ 66] getprop 1509 ............................ <pScrollCounter>
  [ 69] inv ..................................... <-pScrollCounter>
  [ 70] getprop 1518 ............................ <pScrollBy>
  [ 73] pushint8 2 .............................. <2>
  [ 75] mul ..................................... <pScrollBy * 2>
  [ 76] mul ..................................... <-pScrollCounter * (pScrollBy * 2)>
  [ 77] pusharglistnoret 3 ...................... <#OpeningBalloon, pBalloonPulse, -pScrollCounter * (pScrollBy * 2)>
  [ 79] extcall 281 ............................. call(#OpeningBalloon, pBalloonPulse, -pScrollCounter * (pScrollBy * 2))
  [ 82] jmp [214]
  [ 85] getprop 1561 ............................ <pLastBalloonId>
  [ 88] pusharglist 1 ........................... <pLastBalloonId>
  [ 90] extcall 120 ............................. <voidp(pLastBalloonId)>
  [ 92] not ..................................... <not voidp(pLastBalloonId)>
  [ 93] jmpifz [103] ............................ if not voidp(pLastBalloonId) then
  [ 96] getparam 0 .............................. <me>
  [ 98] pusharglistnoret 1 ...................... <me>
  [100] objcall 1504 ............................ me.showNewBalloon()
  [103] getparam 0 .............................. <me>
  [105] pusharglist 1 ........................... <me>
  [107] objcall 75 .............................. <me.getID()>
  [109] pusharglistnoret 1 ...................... <me.getID()>
  [111] extcall 649 ............................. removePrepare(me.getID())
  [114] pushzero ................................ <0>
  [115] setprop 1509 ............................ pScrollCounter = 0
  [118] pushsymb 1508 ........................... <#normal>
  [121] setprop 1175 ............................ pState = #normal
  [124] getprop 1512 ............................ <pBalloonBuffer>
  [127] pusharglist 1 ........................... <pBalloonBuffer>
  [129] objcall 33 .............................. <pBalloonBuffer.count()>
  [131] pushzero ................................ <0>
  [132] gt ...................................... <pBalloonBuffer.count() > 0>
  [133] jmpifz [169] ............................ if pBalloonBuffer.count() > 0 then / else
  [136] getprop 1512 ............................ <pBalloonBuffer>
  [139] pushint8 1 .............................. <1>
  [141] pusharglist 2 ........................... <pBalloonBuffer, 1>
  [143] objcall 34 .............................. <pBalloonBuffer[1]>
  [145] setlocal 0 .............................. tMsg = pBalloonBuffer[1]
  [147] getprop 1512 ............................ <pBalloonBuffer>
  [150] pushint8 1 .............................. <1>
  [152] pusharglistnoret 2 ...................... <pBalloonBuffer, 1>
  [154] objcall 841 ............................. pBalloonBuffer.deleteAt(1)
  [157] getparam 0 .............................. <me>
  [159] getlocal 0 .............................. <tMsg>
  [161] pusharglistnoret 2 ...................... <me, tMsg>
  [163] objcall 836 ............................. me.createBalloon(tMsg)
  [166] jmp [214]
  [169] pushsymb 1540 ........................... <#balloonautoscroll>
  [172] pusharglist 1 ........................... <#balloonautoscroll>
  [174] extcall 324 ............................. <timeoutExists(#balloonautoscroll)>
  [177] jmpifz [188] ............................ if timeoutExists(#balloonautoscroll) then
  [180] pushsymb 1540 ........................... <#balloonautoscroll>
  [183] pusharglistnoret 1 ...................... <#balloonautoscroll>
  [185] extcall 326 ............................. removeTimeout(#balloonautoscroll)
  [188] pushsymb 1540 ........................... <#balloonautoscroll>
  [191] getprop 1506 ............................ <pAutoScrollTime>
  [194] pushsymb 1505 ........................... <#timeToScrollLines>
  [197] getparam 0 .............................. <me>
  [199] pusharglist 1 ........................... <me>
  [201] objcall 75 .............................. <me.getID()>
  [203] pusharglist 0 ........................... <>
  [205] extcall 30 .............................. <VOID>
  [207] pushint8 1 .............................. <1>
  [209] pusharglistnoret 6 ...................... <#balloonautoscroll, pAutoScrollTime, #timeToScrollLines, me.getID(), VOID, 1>
  [211] extcall 477 ............................. createTimeout(#balloonautoscroll, pAutoScrollTime, #timeToScrollLines, me.getID(), VOID, 1)
  [214] ret
end

on timeToScrollLines me
  [  0] getprop 1175 ............................ <pState>
  [  3] pushsymb 1508 ........................... <#normal>
  [  6] eq ...................................... <pState = #normal>
  [  7] getprop 1510 ............................ <pVisibleBalloons>
  [ 10] pusharglist 1 ........................... <pVisibleBalloons>
  [ 12] objcall 33 .............................. <pVisibleBalloons.count()>
  [ 14] pushzero ................................ <0>
  [ 15] gt ...................................... <pVisibleBalloons.count() > 0>
  [ 16] and ..................................... <(pState = #normal) and (pVisibleBalloons.count() > 0)>
  [ 17] jmpifz [ 48] ............................ if (pState = #normal) and (pVisibleBalloons.count() > 0) then
  [ 20] pusharglist 0 ........................... <>
  [ 22] extcall 30 .............................. <VOID>
  [ 24] setprop 1561 ............................ pLastBalloonId = VOID
  [ 27] pushzero ................................ <0>
  [ 28] setprop 1509 ............................ pScrollCounter = 0
  [ 31] pushsymb 1573 ........................... <#scroll>
  [ 34] setprop 1175 ............................ pState = #scroll
  [ 37] getparam 0 .............................. <me>
  [ 39] pusharglist 1 ........................... <me>
  [ 41] objcall 75 .............................. <me.getID()>
  [ 43] pusharglistnoret 1 ...................... <me.getID()>
  [ 45] extcall 728 ............................. receivePrepare(me.getID())
  [ 48] ret
end

on setProperty me, tMode, tProp, tValue
  [  0] getprop 1519 ............................ <pTextMembers>
  [  3] getparam 1 .............................. <tMode>
  [  5] pusharglist 2 ........................... <pTextMembers, tMode>
  [  7] objcall 34 .............................. <pTextMembers[tMode]>
  [  9] pushint8 1 .............................. <1>
  [ 11] lt ...................................... <pTextMembers[tMode] < 1>
  [ 12] jmpifz [ 20] ............................ if pTextMembers[tMode] < 1 then
  [ 15] pushzero ................................ <0>
  [ 16] pusharglistnoret 1 ...................... <0>
  [ 18] extcall 31 .............................. return 0
  [ 20] getprop 1519 ............................ <pTextMembers>
  [ 23] getparam 1 .............................. <tMode>
  [ 25] pusharglist 2 ........................... <pTextMembers, tMode>
  [ 27] objcall 34 .............................. <pTextMembers[tMode]>
  [ 29] setlocal 0 .............................. tmember = pTextMembers[tMode]
  [ 31] getparam 2 .............................. <tProp>
  [ 33] peek 0 .................................. case tProp of
  [ 35] pushsymb 1522 ........................... <#wordWrap>
  [ 38] eq
  [ 39] jmpifz [ 52] ............................ (case) #wordWrap:
  [ 42] getlocal 0 .............................. <tmember>
  [ 44] getparam 3 .............................. <tValue>
  [ 46] setobjprop 1522 ......................... tmember.wordWrap = tValue
  [ 49] jmp [171]
  [ 52] peek 0
  [ 54] pushsymb 1524 ........................... <#boxType>
  [ 57] eq
  [ 58] jmpifz [ 71] ............................ (case) #boxType:
  [ 61] getlocal 0 .............................. <tmember>
  [ 63] getparam 3 .............................. <tValue>
  [ 65] setobjprop 1524 ......................... tmember.boxType = tValue
  [ 68] jmp [171]
  [ 71] peek 0
  [ 73] pushsymb 1525 ........................... <#antialias>
  [ 76] eq
  [ 77] jmpifz [ 90] ............................ (case) #antialias:
  [ 80] getlocal 0 .............................. <tmember>
  [ 82] getparam 3 .............................. <tValue>
  [ 84] setobjprop 1525 ......................... tmember.antialias = tValue
  [ 87] jmp [171]
  [ 90] peek 0
  [ 92] pushsymb 1526 ........................... <#font>
  [ 95] eq
  [ 96] jmpifz [109] ............................ (case) #font:
  [ 99] getlocal 0 .............................. <tmember>
  [101] getparam 3 .............................. <tValue>
  [103] setobjprop 1526 ......................... tmember.font = tValue
  [106] jmp [171]
  [109] peek 0
  [111] pushsymb 1527 ........................... <#fontSize>
  [114] eq
  [115] jmpifz [128] ............................ (case) #fontSize:
  [118] getlocal 0 .............................. <tmember>
  [120] getparam 3 .............................. <tValue>
  [122] setobjprop 1527 ......................... tmember.fontSize = tValue
  [125] jmp [171]
  [128] peek 0
  [130] pushsymb 1528 ........................... <#fontStyle>
  [133] eq
  [134] jmpifz [147] ............................ (case) #fontStyle:
  [137] getlocal 0 .............................. <tmember>
  [139] getparam 3 .............................. <tValue>
  [141] setobjprop 1528 ......................... tmember.fontStyle = tValue
  [144] jmp [171]
  [147] peek 0
  [149] pushsymb 97 ............................. <#color>
  [151] eq
  [152] jmpifz [164] ............................ (case) #color:
  [155] getlocal 0 .............................. <tmember>
  [157] getparam 3 .............................. <tValue>
  [159] setobjprop 97 ........................... tmember.color = tValue
  [161] jmp [171] ............................... (case) otherwise:
  [164] pop 1
  [166] pushzero ................................ <0>
  [167] pusharglistnoret 1 ...................... <0>
  [169] extcall 31 .............................. return 0
  [171] pop 1 ................................... end case
  [173] ret
end

on flipH me, tImg
  [  0] getparam 1 .............................. <tImg>
  [  2] getobjprop 80 ........................... <tImg.width>
  [  4] getparam 1 .............................. <tImg>
  [  6] getobjprop 81 ........................... <tImg.height>
  [  8] getparam 1 .............................. <tImg>
  [ 10] getobjprop 1191 ......................... <tImg.depth>
  [ 13] pusharglist 3 ........................... <tImg.width, tImg.height, tImg.depth>
  [ 15] extcall 63 .............................. <image(tImg.width, tImg.height, tImg.depth)>
  [ 17] setlocal 0 .............................. tImage = image(tImg.width, tImg.height, tImg.depth)
  [ 19] getparam 1 .............................. <tImg>
  [ 21] getobjprop 80 ........................... <tImg.width>
  [ 23] pushzero ................................ <0>
  [ 24] pusharglist 2 ........................... <tImg.width, 0>
  [ 26] extcall 375 ............................. <point(tImg.width, 0)>
  [ 29] pushzero ................................ <0>
  [ 30] pushzero ................................ <0>
  [ 31] pusharglist 2 ........................... <0, 0>
  [ 33] extcall 375 ............................. <point(0, 0)>
  [ 36] pushzero ................................ <0>
  [ 37] getparam 1 .............................. <tImg>
  [ 39] getobjprop 81 ........................... <tImg.height>
  [ 41] pusharglist 2 ........................... <0, tImg.height>
  [ 43] extcall 375 ............................. <point(0, tImg.height)>
  [ 46] getparam 1 .............................. <tImg>
  [ 48] getobjprop 80 ........................... <tImg.width>
  [ 50] getparam 1 .............................. <tImg>
  [ 52] getobjprop 81 ........................... <tImg.height>
  [ 54] pusharglist 2 ........................... <tImg.width, tImg.height>
  [ 56] extcall 375 ............................. <point(tImg.width, tImg.height)>
  [ 59] pusharglist 4 ........................... <[point(tImg.width, 0), point(0, 0), point(0, tImg.height), point(tImg.width, tImg.height)]>
  [ 61] pushlist ................................ <[point(tImg.width, 0), point(0, 0), point(0, tImg.height), point(tImg.width, tImg.height)]>
  [ 62] setlocal 1 .............................. tQuad = [point(tImg.width, 0), point(0, 0), point(0, tImg.height), point(tImg.width, tImg.height)]
  [ 64] getlocal 0 .............................. <tImage>
  [ 66] getparam 1 .............................. <tImg>
  [ 68] getlocal 1 .............................. <tQuad>
  [ 70] getparam 1 .............................. <tImg>
  [ 72] getobjprop 137 .......................... <tImg.rect>
  [ 74] pusharglistnoret 4 ...................... <tImage, tImg, tQuad, tImg.rect>
  [ 76] objcall 400 ............................. tImage.copyPixels(tImg, tQuad, tImg.rect)
  [ 79] getlocal 0 .............................. <tImage>
  [ 81] pusharglistnoret 1 ...................... <tImage>
  [ 83] extcall 31 .............................. return tImage
  [ 85] ret
end

on flipV me, tImg
  [  0] getparam 1 .............................. <tImg>
  [  2] getobjprop 80 ........................... <tImg.width>
  [  4] getparam 1 .............................. <tImg>
  [  6] getobjprop 81 ........................... <tImg.height>
  [  8] getparam 1 .............................. <tImg>
  [ 10] getobjprop 1191 ......................... <tImg.depth>
  [ 13] pusharglist 3 ........................... <tImg.width, tImg.height, tImg.depth>
  [ 15] extcall 63 .............................. <image(tImg.width, tImg.height, tImg.depth)>
  [ 17] setlocal 0 .............................. tImage = image(tImg.width, tImg.height, tImg.depth)
  [ 19] pushzero ................................ <0>
  [ 20] getparam 1 .............................. <tImg>
  [ 22] getobjprop 81 ........................... <tImg.height>
  [ 24] pusharglist 2 ........................... <0, tImg.height>
  [ 26] extcall 375 ............................. <point(0, tImg.height)>
  [ 29] getparam 1 .............................. <tImg>
  [ 31] getobjprop 80 ........................... <tImg.width>
  [ 33] getparam 1 .............................. <tImg>
  [ 35] getobjprop 81 ........................... <tImg.height>
  [ 37] pusharglist 2 ........................... <tImg.width, tImg.height>
  [ 39] extcall 375 ............................. <point(tImg.width, tImg.height)>
  [ 42] getparam 1 .............................. <tImg>
  [ 44] getobjprop 80 ........................... <tImg.width>
  [ 46] pushzero ................................ <0>
  [ 47] pusharglist 2 ........................... <tImg.width, 0>
  [ 49] extcall 375 ............................. <point(tImg.width, 0)>
  [ 52] pushzero ................................ <0>
  [ 53] pushzero ................................ <0>
  [ 54] pusharglist 2 ........................... <0, 0>
  [ 56] extcall 375 ............................. <point(0, 0)>
  [ 59] pusharglist 4 ........................... <[point(0, tImg.height), point(tImg.width, tImg.height), point(tImg.width, 0), point(0, 0)]>
  [ 61] pushlist ................................ <[point(0, tImg.height), point(tImg.width, tImg.height), point(tImg.width, 0), point(0, 0)]>
  [ 62] setlocal 1 .............................. tQuad = [point(0, tImg.height), point(tImg.width, tImg.height), point(tImg.width, 0), point(0, 0)]
  [ 64] getlocal 0 .............................. <tImage>
  [ 66] getparam 1 .............................. <tImg>
  [ 68] getlocal 1 .............................. <tQuad>
  [ 70] getparam 1 .............................. <tImg>
  [ 72] getobjprop 137 .......................... <tImg.rect>
  [ 74] pusharglistnoret 4 ...................... <tImage, tImg, tQuad, tImg.rect>
  [ 76] objcall 400 ............................. tImage.copyPixels(tImg, tQuad, tImg.rect)
  [ 79] getlocal 0 .............................. <tImage>
  [ 81] pusharglistnoret 1 ...................... <tImage>
  [ 83] extcall 31 .............................. return tImage
  [ 85] ret
end
