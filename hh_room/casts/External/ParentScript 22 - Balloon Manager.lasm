property pState, pTextMembers, pScrollCounter, pAvailableBalloons, pVisibleBalloons, pMaxBalloons, pBalloonPulse, pBalloonBuffer, pBalloonImg, pMarginH, pMarginV, pMaxWidth, pMaxCharNum, pAutoScrollTime, pScrollStep, pFastScrollStep, pStartV, pFirstLocz, pMoveOffsetV, pLastBalloonId, pScrollBy, pBalloonColor, pHumanLoc, pLastMsg, pBalloonLeftMarg, pBalloonRightMarg, pReservedSprites, pDefaultTextColor

on construct me
  [  0] pushcons 0 .............................. <"chat.balloon.scrolltime">
  [  2] pusharglist 1 ........................... <"chat.balloon.scrolltime">
  [  4] extcall 239 ............................. <variableExists("chat.balloon.scrolltime")>
  [  6] jmpifz [ 22] ............................ if variableExists("chat.balloon.scrolltime") then / else
  [  9] pushcons 0 .............................. <"chat.balloon.scrolltime">
  [ 11] pusharglist 1 ........................... <"chat.balloon.scrolltime">
  [ 13] extcall 1481 ............................ <getIntVariable("chat.balloon.scrolltime")>
  [ 16] setprop 1511 ............................ pAutoScrollTime = getIntVariable("chat.balloon.scrolltime")
  [ 19] jmp [ 28]
  [ 22] pushint16 4000 .......................... <4000>
  [ 25] setprop 1511 ............................ pAutoScrollTime = 4000
  [ 28] pushcons 1 .............................. <"chat.balloon.scrollstep">
  [ 30] pusharglist 1 ........................... <"chat.balloon.scrollstep">
  [ 32] extcall 239 ............................. <variableExists("chat.balloon.scrollstep")>
  [ 34] jmpifz [ 50] ............................ if variableExists("chat.balloon.scrollstep") then / else
  [ 37] pushcons 1 .............................. <"chat.balloon.scrollstep">
  [ 39] pusharglist 1 ........................... <"chat.balloon.scrollstep">
  [ 41] extcall 1481 ............................ <getIntVariable("chat.balloon.scrollstep")>
  [ 44] setprop 1512 ............................ pScrollStep = getIntVariable("chat.balloon.scrollstep")
  [ 47] jmp [ 55]
  [ 50] pushint8 3 .............................. <3>
  [ 52] setprop 1512 ............................ pScrollStep = 3
  [ 55] pushsymb 1513 ........................... <#normal>
  [ 58] setprop 11 .............................. pState = #normal
  [ 60] pushzero ................................ <0>
  [ 61] setprop 1514 ............................ pScrollCounter = 0
  [ 64] pusharglist 0 ........................... <[:]>
  [ 66] pushproplist ............................ <[:]>
  [ 67] setprop 1515 ............................ pVisibleBalloons = [:]
  [ 70] pusharglist 0 ........................... <[:]>
  [ 72] pushproplist ............................ <[:]>
  [ 73] setprop 1516 ............................ pAvailableBalloons = [:]
  [ 76] pusharglist 0 ........................... <[]>
  [ 78] pushlist ................................ <[]>
  [ 79] setprop 1517 ............................ pBalloonBuffer = []
  [ 82] pushint8 6 .............................. <6>
  [ 84] pushint8 1 .............................. <1>
  [ 86] add ..................................... <6 + 1>
  [ 87] setprop 1518 ............................ pMaxBalloons = 6 + 1
  [ 90] pushcons 2 .............................. <"window.default.locz">
  [ 92] pusharglist 1 ........................... <"window.default.locz">
  [ 94] extcall 1481 ............................ <getIntVariable("window.default.locz")>
  [ 97] pushint16 2000 .......................... <2000>
  [100] sub ..................................... <getIntVariable("window.default.locz") - 2000>
  [101] getprop 1518 ............................ <pMaxBalloons>
  [104] sub ..................................... <getIntVariable("window.default.locz") - 2000 - pMaxBalloons>
  [105] setprop 1519 ............................ pFirstLocz = getIntVariable("window.default.locz") - 2000 - pMaxBalloons
  [108] pushint8 21 ............................. <21>
  [110] setprop 1520 ............................ pMoveOffsetV = 21
  [113] pushint8 8 .............................. <8>
  [115] setprop 1521 ............................ pMarginH = 8
  [118] pushint8 5 .............................. <5>
  [120] setprop 1522 ............................ pMarginV = 5
  [123] getprop 1512 ............................ <pScrollStep>
  [126] setprop 1523 ............................ pScrollBy = pScrollStep
  [129] pusharglist 0 ........................... <[:]>
  [131] pushproplist ............................ <[:]>
  [132] setprop 1524 ............................ pTextMembers = [:]
  [135] pushzero ................................ <0>
  [136] pushzero ................................ <0>
  [137] pushzero ................................ <0>
  [138] pusharglist 3 ........................... <0, 0, 0>
  [140] extcall 312 ............................. <rgb(0, 0, 0)>
  [143] setprop 1525 ............................ pDefaultTextColor = rgb(0, 0, 0)
  [146] pushcons 3 .............................. <"balloon.margin.offset.v">
  [148] pusharglist 1 ........................... <"balloon.margin.offset.v">
  [150] extcall 239 ............................. <variableExists("balloon.margin.offset.v")>
  [152] jmpifz [168] ............................ if variableExists("balloon.margin.offset.v") then
  [155] getprop 1522 ............................ <pMarginV>
  [158] pushcons 3 .............................. <"balloon.margin.offset.v">
  [160] pusharglist 1 ........................... <"balloon.margin.offset.v">
  [162] extcall 121 ............................. <getVariable("balloon.margin.offset.v")>
  [164] add ..................................... <pMarginV + getVariable("balloon.margin.offset.v")>
  [165] setprop 1522 ............................ pMarginV = pMarginV + getVariable("balloon.margin.offset.v")
  [168] pushcons 4 .............................. <"CHAT">
  [170] pushcons 5 .............................. <"plain">
  [172] pushcons 6 .............................. <"SHOUT">
  [174] pushcons 7 .............................. <"bold">
  [176] pushcons 8 .............................. <"WHISPER">
  [178] pushcons 9 .............................. <"italic">
  [180] pusharglist 6 ........................... <["CHAT": "plain", "SHOUT": "bold", "WHISPER": "italic"]>
  [182] pushproplist ............................ <["CHAT": "plain", "SHOUT": "bold", "WHISPER": "italic"]>
  [183] setlocal 0 .............................. tVariations = ["CHAT": "plain", "SHOUT": "bold", "WHISPER": "italic"]
  [185] pushint8 1 .............................. <1>
  [187] setlocal 1
  [189] getlocal 1
  [191] getlocal 0 .............................. <tVariations>
  [193] getobjprop 14 ........................... <tVariations.count>
  [195] lteq
  [196] jmpifz [332] ............................ repeat with i = 1 to tVariations.count
  [199] pushcons 10 ............................. <"struct.font.">
  [201] getlocal 0 .............................. <tVariations>
  [203] getlocal 1 .............................. <i>
  [205] pusharglist 2 ........................... <tVariations, i>
  [207] objcall 9 ............................... <tVariations[i]>
  [209] joinstr ................................. <"struct.font." & tVariations[i]>
  [210] pusharglist 1 ........................... <"struct.font." & tVariations[i]>
  [212] extcall 1526 ............................ <getStructVariable("struct.font." & tVariations[i])>
  [215] setlocal 2 .............................. tFontStruct = getStructVariable("struct.font." & tVariations[i])
  [217] pushcons 11 ............................. <"balloon.text.">
  [219] getlocal 0 .............................. <tVariations>
  [221] getlocal 1 .............................. <i>
  [223] pusharglist 2 ........................... <tVariations, i>
  [225] objcall 347 ............................. <tVariations.getPropAt(i)>
  [228] joinstr ................................. <"balloon.text." & tVariations.getPropAt(i)>
  [229] pushsymb 872 ............................ <#text>
  [232] pusharglist 2 ........................... <"balloon.text." & tVariations.getPropAt(i), #text>
  [234] extcall 359 ............................. <createMember("balloon.text." & tVariations.getPropAt(i), #text)>
  [237] pusharglist 1 ........................... <createMember("balloon.text." & tVariations.getPropAt(i), #text)>
  [239] extcall 30 .............................. <member(createMember("balloon.text." & tVariations.getPropAt(i), #text))>
  [241] setlocal 3 .............................. tmember = member(createMember("balloon.text." & tVariations.getPropAt(i), #text))
  [243] getlocal 3 .............................. <tmember>
  [245] pushzero ................................ <0>
  [246] setobjprop 1527 ......................... tmember.wordWrap = 0
  [249] getlocal 3 .............................. <tmember>
  [251] pushsymb 1528 ........................... <#adjust>
  [254] setobjprop 1529 ......................... tmember.boxType = #adjust
  [257] getlocal 3 .............................. <tmember>
  [259] pushzero ................................ <0>
  [260] setobjprop 1530 ......................... tmember.antialias = 0
  [263] getlocal 3 .............................. <tmember>
  [265] getlocal 2 .............................. <tFontStruct>
  [267] pushsymb 1531 ........................... <#font>
  [270] pusharglist 2 ........................... <tFontStruct, #font>
  [272] objcall 247 ............................. <tFontStruct.getaProp(#font)>
  [274] setobjprop 1531 ......................... tmember.font = tFontStruct.getaProp(#font)
  [277] getlocal 3 .............................. <tmember>
  [279] getlocal 2 .............................. <tFontStruct>
  [281] pushsymb 1532 ........................... <#fontSize>
  [284] pusharglist 2 ........................... <tFontStruct, #fontSize>
  [286] objcall 247 ............................. <tFontStruct.getaProp(#fontSize)>
  [288] setobjprop 1532 ......................... tmember.fontSize = tFontStruct.getaProp(#fontSize)
  [291] getlocal 3 .............................. <tmember>
  [293] getlocal 2 .............................. <tFontStruct>
  [295] pushsymb 1533 ........................... <#fontStyle>
  [298] pusharglist 2 ........................... <tFontStruct, #fontStyle>
  [300] objcall 247 ............................. <tFontStruct.getaProp(#fontStyle)>
  [302] setobjprop 1533 ......................... tmember.fontStyle = tFontStruct.getaProp(#fontStyle)
  [305] getprop 1524 ............................ <pTextMembers>
  [308] getlocal 0 .............................. <tVariations>
  [310] getlocal 1 .............................. <i>
  [312] pusharglist 2 ........................... <tVariations, i>
  [314] objcall 347 ............................. <tVariations.getPropAt(i)>
  [317] getlocal 3 .............................. <tmember>
  [319] pusharglistnoret 3 ...................... <pTextMembers, tVariations.getPropAt(i), tmember>
  [321] objcall 173 ............................. pTextMembers[tVariations.getPropAt(i)] = tmember
  [323] pushint8 1
  [325] getlocal 1
  [327] add
  [328] setlocal 1
  [330] endrepeat [189]
  [332] getprop 1520 ............................ <pMoveOffsetV>
  [335] getprop 1512 ............................ <pScrollStep>
  [338] mod ..................................... <pMoveOffsetV mod pScrollStep>
  [339] pushzero ................................ <0>
  [340] nteq .................................... <(pMoveOffsetV mod pScrollStep) <> 0>
  [341] jmpifz [358] ............................ if (pMoveOffsetV mod pScrollStep) <> 0 then
  [344] getprop 1520 ............................ <pMoveOffsetV>
  [347] getprop 1520 ............................ <pMoveOffsetV>
  [350] getprop 1512 ............................ <pScrollStep>
  [353] mod ..................................... <pMoveOffsetV mod pScrollStep>
  [354] sub ..................................... <pMoveOffsetV - (pMoveOffsetV mod pScrollStep)>
  [355] setprop 1520 ............................ pMoveOffsetV = pMoveOffsetV - (pMoveOffsetV mod pScrollStep)
  [358] getprop 1520 ............................ <pMoveOffsetV>
  [361] getprop 1512 ............................ <pScrollStep>
  [364] div ..................................... <pMoveOffsetV / pScrollStep>
  [365] setprop 1534 ............................ pFastScrollStep = pMoveOffsetV / pScrollStep
  [368] getprop 1518 ............................ <pMaxBalloons>
  [371] pushint8 1 .............................. <1>
  [373] sub ..................................... <pMaxBalloons - 1>
  [374] getprop 1520 ............................ <pMoveOffsetV>
  [377] mul ..................................... <(pMaxBalloons - 1) * pMoveOffsetV>
  [378] pushint8 1 .............................. <1>
  [380] sub ..................................... <((pMaxBalloons - 1) * pMoveOffsetV) - 1>
  [381] setprop 1535 ............................ pStartV = ((pMaxBalloons - 1) * pMoveOffsetV) - 1
  [384] pusharglist 0 ........................... <>
  [386] thebuiltin 1135 ......................... <the stageRight>
  [389] pusharglist 0 ........................... <>
  [391] thebuiltin 1136 ......................... <the stageLeft>
  [394] sub ..................................... <the stageRight - the stageLeft>
  [395] pushint8 10 ............................. <10>
  [397] sub ..................................... <the stageRight - the stageLeft - 10>
  [398] setprop 1536 ............................ pMaxWidth = the stageRight - the stageLeft - 10
  [401] pushint16 400 ........................... <400>
  [404] setprop 1537 ............................ pMaxCharNum = 400
  [407] pusharglist 0 ........................... <[]>
  [409] pushlist ................................ <[]>
  [410] setprop 1538 ............................ pReservedSprites = []
  [413] pusharglist 0 ........................... <[:]>
  [415] pushproplist ............................ <[:]>
  [416] setprop 1539 ............................ pBalloonImg = [:]
  [419] getprop 1539 ............................ <pBalloonImg>
  [422] pushsymb 420 ............................ <#left>
  [425] pushcons 12 ............................. <"balloon.left">
  [427] pusharglist 1 ........................... <"balloon.left">
  [429] extcall 37 .............................. <getmemnum("balloon.left")>
  [431] pusharglist 1 ........................... <getmemnum("balloon.left")>
  [433] extcall 30 .............................. <member(getmemnum("balloon.left"))>
  [435] getchainedprop 290 ...................... <member(getmemnum("balloon.left")).image>
  [438] pusharglist 1 ........................... <member(getmemnum("balloon.left")).image>
  [440] objcall 582 ............................. <member(getmemnum("balloon.left")).image.duplicate()>
  [443] pusharglistnoret 3 ...................... <pBalloonImg, #left, member(getmemnum("balloon.left")).image.duplicate()>
  [445] objcall 690 ............................. pBalloonImg.addProp(#left, member(getmemnum("balloon.left")).image.duplicate())
  [448] getprop 1539 ............................ <pBalloonImg>
  [451] pushsymb 1540 ........................... <#middle>
  [454] pushcons 13 ............................. <"balloon.middle">
  [456] pusharglist 1 ........................... <"balloon.middle">
  [458] extcall 37 .............................. <getmemnum("balloon.middle")>
  [460] pusharglist 1 ........................... <getmemnum("balloon.middle")>
  [462] extcall 30 .............................. <member(getmemnum("balloon.middle"))>
  [464] getchainedprop 290 ...................... <member(getmemnum("balloon.middle")).image>
  [467] pusharglist 1 ........................... <member(getmemnum("balloon.middle")).image>
  [469] objcall 582 ............................. <member(getmemnum("balloon.middle")).image.duplicate()>
  [472] pusharglistnoret 3 ...................... <pBalloonImg, #middle, member(getmemnum("balloon.middle")).image.duplicate()>
  [474] objcall 690 ............................. pBalloonImg.addProp(#middle, member(getmemnum("balloon.middle")).image.duplicate())
  [477] getprop 1539 ............................ <pBalloonImg>
  [480] pushsymb 1066 ........................... <#right>
  [483] getparam 0 .............................. <me>
  [485] pushcons 12 ............................. <"balloon.left">
  [487] pusharglist 1 ........................... <"balloon.left">
  [489] extcall 37 .............................. <getmemnum("balloon.left")>
  [491] pusharglist 1 ........................... <getmemnum("balloon.left")>
  [493] extcall 30 .............................. <member(getmemnum("balloon.left"))>
  [495] getobjprop 290 .......................... <member(getmemnum("balloon.left")).image>
  [498] pusharglist 2 ........................... <me, member(getmemnum("balloon.left")).image>
  [500] objcall 1023 ............................ <me.flipH(member(getmemnum("balloon.left")).image)>
  [503] pusharglistnoret 3 ...................... <pBalloonImg, #right, me.flipH(member(getmemnum("balloon.left")).image)>
  [505] objcall 690 ............................. pBalloonImg.addProp(#right, me.flipH(member(getmemnum("balloon.left")).image))
  [508] pushsymb 491 ............................ <#leaveRoom>
  [511] getparam 0 .............................. <me>
  [513] pusharglist 1 ........................... <me>
  [515] objcall 156 ............................. <me.getID()>
  [517] pushsymb 601 ............................ <#removeBalloons>
  [520] pusharglistnoret 3 ...................... <#leaveRoom, me.getID(), #removeBalloons>
  [522] extcall 155 ............................. registerMessage(#leaveRoom, me.getID(), #removeBalloons)
  [524] pushsymb 578 ............................ <#changeRoom>
  [527] getparam 0 .............................. <me>
  [529] pusharglist 1 ........................... <me>
  [531] objcall 156 ............................. <me.getID()>
  [533] pushsymb 601 ............................ <#removeBalloons>
  [536] pusharglistnoret 3 ...................... <#changeRoom, me.getID(), #removeBalloons>
  [538] extcall 155 ............................. registerMessage(#changeRoom, me.getID(), #removeBalloons)
  [540] pushsymb 1541 ........................... <#BalloonManagerCreated>
  [543] pushsymb 1542 ........................... <#objectPointer>
  [546] getparam 0 .............................. <me>
  [548] pusharglist 2 ........................... <[#objectPointer: me]>
  [550] pushproplist ............................ <[#objectPointer: me]>
  [551] pusharglistnoret 2 ...................... <#BalloonManagerCreated, [#objectPointer: me]>
  [553] extcall 214 ............................. executeMessage(#BalloonManagerCreated, [#objectPointer: me])
  [555] getparam 0 .............................. <me>
  [557] pusharglistnoret 1 ...................... <me>
  [559] objcall 1505 ............................ me.resetBalloons()
  [562] pushint8 1 .............................. <1>
  [564] pusharglistnoret 1 ...................... <1>
  [566] extcall 21 .............................. return 1
  [568] ret
end

on deconstruct me
  [  0] pushsymb 1545 ........................... <#balloonautoscroll>
  [  3] pusharglist 1 ........................... <#balloonautoscroll>
  [  5] extcall 229 ............................. <timeoutExists(#balloonautoscroll)>
  [  7] jmpifz [ 17] ............................ if timeoutExists(#balloonautoscroll) then
  [ 10] pushsymb 1545 ........................... <#balloonautoscroll>
  [ 13] pusharglistnoret 1 ...................... <#balloonautoscroll>
  [ 15] extcall 231 ............................. removeTimeout(#balloonautoscroll)
  [ 17] getparam 0 .............................. <me>
  [ 19] pusharglist 1 ........................... <me>
  [ 21] objcall 156 ............................. <me.getID()>
  [ 23] pusharglistnoret 1 ...................... <me.getID()>
  [ 25] extcall 595 ............................. removePrepare(me.getID())
  [ 28] pushsymb 491 ............................ <#leaveRoom>
  [ 31] getparam 0 .............................. <me>
  [ 33] pusharglist 1 ........................... <me>
  [ 35] objcall 156 ............................. <me.getID()>
  [ 37] pusharglistnoret 2 ...................... <#leaveRoom, me.getID()>
  [ 39] extcall 158 ............................. unregisterMessage(#leaveRoom, me.getID())
  [ 41] pushsymb 578 ............................ <#changeRoom>
  [ 44] getparam 0 .............................. <me>
  [ 46] pusharglist 1 ........................... <me>
  [ 48] objcall 156 ............................. <me.getID()>
  [ 50] pusharglistnoret 2 ...................... <#changeRoom, me.getID()>
  [ 52] extcall 158 ............................. unregisterMessage(#changeRoom, me.getID())
  [ 54] pusharglist 0 ........................... <[]>
  [ 56] pushlist ................................ <[]>
  [ 57] setprop 1517 ............................ pBalloonBuffer = []
  [ 60] getprop 1516 ............................ <pAvailableBalloons>
  [ 63] pusharglist 1 ........................... <pAvailableBalloons>
  [ 65] extcall 10 .............................. <voidp(pAvailableBalloons)>
  [ 67] not ..................................... <not voidp(pAvailableBalloons)>
  [ 68] jmpifz [ 80] ............................ if not voidp(pAvailableBalloons) then
  [ 71] pushsymb 43 ............................. <#deconstruct>
  [ 73] getprop 1516 ............................ <pAvailableBalloons>
  [ 76] pusharglistnoret 2 ...................... <#deconstruct, pAvailableBalloons>
  [ 78] extcall 178 ............................. call(#deconstruct, pAvailableBalloons)
  [ 80] getprop 1515 ............................ <pVisibleBalloons>
  [ 83] pusharglist 1 ........................... <pVisibleBalloons>
  [ 85] extcall 10 .............................. <voidp(pVisibleBalloons)>
  [ 87] not ..................................... <not voidp(pVisibleBalloons)>
  [ 88] jmpifz [100] ............................ if not voidp(pVisibleBalloons) then
  [ 91] pushsymb 43 ............................. <#deconstruct>
  [ 93] getprop 1515 ............................ <pVisibleBalloons>
  [ 96] pusharglistnoret 2 ...................... <#deconstruct, pVisibleBalloons>
  [ 98] extcall 178 ............................. call(#deconstruct, pVisibleBalloons)
  [100] getprop 1546 ............................ <pBalloonPulse>
  [103] pusharglist 1 ........................... <pBalloonPulse>
  [105] extcall 10 .............................. <voidp(pBalloonPulse)>
  [107] not ..................................... <not voidp(pBalloonPulse)>
  [108] jmpifz [120] ............................ if not voidp(pBalloonPulse) then
  [111] pushsymb 43 ............................. <#deconstruct>
  [113] getprop 1546 ............................ <pBalloonPulse>
  [116] pusharglistnoret 2 ...................... <#deconstruct, pBalloonPulse>
  [118] extcall 178 ............................. call(#deconstruct, pBalloonPulse)
  [120] getprop 1538 ............................ <pReservedSprites>
  [123] peek 0
  [125] pusharglist 1
  [127] extcall 14
  [129] pushint8 1
  [131] peek 0
  [133] peek 2
  [135] lteq
  [136] jmpifz [161] ............................ repeat with tSpr in pReservedSprites
  [139] peek 2
  [141] peek 1
  [143] pusharglist 2
  [145] extcall 9
  [147] setlocal 0
  [149] getlocal 0 .............................. <tSpr>
  [151] pusharglistnoret 1 ...................... <tSpr>
  [153] extcall 367 ............................. releaseSprite(tSpr)
  [156] pushint8 1
  [158] add
  [159] endrepeat [131]
  [161] pop 3
  [163] getprop 1524 ............................ <pTextMembers>
  [166] peek 0
  [168] pusharglist 1
  [170] extcall 14
  [172] pushint8 1
  [174] peek 0
  [176] peek 2
  [178] lteq
  [179] jmpifz [206] ............................ repeat with tMem in pTextMembers
  [182] peek 2
  [184] peek 1
  [186] pusharglist 2
  [188] extcall 9
  [190] setlocal 1
  [192] getlocal 1 .............................. <tMem>
  [194] getobjprop 31 ........................... <tMem.name>
  [196] pusharglistnoret 1 ...................... <tMem.name>
  [198] extcall 1116 ............................ removeMember(tMem.name)
  [201] pushint8 1
  [203] add
  [204] endrepeat [174]
  [206] pop 3
  [208] pusharglist 0 ........................... <[]>
  [210] pushlist ................................ <[]>
  [211] setprop 1538 ............................ pReservedSprites = []
  [214] pusharglist 0 ........................... <[:]>
  [216] pushproplist ............................ <[:]>
  [217] setprop 1524 ............................ pTextMembers = [:]
  [220] pusharglist 0 ........................... <>
  [222] extcall 159 ............................. <VOID>
  [224] setprop 1516 ............................ pAvailableBalloons = VOID
  [227] pusharglist 0 ........................... <>
  [229] extcall 159 ............................. <VOID>
  [231] setprop 1515 ............................ pVisibleBalloons = VOID
  [234] pusharglist 0 ........................... <>
  [236] extcall 159 ............................. <VOID>
  [238] setprop 1517 ............................ pBalloonBuffer = VOID
  [241] pushint8 1 .............................. <1>
  [243] pusharglistnoret 1 ...................... <1>
  [245] extcall 21 .............................. return 1
  [247] ret
end

on createballoonImg me, tName, tText, tBalloonColor, tChatMode
  [  0] getparam 3 .............................. <tBalloonColor>
  [  2] getobjprop 1309 ......................... <tBalloonColor.red>
  [  5] getparam 3 .............................. <tBalloonColor>
  [  7] getobjprop 1310 ......................... <tBalloonColor.green>
  [ 10] add ..................................... <tBalloonColor.red + tBalloonColor.green>
  [ 11] getparam 3 .............................. <tBalloonColor>
  [ 13] getobjprop 1311 ......................... <tBalloonColor.blue>
  [ 16] add ..................................... <tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue>
  [ 17] pushint16 600 ........................... <600>
  [ 20] gteq .................................... <(tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) >= 600>
  [ 21] jmpifz [ 77] ............................ if (tBalloonColor.red + tBalloonColor.green + tBalloonColor.blue) >= 600 then
  [ 24] pushzero ................................ <0>
  [ 25] pushzero ................................ <0>
  [ 26] pushzero ................................ <0>
  [ 27] pusharglist 3 ........................... <0, 0, 0>
  [ 29] extcall 312 ............................. <rgb(0, 0, 0)>
  [ 32] setlocal 0 .............................. tBalloonColorDarken = rgb(0, 0, 0)
  [ 34] getlocal 0 .............................. <tBalloonColorDarken>
  [ 36] getparam 3 .............................. <tBalloonColor>
  [ 38] getobjprop 1309 ......................... <tBalloonColor.red>
  [ 41] pushcons 14 ............................. <0.90000000000000002>
  [ 43] mul ..................................... <tBalloonColor.red * 0.90000000000000002>
  [ 44] setobjprop 1309 ......................... tBalloonColorDarken.red = tBalloonColor.red * 0.90000000000000002
  [ 47] getlocal 0 .............................. <tBalloonColorDarken>
  [ 49] getparam 3 .............................. <tBalloonColor>
  [ 51] getobjprop 1310 ......................... <tBalloonColor.green>
  [ 54] pushcons 14 ............................. <0.90000000000000002>
  [ 56] mul ..................................... <tBalloonColor.green * 0.90000000000000002>
  [ 57] setobjprop 1310 ......................... tBalloonColorDarken.green = tBalloonColor.green * 0.90000000000000002
  [ 60] getlocal 0 .............................. <tBalloonColorDarken>
  [ 62] getparam 3 .............................. <tBalloonColor>
  [ 64] getobjprop 1311 ......................... <tBalloonColor.blue>
  [ 67] pushcons 14 ............................. <0.90000000000000002>
  [ 69] mul ..................................... <tBalloonColor.blue * 0.90000000000000002>
  [ 70] setobjprop 1311 ......................... tBalloonColorDarken.blue = tBalloonColor.blue * 0.90000000000000002
  [ 73] getlocal 0 .............................. <tBalloonColorDarken>
  [ 75] setparam 3 .............................. tBalloonColor = tBalloonColorDarken
  [ 77] getparam 2 .............................. <tText>
  [ 79] pusharglist 1 ........................... <tText>
  [ 81] extcall 622 ............................. <length(tText)>
  [ 84] getprop 1537 ............................ <pMaxCharNum>
  [ 87] gt ...................................... <length(tText) > pMaxCharNum>
  [ 88] jmpifz [107] ............................ if length(tText) > pMaxCharNum then
  [ 91] getparam 2 .............................. <tText>
  [ 93] pushsymb 450 ............................ <#char>
  [ 96] pushint8 1 .............................. <1>
  [ 98] getprop 1537 ............................ <pMaxCharNum>
  [101] pusharglist 4 ........................... <tText, #char, 1, pMaxCharNum>
  [103] objcall 33 .............................. <tText.char[1..pMaxCharNum]>
  [105] setparam 2 .............................. tText = tText.char[1..pMaxCharNum]
  [107] getprop 1524 ............................ <pTextMembers>
  [110] getparam 4 .............................. <tChatMode>
  [112] pusharglist 2 ........................... <pTextMembers, tChatMode>
  [114] objcall 9 ............................... <pTextMembers[tChatMode]>
  [116] setlocal 1 .............................. tmember = pTextMembers[tChatMode]
  [118] getlocal 1 .............................. <tmember>
  [120] getobjprop 1531 ......................... <tmember.font>
  [123] setlocal 2 .............................. tSavedFont = tmember.font
  [125] getlocal 1 .............................. <tmember>
  [127] getobjprop 1533 ......................... <tmember.fontStyle>
  [130] setlocal 3 .............................. tSavedStyle = tmember.fontStyle
  [132] getlocal 1 .............................. <tmember>
  [134] pushzero ................................ <0>
  [135] pushzero ................................ <0>
  [136] getprop 1536 ............................ <pMaxWidth>
  [139] getlocal 1 .............................. <tmember>
  [141] getobjprop 291 .......................... <tmember.height>
  [144] pusharglist 4 ........................... <0, 0, pMaxWidth, tmember.height>
  [146] extcall 322 ............................. <rect(0, 0, pMaxWidth, tmember.height)>
  [149] setobjprop 322 .......................... tmember.rect = rect(0, 0, pMaxWidth, tmember.height)
  [152] pushcons 15 ............................. <"struct.font.bold">
  [154] pusharglist 1 ........................... <"struct.font.bold">
  [156] extcall 1526 ............................ <getStructVariable("struct.font.bold")>
  [159] setlocal 4 .............................. tBoldStruct = getStructVariable("struct.font.bold")
  [161] getlocal 1 .............................. <tmember>
  [163] getparam 1 .............................. <tName>
  [165] pushcons 16 ............................. <":">
  [167] joinstr ................................. <tName & ":">
  [168] getparam 2 .............................. <tText>
  [170] joinpadstr .............................. <tName & ":" && tText>
  [171] setobjprop 872 .......................... tmember.text = tName & ":" && tText
  [174] getlocal 1 .............................. <tmember>
  [176] pushsymb 450 ............................ <#char>
  [179] pushint8 1 .............................. <1>
  [181] getparam 1 .............................. <tName>
  [183] getobjprop 622 .......................... <tName.length>
  [186] pushint8 1 .............................. <1>
  [188] add ..................................... <tName.length + 1>
  [189] pusharglist 4 ........................... <tmember, #char, 1, tName.length + 1>
  [191] objcall 17 .............................. <tmember.char[1..tName.length + 1]>
  [193] getlocal 4 .............................. <tBoldStruct>
  [195] pushsymb 1531 ........................... <#font>
  [198] pusharglist 2 ........................... <tBoldStruct, #font>
  [200] objcall 247 ............................. <tBoldStruct.getaProp(#font)>
  [202] setobjprop 1531 ......................... tmember.char[1..tName.length + 1].font = tBoldStruct.getaProp(#font)
  [205] getlocal 1 .............................. <tmember>
  [207] pushsymb 450 ............................ <#char>
  [210] pushint8 1 .............................. <1>
  [212] getparam 1 .............................. <tName>
  [214] getobjprop 622 .......................... <tName.length>
  [217] pushint8 1 .............................. <1>
  [219] add ..................................... <tName.length + 1>
  [220] pusharglist 4 ........................... <tmember, #char, 1, tName.length + 1>
  [222] objcall 17 .............................. <tmember.char[1..tName.length + 1]>
  [224] getlocal 4 .............................. <tBoldStruct>
  [226] pushsymb 1533 ........................... <#fontStyle>
  [229] pusharglist 2 ........................... <tBoldStruct, #fontStyle>
  [231] objcall 247 ............................. <tBoldStruct.getaProp(#fontStyle)>
  [233] setobjprop 1533 ......................... tmember.char[1..tName.length + 1].fontStyle = tBoldStruct.getaProp(#fontStyle)
  [236] getlocal 1 .............................. <tmember>
  [238] getobjprop 357 .......................... <tmember.color>
  [241] setlocal 5 .............................. tSavedColor = tmember.color
  [243] getlocal 1 .............................. <tmember>
  [245] pushsymb 450 ............................ <#char>
  [248] pushint8 1 .............................. <1>
  [250] getparam 1 .............................. <tName>
  [252] getobjprop 622 .......................... <tName.length>
  [255] pushint8 1 .............................. <1>
  [257] add ..................................... <tName.length + 1>
  [258] pusharglist 4 ........................... <tmember, #char, 1, tName.length + 1>
  [260] objcall 17 .............................. <tmember.char[1..tName.length + 1]>
  [262] getprop 1525 ............................ <pDefaultTextColor>
  [265] setobjprop 357 .......................... tmember.char[1..tName.length + 1].color = pDefaultTextColor
  [268] getlocal 1 .............................. <tmember>
  [270] getlocal 1 .............................. <tmember>
  [272] pushsymb 450 ............................ <#char>
  [275] pusharglist 2 ........................... <tmember, #char>
  [277] objcall 14 .............................. <tmember.char.count>
  [279] pusharglist 2 ........................... <tmember, tmember.char.count>
  [281] objcall 1547 ............................ <tmember.charPosToLoc(tmember.char.count)>
  [284] getobjprop 255 .......................... <tmember.charPosToLoc(tmember.char.count).locH>
  [286] getprop 1539 ............................ <pBalloonImg>
  [289] pushsymb 420 ............................ <#left>
  [292] pusharglist 2 ........................... <pBalloonImg, #left>
  [294] objcall 9 ............................... <pBalloonImg[#left]>
  [296] getobjprop 252 .......................... <pBalloonImg[#left].width>
  [298] pushint8 4 .............................. <4>
  [300] mul ..................................... <pBalloonImg[#left].width * 4>
  [301] add ..................................... <tmember.charPosToLoc(tmember.char.count).locH + (pBalloonImg[#left].width * 4)>
  [302] setlocal 6 .............................. tTextWidth = tmember.charPosToLoc(tmember.char.count).locH + (pBalloonImg[#left].width * 4)
  [304] getlocal 6 .............................. <tTextWidth>
  [306] getprop 1521 ............................ <pMarginH>
  [309] pushint8 2 .............................. <2>
  [311] mul ..................................... <pMarginH * 2>
  [312] add ..................................... <tTextWidth + (pMarginH * 2)>
  [313] getprop 1536 ............................ <pMaxWidth>
  [316] gt ...................................... <(tTextWidth + (pMarginH * 2)) > pMaxWidth>
  [317] jmpifz [345] ............................ if (tTextWidth + (pMarginH * 2)) > pMaxWidth then
  [320] getprop 1536 ............................ <pMaxWidth>
  [323] getprop 1521 ............................ <pMarginH>
  [326] pushint8 2 .............................. <2>
  [328] mul ..................................... <pMarginH * 2>
  [329] sub ..................................... <pMaxWidth - (pMarginH * 2)>
  [330] getprop 1539 ............................ <pBalloonImg>
  [333] pushsymb 420 ............................ <#left>
  [336] pusharglist 2 ........................... <pBalloonImg, #left>
  [338] objcall 9 ............................... <pBalloonImg[#left]>
  [340] getobjprop 252 .......................... <pBalloonImg[#left].width>
  [342] sub ..................................... <pMaxWidth - (pMarginH * 2) - pBalloonImg[#left].width>
  [343] setlocal 6 .............................. tTextWidth = pMaxWidth - (pMarginH * 2) - pBalloonImg[#left].width
  [345] getlocal 1 .............................. <tmember>
  [347] pushzero ................................ <0>
  [348] pushzero ................................ <0>
  [349] getlocal 6 .............................. <tTextWidth>
  [351] getlocal 1 .............................. <tmember>
  [353] getobjprop 291 .......................... <tmember.height>
  [356] pusharglist 4 ........................... <0, 0, tTextWidth, tmember.height>
  [358] extcall 322 ............................. <rect(0, 0, tTextWidth, tmember.height)>
  [361] setobjprop 322 .......................... tmember.rect = rect(0, 0, tTextWidth, tmember.height)
  [364] getlocal 1 .............................. <tmember>
  [366] getobjprop 290 .......................... <tmember.image>
  [369] setlocal 7 .............................. tTextImg = tmember.image
  [371] getlocal 7 .............................. <tTextImg>
  [373] getobjprop 252 .......................... <tTextImg.width>
  [375] setlocal 6 .............................. tTextWidth = tTextImg.width
  [377] getlocal 6 .............................. <tTextWidth>
  [379] getprop 1521 ............................ <pMarginH>
  [382] pushint8 2 .............................. <2>
  [384] mul ..................................... <pMarginH * 2>
  [385] add ..................................... <tTextWidth + (pMarginH * 2)>
  [386] setlocal 8 .............................. tWidth = tTextWidth + (pMarginH * 2)
  [388] getlocal 8 .............................. <tWidth>
  [390] getprop 1539 ............................ <pBalloonImg>
  [393] pushsymb 420 ............................ <#left>
  [396] pusharglist 2 ........................... <pBalloonImg, #left>
  [398] objcall 9 ............................... <pBalloonImg[#left]>
  [400] getobjprop 291 .......................... <pBalloonImg[#left].height>
  [403] pushint8 8 .............................. <8>
  [405] pusharglist 3 ........................... <tWidth, pBalloonImg[#left].height, 8>
  [407] extcall 290 ............................. <image(tWidth, pBalloonImg[#left].height, 8)>
  [410] setlocal 9 .............................. tNewImg = image(tWidth, pBalloonImg[#left].height, 8)
  [412] pushzero ................................ <0>
  [413] setlocal 10 ............................. tStartPointY = 0
  [415] getlocal 9 .............................. <tNewImg>
  [417] getobjprop 291 .......................... <tNewImg.height>
  [420] setlocal 11 ............................. tEndPointY = tNewImg.height
  [422] pushzero ................................ <0>
  [423] setlocal 12 ............................. tStartPointX = 0
  [425] pushzero ................................ <0>
  [426] setlocal 13 ............................. tEndPointX = 0
  [428] pushsymb 420 ............................ <#left>
  [431] pushsymb 1540 ........................... <#middle>
  [434] pushsymb 1066 ........................... <#right>
  [437] pusharglist 3 ........................... <[#left, #middle, #right]>
  [439] pushlist ................................ <[#left, #middle, #right]>
  [440] peek 0
  [442] pusharglist 1
  [444] extcall 14
  [446] pushint8 1
  [448] peek 0
  [450] peek 2
  [452] lteq
  [453] jmpifz [630] ............................ repeat with i in [#left, #middle, #right]
  [456] peek 2
  [458] peek 1
  [460] pusharglist 2
  [462] extcall 9
  [464] setlocal 14
  [466] getlocal 13 ............................. <tEndPointX>
  [468] setlocal 12 ............................. tStartPointX = tEndPointX
  [470] getlocal 14 ............................. <i>
  [472] peek 0 .................................. case i of
  [474] pushsymb 420 ............................ <#left>
  [477] eq
  [478] jmpifz [500] ............................ (case) #left:
  [481] getlocal 13 ............................. <tEndPointX>
  [483] getprop 1539 ............................ <pBalloonImg>
  [486] getlocal 14 ............................. <i>
  [488] pusharglist 2 ........................... <pBalloonImg, i>
  [490] objcall 33 .............................. <pBalloonImg.getProp(i)>
  [492] getobjprop 252 .......................... <pBalloonImg.getProp(i).width>
  [494] add ..................................... <tEndPointX + pBalloonImg.getProp(i).width>
  [495] setlocal 13 ............................. tEndPointX = tEndPointX + pBalloonImg.getProp(i).width
  [497] jmp [570]
  [500] peek 0
  [502] pushsymb 1540 ........................... <#middle>
  [505] eq
  [506] jmpifz [545] ............................ (case) #middle:
  [509] getlocal 13 ............................. <tEndPointX>
  [511] getlocal 8 .............................. <tWidth>
  [513] add ..................................... <tEndPointX + tWidth>
  [514] getprop 1539 ............................ <pBalloonImg>
  [517] pushsymb 420 ............................ <#left>
  [520] pusharglist 2 ........................... <pBalloonImg, #left>
  [522] objcall 33 .............................. <pBalloonImg.getProp(#left)>
  [524] getobjprop 252 .......................... <pBalloonImg.getProp(#left).width>
  [526] sub ..................................... <tEndPointX + tWidth - pBalloonImg.getProp(#left).width>
  [527] getprop 1539 ............................ <pBalloonImg>
  [530] pushsymb 1066 ........................... <#right>
  [533] pusharglist 2 ........................... <pBalloonImg, #right>
  [535] objcall 33 .............................. <pBalloonImg.getProp(#right)>
  [537] getobjprop 252 .......................... <pBalloonImg.getProp(#right).width>
  [539] sub ..................................... <tEndPointX + tWidth - pBalloonImg.getProp(#left).width - pBalloonImg.getProp(#right).width>
  [540] setlocal 13 ............................. tEndPointX = tEndPointX + tWidth - pBalloonImg.getProp(#left).width - pBalloonImg.getProp(#right).width
  [542] jmp [570]
  [545] peek 0
  [547] pushsymb 1066 ........................... <#right>
  [550] eq
  [551] jmpifz [570] ............................ (case) #right:
  [554] getlocal 13 ............................. <tEndPointX>
  [556] getprop 1539 ............................ <pBalloonImg>
  [559] getlocal 14 ............................. <i>
  [561] pusharglist 2 ........................... <pBalloonImg, i>
  [563] objcall 33 .............................. <pBalloonImg.getProp(i)>
  [565] getobjprop 252 .......................... <pBalloonImg.getProp(i).width>
  [567] add ..................................... <tEndPointX + pBalloonImg.getProp(i).width>
  [568] setlocal 13 ............................. tEndPointX = tEndPointX + pBalloonImg.getProp(i).width
  [570] pop 1 ................................... end case
  [572] getlocal 12 ............................. <tStartPointX>
  [574] getlocal 10 ............................. <tStartPointY>
  [576] getlocal 13 ............................. <tEndPointX>
  [578] getlocal 11 ............................. <tEndPointY>
  [580] pusharglist 4 ........................... <tStartPointX, tStartPointY, tEndPointX, tEndPointY>
  [582] extcall 322 ............................. <rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)>
  [585] setlocal 15 ............................. tdestrect = rect(tStartPointX, tStartPointY, tEndPointX, tEndPointY)
  [587] getlocal 9 .............................. <tNewImg>
  [589] getprop 1539 ............................ <pBalloonImg>
  [592] getlocal 14 ............................. <i>
  [594] pusharglist 2 ........................... <pBalloonImg, i>
  [596] objcall 33 .............................. <pBalloonImg.getProp(i)>
  [598] getlocal 15 ............................. <tdestrect>
  [600] getprop 1539 ............................ <pBalloonImg>
  [603] getlocal 14 ............................. <i>
  [605] pusharglist 2 ........................... <pBalloonImg, i>
  [607] objcall 33 .............................. <pBalloonImg.getProp(i)>
  [609] getobjprop 322 .......................... <pBalloonImg.getProp(i).rect>
  [612] pushsymb 357 ............................ <#color>
  [615] getparam 3 .............................. <tBalloonColor>
  [617] pusharglist 2 ........................... <[#color: tBalloonColor]>
  [619] pushproplist ............................ <[#color: tBalloonColor]>
  [620] pusharglistnoret 5 ...................... <tNewImg, pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect, [#color: tBalloonColor]>
  [622] objcall 323 ............................. tNewImg.copyPixels(pBalloonImg.getProp(i), tdestrect, pBalloonImg.getProp(i).rect, [#color: tBalloonColor])
  [625] pushint8 1
  [627] add
  [628] endrepeat [448]
  [630] pop 3
  [632] getlocal 7 .............................. <tTextImg>
  [634] getobjprop 322 .......................... <tTextImg.rect>
  [637] getprop 1521 ............................ <pMarginH>
  [640] getprop 1522 ............................ <pMarginV>
  [643] getprop 1521 ............................ <pMarginH>
  [646] getprop 1522 ............................ <pMarginV>
  [649] pusharglist 4 ........................... <pMarginH, pMarginV, pMarginH, pMarginV>
  [651] extcall 322 ............................. <rect(pMarginH, pMarginV, pMarginH, pMarginV)>
  [654] add ..................................... <tTextImg.rect + rect(pMarginH, pMarginV, pMarginH, pMarginV)>
  [655] setlocal 15 ............................. tdestrect = tTextImg.rect + rect(pMarginH, pMarginV, pMarginH, pMarginV)
  [657] getlocal 15 ............................. <tdestrect>
  [659] getlocal 9 .............................. <tNewImg>
  [661] getobjprop 252 .......................... <tNewImg.width>
  [663] pushint8 2 .............................. <2>
  [665] div ..................................... <tNewImg.width / 2>
  [666] pushzero ................................ <0>
  [667] getlocal 9 .............................. <tNewImg>
  [669] getobjprop 252 .......................... <tNewImg.width>
  [671] pushint8 2 .............................. <2>
  [673] div ..................................... <tNewImg.width / 2>
  [674] pushzero ................................ <0>
  [675] pusharglist 4 ........................... <tNewImg.width / 2, 0, tNewImg.width / 2, 0>
  [677] extcall 322 ............................. <rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0)>
  [680] add ..................................... <tdestrect + rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0)>
  [681] getlocal 6 .............................. <tTextWidth>
  [683] pushint8 2 .............................. <2>
  [685] div ..................................... <tTextWidth / 2>
  [686] pushzero ................................ <0>
  [687] getlocal 6 .............................. <tTextWidth>
  [689] pushint8 2 .............................. <2>
  [691] div ..................................... <tTextWidth / 2>
  [692] pushzero ................................ <0>
  [693] pusharglist 4 ........................... <tTextWidth / 2, 0, tTextWidth / 2, 0>
  [695] extcall 322 ............................. <rect(tTextWidth / 2, 0, tTextWidth / 2, 0)>
  [698] sub ..................................... <tdestrect + rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0) - rect(tTextWidth / 2, 0, tTextWidth / 2, 0)>
  [699] setlocal 15 ............................. tdestrect = tdestrect + rect(tNewImg.width / 2, 0, tNewImg.width / 2, 0) - rect(tTextWidth / 2, 0, tTextWidth / 2, 0)
  [701] getlocal 9 .............................. <tNewImg>
  [703] getlocal 7 .............................. <tTextImg>
  [705] getlocal 15 ............................. <tdestrect>
  [707] getlocal 7 .............................. <tTextImg>
  [709] getobjprop 322 .......................... <tTextImg.rect>
  [712] pusharglistnoret 4 ...................... <tNewImg, tTextImg, tdestrect, tTextImg.rect>
  [714] objcall 323 ............................. tNewImg.copyPixels(tTextImg, tdestrect, tTextImg.rect)
  [717] getlocal 1 .............................. <tmember>
  [719] getlocal 2 .............................. <tSavedFont>
  [721] setobjprop 1531 ......................... tmember.font = tSavedFont
  [724] getlocal 1 .............................. <tmember>
  [726] getlocal 3 .............................. <tSavedStyle>
  [728] setobjprop 1533 ......................... tmember.fontStyle = tSavedStyle
  [731] getlocal 1 .............................. <tmember>
  [733] getlocal 5 .............................. <tSavedColor>
  [735] setobjprop 357 .......................... tmember.color = tSavedColor
  [738] getlocal 9 .............................. <tNewImg>
  [740] pusharglistnoret 1 ...................... <tNewImg>
  [742] extcall 21 .............................. return tNewImg
  [744] ret
end

on resetBalloons me
  [  0] pusharglist 0 ........................... <[:]>
  [  2] pushproplist ............................ <[:]>
  [  3] setprop 1515 ............................ pVisibleBalloons = [:]
  [  6] pusharglist 0 ........................... <[:]>
  [  8] pushproplist ............................ <[:]>
  [  9] setprop 1516 ............................ pAvailableBalloons = [:]
  [ 12] getparam 0 .............................. <me>
  [ 14] pusharglist 1 ........................... <me>
  [ 16] objcall 156 ............................. <me.getID()>
  [ 18] pusharglist 1 ........................... <me.getID()>
  [ 20] extcall 358 ............................. <reserveSprite(me.getID())>
  [ 23] setlocal 0 .............................. tSprNum = reserveSprite(me.getID())
  [ 25] getprop 1538 ............................ <pReservedSprites>
  [ 28] getlocal 0 .............................. <tSprNum>
  [ 30] pusharglistnoret 2 ...................... <pReservedSprites, tSprNum>
  [ 32] objcall 186 ............................. pReservedSprites.add(tSprNum)
  [ 34] pushsymb 152 ............................ <#temp>
  [ 36] pushcons 17 ............................. <"Balloon pulse Class">
  [ 38] pusharglist 2 ........................... <#temp, "Balloon pulse Class">
  [ 40] extcall 150 ............................. <createObject(#temp, "Balloon pulse Class")>
  [ 42] setprop 1546 ............................ pBalloonPulse = createObject(#temp, "Balloon pulse Class")
  [ 45] getlocal 0 .............................. <tSprNum>
  [ 47] pusharglist 1 ........................... <tSprNum>
  [ 49] extcall 182 ............................. <sprite(tSprNum)>
  [ 51] getprop 1519 ............................ <pFirstLocz>
  [ 54] setobjprop 168 .......................... sprite(tSprNum).locZ = pFirstLocz
  [ 56] getlocal 0 .............................. <tSprNum>
  [ 58] pusharglist 1 ........................... <tSprNum>
  [ 60] extcall 182 ............................. <sprite(tSprNum)>
  [ 62] pushint8 8 .............................. <8>
  [ 64] setobjprop 419 .......................... sprite(tSprNum).ink = 8
  [ 67] getprop 1546 ............................ <pBalloonPulse>
  [ 70] pushsymb 182 ............................ <#sprite>
  [ 72] getlocal 0 .............................. <tSprNum>
  [ 74] pusharglistnoret 3 ...................... <pBalloonPulse, #sprite, tSprNum>
  [ 76] objcall 583 ............................. pBalloonPulse.set(#sprite, tSprNum)
  [ 79] getprop 1546 ............................ <pBalloonPulse>
  [ 82] pushsymb 1562 ........................... <#manager>
  [ 85] getparam 0 .............................. <me>
  [ 87] pusharglistnoret 3 ...................... <pBalloonPulse, #manager, me>
  [ 89] objcall 583 ............................. pBalloonPulse.set(#manager, me)
  [ 92] pushint8 1 .............................. <1>
  [ 94] setlocal 1
  [ 96] getlocal 1
  [ 98] getprop 1518 ............................ <pMaxBalloons>
  [101] lteq
  [102] jmpifz [341] ............................ repeat with f = 1 to pMaxBalloons
  [105] getparam 0 .............................. <me>
  [107] pusharglist 1 ........................... <me>
  [109] objcall 156 ............................. <me.getID()>
  [111] pusharglist 1 ........................... <me.getID()>
  [113] extcall 358 ............................. <reserveSprite(me.getID())>
  [116] setlocal 0 .............................. tSprNum = reserveSprite(me.getID())
  [118] getprop 1538 ............................ <pReservedSprites>
  [121] getlocal 0 .............................. <tSprNum>
  [123] pusharglistnoret 2 ...................... <pReservedSprites, tSprNum>
  [125] objcall 186 ............................. pReservedSprites.add(tSprNum)
  [127] getlocal 0 .............................. <tSprNum>
  [129] pushzero ................................ <0>
  [130] eq ...................................... <tSprNum = 0>
  [131] jmpifz [146] ............................ if tSprNum = 0 then
  [134] getlocal 1 .............................. <f>
  [136] pushint8 1 .............................. <1>
  [138] sub ..................................... <f - 1>
  [139] setprop 1518 ............................ pMaxBalloons = f - 1
  [142] pusharglistnoret 0 ...................... <>
  [144] extcall 21 .............................. return 
  [146] getlocal 0 .............................. <tSprNum>
  [148] pusharglist 1 ........................... <tSprNum>
  [150] extcall 182 ............................. <sprite(tSprNum)>
  [152] getprop 1519 ............................ <pFirstLocz>
  [155] getlocal 1 .............................. <f>
  [157] add ..................................... <pFirstLocz + f>
  [158] pushint8 1 .............................. <1>
  [160] sub ..................................... <pFirstLocz + f - 1>
  [161] setobjprop 168 .......................... sprite(tSprNum).locZ = pFirstLocz + f - 1
  [163] getlocal 0 .............................. <tSprNum>
  [165] pusharglist 1 ........................... <tSprNum>
  [167] extcall 182 ............................. <sprite(tSprNum)>
  [169] pushint8 8 .............................. <8>
  [171] setobjprop 419 .......................... sprite(tSprNum).ink = 8
  [174] pushcons 18 ............................. <"balloon">
  [176] getlocal 1 .............................. <f>
  [178] joinstr ................................. <"balloon" & f>
  [179] setlocal 2 .............................. tBalloonId = "balloon" & f
  [181] pushcons 19 ............................. <"balloon.">
  [183] getlocal 2 .............................. <tBalloonId>
  [185] joinstr ................................. <"balloon." & tBalloonId>
  [186] setlocal 3 .............................. tmember = "balloon." & tBalloonId
  [188] getlocal 3 .............................. <tmember>
  [190] pusharglist 1 ........................... <tmember>
  [192] extcall 35 .............................. <memberExists(tmember)>
  [194] not ..................................... <not memberExists(tmember)>
  [195] jmpifz [208] ............................ if not memberExists(tmember) then
  [198] getlocal 3 .............................. <tmember>
  [200] pushsymb 321 ............................ <#bitmap>
  [203] pusharglistnoret 2 ...................... <tmember, #bitmap>
  [205] extcall 359 ............................. createMember(tmember, #bitmap)
  [208] getlocal 3 .............................. <tmember>
  [210] pusharglist 1 ........................... <tmember>
  [212] extcall 37 .............................. <getmemnum(tmember)>
  [214] setlocal 3 .............................. tmember = getmemnum(tmember)
  [216] getprop 1516 ............................ <pAvailableBalloons>
  [219] getlocal 2 .............................. <tBalloonId>
  [221] pushsymb 152 ............................ <#temp>
  [223] pushcons 20 ............................. <"Balloon Class">
  [225] pusharglist 2 ........................... <#temp, "Balloon Class">
  [227] extcall 150 ............................. <createObject(#temp, "Balloon Class")>
  [229] pusharglistnoret 3 ...................... <pAvailableBalloons, tBalloonId, createObject(#temp, "Balloon Class")>
  [231] objcall 690 ............................. pAvailableBalloons.addProp(tBalloonId, createObject(#temp, "Balloon Class"))
  [234] getprop 1516 ............................ <pAvailableBalloons>
  [237] getlocal 2 .............................. <tBalloonId>
  [239] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [241] objcall 9 ............................... <pAvailableBalloons[tBalloonId]>
  [243] getlocal 2 .............................. <tBalloonId>
  [245] pusharglistnoret 2 ...................... <pAvailableBalloons[tBalloonId], tBalloonId>
  [247] objcall 677 ............................. pAvailableBalloons[tBalloonId].setID(tBalloonId)
  [250] getprop 1516 ............................ <pAvailableBalloons>
  [253] getlocal 2 .............................. <tBalloonId>
  [255] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [257] objcall 9 ............................... <pAvailableBalloons[tBalloonId]>
  [259] pushsymb 182 ............................ <#sprite>
  [261] getlocal 0 .............................. <tSprNum>
  [263] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #sprite, tSprNum>
  [265] objcall 583 ............................. pAvailableBalloons[tBalloonId].set(#sprite, tSprNum)
  [268] getprop 1516 ............................ <pAvailableBalloons>
  [271] getlocal 2 .............................. <tBalloonId>
  [273] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [275] objcall 9 ............................... <pAvailableBalloons[tBalloonId]>
  [277] pushsymb 30 ............................. <#member>
  [279] getlocal 3 .............................. <tmember>
  [281] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #member, tmember>
  [283] objcall 583 ............................. pAvailableBalloons[tBalloonId].set(#member, tmember)
  [286] getprop 1516 ............................ <pAvailableBalloons>
  [289] getlocal 2 .............................. <tBalloonId>
  [291] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [293] objcall 9 ............................... <pAvailableBalloons[tBalloonId]>
  [295] pushsymb 361 ............................ <#loc>
  [298] pushzero ................................ <0>
  [299] pushint16 1000 .......................... <1000>
  [302] inv ..................................... <-1000>
  [303] pusharglist 2 ........................... <0, -1000>
  [305] extcall 293 ............................. <point(0, -1000)>
  [308] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #loc, point(0, -1000)>
  [310] objcall 583 ............................. pAvailableBalloons[tBalloonId].set(#loc, point(0, -1000))
  [313] getprop 1516 ............................ <pAvailableBalloons>
  [316] getlocal 2 .............................. <tBalloonId>
  [318] pusharglist 2 ........................... <pAvailableBalloons, tBalloonId>
  [320] objcall 9 ............................... <pAvailableBalloons[tBalloonId]>
  [322] pushsymb 1562 ........................... <#manager>
  [325] getparam 0 .............................. <me>
  [327] pusharglistnoret 3 ...................... <pAvailableBalloons[tBalloonId], #manager, me>
  [329] objcall 583 ............................. pAvailableBalloons[tBalloonId].set(#manager, me)
  [332] pushint8 1
  [334] getlocal 1
  [336] add
  [337] setlocal 1
  [339] endrepeat [ 96]
  [341] ret
end

on hideBalloons me
  [  0] pushsymb 1564 ........................... <#hideBalloon>
  [  3] getprop 1515 ............................ <pVisibleBalloons>
  [  6] pusharglistnoret 2 ...................... <#hideBalloon, pVisibleBalloons>
  [  8] extcall 178 ............................. call(#hideBalloon, pVisibleBalloons)
  [ 10] pushsymb 1564 ........................... <#hideBalloon>
  [ 13] getprop 1516 ............................ <pAvailableBalloons>
  [ 16] pusharglistnoret 2 ...................... <#hideBalloon, pAvailableBalloons>
  [ 18] extcall 178 ............................. call(#hideBalloon, pAvailableBalloons)
  [ 20] ret
end

on showBalloons me
  [  0] pushsymb 1565 ........................... <#showBalloon>
  [  3] getprop 1515 ............................ <pVisibleBalloons>
  [  6] pusharglistnoret 2 ...................... <#showBalloon, pVisibleBalloons>
  [  8] extcall 178 ............................. call(#showBalloon, pVisibleBalloons)
  [ 10] pushsymb 1565 ........................... <#showBalloon>
  [ 13] getprop 1516 ............................ <pAvailableBalloons>
  [ 16] pusharglistnoret 2 ...................... <#showBalloon, pAvailableBalloons>
  [ 18] extcall 178 ............................. call(#showBalloon, pAvailableBalloons)
  [ 20] ret
end

on removeBalloons me
  [  0] getparam 0 .............................. <me>
  [  2] pusharglist 1 ........................... <me>
  [  4] objcall 156 ............................. <me.getID()>
  [  6] pusharglistnoret 1 ...................... <me.getID()>
  [  8] extcall 595 ............................. removePrepare(me.getID())
  [ 11] pushsymb 1545 ........................... <#balloonautoscroll>
  [ 14] pusharglist 1 ........................... <#balloonautoscroll>
  [ 16] extcall 229 ............................. <timeoutExists(#balloonautoscroll)>
  [ 18] jmpifz [ 28] ............................ if timeoutExists(#balloonautoscroll) then
  [ 21] pushsymb 1545 ........................... <#balloonautoscroll>
  [ 24] pusharglistnoret 1 ...................... <#balloonautoscroll>
  [ 26] extcall 231 ............................. removeTimeout(#balloonautoscroll)
  [ 28] pusharglist 0 ........................... <[]>
  [ 30] pushlist ................................ <[]>
  [ 31] setprop 1517 ............................ pBalloonBuffer = []
  [ 34] pusharglist 0 ........................... <>
  [ 36] extcall 159 ............................. <VOID>
  [ 38] setprop 1566 ............................ pLastBalloonId = VOID
  [ 41] pushsymb 1513 ........................... <#normal>
  [ 44] setprop 11 .............................. pState = #normal
  [ 46] pushsymb 1567 ........................... <#removePulse>
  [ 49] getprop 1546 ............................ <pBalloonPulse>
  [ 52] pusharglistnoret 2 ...................... <#removePulse, pBalloonPulse>
  [ 54] extcall 178 ............................. call(#removePulse, pBalloonPulse)
  [ 56] pushsymb 1568 ........................... <#removeBalloon>
  [ 59] getprop 1515 ............................ <pVisibleBalloons>
  [ 62] pusharglistnoret 2 ...................... <#removeBalloon, pVisibleBalloons>
  [ 64] extcall 178 ............................. call(#removeBalloon, pVisibleBalloons)
  [ 66] pushsymb 1568 ........................... <#removeBalloon>
  [ 69] getprop 1516 ............................ <pAvailableBalloons>
  [ 72] pusharglistnoret 2 ...................... <#removeBalloon, pAvailableBalloons>
  [ 74] extcall 178 ............................. call(#removeBalloon, pAvailableBalloons)
  [ 76] pushsymb 1565 ........................... <#showBalloon>
  [ 79] getprop 1515 ............................ <pVisibleBalloons>
  [ 82] pusharglistnoret 2 ...................... <#showBalloon, pVisibleBalloons>
  [ 84] extcall 178 ............................. call(#showBalloon, pVisibleBalloons)
  [ 86] pushsymb 1565 ........................... <#showBalloon>
  [ 89] getprop 1516 ............................ <pAvailableBalloons>
  [ 92] pusharglistnoret 2 ...................... <#showBalloon, pAvailableBalloons>
  [ 94] extcall 178 ............................. call(#showBalloon, pAvailableBalloons)
  [ 96] getprop 1515 ............................ <pVisibleBalloons>
  [ 99] pusharglist 1 ........................... <pVisibleBalloons>
  [101] objcall 582 ............................. <pVisibleBalloons.duplicate()>
  [104] setlocal 0 .............................. tTempRemoveVisible = pVisibleBalloons.duplicate()
  [106] pushint8 1 .............................. <1>
  [108] setlocal 1
  [110] getlocal 1
  [112] getlocal 0 .............................. <tTempRemoveVisible>
  [114] getobjprop 14 ........................... <tTempRemoveVisible.count>
  [116] lteq
  [117] jmpifz [145] ............................ repeat with f = 1 to tTempRemoveVisible.count
  [120] getparam 0 .............................. <me>
  [122] getlocal 0 .............................. <tTempRemoveVisible>
  [124] getlocal 1 .............................. <f>
  [126] pusharglist 2 ........................... <tTempRemoveVisible, f>
  [128] objcall 347 ............................. <tTempRemoveVisible.getPropAt(f)>
  [131] pusharglistnoret 2 ...................... <me, tTempRemoveVisible.getPropAt(f)>
  [133] objcall 1508 ............................ me.removeVisibleBalloon(tTempRemoveVisible.getPropAt(f))
  [136] pushint8 1
  [138] getlocal 1
  [140] add
  [141] setlocal 1
  [143] endrepeat [110]
  [145] ret
end

on removeVisibleBalloon me, tid
  [  0] getprop 1515 ............................ <pVisibleBalloons>
  [  3] getparam 1 .............................. <tid>
  [  5] pusharglist 2 ........................... <pVisibleBalloons, tid>
  [  7] objcall 9 ............................... <pVisibleBalloons[tid]>
  [  9] pusharglist 1 ........................... <pVisibleBalloons[tid]>
  [ 11] extcall 10 .............................. <voidp(pVisibleBalloons[tid])>
  [ 13] not ..................................... <not voidp(pVisibleBalloons[tid])>
  [ 14] jmpifz [ 78] ............................ if not voidp(pVisibleBalloons[tid]) then
  [ 17] getprop 1516 ............................ <pAvailableBalloons>
  [ 20] getparam 1 .............................. <tid>
  [ 22] getprop 1515 ............................ <pVisibleBalloons>
  [ 25] getparam 1 .............................. <tid>
  [ 27] pusharglist 2 ........................... <pVisibleBalloons, tid>
  [ 29] objcall 9 ............................... <pVisibleBalloons[tid]>
  [ 31] pusharglistnoret 3 ...................... <pAvailableBalloons, tid, pVisibleBalloons[tid]>
  [ 33] objcall 173 ............................. pAvailableBalloons[tid] = pVisibleBalloons[tid]
  [ 35] getprop 1516 ............................ <pAvailableBalloons>
  [ 38] getparam 1 .............................. <tid>
  [ 40] pusharglist 2 ........................... <pAvailableBalloons, tid>
  [ 42] objcall 9 ............................... <pAvailableBalloons[tid]>
  [ 44] pushsymb 361 ............................ <#loc>
  [ 47] pushzero ................................ <0>
  [ 48] pushint16 1000 .......................... <1000>
  [ 51] inv ..................................... <-1000>
  [ 52] pusharglist 2 ........................... <0, -1000>
  [ 54] extcall 293 ............................. <point(0, -1000)>
  [ 57] pusharglistnoret 3 ...................... <pAvailableBalloons[tid], #loc, point(0, -1000)>
  [ 59] objcall 583 ............................. pAvailableBalloons[tid].set(#loc, point(0, -1000))
  [ 62] getprop 1515 ............................ <pVisibleBalloons>
  [ 65] getparam 1 .............................. <tid>
  [ 67] pusharglistnoret 2 ...................... <pVisibleBalloons, tid>
  [ 69] objcall 635 ............................. pVisibleBalloons.deleteProp(tid)
  [ 72] pushint8 1 .............................. <1>
  [ 74] pusharglistnoret 1 ...................... <1>
  [ 76] extcall 21 .............................. return 1
  [ 78] ret
end

on createBalloon me, tMsg
  [  0] getprop 11 .............................. <pState>
  [  2] pushsymb 1513 ........................... <#normal>
  [  5] eq ...................................... <pState = #normal>
  [  6] jmpifz [363] ............................ if pState = #normal then / else
  [  9] getprop 1516 ............................ <pAvailableBalloons>
  [ 12] getobjprop 14 ........................... <pAvailableBalloons.count>
  [ 14] pushzero ................................ <0>
  [ 15] gt ...................................... <pAvailableBalloons.count > 0>
  [ 16] jmpifz [322] ............................ if pAvailableBalloons.count > 0 then / else
  [ 19] pushsymb 949 ............................ <#room>
  [ 22] pusharglist 1 ........................... <#room>
  [ 24] extcall 260 ............................. <getThread(#room)>
  [ 27] pusharglist 1 ........................... <getThread(#room)>
  [ 29] objcall 207 ............................. <getThread(#room).getComponent()>
  [ 31] getparam 1 .............................. <tMsg>
  [ 33] pushsymb 386 ............................ <#id>
  [ 36] pusharglist 2 ........................... <tMsg, #id>
  [ 38] objcall 9 ............................... <tMsg[#id]>
  [ 40] pusharglist 2 ........................... <getThread(#room).getComponent(), tMsg[#id]>
  [ 42] objcall 245 ............................. <getThread(#room).getComponent().getUserObject(tMsg[#id])>
  [ 44] setlocal 0 .............................. tUserObj = getThread(#room).getComponent().getUserObject(tMsg[#id])
  [ 46] getlocal 0 .............................. <tUserObj>
  [ 48] not ..................................... <not tUserObj>
  [ 49] jmpifz [ 77] ............................ if not tUserObj then
  [ 52] getparam 0 .............................. <me>
  [ 54] pushcons 21 ............................. <"User object not found:">
  [ 56] getparam 1 .............................. <tMsg>
  [ 58] pushsymb 386 ............................ <#id>
  [ 61] pusharglist 2 ........................... <tMsg, #id>
  [ 63] objcall 9 ............................... <tMsg[#id]>
  [ 65] joinpadstr .............................. <"User object not found:" && tMsg[#id]>
  [ 66] pushsymb 782 ............................ <#createBalloon>
  [ 69] pusharglist 3 ........................... <me, "User object not found:" && tMsg[#id], #createBalloon>
  [ 71] extcall 161 ............................. <error(me, "User object not found:" && tMsg[#id], #createBalloon)>
  [ 73] pusharglistnoret 1 ...................... <error(me, "User object not found:" && tMsg[#id], #createBalloon)>
  [ 75] extcall 21 .............................. return error(me, "User object not found:" && tMsg[#id], #createBalloon)
  [ 77] getlocal 0 .............................. <tUserObj>
  [ 79] pushcons 22 ............................. <"ch">
  [ 81] pusharglist 2 ........................... <tUserObj, "ch">
  [ 83] objcall 1191 ............................ <tUserObj.getPartColor("ch")>
  [ 86] setprop 1570 ............................ pBalloonColor = tUserObj.getPartColor("ch")
  [ 89] getprop 1570 ............................ <pBalloonColor>
  [ 92] pusharglist 1 ........................... <pBalloonColor>
  [ 94] extcall 248 ............................. <ilk(pBalloonColor)>
  [ 96] pushsymb 357 ............................ <#color>
  [ 99] nteq .................................... <ilk(pBalloonColor) <> #color>
  [100] jmpifz [119] ............................ if ilk(pBalloonColor) <> #color then
  [103] pushint16 232 ........................... <232>
  [106] pushint16 177 ........................... <177>
  [109] pushint8 55 ............................. <55>
  [111] pusharglist 3 ........................... <232, 177, 55>
  [113] extcall 312 ............................. <rgb(232, 177, 55)>
  [116] setprop 1570 ............................ pBalloonColor = rgb(232, 177, 55)
  [119] getlocal 0 .............................. <tUserObj>
  [121] pushcons 23 ............................. <"hd">
  [123] pusharglist 2 ........................... <tUserObj, "hd">
  [125] objcall 1189 ............................ <tUserObj.getPartLocation("hd")>
  [128] setprop 1571 ............................ pHumanLoc = tUserObj.getPartLocation("hd")
  [131] getparam 1 .............................. <tMsg>
  [133] pushsymb 31 ............................. <#name>
  [135] getlocal 0 .............................. <tUserObj>
  [137] pusharglist 1 ........................... <tUserObj>
  [139] objcall 236 ............................. <tUserObj.getInfo()>
  [141] pushsymb 31 ............................. <#name>
  [143] pusharglist 2 ........................... <tUserObj.getInfo(), #name>
  [145] objcall 247 ............................. <tUserObj.getInfo().getaProp(#name)>
  [147] pusharglistnoret 3 ...................... <tMsg, #name, tUserObj.getInfo().getaProp(#name)>
  [149] objcall 664 ............................. tMsg.setaProp(#name, tUserObj.getInfo().getaProp(#name))
  [152] getprop 1516 ............................ <pAvailableBalloons>
  [155] pushint8 1 .............................. <1>
  [157] pusharglist 2 ........................... <pAvailableBalloons, 1>
  [159] objcall 347 ............................. <pAvailableBalloons.getPropAt(1)>
  [162] setprop 1566 ............................ pLastBalloonId = pAvailableBalloons.getPropAt(1)
  [165] getparam 1 .............................. <tMsg>
  [167] setprop 1572 ............................ pLastMsg = tMsg
  [170] getprop 1546 ............................ <pBalloonPulse>
  [173] pushsymb 1573 ........................... <#humanLoc>
  [176] getprop 1571 ............................ <pHumanLoc>
  [179] pusharglistnoret 3 ...................... <pBalloonPulse, #humanLoc, pHumanLoc>
  [181] objcall 583 ............................. pBalloonPulse.set(#humanLoc, pHumanLoc)
  [184] getprop 1546 ............................ <pBalloonPulse>
  [187] pushsymb 1574 ........................... <#stoploc>
  [190] getprop 1571 ............................ <pHumanLoc>
  [193] pushint8 1 .............................. <1>
  [195] pusharglist 2 ........................... <pHumanLoc, 1>
  [197] objcall 9 ............................... <pHumanLoc[1]>
  [199] getprop 1535 ............................ <pStartV>
  [202] pusharglist 2 ........................... <pHumanLoc[1], pStartV>
  [204] extcall 293 ............................. <point(pHumanLoc[1], pStartV)>
  [207] pusharglistnoret 3 ...................... <pBalloonPulse, #stoploc, point(pHumanLoc[1], pStartV)>
  [209] objcall 583 ............................. pBalloonPulse.set(#stoploc, point(pHumanLoc[1], pStartV))
  [212] getprop 1546 ............................ <pBalloonPulse>
  [215] pushsymb 1575 ........................... <#balloonColor>
  [218] getprop 1570 ............................ <pBalloonColor>
  [221] pusharglistnoret 3 ...................... <pBalloonPulse, #balloonColor, pBalloonColor>
  [223] objcall 583 ............................. pBalloonPulse.set(#balloonColor, pBalloonColor)
  [226] getprop 1546 ............................ <pBalloonPulse>
  [229] pushsymb 1576 ........................... <#BalloonId>
  [232] getprop 1566 ............................ <pLastBalloonId>
  [235] pusharglistnoret 3 ...................... <pBalloonPulse, #BalloonId, pLastBalloonId>
  [237] objcall 583 ............................. pBalloonPulse.set(#BalloonId, pLastBalloonId)
  [240] pushsymb 1577 ........................... <#definePulse>
  [243] getprop 1546 ............................ <pBalloonPulse>
  [246] pusharglistnoret 2 ...................... <#definePulse, pBalloonPulse>
  [248] extcall 178 ............................. call(#definePulse, pBalloonPulse)
  [250] pushzero ................................ <0>
  [251] setprop 1514 ............................ pScrollCounter = 0
  [254] pushsymb 1578 ........................... <#scroll>
  [257] setprop 11 .............................. pState = #scroll
  [259] getprop 1517 ............................ <pBalloonBuffer>
  [262] pusharglist 1 ........................... <pBalloonBuffer>
  [264] objcall 14 .............................. <pBalloonBuffer.count()>
  [266] pushzero ................................ <0>
  [267] eq ...................................... <pBalloonBuffer.count() = 0>
  [268] jmpifz [280] ............................ if pBalloonBuffer.count() = 0 then / else
  [271] getprop 1512 ............................ <pScrollStep>
  [274] setprop 1523 ............................ pScrollBy = pScrollStep
  [277] jmp [308]
  [280] getprop 1517 ............................ <pBalloonBuffer>
  [283] pusharglist 1 ........................... <pBalloonBuffer>
  [285] objcall 14 .............................. <pBalloonBuffer.count()>
  [287] pushint8 2 .............................. <2>
  [289] lt ...................................... <pBalloonBuffer.count() < 2>
  [290] jmpifz [302] ............................ if pBalloonBuffer.count() < 2 then / else
  [293] getprop 1534 ............................ <pFastScrollStep>
  [296] setprop 1523 ............................ pScrollBy = pFastScrollStep
  [299] jmp [308]
  [302] getprop 1520 ............................ <pMoveOffsetV>
  [305] setprop 1523 ............................ pScrollBy = pMoveOffsetV
  [308] getparam 0 .............................. <me>
  [310] pusharglist 1 ........................... <me>
  [312] objcall 156 ............................. <me.getID()>
  [314] pusharglistnoret 1 ...................... <me.getID()>
  [316] extcall 674 ............................. receivePrepare(me.getID())
  [319] jmp [360]
  [322] getprop 1515 ............................ <pVisibleBalloons>
  [325] pusharglist 1 ........................... <pVisibleBalloons>
  [327] objcall 14 .............................. <pVisibleBalloons.count()>
  [329] pushzero ................................ <0>
  [330] gt ...................................... <pVisibleBalloons.count() > 0>
  [331] jmpifz [351] ............................ if pVisibleBalloons.count() > 0 then
  [334] getparam 0 .............................. <me>
  [336] getprop 1515 ............................ <pVisibleBalloons>
  [339] pushint8 1 .............................. <1>
  [341] pusharglist 2 ........................... <pVisibleBalloons, 1>
  [343] objcall 347 ............................. <pVisibleBalloons.getPropAt(1)>
  [346] pusharglistnoret 2 ...................... <me, pVisibleBalloons.getPropAt(1)>
  [348] objcall 1508 ............................ me.removeVisibleBalloon(pVisibleBalloons.getPropAt(1))
  [351] getparam 0 .............................. <me>
  [353] getparam 1 .............................. <tMsg>
  [355] pusharglistnoret 2 ...................... <me, tMsg>
  [357] objcall 782 ............................. me.createBalloon(tMsg)
  [360] jmp [394]
  [363] getprop 11 .............................. <pState>
  [365] pushsymb 1578 ........................... <#scroll>
  [368] eq ...................................... <pState = #scroll>
  [369] jmpifz [394] ............................ if pState = #scroll then
  [372] getprop 1517 ............................ <pBalloonBuffer>
  [375] getparam 1 .............................. <tMsg>
  [377] pusharglist 2 ........................... <pBalloonBuffer, tMsg>
  [379] objcall 240 ............................. <pBalloonBuffer.getPos(tMsg)>
  [381] not ..................................... <not pBalloonBuffer.getPos(tMsg)>
  [382] jmpifz [394] ............................ if not pBalloonBuffer.getPos(tMsg) then
  [385] getprop 1517 ............................ <pBalloonBuffer>
  [388] getparam 1 .............................. <tMsg>
  [390] pusharglistnoret 2 ...................... <pBalloonBuffer, tMsg>
  [392] objcall 186 ............................. pBalloonBuffer.add(tMsg)
  [394] ret
end

on showNewBalloon me
  [  0] getprop 1572 ............................ <pLastMsg>
  [  3] setlocal 0 .............................. tMsg = pLastMsg
  [  5] getprop 1566 ............................ <pLastBalloonId>
  [  8] pusharglist 1 ........................... <pLastBalloonId>
  [ 10] extcall 10 .............................. <voidp(pLastBalloonId)>
  [ 12] jmpifz [ 19] ............................ if voidp(pLastBalloonId) then
  [ 15] pusharglistnoret 0 ...................... <>
  [ 17] extcall 21 .............................. return 
  [ 19] getprop 1516 ............................ <pAvailableBalloons>
  [ 22] pushint8 1 .............................. <1>
  [ 24] pusharglist 2 ........................... <pAvailableBalloons, 1>
  [ 26] objcall 9 ............................... <pAvailableBalloons[1]>
  [ 28] setlocal 1 .............................. tNewBalloon = pAvailableBalloons[1]
  [ 30] getprop 1515 ............................ <pVisibleBalloons>
  [ 33] getprop 1566 ............................ <pLastBalloonId>
  [ 36] getlocal 1 .............................. <tNewBalloon>
  [ 38] pusharglistnoret 3 ...................... <pVisibleBalloons, pLastBalloonId, tNewBalloon>
  [ 40] objcall 690 ............................. pVisibleBalloons.addProp(pLastBalloonId, tNewBalloon)
  [ 43] getprop 1516 ............................ <pAvailableBalloons>
  [ 46] getprop 1566 ............................ <pLastBalloonId>
  [ 49] pusharglistnoret 2 ...................... <pAvailableBalloons, pLastBalloonId>
  [ 51] objcall 635 ............................. pAvailableBalloons.deleteProp(pLastBalloonId)
  [ 54] getprop 1515 ............................ <pVisibleBalloons>
  [ 57] getprop 1566 ............................ <pLastBalloonId>
  [ 60] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [ 62] objcall 9 ............................... <pVisibleBalloons[pLastBalloonId]>
  [ 64] pushsymb 30 ............................. <#member>
  [ 66] pusharglist 2 ........................... <pVisibleBalloons[pLastBalloonId], #member>
  [ 68] objcall 234 ............................. <pVisibleBalloons[pLastBalloonId].get(#member)>
  [ 70] pusharglist 1 ........................... <pVisibleBalloons[pLastBalloonId].get(#member)>
  [ 72] extcall 30 .............................. <member(pVisibleBalloons[pLastBalloonId].get(#member))>
  [ 74] setlocal 2 .............................. tmember = member(pVisibleBalloons[pLastBalloonId].get(#member))
  [ 76] getprop 1515 ............................ <pVisibleBalloons>
  [ 79] getprop 1566 ............................ <pLastBalloonId>
  [ 82] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [ 84] objcall 9 ............................... <pVisibleBalloons[pLastBalloonId]>
  [ 86] pushsymb 1575 ........................... <#balloonColor>
  [ 89] getprop 1570 ............................ <pBalloonColor>
  [ 92] pusharglistnoret 3 ...................... <pVisibleBalloons[pLastBalloonId], #balloonColor, pBalloonColor>
  [ 94] objcall 583 ............................. pVisibleBalloons[pLastBalloonId].set(#balloonColor, pBalloonColor)
  [ 97] getlocal 2 .............................. <tmember>
  [ 99] getparam 0 .............................. <me>
  [101] getlocal 0 .............................. <tMsg>
  [103] pushsymb 31 ............................. <#name>
  [105] pusharglist 2 ........................... <tMsg, #name>
  [107] objcall 9 ............................... <tMsg[#name]>
  [109] getlocal 0 .............................. <tMsg>
  [111] pushsymb 781 ............................ <#message>
  [114] pusharglist 2 ........................... <tMsg, #message>
  [116] objcall 9 ............................... <tMsg[#message]>
  [118] getprop 1570 ............................ <pBalloonColor>
  [121] getlocal 0 .............................. <tMsg>
  [123] pushsymb 780 ............................ <#command>
  [126] pusharglist 2 ........................... <tMsg, #command>
  [128] objcall 9 ............................... <tMsg[#command]>
  [130] pusharglist 5 ........................... <me, tMsg[#name], tMsg[#message], pBalloonColor, tMsg[#command]>
  [132] objcall 1504 ............................ <me.createballoonImg(tMsg[#name], tMsg[#message], pBalloonColor, tMsg[#command])>
  [135] setobjprop 290 .......................... tmember.image = me.createballoonImg(tMsg[#name], tMsg[#message], pBalloonColor, tMsg[#command])
  [138] getlocal 2 .............................. <tmember>
  [140] getlocal 2 .............................. <tmember>
  [142] getobjprop 294 .......................... <tmember.regPoint>
  [145] pushzero ................................ <0>
  [146] getlocal 2 .............................. <tmember>
  [148] getchainedprop 290 ...................... <tmember.image>
  [151] getobjprop 291 .......................... <tmember.image.height>
  [154] pushint8 2 .............................. <2>
  [156] div ..................................... <tmember.image.height / 2>
  [157] pusharglist 2 ........................... <0, tmember.image.height / 2>
  [159] extcall 293 ............................. <point(0, tmember.image.height / 2)>
  [162] add ..................................... <tmember.regPoint + point(0, tmember.image.height / 2)>
  [163] setobjprop 294 .......................... tmember.regPoint = tmember.regPoint + point(0, tmember.image.height / 2)
  [166] pushcons 24 ............................. <"balloons.leftmargin">
  [168] pushzero ................................ <0>
  [169] pusharglist 2 ........................... <"balloons.leftmargin", 0>
  [171] extcall 1481 ............................ <getIntVariable("balloons.leftmargin", 0)>
  [174] setprop 1579 ............................ pBalloonLeftMarg = getIntVariable("balloons.leftmargin", 0)
  [177] pushcons 25 ............................. <"balloons.rightmargin">
  [179] pushint16 720 ........................... <720>
  [182] pusharglist 2 ........................... <"balloons.rightmargin", 720>
  [184] extcall 1481 ............................ <getIntVariable("balloons.rightmargin", 720)>
  [187] setprop 1580 ............................ pBalloonRightMarg = getIntVariable("balloons.rightmargin", 720)
  [190] getprop 1571 ............................ <pHumanLoc>
  [193] getobjprop 255 .......................... <pHumanLoc.locH>
  [195] getlocal 2 .............................. <tmember>
  [197] getchainedprop 290 ...................... <tmember.image>
  [200] getobjprop 252 .......................... <tmember.image.width>
  [202] pushint8 2 .............................. <2>
  [204] div ..................................... <tmember.image.width / 2>
  [205] add ..................................... <pHumanLoc.locH + (tmember.image.width / 2)>
  [206] getprop 1580 ............................ <pBalloonRightMarg>
  [209] gt ...................................... <(pHumanLoc.locH + (tmember.image.width / 2)) > pBalloonRightMarg>
  [210] jmpifz [232] ............................ if (pHumanLoc.locH + (tmember.image.width / 2)) > pBalloonRightMarg then / else
  [213] getprop 1580 ............................ <pBalloonRightMarg>
  [216] getlocal 2 .............................. <tmember>
  [218] getchainedprop 290 ...................... <tmember.image>
  [221] getobjprop 252 .......................... <tmember.image.width>
  [223] pushint8 2 .............................. <2>
  [225] div ..................................... <tmember.image.width / 2>
  [226] sub ..................................... <pBalloonRightMarg - (tmember.image.width / 2)>
  [227] setlocal 3 .............................. tStartH = pBalloonRightMarg - (tmember.image.width / 2)
  [229] jmp [281]
  [232] getprop 1571 ............................ <pHumanLoc>
  [235] getobjprop 255 .......................... <pHumanLoc.locH>
  [237] getlocal 2 .............................. <tmember>
  [239] getchainedprop 290 ...................... <tmember.image>
  [242] getobjprop 252 .......................... <tmember.image.width>
  [244] pushint8 2 .............................. <2>
  [246] div ..................................... <tmember.image.width / 2>
  [247] sub ..................................... <pHumanLoc.locH - (tmember.image.width / 2)>
  [248] getprop 1579 ............................ <pBalloonLeftMarg>
  [251] lt ...................................... <(pHumanLoc.locH - (tmember.image.width / 2)) < pBalloonLeftMarg>
  [252] jmpifz [274] ............................ if (pHumanLoc.locH - (tmember.image.width / 2)) < pBalloonLeftMarg then / else
  [255] getprop 1579 ............................ <pBalloonLeftMarg>
  [258] getlocal 2 .............................. <tmember>
  [260] getchainedprop 290 ...................... <tmember.image>
  [263] getobjprop 252 .......................... <tmember.image.width>
  [265] pushint8 2 .............................. <2>
  [267] div ..................................... <tmember.image.width / 2>
  [268] add ..................................... <pBalloonLeftMarg + (tmember.image.width / 2)>
  [269] setlocal 3 .............................. tStartH = pBalloonLeftMarg + (tmember.image.width / 2)
  [271] jmp [281]
  [274] getprop 1571 ............................ <pHumanLoc>
  [277] getobjprop 255 .......................... <pHumanLoc.locH>
  [279] setlocal 3 .............................. tStartH = pHumanLoc.locH
  [281] getprop 1515 ............................ <pVisibleBalloons>
  [284] getprop 1566 ............................ <pLastBalloonId>
  [287] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [289] objcall 9 ............................... <pVisibleBalloons[pLastBalloonId]>
  [291] pushsymb 361 ............................ <#loc>
  [294] getlocal 3 .............................. <tStartH>
  [296] getprop 1535 ............................ <pStartV>
  [299] pusharglist 2 ........................... <tStartH, pStartV>
  [301] extcall 293 ............................. <point(tStartH, pStartV)>
  [304] pusharglistnoret 3 ...................... <pVisibleBalloons[pLastBalloonId], #loc, point(tStartH, pStartV)>
  [306] objcall 583 ............................. pVisibleBalloons[pLastBalloonId].set(#loc, point(tStartH, pStartV))
  [309] getprop 1515 ............................ <pVisibleBalloons>
  [312] getprop 1566 ............................ <pLastBalloonId>
  [315] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [317] objcall 9 ............................... <pVisibleBalloons[pLastBalloonId]>
  [319] pushsymb 1581 ........................... <#ownerID>
  [322] getlocal 0 .............................. <tMsg>
  [324] pushsymb 386 ............................ <#id>
  [327] pusharglist 2 ........................... <tMsg, #id>
  [329] objcall 9 ............................... <tMsg[#id]>
  [331] pusharglistnoret 3 ...................... <pVisibleBalloons[pLastBalloonId], #ownerID, tMsg[#id]>
  [333] objcall 583 ............................. pVisibleBalloons[pLastBalloonId].set(#ownerID, tMsg[#id])
  [336] pushsymb 1582 ........................... <#defineBalloon>
  [339] getprop 1515 ............................ <pVisibleBalloons>
  [342] getprop 1566 ............................ <pLastBalloonId>
  [345] pusharglist 2 ........................... <pVisibleBalloons, pLastBalloonId>
  [347] objcall 9 ............................... <pVisibleBalloons[pLastBalloonId]>
  [349] pusharglistnoret 2 ...................... <#defineBalloon, pVisibleBalloons[pLastBalloonId]>
  [351] extcall 178 ............................. call(#defineBalloon, pVisibleBalloons[pLastBalloonId])
  [353] ret
end

on prepare me
  [  0] getprop 11 .............................. <pState>
  [  2] pushsymb 1578 ........................... <#scroll>
  [  5] eq ...................................... <pState = #scroll>
  [  6] jmpifz [208] ............................ if pState = #scroll then
  [  9] getprop 1514 ............................ <pScrollCounter>
  [ 12] getprop 1523 ............................ <pScrollBy>
  [ 15] add ..................................... <pScrollCounter + pScrollBy>
  [ 16] getprop 1520 ............................ <pMoveOffsetV>
  [ 19] lteq .................................... <(pScrollCounter + pScrollBy) <= pMoveOffsetV>
  [ 20] jmpifz [ 82] ............................ if (pScrollCounter + pScrollBy) <= pMoveOffsetV then / else
  [ 23] getprop 1514 ............................ <pScrollCounter>
  [ 26] getprop 1523 ............................ <pScrollBy>
  [ 29] add ..................................... <pScrollCounter + pScrollBy>
  [ 30] setprop 1514 ............................ pScrollCounter = pScrollCounter + pScrollBy
  [ 33] pushsymb 1585 ........................... <#UpdateBalloonPos>
  [ 36] getprop 1515 ............................ <pVisibleBalloons>
  [ 39] getprop 1523 ............................ <pScrollBy>
  [ 42] inv ..................................... <-pScrollBy>
  [ 43] pusharglistnoret 3 ...................... <#UpdateBalloonPos, pVisibleBalloons, -pScrollBy>
  [ 45] extcall 178 ............................. call(#UpdateBalloonPos, pVisibleBalloons, -pScrollBy)
  [ 47] getprop 1566 ............................ <pLastBalloonId>
  [ 50] pusharglist 1 ........................... <pLastBalloonId>
  [ 52] extcall 10 .............................. <voidp(pLastBalloonId)>
  [ 54] not ..................................... <not voidp(pLastBalloonId)>
  [ 55] jmpifz [ 79] ............................ if not voidp(pLastBalloonId) then
  [ 58] pushsymb 1586 ........................... <#OpeningBalloon>
  [ 61] getprop 1546 ............................ <pBalloonPulse>
  [ 64] getprop 1514 ............................ <pScrollCounter>
  [ 67] inv ..................................... <-pScrollCounter>
  [ 68] getprop 1523 ............................ <pScrollBy>
  [ 71] pushint8 2 .............................. <2>
  [ 73] mul ..................................... <pScrollBy * 2>
  [ 74] mul ..................................... <-pScrollCounter * (pScrollBy * 2)>
  [ 75] pusharglistnoret 3 ...................... <#OpeningBalloon, pBalloonPulse, -pScrollCounter * (pScrollBy * 2)>
  [ 77] extcall 178 ............................. call(#OpeningBalloon, pBalloonPulse, -pScrollCounter * (pScrollBy * 2))
  [ 79] jmp [208]
  [ 82] getprop 1566 ............................ <pLastBalloonId>
  [ 85] pusharglist 1 ........................... <pLastBalloonId>
  [ 87] extcall 10 .............................. <voidp(pLastBalloonId)>
  [ 89] not ..................................... <not voidp(pLastBalloonId)>
  [ 90] jmpifz [100] ............................ if not voidp(pLastBalloonId) then
  [ 93] getparam 0 .............................. <me>
  [ 95] pusharglistnoret 1 ...................... <me>
  [ 97] objcall 1509 ............................ me.showNewBalloon()
  [100] getparam 0 .............................. <me>
  [102] pusharglist 1 ........................... <me>
  [104] objcall 156 ............................. <me.getID()>
  [106] pusharglistnoret 1 ...................... <me.getID()>
  [108] extcall 595 ............................. removePrepare(me.getID())
  [111] pushzero ................................ <0>
  [112] setprop 1514 ............................ pScrollCounter = 0
  [115] pushsymb 1513 ........................... <#normal>
  [118] setprop 11 .............................. pState = #normal
  [120] getprop 1517 ............................ <pBalloonBuffer>
  [123] pusharglist 1 ........................... <pBalloonBuffer>
  [125] objcall 14 .............................. <pBalloonBuffer.count()>
  [127] pushzero ................................ <0>
  [128] gt ...................................... <pBalloonBuffer.count() > 0>
  [129] jmpifz [165] ............................ if pBalloonBuffer.count() > 0 then / else
  [132] getprop 1517 ............................ <pBalloonBuffer>
  [135] pushint8 1 .............................. <1>
  [137] pusharglist 2 ........................... <pBalloonBuffer, 1>
  [139] objcall 9 ............................... <pBalloonBuffer[1]>
  [141] setlocal 0 .............................. tMsg = pBalloonBuffer[1]
  [143] getprop 1517 ............................ <pBalloonBuffer>
  [146] pushint8 1 .............................. <1>
  [148] pusharglistnoret 2 ...................... <pBalloonBuffer, 1>
  [150] objcall 787 ............................. pBalloonBuffer.deleteAt(1)
  [153] getparam 0 .............................. <me>
  [155] getlocal 0 .............................. <tMsg>
  [157] pusharglistnoret 2 ...................... <me, tMsg>
  [159] objcall 782 ............................. me.createBalloon(tMsg)
  [162] jmp [208]
  [165] pushsymb 1545 ........................... <#balloonautoscroll>
  [168] pusharglist 1 ........................... <#balloonautoscroll>
  [170] extcall 229 ............................. <timeoutExists(#balloonautoscroll)>
  [172] jmpifz [182] ............................ if timeoutExists(#balloonautoscroll) then
  [175] pushsymb 1545 ........................... <#balloonautoscroll>
  [178] pusharglistnoret 1 ...................... <#balloonautoscroll>
  [180] extcall 231 ............................. removeTimeout(#balloonautoscroll)
  [182] pushsymb 1545 ........................... <#balloonautoscroll>
  [185] getprop 1511 ............................ <pAutoScrollTime>
  [188] pushsymb 1510 ........................... <#timeToScrollLines>
  [191] getparam 0 .............................. <me>
  [193] pusharglist 1 ........................... <me>
  [195] objcall 156 ............................. <me.getID()>
  [197] pusharglist 0 ........................... <>
  [199] extcall 159 ............................. <VOID>
  [201] pushint8 1 .............................. <1>
  [203] pusharglistnoret 6 ...................... <#balloonautoscroll, pAutoScrollTime, #timeToScrollLines, me.getID(), VOID, 1>
  [205] extcall 408 ............................. createTimeout(#balloonautoscroll, pAutoScrollTime, #timeToScrollLines, me.getID(), VOID, 1)
  [208] ret
end

on timeToScrollLines me
  [  0] getprop 11 .............................. <pState>
  [  2] pushsymb 1513 ........................... <#normal>
  [  5] eq ...................................... <pState = #normal>
  [  6] getprop 1515 ............................ <pVisibleBalloons>
  [  9] pusharglist 1 ........................... <pVisibleBalloons>
  [ 11] objcall 14 .............................. <pVisibleBalloons.count()>
  [ 13] pushzero ................................ <0>
  [ 14] gt ...................................... <pVisibleBalloons.count() > 0>
  [ 15] and ..................................... <(pState = #normal) and (pVisibleBalloons.count() > 0)>
  [ 16] jmpifz [ 46] ............................ if (pState = #normal) and (pVisibleBalloons.count() > 0) then
  [ 19] pusharglist 0 ........................... <>
  [ 21] extcall 159 ............................. <VOID>
  [ 23] setprop 1566 ............................ pLastBalloonId = VOID
  [ 26] pushzero ................................ <0>
  [ 27] setprop 1514 ............................ pScrollCounter = 0
  [ 30] pushsymb 1578 ........................... <#scroll>
  [ 33] setprop 11 .............................. pState = #scroll
  [ 35] getparam 0 .............................. <me>
  [ 37] pusharglist 1 ........................... <me>
  [ 39] objcall 156 ............................. <me.getID()>
  [ 41] pusharglistnoret 1 ...................... <me.getID()>
  [ 43] extcall 674 ............................. receivePrepare(me.getID())
  [ 46] ret
end

on setProperty me, tMode, tProp, tValue
  [  0] getprop 1524 ............................ <pTextMembers>
  [  3] getparam 1 .............................. <tMode>
  [  5] pusharglist 2 ........................... <pTextMembers, tMode>
  [  7] objcall 9 ............................... <pTextMembers[tMode]>
  [  9] pushint8 1 .............................. <1>
  [ 11] lt ...................................... <pTextMembers[tMode] < 1>
  [ 12] jmpifz [ 20] ............................ if pTextMembers[tMode] < 1 then
  [ 15] pushzero ................................ <0>
  [ 16] pusharglistnoret 1 ...................... <0>
  [ 18] extcall 21 .............................. return 0
  [ 20] getprop 1524 ............................ <pTextMembers>
  [ 23] getparam 1 .............................. <tMode>
  [ 25] pusharglist 2 ........................... <pTextMembers, tMode>
  [ 27] objcall 9 ............................... <pTextMembers[tMode]>
  [ 29] setlocal 0 .............................. tmember = pTextMembers[tMode]
  [ 31] getparam 2 .............................. <tProp>
  [ 33] peek 0 .................................. case tProp of
  [ 35] pushsymb 1527 ........................... <#wordWrap>
  [ 38] eq
  [ 39] jmpifz [ 52] ............................ (case) #wordWrap:
  [ 42] getlocal 0 .............................. <tmember>
  [ 44] getparam 3 .............................. <tValue>
  [ 46] setobjprop 1527 ......................... tmember.wordWrap = tValue
  [ 49] jmp [173]
  [ 52] peek 0
  [ 54] pushsymb 1529 ........................... <#boxType>
  [ 57] eq
  [ 58] jmpifz [ 71] ............................ (case) #boxType:
  [ 61] getlocal 0 .............................. <tmember>
  [ 63] getparam 3 .............................. <tValue>
  [ 65] setobjprop 1529 ......................... tmember.boxType = tValue
  [ 68] jmp [173]
  [ 71] peek 0
  [ 73] pushsymb 1530 ........................... <#antialias>
  [ 76] eq
  [ 77] jmpifz [ 90] ............................ (case) #antialias:
  [ 80] getlocal 0 .............................. <tmember>
  [ 82] getparam 3 .............................. <tValue>
  [ 84] setobjprop 1530 ......................... tmember.antialias = tValue
  [ 87] jmp [173]
  [ 90] peek 0
  [ 92] pushsymb 1531 ........................... <#font>
  [ 95] eq
  [ 96] jmpifz [109] ............................ (case) #font:
  [ 99] getlocal 0 .............................. <tmember>
  [101] getparam 3 .............................. <tValue>
  [103] setobjprop 1531 ......................... tmember.font = tValue
  [106] jmp [173]
  [109] peek 0
  [111] pushsymb 1532 ........................... <#fontSize>
  [114] eq
  [115] jmpifz [128] ............................ (case) #fontSize:
  [118] getlocal 0 .............................. <tmember>
  [120] getparam 3 .............................. <tValue>
  [122] setobjprop 1532 ......................... tmember.fontSize = tValue
  [125] jmp [173]
  [128] peek 0
  [130] pushsymb 1533 ........................... <#fontStyle>
  [133] eq
  [134] jmpifz [147] ............................ (case) #fontStyle:
  [137] getlocal 0 .............................. <tmember>
  [139] getparam 3 .............................. <tValue>
  [141] setobjprop 1533 ......................... tmember.fontStyle = tValue
  [144] jmp [173]
  [147] peek 0
  [149] pushsymb 357 ............................ <#color>
  [152] eq
  [153] jmpifz [166] ............................ (case) #color:
  [156] getlocal 0 .............................. <tmember>
  [158] getparam 3 .............................. <tValue>
  [160] setobjprop 357 .......................... tmember.color = tValue
  [163] jmp [173] ............................... (case) otherwise:
  [166] pop 1
  [168] pushzero ................................ <0>
  [169] pusharglistnoret 1 ...................... <0>
  [171] extcall 21 .............................. return 0
  [173] pop 1 ................................... end case
  [175] ret
end

on flipH me, tImg
  [  0] getparam 1 .............................. <tImg>
  [  2] getobjprop 252 .......................... <tImg.width>
  [  4] getparam 1 .............................. <tImg>
  [  6] getobjprop 291 .......................... <tImg.height>
  [  9] getparam 1 .............................. <tImg>
  [ 11] getobjprop 1162 ......................... <tImg.depth>
  [ 14] pusharglist 3 ........................... <tImg.width, tImg.height, tImg.depth>
  [ 16] extcall 290 ............................. <image(tImg.width, tImg.height, tImg.depth)>
  [ 19] setlocal 0 .............................. tImage = image(tImg.width, tImg.height, tImg.depth)
  [ 21] getparam 1 .............................. <tImg>
  [ 23] getobjprop 252 .......................... <tImg.width>
  [ 25] pushzero ................................ <0>
  [ 26] pusharglist 2 ........................... <tImg.width, 0>
  [ 28] extcall 293 ............................. <point(tImg.width, 0)>
  [ 31] pushzero ................................ <0>
  [ 32] pushzero ................................ <0>
  [ 33] pusharglist 2 ........................... <0, 0>
  [ 35] extcall 293 ............................. <point(0, 0)>
  [ 38] pushzero ................................ <0>
  [ 39] getparam 1 .............................. <tImg>
  [ 41] getobjprop 291 .......................... <tImg.height>
  [ 44] pusharglist 2 ........................... <0, tImg.height>
  [ 46] extcall 293 ............................. <point(0, tImg.height)>
  [ 49] getparam 1 .............................. <tImg>
  [ 51] getobjprop 252 .......................... <tImg.width>
  [ 53] getparam 1 .............................. <tImg>
  [ 55] getobjprop 291 .......................... <tImg.height>
  [ 58] pusharglist 2 ........................... <tImg.width, tImg.height>
  [ 60] extcall 293 ............................. <point(tImg.width, tImg.height)>
  [ 63] pusharglist 4 ........................... <[point(tImg.width, 0), point(0, 0), point(0, tImg.height), point(tImg.width, tImg.height)]>
  [ 65] pushlist ................................ <[point(tImg.width, 0), point(0, 0), point(0, tImg.height), point(tImg.width, tImg.height)]>
  [ 66] setlocal 1 .............................. tQuad = [point(tImg.width, 0), point(0, 0), point(0, tImg.height), point(tImg.width, tImg.height)]
  [ 68] getlocal 0 .............................. <tImage>
  [ 70] getparam 1 .............................. <tImg>
  [ 72] getlocal 1 .............................. <tQuad>
  [ 74] getparam 1 .............................. <tImg>
  [ 76] getobjprop 322 .......................... <tImg.rect>
  [ 79] pusharglistnoret 4 ...................... <tImage, tImg, tQuad, tImg.rect>
  [ 81] objcall 323 ............................. tImage.copyPixels(tImg, tQuad, tImg.rect)
  [ 84] getlocal 0 .............................. <tImage>
  [ 86] pusharglistnoret 1 ...................... <tImage>
  [ 88] extcall 21 .............................. return tImage
  [ 90] ret
end

on flipV me, tImg
  [  0] getparam 1 .............................. <tImg>
  [  2] getobjprop 252 .......................... <tImg.width>
  [  4] getparam 1 .............................. <tImg>
  [  6] getobjprop 291 .......................... <tImg.height>
  [  9] getparam 1 .............................. <tImg>
  [ 11] getobjprop 1162 ......................... <tImg.depth>
  [ 14] pusharglist 3 ........................... <tImg.width, tImg.height, tImg.depth>
  [ 16] extcall 290 ............................. <image(tImg.width, tImg.height, tImg.depth)>
  [ 19] setlocal 0 .............................. tImage = image(tImg.width, tImg.height, tImg.depth)
  [ 21] pushzero ................................ <0>
  [ 22] getparam 1 .............................. <tImg>
  [ 24] getobjprop 291 .......................... <tImg.height>
  [ 27] pusharglist 2 ........................... <0, tImg.height>
  [ 29] extcall 293 ............................. <point(0, tImg.height)>
  [ 32] getparam 1 .............................. <tImg>
  [ 34] getobjprop 252 .......................... <tImg.width>
  [ 36] getparam 1 .............................. <tImg>
  [ 38] getobjprop 291 .......................... <tImg.height>
  [ 41] pusharglist 2 ........................... <tImg.width, tImg.height>
  [ 43] extcall 293 ............................. <point(tImg.width, tImg.height)>
  [ 46] getparam 1 .............................. <tImg>
  [ 48] getobjprop 252 .......................... <tImg.width>
  [ 50] pushzero ................................ <0>
  [ 51] pusharglist 2 ........................... <tImg.width, 0>
  [ 53] extcall 293 ............................. <point(tImg.width, 0)>
  [ 56] pushzero ................................ <0>
  [ 57] pushzero ................................ <0>
  [ 58] pusharglist 2 ........................... <0, 0>
  [ 60] extcall 293 ............................. <point(0, 0)>
  [ 63] pusharglist 4 ........................... <[point(0, tImg.height), point(tImg.width, tImg.height), point(tImg.width, 0), point(0, 0)]>
  [ 65] pushlist ................................ <[point(0, tImg.height), point(tImg.width, tImg.height), point(tImg.width, 0), point(0, 0)]>
  [ 66] setlocal 1 .............................. tQuad = [point(0, tImg.height), point(tImg.width, tImg.height), point(tImg.width, 0), point(0, 0)]
  [ 68] getlocal 0 .............................. <tImage>
  [ 70] getparam 1 .............................. <tImg>
  [ 72] getlocal 1 .............................. <tQuad>
  [ 74] getparam 1 .............................. <tImg>
  [ 76] getobjprop 322 .......................... <tImg.rect>
  [ 79] pusharglistnoret 4 ...................... <tImage, tImg, tQuad, tImg.rect>
  [ 81] objcall 323 ............................. tImage.copyPixels(tImg, tQuad, tImg.rect)
  [ 84] getlocal 0 .............................. <tImage>
  [ 86] pusharglistnoret 1 ...................... <tImage>
  [ 88] extcall 21 .............................. return tImage
  [ 90] ret
end
