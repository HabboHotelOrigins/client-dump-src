property pLockLocZ, pDefLocX, pDefLocY, pClsList, pModalID

on construct me
  [  0] pushzero ................................ <0>
  [  1] setprop 980 ............................. pLockLocZ = 0
  [  4] pushcons 0 .............................. <"window.default.locx">
  [  6] pushint8 100 ............................ <100>
  [  8] pusharglist 2 ........................... <"window.default.locx", 100>
  [ 10] extcall 373 ............................. <getIntVariable("window.default.locx", 100)>
  [ 13] setprop 981 ............................. pDefLocX = getIntVariable("window.default.locx", 100)
  [ 16] pushcons 1 .............................. <"window.default.locy">
  [ 18] pushint8 100 ............................ <100>
  [ 20] pusharglist 2 ........................... <"window.default.locy", 100>
  [ 22] extcall 373 ............................. <getIntVariable("window.default.locy", 100)>
  [ 25] setprop 982 ............................. pDefLocY = getIntVariable("window.default.locy", 100)
  [ 28] getparam 0 .............................. <me>
  [ 30] pusharglist 0 ........................... <[]>
  [ 32] pushlist ................................ <[]>
  [ 33] setobjprop 639 .......................... me.pItemList = []
  [ 36] getparam 0 .............................. <me>
  [ 38] pusharglist 0 ........................... <[]>
  [ 40] pushlist ................................ <[]>
  [ 41] setobjprop 964 .......................... me.pHideList = []
  [ 44] getparam 0 .............................. <me>
  [ 46] pushsymb 978 ............................ <#defaultLocZ>
  [ 49] pushcons 2 .............................. <"window.default.locz">
  [ 51] pushzero ................................ <0>
  [ 52] pusharglist 2 ........................... <"window.default.locz", 0>
  [ 54] extcall 373 ............................. <getIntVariable("window.default.locz", 0)>
  [ 57] pusharglistnoret 3 ...................... <me, #defaultLocZ, getIntVariable("window.default.locz", 0)>
  [ 59] objcall 709 ............................. me.setProperty(#defaultLocZ, getIntVariable("window.default.locz", 0))
  [ 62] getparam 0 .............................. <me>
  [ 64] pushzero ................................ <0>
  [ 65] pushzero ................................ <0>
  [ 66] getmovieprop 968 ........................ <the stage>
  [ 69] getchainedprop 969 ...................... <(the stage).sourceRect>
  [ 72] getobjprop 42 ........................... <(the stage).sourceRect.width>
  [ 74] getmovieprop 968 ........................ <the stage>
  [ 77] getchainedprop 969 ...................... <(the stage).sourceRect>
  [ 80] getobjprop 43 ........................... <(the stage).sourceRect.height>
  [ 82] pusharglist 4 ........................... <0, 0, (the stage).sourceRect.width, (the stage).sourceRect.height>
  [ 84] extcall 555 ............................. <rect(0, 0, (the stage).sourceRect.width, (the stage).sourceRect.height)>
  [ 87] pushcons 3 .............................. <"window.boundary.limit">
  [ 89] pusharglist 1 ........................... <"window.boundary.limit">
  [ 91] extcall 375 ............................. <getVariableValue("window.boundary.limit")>
  [ 94] add ..................................... <rect(0, 0, (the stage).sourceRect.width, (the stage).sourceRect.height) + getVariableValue("window.boundary.limit")>
  [ 95] setobjprop 967 .......................... me.pBoundary = rect(0, 0, (the stage).sourceRect.width, (the stage).sourceRect.height) + getVariableValue("window.boundary.limit")
  [ 98] getparam 0 .............................. <me>
  [100] pushcons 4 .............................. <"window.instance.class">
  [102] pusharglist 1 ........................... <"window.instance.class">
  [104] extcall 155 ............................. <getClassVariable("window.instance.class")>
  [106] setobjprop 961 .......................... me.pInstanceClass = getClassVariable("window.instance.class")
  [109] pusharglist 0 ........................... <[:]>
  [111] pushproplist ............................ <[:]>
  [112] setprop 983 ............................. pClsList = [:]
  [115] pushsymb 686 ............................ <#modal>
  [118] setprop 984 ............................. pModalID = #modal
  [121] getprop 983 ............................. <pClsList>
  [124] pushsymb 985 ............................ <#wrapper>
  [127] pushcons 5 .............................. <"window.wrapper.class">
  [129] pusharglist 1 ........................... <"window.wrapper.class">
  [131] extcall 155 ............................. <getClassVariable("window.wrapper.class")>
  [133] pusharglistnoret 3 ...................... <pClsList, #wrapper, getClassVariable("window.wrapper.class")>
  [135] objcall 24 .............................. pClsList[#wrapper] = getClassVariable("window.wrapper.class")
  [137] getprop 983 ............................. <pClsList>
  [140] pushsymb 986 ............................ <#unique>
  [143] pushcons 6 .............................. <"window.unique.class">
  [145] pusharglist 1 ........................... <"window.unique.class">
  [147] extcall 155 ............................. <getClassVariable("window.unique.class")>
  [149] pusharglistnoret 3 ...................... <pClsList, #unique, getClassVariable("window.unique.class")>
  [151] objcall 24 .............................. pClsList[#unique] = getClassVariable("window.unique.class")
  [153] getprop 983 ............................. <pClsList>
  [156] pushsymb 987 ............................ <#grouped>
  [159] pushcons 7 .............................. <"window.grouped.class">
  [161] pusharglist 1 ........................... <"window.grouped.class">
  [163] extcall 155 ............................. <getClassVariable("window.grouped.class")>
  [165] pusharglistnoret 3 ...................... <pClsList, #grouped, getClassVariable("window.grouped.class")>
  [167] objcall 24 .............................. pClsList[#grouped] = getClassVariable("window.grouped.class")
  [169] pushcons 8 .............................. <"null">
  [171] pusharglist 1 ........................... <"null">
  [173] extcall 170 ............................. <memberExists("null")>
  [175] not ..................................... <not memberExists("null")>
  [176] jmpifz [230] ............................ if not memberExists("null") then
  [179] pushcons 8 .............................. <"null">
  [181] pushsymb 722 ............................ <#bitmap>
  [184] pusharglist 2 ........................... <"null", #bitmap>
  [186] extcall 164 ............................. <createMember("null", #bitmap)>
  [188] pusharglist 1 ........................... <createMember("null", #bitmap)>
  [190] extcall 41 .............................. <member(createMember("null", #bitmap))>
  [192] setlocal 0 .............................. tNull = member(createMember("null", #bitmap))
  [194] getlocal 0 .............................. <tNull>
  [196] pushint8 1 .............................. <1>
  [198] pushint8 1 .............................. <1>
  [200] pushint8 8 .............................. <8>
  [202] pusharglist 3 ........................... <1, 1, 8>
  [204] extcall 500 ............................. <image(1, 1, 8)>
  [207] setobjprop 500 .......................... tNull.image = image(1, 1, 8)
  [210] getlocal 0 .............................. <tNull>
  [212] getchainedprop 500 ...................... <tNull.image>
  [215] pushzero ................................ <0>
  [216] pushzero ................................ <0>
  [217] pushzero ................................ <0>
  [218] pushzero ................................ <0>
  [219] pushzero ................................ <0>
  [220] pusharglist 3 ........................... <0, 0, 0>
  [222] extcall 576 ............................. <rgb(0, 0, 0)>
  [225] pusharglistnoret 4 ...................... <tNull.image, 0, 0, rgb(0, 0, 0)>
  [227] objcall 577 ............................. tNull.image.setPixel(0, 0, rgb(0, 0, 0))
  [230] pushsymb 457 ............................ <#layout_parser>
  [233] pusharglist 1 ........................... <#layout_parser>
  [235] extcall 67 .............................. <objectExists(#layout_parser)>
  [237] not ..................................... <not objectExists(#layout_parser)>
  [238] jmpifz [254] ............................ if not objectExists(#layout_parser) then
  [241] pushsymb 457 ............................ <#layout_parser>
  [244] pushcons 9 .............................. <"layout.parser.class">
  [246] pusharglist 1 ........................... <"layout.parser.class">
  [248] extcall 155 ............................. <getClassVariable("layout.parser.class")>
  [250] pusharglistnoret 2 ...................... <#layout_parser, getClassVariable("layout.parser.class")>
  [252] extcall 94 .............................. createObject(#layout_parser, getClassVariable("layout.parser.class"))
  [254] pushint8 1 .............................. <1>
  [256] pusharglistnoret 1 ...................... <1>
  [258] extcall 25 .............................. return 1
  [260] ret
end

on create me, tid, tLayout, tLocX, tLocY, tSpecial
  [  0] getparam 5 .............................. <tSpecial>
  [  2] peek 0 .................................. case tSpecial of
  [  4] pushsymb 686 ............................ <#modal>
  [  7] eq
  [  8] jmpifz [ 28] ............................ (case) #modal:
  [ 11] pop 1
  [ 13] getparam 0 .............................. <me>
  [ 15] getparam 1 .............................. <tid>
  [ 17] getparam 2 .............................. <tLayout>
  [ 19] pusharglist 3 ........................... <me, tid, tLayout>
  [ 21] objcall 686 ............................. <me.modal(tid, tLayout)>
  [ 24] pusharglistnoret 1 ...................... <me.modal(tid, tLayout)>
  [ 26] extcall 25 .............................. return me.modal(tid, tLayout)
  [ 28] pop 1
  [ 30] getparam 2 .............................. <tLayout>
  [ 32] pusharglist 1 ........................... <tLayout>
  [ 34] extcall 20 .............................. <voidp(tLayout)>
  [ 36] jmpifz [ 43] ............................ if voidp(tLayout) then
  [ 39] pushcons 10 ............................. <"empty.window">
  [ 41] setparam 2 .............................. tLayout = "empty.window"
  [ 43] getparam 0 .............................. <me>
  [ 45] getparam 1 .............................. <tid>
  [ 47] pusharglist 2 ........................... <me, tid>
  [ 49] objcall 88 .............................. <me.exists(tid)>
  [ 51] jmpifz [116] ............................ if me.exists(tid) then
  [ 54] getparam 3 .............................. <tLocX>
  [ 56] pusharglist 1 ........................... <tLocX>
  [ 58] extcall 20 .............................. <voidp(tLocX)>
  [ 60] jmpifz [ 81] ............................ if voidp(tLocX) then
  [ 63] getparam 0 .............................. <me>
  [ 65] getparam 1 .............................. <tid>
  [ 67] pusharglist 2 ........................... <me, tid>
  [ 69] objcall 90 .............................. <me.get(tid)>
  [ 71] pushsymb 538 ............................ <#locX>
  [ 74] pusharglist 2 ........................... <me.get(tid), #locX>
  [ 76] objcall 442 ............................. <me.get(tid).getProperty(#locX)>
  [ 79] setparam 3 .............................. tLocX = me.get(tid).getProperty(#locX)
  [ 81] getparam 4 .............................. <tLocY>
  [ 83] pusharglist 1 ........................... <tLocY>
  [ 85] extcall 20 .............................. <voidp(tLocY)>
  [ 87] jmpifz [108] ............................ if voidp(tLocY) then
  [ 90] getparam 0 .............................. <me>
  [ 92] getparam 1 .............................. <tid>
  [ 94] pusharglist 2 ........................... <me, tid>
  [ 96] objcall 90 .............................. <me.get(tid)>
  [ 98] pushsymb 539 ............................ <#locY>
  [101] pusharglist 2 ........................... <me.get(tid), #locY>
  [103] objcall 442 ............................. <me.get(tid).getProperty(#locY)>
  [106] setparam 4 .............................. tLocY = me.get(tid).getProperty(#locY)
  [108] getparam 0 .............................. <me>
  [110] getparam 1 .............................. <tid>
  [112] pusharglistnoret 2 ...................... <me, tid>
  [114] objcall 125 ............................. me.Remove(tid)
  [116] getparam 3 .............................. <tLocX>
  [118] pusharglist 1 ........................... <tLocX>
  [120] extcall 681 ............................. <integerp(tLocX)>
  [123] getparam 4 .............................. <tLocY>
  [125] pusharglist 1 ........................... <tLocY>
  [127] extcall 681 ............................. <integerp(tLocY)>
  [130] and ..................................... <integerp(tLocX) and integerp(tLocY)>
  [131] jmpifz [145] ............................ if integerp(tLocX) and integerp(tLocY) then / else
  [134] getparam 3 .............................. <tLocX>
  [136] setlocal 0 .............................. tX = tLocX
  [138] getparam 4 .............................. <tLocY>
  [140] setlocal 1 .............................. tY = tLocY
  [142] jmp [218]
  [145] getparam 0 .............................. <me>
  [147] pushsymb 963 ............................ <#pPosCache>
  [150] getparam 1 .............................. <tid>
  [152] pusharglist 3 ........................... <me, #pPosCache, tid>
  [154] objcall 290 ............................. <me.pPosCache[tid]>
  [157] pusharglist 1 ........................... <me.pPosCache[tid]>
  [159] extcall 20 .............................. <voidp(me.pPosCache[tid])>
  [161] not ..................................... <not voidp(me.pPosCache[tid])>
  [162] jmpifz [208] ............................ if not voidp(me.pPosCache[tid]) then / else
  [165] getparam 0 .............................. <me>
  [167] pushsymb 963 ............................ <#pPosCache>
  [170] getparam 1 .............................. <tid>
  [172] pusharglist 3 ........................... <me, #pPosCache, tid>
  [174] objcall 288 ............................. <me.pPosCache[tid]>
  [177] pushint8 1 .............................. <1>
  [179] pusharglist 2 ........................... <me.pPosCache[tid], 1>
  [181] objcall 54 .............................. <me.pPosCache[tid][1]>
  [183] setlocal 0 .............................. tX = me.pPosCache[tid][1]
  [185] getparam 0 .............................. <me>
  [187] pushsymb 963 ............................ <#pPosCache>
  [190] getparam 1 .............................. <tid>
  [192] pusharglist 3 ........................... <me, #pPosCache, tid>
  [194] objcall 288 ............................. <me.pPosCache[tid]>
  [197] pushint8 2 .............................. <2>
  [199] pusharglist 2 ........................... <me.pPosCache[tid], 2>
  [201] objcall 54 .............................. <me.pPosCache[tid][2]>
  [203] setlocal 1 .............................. tY = me.pPosCache[tid][2]
  [205] jmp [218]
  [208] getprop 981 ............................. <pDefLocX>
  [211] setlocal 0 .............................. tX = pDefLocX
  [213] getprop 982 ............................. <pDefLocY>
  [216] setlocal 1 .............................. tY = pDefLocY
  [218] pusharglist 0 ........................... <>
  [220] extcall 93 .............................. <getObjectManager()>
  [222] getparam 1 .............................. <tid>
  [224] getparam 0 .............................. <me>
  [226] getobjprop 961 .......................... <me.pInstanceClass>
  [229] pusharglist 3 ........................... <getObjectManager(), tid, me.pInstanceClass>
  [231] objcall 81 .............................. <getObjectManager().create(tid, me.pInstanceClass)>
  [233] setlocal 2 .............................. tItem = getObjectManager().create(tid, me.pInstanceClass)
  [235] getlocal 2 .............................. <tItem>
  [237] not ..................................... <not tItem>
  [238] jmpifz [258] ............................ if not tItem then
  [241] getparam 0 .............................. <me>
  [243] pushcons 11 ............................. <"Failed to create window object:">
  [245] getparam 1 .............................. <tid>
  [247] joinpadstr .............................. <"Failed to create window object:" && tid>
  [248] pushsymb 81 ............................. <#create>
  [250] pusharglist 3 ........................... <me, "Failed to create window object:" && tid, #create>
  [252] extcall 39 .............................. <error(me, "Failed to create window object:" && tid, #create)>
  [254] pusharglistnoret 1 ...................... <error(me, "Failed to create window object:" && tid, #create)>
  [256] extcall 25 .............................. return error(me, "Failed to create window object:" && tid, #create)
  [258] pusharglist 0 ........................... <[:]>
  [260] pushproplist ............................ <[:]>
  [261] setlocal 3 .............................. tProps = [:]
  [263] getlocal 3 .............................. <tProps>
  [265] pushsymb 538 ............................ <#locX>
  [268] getlocal 0 .............................. <tX>
  [270] pusharglistnoret 3 ...................... <tProps, #locX, tX>
  [272] objcall 24 .............................. tProps[#locX] = tX
  [274] getlocal 3 .............................. <tProps>
  [276] pushsymb 539 ............................ <#locY>
  [279] getlocal 1 .............................. <tY>
  [281] pusharglistnoret 3 ...................... <tProps, #locY, tY>
  [283] objcall 24 .............................. tProps[#locY] = tY
  [285] getlocal 3 .............................. <tProps>
  [287] pushsymb 881 ............................ <#locZ>
  [290] getparam 0 .............................. <me>
  [292] getobjprop 966 .......................... <me.pAvailableLocZ>
  [295] pusharglistnoret 3 ...................... <tProps, #locZ, me.pAvailableLocZ>
  [297] objcall 24 .............................. tProps[#locZ] = me.pAvailableLocZ
  [299] getlocal 3 .............................. <tProps>
  [301] pushsymb 971 ............................ <#boundary>
  [304] getparam 0 .............................. <me>
  [306] getobjprop 967 .......................... <me.pBoundary>
  [309] pusharglistnoret 3 ...................... <tProps, #boundary, me.pBoundary>
  [311] objcall 24 .............................. tProps[#boundary] = me.pBoundary
  [313] getlocal 3 .............................. <tProps>
  [315] pushsymb 989 ............................ <#elements>
  [318] getprop 983 ............................. <pClsList>
  [321] pusharglistnoret 3 ...................... <tProps, #elements, pClsList>
  [323] objcall 24 .............................. tProps[#elements] = pClsList
  [325] getlocal 3 .............................. <tProps>
  [327] pushsymb 990 ............................ <#manager>
  [330] getparam 0 .............................. <me>
  [332] pusharglistnoret 3 ...................... <tProps, #manager, me>
  [334] objcall 24 .............................. tProps[#manager] = me
  [336] getlocal 2 .............................. <tItem>
  [338] getlocal 3 .............................. <tProps>
  [340] pusharglist 2 ........................... <tItem, tProps>
  [342] objcall 434 ............................. <tItem.define(tProps)>
  [345] not ..................................... <not tItem.define(tProps)>
  [346] jmpifz [364] ............................ if not tItem.define(tProps) then
  [349] pusharglist 0 ........................... <>
  [351] extcall 93 .............................. <getObjectManager()>
  [353] getparam 1 .............................. <tid>
  [355] pusharglistnoret 2 ...................... <getObjectManager(), tid>
  [357] objcall 125 ............................. getObjectManager().Remove(tid)
  [359] pushzero ................................ <0>
  [360] pusharglistnoret 1 ...................... <0>
  [362] extcall 25 .............................. return 0
  [364] getlocal 2 .............................. <tItem>
  [366] getparam 2 .............................. <tLayout>
  [368] pusharglist 2 ........................... <tItem, tLayout>
  [370] objcall 340 ............................. <tItem.merge(tLayout)>
  [373] not ..................................... <not tItem.merge(tLayout)>
  [374] jmpifz [392] ............................ if not tItem.merge(tLayout) then
  [377] pusharglist 0 ........................... <>
  [379] extcall 93 .............................. <getObjectManager()>
  [381] getparam 1 .............................. <tid>
  [383] pusharglistnoret 2 ...................... <getObjectManager(), tid>
  [385] objcall 125 ............................. getObjectManager().Remove(tid)
  [387] pushzero ................................ <0>
  [388] pusharglistnoret 1 ...................... <0>
  [390] extcall 25 .............................. return 0
  [392] getparam 0 .............................. <me>
  [394] getchainedprop 639 ...................... <me.pItemList>
  [397] getparam 1 .............................. <tid>
  [399] pusharglistnoret 2 ...................... <me.pItemList, tid>
  [401] objcall 122 ............................. me.pItemList.add(tid)
  [403] getlocal 4 .............................. <pAvailableLocZ>
  [405] getlocal 2 .............................. <tItem>
  [407] pushsymb 972 ............................ <#sprCount>
  [410] pusharglist 2 ........................... <tItem, #sprCount>
  [412] objcall 442 ............................. <tItem.getProperty(#sprCount)>
  [415] add ..................................... <pAvailableLocZ + tItem.getProperty(#sprCount)>
  [416] setlocal 4 .............................. pAvailableLocZ = pAvailableLocZ + tItem.getProperty(#sprCount)
  [418] getparam 0 .............................. <me>
  [420] pusharglistnoret 1 ...................... <me>
  [422] objcall 341 ............................. me.Activate()
  [425] pushint8 1 .............................. <1>
  [427] pusharglistnoret 1 ...................... <1>
  [429] extcall 25 .............................. return 1
  [431] ret
end

on Remove me, tid
  [  0] getparam 0 .............................. <me>
  [  2] getparam 1 .............................. <tid>
  [  4] pusharglist 2 ........................... <me, tid>
  [  6] objcall 90 .............................. <me.get(tid)>
  [  8] setlocal 0 .............................. tWndObj = me.get(tid)
  [ 10] getlocal 0 .............................. <tWndObj>
  [ 12] pushzero ................................ <0>
  [ 13] eq ...................................... <tWndObj = 0>
  [ 14] jmpifz [ 22] ............................ if tWndObj = 0 then
  [ 17] pushzero ................................ <0>
  [ 18] pusharglistnoret 1 ...................... <0>
  [ 20] extcall 25 .............................. return 0
  [ 22] getparam 0 .............................. <me>
  [ 24] pushsymb 963 ............................ <#pPosCache>
  [ 27] getparam 1 .............................. <tid>
  [ 29] getlocal 0 .............................. <tWndObj>
  [ 31] pushsymb 538 ............................ <#locX>
  [ 34] pusharglist 2 ........................... <tWndObj, #locX>
  [ 36] objcall 442 ............................. <tWndObj.getProperty(#locX)>
  [ 39] getlocal 0 .............................. <tWndObj>
  [ 41] pushsymb 539 ............................ <#locY>
  [ 44] pusharglist 2 ........................... <tWndObj, #locY>
  [ 46] objcall 442 ............................. <tWndObj.getProperty(#locY)>
  [ 49] pusharglist 2 ........................... <[tWndObj.getProperty(#locX), tWndObj.getProperty(#locY)]>
  [ 51] pushlist ................................ <[tWndObj.getProperty(#locX), tWndObj.getProperty(#locY)]>
  [ 52] pusharglistnoret 4 ...................... <me, #pPosCache, tid, [tWndObj.getProperty(#locX), tWndObj.getProperty(#locY)]>
  [ 54] objcall 889 ............................. me.pPosCache[tid] = [tWndObj.getProperty(#locX), tWndObj.getProperty(#locY)]
  [ 57] pusharglist 0 ........................... <>
  [ 59] extcall 93 .............................. <getObjectManager()>
  [ 61] getparam 1 .............................. <tid>
  [ 63] pusharglistnoret 2 ...................... <getObjectManager(), tid>
  [ 65] objcall 125 ............................. getObjectManager().Remove(tid)
  [ 67] getparam 0 .............................. <me>
  [ 69] getchainedprop 639 ...................... <me.pItemList>
  [ 72] getparam 1 .............................. <tid>
  [ 74] pusharglistnoret 2 ...................... <me.pItemList, tid>
  [ 76] objcall 527 ............................. me.pItemList.deleteOne(tid)
  [ 79] getparam 0 .............................. <me>
  [ 81] getobjprop 962 .......................... <me.pActiveItem>
  [ 84] getparam 1 .............................. <tid>
  [ 86] eq ...................................... <me.pActiveItem = tid>
  [ 87] jmpifz [105] ............................ if me.pActiveItem = tid then / else
  [ 90] getparam 0 .............................. <me>
  [ 92] getchainedprop 639 ...................... <me.pItemList>
  [ 95] pusharglist 1 ........................... <me.pItemList>
  [ 97] objcall 663 ............................. <me.pItemList.getLast()>
  [100] setlocal 1 .............................. tNextActive = me.pItemList.getLast()
  [102] jmp [112]
  [105] getparam 0 .............................. <me>
  [107] getobjprop 962 .......................... <me.pActiveItem>
  [110] setlocal 1 .............................. tNextActive = me.pActiveItem
  [112] getparam 0 .............................. <me>
  [114] getprop 984 ............................. <pModalID>
  [117] pusharglist 2 ........................... <me, pModalID>
  [119] objcall 88 .............................. <me.exists(pModalID)>
  [121] jmpifz [214] ............................ if me.exists(pModalID) then
  [124] pushzero ................................ <0>
  [125] setlocal 2 .............................. tModals = 0
  [127] getparam 0 .............................. <me>
  [129] pushsymb 639 ............................ <#pItemList>
  [132] pusharglist 2 ........................... <me, #pItemList>
  [134] objcall 22 .............................. <me.pItemList.count>
  [136] setlocal 3
  [138] getlocal 3
  [140] pushint8 1 .............................. <1>
  [142] gteq
  [143] jmpifz [199] ............................ repeat with i = me.pItemList.count down to 1
  [146] getparam 0 .............................. <me>
  [148] pushsymb 639 ............................ <#pItemList>
  [151] getlocal 3 .............................. <i>
  [153] pusharglist 3 ........................... <me, #pItemList, i>
  [155] objcall 290 ............................. <me.pItemList[i]>
  [158] setparam 1 .............................. tid = me.pItemList[i]
  [160] getparam 0 .............................. <me>
  [162] getparam 1 .............................. <tid>
  [164] pusharglist 2 ........................... <me, tid>
  [166] objcall 90 .............................. <me.get(tid)>
  [168] pushsymb 686 ............................ <#modal>
  [171] pusharglist 2 ........................... <me.get(tid), #modal>
  [173] objcall 442 ............................. <me.get(tid).getProperty(#modal)>
  [176] jmpifz [190] ............................ if me.get(tid).getProperty(#modal) then
  [179] pushint8 1 .............................. <1>
  [181] setlocal 2 .............................. tModals = 1
  [183] getparam 1 .............................. <tid>
  [185] setlocal 1 .............................. tNextActive = tid
  [187] jmp [199] ............................... exit repeat
  [190] pushint8 -1
  [192] getlocal 3
  [194] add
  [195] setlocal 3
  [197] endrepeat [138]
  [199] getlocal 2 .............................. <tModals>
  [201] not ..................................... <not tModals>
  [202] jmpifz [214] ............................ if not tModals then
  [205] getparam 0 .............................. <me>
  [207] getprop 984 ............................. <pModalID>
  [210] pusharglistnoret 2 ...................... <me, pModalID>
  [212] objcall 125 ............................. me.Remove(pModalID)
  [214] getparam 0 .............................. <me>
  [216] getlocal 1 .............................. <tNextActive>
  [218] pusharglistnoret 2 ...................... <me, tNextActive>
  [220] objcall 341 ............................. me.Activate(tNextActive)
  [223] pushint8 1 .............................. <1>
  [225] pusharglistnoret 1 ...................... <1>
  [227] extcall 25 .............................. return 1
  [229] ret
end

on Activate me, tid
  [  0] getprop 980 ............................. <pLockLocZ>
  [  3] jmpifz [ 11] ............................ if pLockLocZ then
  [  6] pushzero ................................ <0>
  [  7] pusharglistnoret 1 ...................... <0>
  [  9] extcall 25 .............................. return 0
  [ 11] getparam 0 .............................. <me>
  [ 13] pushsymb 639 ............................ <#pItemList>
  [ 16] pusharglist 2 ........................... <me, #pItemList>
  [ 18] objcall 22 .............................. <me.pItemList.count>
  [ 20] pushzero ................................ <0>
  [ 21] eq ...................................... <me.pItemList.count = 0>
  [ 22] jmpifz [ 30] ............................ if me.pItemList.count = 0 then
  [ 25] pushzero ................................ <0>
  [ 26] pusharglistnoret 1 ...................... <0>
  [ 28] extcall 25 .............................. return 0
  [ 30] getparam 0 .............................. <me>
  [ 32] getparam 0 .............................. <me>
  [ 34] getobjprop 962 .......................... <me.pActiveItem>
  [ 37] pusharglist 2 ........................... <me, me.pActiveItem>
  [ 39] objcall 88 .............................. <me.exists(me.pActiveItem)>
  [ 41] jmpifz [111] ............................ if me.exists(me.pActiveItem) then
  [ 44] getparam 0 .............................. <me>
  [ 46] getparam 0 .............................. <me>
  [ 48] getobjprop 962 .......................... <me.pActiveItem>
  [ 51] pusharglist 2 ........................... <me, me.pActiveItem>
  [ 53] objcall 90 .............................. <me.get(me.pActiveItem)>
  [ 55] pushsymb 686 ............................ <#modal>
  [ 58] pusharglist 2 ........................... <me.get(me.pActiveItem), #modal>
  [ 60] objcall 442 ............................. <me.get(me.pActiveItem).getProperty(#modal)>
  [ 63] jmpifz [111] ............................ if me.get(me.pActiveItem).getProperty(#modal) then
  [ 66] getparam 0 .............................. <me>
  [ 68] getobjprop 962 .......................... <me.pActiveItem>
  [ 71] setparam 1 .............................. tid = me.pActiveItem
  [ 73] getparam 0 .............................. <me>
  [ 75] getprop 984 ............................. <pModalID>
  [ 78] pusharglist 2 ........................... <me, pModalID>
  [ 80] objcall 88 .............................. <me.exists(pModalID)>
  [ 82] jmpifz [111] ............................ if me.exists(pModalID) then
  [ 85] getparam 0 .............................. <me>
  [ 87] getchainedprop 639 ...................... <me.pItemList>
  [ 90] getprop 984 ............................. <pModalID>
  [ 93] pusharglistnoret 2 ...................... <me.pItemList, pModalID>
  [ 95] objcall 527 ............................. me.pItemList.deleteOne(pModalID)
  [ 98] getparam 0 .............................. <me>
  [100] getchainedprop 639 ...................... <me.pItemList>
  [103] getprop 984 ............................. <pModalID>
  [106] pusharglistnoret 2 ...................... <me.pItemList, pModalID>
  [108] objcall 664 ............................. me.pItemList.append(pModalID)
  [111] getparam 1 .............................. <tid>
  [113] pusharglist 1 ........................... <tid>
  [115] extcall 20 .............................. <voidp(tid)>
  [117] jmpifz [135] ............................ if voidp(tid) then / else
  [120] getparam 0 .............................. <me>
  [122] getchainedprop 639 ...................... <me.pItemList>
  [125] pusharglist 1 ........................... <me.pItemList>
  [127] objcall 663 ............................. <me.pItemList.getLast()>
  [130] setparam 1 .............................. tid = me.pItemList.getLast()
  [132] jmp [152]
  [135] getparam 0 .............................. <me>
  [137] getparam 1 .............................. <tid>
  [139] pusharglist 2 ........................... <me, tid>
  [141] objcall 88 .............................. <me.exists(tid)>
  [143] not ..................................... <not me.exists(tid)>
  [144] jmpifz [152] ............................ if not me.exists(tid) then
  [147] pushzero ................................ <0>
  [148] pusharglistnoret 1 ...................... <0>
  [150] extcall 25 .............................. return 0
  [152] getparam 0 .............................. <me>
  [154] getchainedprop 639 ...................... <me.pItemList>
  [157] getparam 1 .............................. <tid>
  [159] pusharglistnoret 2 ...................... <me.pItemList, tid>
  [161] objcall 527 ............................. me.pItemList.deleteOne(tid)
  [164] getparam 0 .............................. <me>
  [166] getchainedprop 639 ...................... <me.pItemList>
  [169] getparam 1 .............................. <tid>
  [171] pusharglistnoret 2 ...................... <me.pItemList, tid>
  [173] objcall 664 ............................. me.pItemList.append(tid)
  [176] getparam 0 .............................. <me>
  [178] getparam 0 .............................. <me>
  [180] getobjprop 965 .......................... <me.pDefaultLocZ>
  [183] setobjprop 966 .......................... me.pAvailableLocZ = me.pDefaultLocZ
  [186] getparam 0 .............................. <me>
  [188] getobjprop 639 .......................... <me.pItemList>
  [191] peek 0
  [193] pusharglist 1
  [195] extcall 22
  [197] pushint8 1
  [199] peek 0
  [201] peek 2
  [203] lteq
  [204] jmpifz [305] ............................ repeat with tCurrID in me.pItemList
  [207] peek 2
  [209] peek 1
  [211] pusharglist 2
  [213] extcall 54
  [215] setlocal 0
  [217] getparam 0 .............................. <me>
  [219] getlocal 0 .............................. <tCurrID>
  [221] pusharglist 2 ........................... <me, tCurrID>
  [223] objcall 90 .............................. <me.get(tCurrID)>
  [225] setlocal 1 .............................. tWndObj = me.get(tCurrID)
  [227] getlocal 1 .............................. <tWndObj>
  [229] pusharglistnoret 1 ...................... <tWndObj>
  [231] objcall 975 ............................. tWndObj.setDeactive()
  [234] getlocal 1 .............................. <tWndObj>
  [236] pushsymb 996 ............................ <#spriteList>
  [239] pusharglist 2 ........................... <tWndObj, #spriteList>
  [241] objcall 442 ............................. <tWndObj.getProperty(#spriteList)>
  [244] peek 0
  [246] pusharglist 1
  [248] extcall 22
  [250] pushint8 1
  [252] peek 0
  [254] peek 2
  [256] lteq
  [257] jmpifz [298] ............................ repeat with tSpr in tWndObj.getProperty(#spriteList)
  [260] peek 2
  [262] peek 1
  [264] pusharglist 2
  [266] extcall 54
  [268] setlocal 2
  [270] getlocal 2 .............................. <tSpr>
  [272] getparam 0 .............................. <me>
  [274] getobjprop 966 .......................... <me.pAvailableLocZ>
  [277] setobjprop 881 .......................... tSpr.locZ = me.pAvailableLocZ
  [280] getparam 0 .............................. <me>
  [282] getparam 0 .............................. <me>
  [284] getobjprop 966 .......................... <me.pAvailableLocZ>
  [287] pushint8 1 .............................. <1>
  [289] add ..................................... <me.pAvailableLocZ + 1>
  [290] setobjprop 966 .......................... me.pAvailableLocZ = me.pAvailableLocZ + 1
  [293] pushint8 1
  [295] add
  [296] endrepeat [252]
  [298] pop 3
  [300] pushint8 1
  [302] add
  [303] endrepeat [199]
  [305] pop 3
  [307] getparam 0 .............................. <me>
  [309] getparam 1 .............................. <tid>
  [311] setobjprop 962 .......................... me.pActiveItem = tid
  [314] getparam 0 .............................. <me>
  [316] getparam 1 .............................. <tid>
  [318] pusharglist 2 ........................... <me, tid>
  [320] objcall 90 .............................. <me.get(tid)>
  [322] pusharglist 1 ........................... <me.get(tid)>
  [324] objcall 974 ............................. <me.get(tid).setActive()>
  [327] pusharglistnoret 1 ...................... <me.get(tid).setActive()>
  [329] extcall 25 .............................. return me.get(tid).setActive()
  [331] ret
end

on deactivate me, tid
  [  0] getparam 0 .............................. <me>
  [  2] getparam 1 .............................. <tid>
  [  4] pusharglist 2 ........................... <me, tid>
  [  6] objcall 88 .............................. <me.exists(tid)>
  [  8] jmpifz [ 70] ............................ if me.exists(tid) then
  [ 11] getparam 0 .............................. <me>
  [ 13] getparam 1 .............................. <tid>
  [ 15] pusharglist 2 ........................... <me, tid>
  [ 17] objcall 90 .............................. <me.get(tid)>
  [ 19] pushsymb 686 ............................ <#modal>
  [ 22] pusharglist 2 ........................... <me.get(tid), #modal>
  [ 24] objcall 442 ............................. <me.get(tid).getProperty(#modal)>
  [ 27] not ..................................... <not me.get(tid).getProperty(#modal)>
  [ 28] jmpifz [ 70] ............................ if not me.get(tid).getProperty(#modal) then
  [ 31] getparam 0 .............................. <me>
  [ 33] getchainedprop 639 ...................... <me.pItemList>
  [ 36] getparam 1 .............................. <tid>
  [ 38] pusharglistnoret 2 ...................... <me.pItemList, tid>
  [ 40] objcall 527 ............................. me.pItemList.deleteOne(tid)
  [ 43] getparam 0 .............................. <me>
  [ 45] getchainedprop 639 ...................... <me.pItemList>
  [ 48] pushint8 1 .............................. <1>
  [ 50] getparam 1 .............................. <tid>
  [ 52] pusharglistnoret 3 ...................... <me.pItemList, 1, tid>
  [ 54] objcall 657 ............................. me.pItemList.addAt(1, tid)
  [ 57] getparam 0 .............................. <me>
  [ 59] pusharglistnoret 1 ...................... <me>
  [ 61] objcall 341 ............................. me.Activate()
  [ 64] pushint8 1 .............................. <1>
  [ 66] pusharglistnoret 1 ...................... <1>
  [ 68] extcall 25 .............................. return 1
  [ 70] pushzero ................................ <0>
  [ 71] pusharglistnoret 1 ...................... <0>
  [ 73] extcall 25 .............................. return 0
  [ 75] ret
end

on lock me
  [  0] pushint8 1 .............................. <1>
  [  2] setprop 980 ............................. pLockLocZ = 1
  [  5] pushint8 1 .............................. <1>
  [  7] pusharglistnoret 1 ...................... <1>
  [  9] extcall 25 .............................. return 1
  [ 11] ret
end

on unlock me
  [  0] pushzero ................................ <0>
  [  1] setprop 980 ............................. pLockLocZ = 0
  [  4] pushint8 1 .............................. <1>
  [  6] pusharglistnoret 1 ...................... <1>
  [  8] extcall 25 .............................. return 1
  [ 10] ret
end

on modal me, tid, tLayout
  [  0] getparam 0 .............................. <me>
  [  2] getparam 1 .............................. <tid>
  [  4] getparam 2 .............................. <tLayout>
  [  6] pusharglist 3 ........................... <me, tid, tLayout>
  [  8] objcall 81 .............................. <me.create(tid, tLayout)>
  [ 10] not ..................................... <not me.create(tid, tLayout)>
  [ 11] jmpifz [ 19] ............................ if not me.create(tid, tLayout) then
  [ 14] pushzero ................................ <0>
  [ 15] pusharglistnoret 1 ...................... <0>
  [ 17] extcall 25 .............................. return 0
  [ 19] getparam 0 .............................. <me>
  [ 21] getparam 1 .............................. <tid>
  [ 23] pusharglist 2 ........................... <me, tid>
  [ 25] objcall 90 .............................. <me.get(tid)>
  [ 27] setlocal 0 .............................. tWndObj = me.get(tid)
  [ 29] getlocal 0 .............................. <tWndObj>
  [ 31] pusharglistnoret 1 ...................... <tWndObj>
  [ 33] objcall 506 ............................. tWndObj.center()
  [ 36] getlocal 0 .............................. <tWndObj>
  [ 38] pusharglistnoret 1 ...................... <tWndObj>
  [ 40] objcall 345 ............................. tWndObj.lock()
  [ 43] getlocal 0 .............................. <tWndObj>
  [ 45] pushsymb 686 ............................ <#modal>
  [ 48] pushint8 1 .............................. <1>
  [ 50] pusharglistnoret 3 ...................... <tWndObj, #modal, 1>
  [ 52] objcall 709 ............................. tWndObj.setProperty(#modal, 1)
  [ 55] getparam 0 .............................. <me>
  [ 57] getprop 984 ............................. <pModalID>
  [ 60] pusharglist 2 ........................... <me, pModalID>
  [ 62] objcall 88 .............................. <me.exists(pModalID)>
  [ 64] not ..................................... <not me.exists(pModalID)>
  [ 65] jmpifz [165] ............................ if not me.exists(pModalID) then
  [ 68] getparam 0 .............................. <me>
  [ 70] getprop 984 ............................. <pModalID>
  [ 73] pushcons 12 ............................. <"modal.window">
  [ 75] pusharglist 3 ........................... <me, pModalID, "modal.window">
  [ 77] objcall 81 .............................. <me.create(pModalID, "modal.window")>
  [ 79] jmpifz [154] ............................ if me.create(pModalID, "modal.window") then / else
  [ 82] getparam 0 .............................. <me>
  [ 84] getprop 984 ............................. <pModalID>
  [ 87] pusharglist 2 ........................... <me, pModalID>
  [ 89] objcall 90 .............................. <me.get(pModalID)>
  [ 91] setlocal 1 .............................. tModal = me.get(pModalID)
  [ 93] getlocal 1 .............................. <tModal>
  [ 95] pushzero ................................ <0>
  [ 96] pushzero ................................ <0>
  [ 97] pusharglistnoret 3 ...................... <tModal, 0, 0>
  [ 99] objcall 999 ............................. tModal.moveTo(0, 0)
  [102] getlocal 1 .............................. <tModal>
  [104] getmovieprop 968 ........................ <the stage>
  [107] getchainedprop 969 ...................... <(the stage).sourceRect>
  [110] getobjprop 42 ........................... <(the stage).sourceRect.width>
  [112] getmovieprop 968 ........................ <the stage>
  [115] getchainedprop 969 ...................... <(the stage).sourceRect>
  [118] getobjprop 43 ........................... <(the stage).sourceRect.height>
  [120] pusharglistnoret 3 ...................... <tModal, (the stage).sourceRect.width, (the stage).sourceRect.height>
  [122] objcall 1000 ............................ tModal.resizeTo((the stage).sourceRect.width, (the stage).sourceRect.height)
  [125] getlocal 1 .............................. <tModal>
  [127] pusharglistnoret 1 ...................... <tModal>
  [129] objcall 345 ............................. tModal.lock()
  [132] getlocal 1 .............................. <tModal>
  [134] pushcons 13 ............................. <"modal">
  [136] pusharglist 2 ........................... <tModal, "modal">
  [138] objcall 1001 ............................ <tModal.getElement("modal")>
  [141] pushsymb 501 ............................ <#blend>
  [144] pushint8 40 ............................. <40>
  [146] pusharglistnoret 3 ...................... <tModal.getElement("modal"), #blend, 40>
  [148] objcall 709 ............................. tModal.getElement("modal").setProperty(#blend, 40)
  [151] jmp [165]
  [154] getparam 0 .............................. <me>
  [156] pushcons 14 ............................. <"Failed to create modal window layer!">
  [158] pushsymb 686 ............................ <#modal>
  [161] pusharglistnoret 3 ...................... <me, "Failed to create modal window layer!", #modal>
  [163] extcall 39 .............................. error(me, "Failed to create modal window layer!", #modal)
  [165] pushzero ................................ <0>
  [166] setmovieprop 65 ......................... the keyboardFocusSprite = 0
  [168] getparam 0 .............................. <me>
  [170] getparam 1 .............................. <tid>
  [172] setobjprop 962 .......................... me.pActiveItem = tid
  [175] getparam 0 .............................. <me>
  [177] getparam 1 .............................. <tid>
  [179] pusharglistnoret 2 ...................... <me, tid>
  [181] objcall 341 ............................. me.Activate(tid)
  [184] pushint8 1 .............................. <1>
  [186] pusharglistnoret 1 ...................... <1>
  [188] extcall 25 .............................. return 1
  [190] ret
end
